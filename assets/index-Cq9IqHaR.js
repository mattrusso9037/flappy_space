const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-DtSZXexP.js","assets/webworkerAll-C4TbFvuD.js","assets/colorToUniform-C2GHuDhf.js","assets/WebGPURenderer-Dm6RYjb3.js","assets/SharedSystems-CV1g-i8t.js","assets/WebGLRenderer-CglI7Orp.js"])))=>i.map(i=>d[i]);
var Xx=Object.defineProperty;var jx=(a,t,i)=>t in a?Xx(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i;var q=(a,t,i)=>jx(a,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();function sf(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Hc={exports:{}},yr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function qx(){if(ym)return yr;ym=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,l,u){var c=null;if(u!==void 0&&(c=""+u),l.key!==void 0&&(c=""+l.key),"key"in l){u={};for(var f in l)f!=="key"&&(u[f]=l[f])}else u=l;return l=u.ref,{$$typeof:a,type:s,key:c,ref:l!==void 0?l:null,props:u}}return yr.Fragment=t,yr.jsx=i,yr.jsxs=i,yr}var bm;function Vx(){return bm||(bm=1,Hc.exports=qx()),Hc.exports}var Mt=Vx(),Pc={exports:{}},bt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function $x(){if(vm)return bt;vm=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function _(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,M={};function T(A,D,U){this.props=A,this.context=D,this.refs=M,this.updater=U||v}T.prototype.isReactComponent={},T.prototype.setState=function(A,D){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,D,"setState")},T.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function C(){}C.prototype=T.prototype;function z(A,D,U){this.props=A,this.context=D,this.refs=M,this.updater=U||v}var B=z.prototype=new C;B.constructor=z,E(B,T.prototype),B.isPureReactComponent=!0;var N=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function $(A,D,U,X,J,tt){return U=tt.ref,{$$typeof:a,type:A,key:D,ref:U!==void 0?U:null,props:tt}}function at(A,D){return $(A.type,D,void 0,void 0,void 0,A.props)}function nt(A){return typeof A=="object"&&A!==null&&A.$$typeof===a}function it(A){var D={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(U){return D[U]})}var W=/\/+/g;function rt(A,D){return typeof A=="object"&&A!==null&&A.key!=null?it(""+A.key):D.toString(36)}function gt(){}function kt(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(gt,gt):(A.status="pending",A.then(function(D){A.status==="pending"&&(A.status="fulfilled",A.value=D)},function(D){A.status==="pending"&&(A.status="rejected",A.reason=D)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function Ft(A,D,U,X,J){var tt=typeof A;(tt==="undefined"||tt==="boolean")&&(A=null);var et=!1;if(A===null)et=!0;else switch(tt){case"bigint":case"string":case"number":et=!0;break;case"object":switch(A.$$typeof){case a:case t:et=!0;break;case m:return et=A._init,Ft(et(A._payload),D,U,X,J)}}if(et)return J=J(A),et=X===""?"."+rt(A,0):X,N(J)?(U="",et!=null&&(U=et.replace(W,"$&/")+"/"),Ft(J,D,U,"",function(Ut){return Ut})):J!=null&&(nt(J)&&(J=at(J,U+(J.key==null||A&&A.key===J.key?"":(""+J.key).replace(W,"$&/")+"/")+et)),D.push(J)),1;et=0;var mt=X===""?".":X+":";if(N(A))for(var lt=0;lt<A.length;lt++)X=A[lt],tt=mt+rt(X,lt),et+=Ft(X,D,U,tt,J);else if(lt=_(A),typeof lt=="function")for(A=lt.call(A),lt=0;!(X=A.next()).done;)X=X.value,tt=mt+rt(X,lt++),et+=Ft(X,D,U,tt,J);else if(tt==="object"){if(typeof A.then=="function")return Ft(kt(A),D,U,X,J);throw D=String(A),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return et}function x(A,D,U){if(A==null)return A;var X=[],J=0;return Ft(A,X,"","",function(tt){return D.call(U,tt,J++)}),X}function w(A){if(A._status===-1){var D=A._result;D=D(),D.then(function(U){(A._status===0||A._status===-1)&&(A._status=1,A._result=U)},function(U){(A._status===0||A._status===-1)&&(A._status=2,A._result=U)}),A._status===-1&&(A._status=0,A._result=D)}if(A._status===1)return A._result.default;throw A._result}var O=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function H(){}return bt.Children={map:x,forEach:function(A,D,U){x(A,function(){D.apply(this,arguments)},U)},count:function(A){var D=0;return x(A,function(){D++}),D},toArray:function(A){return x(A,function(D){return D})||[]},only:function(A){if(!nt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},bt.Component=T,bt.Fragment=i,bt.Profiler=l,bt.PureComponent=z,bt.StrictMode=s,bt.Suspense=p,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,bt.__COMPILER_RUNTIME={__proto__:null,c:function(A){return I.H.useMemoCache(A)}},bt.cache=function(A){return function(){return A.apply(null,arguments)}},bt.cloneElement=function(A,D,U){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var X=E({},A.props),J=A.key,tt=void 0;if(D!=null)for(et in D.ref!==void 0&&(tt=void 0),D.key!==void 0&&(J=""+D.key),D)!V.call(D,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&D.ref===void 0||(X[et]=D[et]);var et=arguments.length-2;if(et===1)X.children=U;else if(1<et){for(var mt=Array(et),lt=0;lt<et;lt++)mt[lt]=arguments[lt+2];X.children=mt}return $(A.type,J,void 0,void 0,tt,X)},bt.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:u,_context:A},A},bt.createElement=function(A,D,U){var X,J={},tt=null;if(D!=null)for(X in D.key!==void 0&&(tt=""+D.key),D)V.call(D,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(J[X]=D[X]);var et=arguments.length-2;if(et===1)J.children=U;else if(1<et){for(var mt=Array(et),lt=0;lt<et;lt++)mt[lt]=arguments[lt+2];J.children=mt}if(A&&A.defaultProps)for(X in et=A.defaultProps,et)J[X]===void 0&&(J[X]=et[X]);return $(A,tt,void 0,void 0,null,J)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(A){return{$$typeof:f,render:A}},bt.isValidElement=nt,bt.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:w}},bt.memo=function(A,D){return{$$typeof:g,type:A,compare:D===void 0?null:D}},bt.startTransition=function(A){var D=I.T,U={};I.T=U;try{var X=A(),J=I.S;J!==null&&J(U,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(H,O)}catch(tt){O(tt)}finally{I.T=D}},bt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},bt.use=function(A){return I.H.use(A)},bt.useActionState=function(A,D,U){return I.H.useActionState(A,D,U)},bt.useCallback=function(A,D){return I.H.useCallback(A,D)},bt.useContext=function(A){return I.H.useContext(A)},bt.useDebugValue=function(){},bt.useDeferredValue=function(A,D){return I.H.useDeferredValue(A,D)},bt.useEffect=function(A,D,U){var X=I.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(A,D)},bt.useId=function(){return I.H.useId()},bt.useImperativeHandle=function(A,D,U){return I.H.useImperativeHandle(A,D,U)},bt.useInsertionEffect=function(A,D){return I.H.useInsertionEffect(A,D)},bt.useLayoutEffect=function(A,D){return I.H.useLayoutEffect(A,D)},bt.useMemo=function(A,D){return I.H.useMemo(A,D)},bt.useOptimistic=function(A,D){return I.H.useOptimistic(A,D)},bt.useReducer=function(A,D,U){return I.H.useReducer(A,D,U)},bt.useRef=function(A){return I.H.useRef(A)},bt.useState=function(A){return I.H.useState(A)},bt.useSyncExternalStore=function(A,D,U){return I.H.useSyncExternalStore(A,D,U)},bt.useTransition=function(){return I.H.useTransition()},bt.version="19.1.0",bt}var xm;function af(){return xm||(xm=1,Pc.exports=$x()),Pc.exports}var re=af(),Nc={exports:{}},br={},Fc={exports:{}},Yc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function Zx(){return _m||(_m=1,function(a){function t(x,w){var O=x.length;x.push(w);t:for(;0<O;){var H=O-1>>>1,A=x[H];if(0<l(A,w))x[H]=w,x[O]=A,O=H;else break t}}function i(x){return x.length===0?null:x[0]}function s(x){if(x.length===0)return null;var w=x[0],O=x.pop();if(O!==w){x[0]=O;t:for(var H=0,A=x.length,D=A>>>1;H<D;){var U=2*(H+1)-1,X=x[U],J=U+1,tt=x[J];if(0>l(X,O))J<A&&0>l(tt,X)?(x[H]=tt,x[J]=O,H=J):(x[H]=X,x[U]=O,H=U);else if(J<A&&0>l(tt,O))x[H]=tt,x[J]=O,H=J;else break t}}return w}function l(x,w){var O=x.sortIndex-w.sortIndex;return O!==0?O:x.id-w.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var c=Date,f=c.now();a.unstable_now=function(){return c.now()-f}}var p=[],g=[],m=1,y=null,_=3,v=!1,E=!1,M=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function N(x){for(var w=i(g);w!==null;){if(w.callback===null)s(g);else if(w.startTime<=x)s(g),w.sortIndex=w.expirationTime,t(p,w);else break;w=i(g)}}function I(x){if(M=!1,N(x),!E)if(i(p)!==null)E=!0,V||(V=!0,rt());else{var w=i(g);w!==null&&Ft(I,w.startTime-x)}}var V=!1,$=-1,at=5,nt=-1;function it(){return T?!0:!(a.unstable_now()-nt<at)}function W(){if(T=!1,V){var x=a.unstable_now();nt=x;var w=!0;try{t:{E=!1,M&&(M=!1,z($),$=-1),v=!0;var O=_;try{e:{for(N(x),y=i(p);y!==null&&!(y.expirationTime>x&&it());){var H=y.callback;if(typeof H=="function"){y.callback=null,_=y.priorityLevel;var A=H(y.expirationTime<=x);if(x=a.unstable_now(),typeof A=="function"){y.callback=A,N(x),w=!0;break e}y===i(p)&&s(p),N(x)}else s(p);y=i(p)}if(y!==null)w=!0;else{var D=i(g);D!==null&&Ft(I,D.startTime-x),w=!1}}break t}finally{y=null,_=O,v=!1}w=void 0}}finally{w?rt():V=!1}}}var rt;if(typeof B=="function")rt=function(){B(W)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,kt=gt.port2;gt.port1.onmessage=W,rt=function(){kt.postMessage(null)}}else rt=function(){C(W,0)};function Ft(x,w){$=C(function(){x(a.unstable_now())},w)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(x){x.callback=null},a.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):at=0<x?Math.floor(1e3/x):5},a.unstable_getCurrentPriorityLevel=function(){return _},a.unstable_next=function(x){switch(_){case 1:case 2:case 3:var w=3;break;default:w=_}var O=_;_=w;try{return x()}finally{_=O}},a.unstable_requestPaint=function(){T=!0},a.unstable_runWithPriority=function(x,w){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var O=_;_=x;try{return w()}finally{_=O}},a.unstable_scheduleCallback=function(x,w,O){var H=a.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?H+O:H):O=H,x){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=O+A,x={id:m++,callback:w,priorityLevel:x,startTime:O,expirationTime:A,sortIndex:-1},O>H?(x.sortIndex=O,t(g,x),i(p)===null&&x===i(g)&&(M?(z($),$=-1):M=!0,Ft(I,O-H))):(x.sortIndex=A,t(p,x),E||v||(E=!0,V||(V=!0,rt()))),x},a.unstable_shouldYield=it,a.unstable_wrapCallback=function(x){var w=_;return function(){var O=_;_=w;try{return x.apply(this,arguments)}finally{_=O}}}}(Yc)),Yc}var Sm;function Qx(){return Sm||(Sm=1,Fc.exports=Zx()),Fc.exports}var Ic={exports:{}},Ce={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function Kx(){if(Am)return Ce;Am=1;var a=af();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,g,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:p,containerInfo:g,implementation:m}}var c=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ce.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ce.createPortal=function(p,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(p,g,null,m)},Ce.flushSync=function(p){var g=c.T,m=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=g,s.p=m,s.d.f()}},Ce.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Ce.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ce.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var m=g.as,y=f(m,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,v=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:v}):m==="script"&&s.d.X(p,{crossOrigin:y,integrity:_,fetchPriority:v,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ce.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=f(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Ce.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,y=f(m,g.crossOrigin);s.d.L(p,m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ce.preloadModule=function(p,g){if(typeof p=="string")if(g){var m=f(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Ce.requestFormReset=function(p){s.d.r(p)},Ce.unstable_batchedUpdates=function(p,g){return p(g)},Ce.useFormState=function(p,g,m){return c.H.useFormState(p,g,m)},Ce.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ce.version="19.1.0",Ce}var Tm;function Wx(){if(Tm)return Ic.exports;Tm=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Ic.exports=Kx(),Ic.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function Jx(){if(wm)return br;wm=1;var a=Qx(),t=af(),i=Wx();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(u(e)!==e)throw Error(s(188))}function p(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(s(188));return n!==e?null:e}for(var r=e,o=n;;){var h=r.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){r=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===r)return f(h),e;if(d===o)return f(h),n;d=d.sibling}throw Error(s(188))}if(r.return!==o.return)r=h,o=d;else{for(var b=!1,S=h.child;S;){if(S===r){b=!0,r=h,o=d;break}if(S===o){b=!0,o=h,r=d;break}S=S.sibling}if(!b){for(S=d.child;S;){if(S===r){b=!0,r=d,o=h;break}if(S===o){b=!0,o=d,r=h;break}S=S.sibling}if(!b)throw Error(s(189))}}if(r.alternate!==o)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:n}function g(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=g(e),n!==null)return n;e=e.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),B=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),at=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function rt(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Symbol.for("react.client.reference");function kt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===gt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case T:return"Profiler";case M:return"StrictMode";case I:return"Suspense";case V:return"SuspenseList";case nt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case B:return(e.displayName||"Context")+".Provider";case z:return(e._context.displayName||"Context")+".Consumer";case N:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return n=e.displayName||null,n!==null?n:kt(e.type)||"Memo";case at:n=e._payload,e=e._init;try{return kt(e(n))}catch{}}return null}var Ft=Array.isArray,x=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,w=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},H=[],A=-1;function D(e){return{current:e}}function U(e){0>A||(e.current=H[A],H[A]=null,A--)}function X(e,n){A++,H[A]=e.current,e.current=n}var J=D(null),tt=D(null),et=D(null),mt=D(null);function lt(e,n){switch(X(et,n),X(tt,e),X(J,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?jg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=jg(n),e=qg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(J),X(J,e)}function Ut(){U(J),U(tt),U(et)}function Rt(e){e.memoizedState!==null&&X(mt,e);var n=J.current,r=qg(n,e.type);n!==r&&(X(tt,e),X(J,r))}function Ue(e){tt.current===e&&(U(J),U(tt)),mt.current===e&&(U(mt),fr._currentValue=O)}var xe=Object.prototype.hasOwnProperty,ke=a.unstable_scheduleCallback,He=a.unstable_cancelCallback,vt=a.unstable_shouldYield,Ot=a.unstable_requestPaint,$e=a.unstable_now,wo=a.unstable_getCurrentPriorityLevel,Mo=a.unstable_ImmediatePriority,Mf=a.unstable_UserBlockingPriority,Lr=a.unstable_NormalPriority,wb=a.unstable_LowPriority,Ef=a.unstable_IdlePriority,Mb=a.log,Eb=a.unstable_setDisableYieldValue,xa=null,Ze=null;function an(e){if(typeof Mb=="function"&&Eb(e),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(xa,e)}catch{}}var Qe=Math.clz32?Math.clz32:Ob,Cb=Math.log,Rb=Math.LN2;function Ob(e){return e>>>=0,e===0?32:31-(Cb(e)/Rb|0)|0}var Ur=256,kr=4194304;function Gn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hr(e,n,r){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var S=o&134217727;return S!==0?(o=S&~d,o!==0?h=Gn(o):(b&=S,b!==0?h=Gn(b):r||(r=S&~e,r!==0&&(h=Gn(r))))):(S=o&~d,S!==0?h=Gn(S):b!==0?h=Gn(b):r||(r=o&~e,r!==0&&(h=Gn(r)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,r=n&-n,d>=r||d===32&&(r&4194048)!==0)?n:h}function _a(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function zb(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cf(){var e=Ur;return Ur<<=1,(Ur&4194048)===0&&(Ur=256),e}function Rf(){var e=kr;return kr<<=1,(kr&62914560)===0&&(kr=4194304),e}function Eo(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function Sa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Db(e,n,r,o,h,d){var b=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var S=e.entanglements,R=e.expirationTimes,P=e.hiddenUpdates;for(r=b&~r;0<r;){var Z=31-Qe(r),K=1<<Z;S[Z]=0,R[Z]=-1;var Y=P[Z];if(Y!==null)for(P[Z]=null,Z=0;Z<Y.length;Z++){var j=Y[Z];j!==null&&(j.lane&=-536870913)}r&=~K}o!==0&&Of(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(b&~n))}function Of(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Qe(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|r&4194090}function zf(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var o=31-Qe(r),h=1<<o;h&n|e[o]&n&&(e[o]|=n),r&=~h}}function Co(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ro(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Df(){var e=w.p;return e!==0?e:(e=window.event,e===void 0?32:hm(e.type))}function Gb(e,n){var r=w.p;try{return w.p=e,n()}finally{w.p=r}}var rn=Math.random().toString(36).slice(2),Me="__reactFiber$"+rn,Pe="__reactProps$"+rn,vs="__reactContainer$"+rn,Oo="__reactEvents$"+rn,Bb="__reactListeners$"+rn,Lb="__reactHandles$"+rn,Gf="__reactResources$"+rn,Aa="__reactMarker$"+rn;function zo(e){delete e[Me],delete e[Pe],delete e[Oo],delete e[Bb],delete e[Lb]}function xs(e){var n=e[Me];if(n)return n;for(var r=e.parentNode;r;){if(n=r[vs]||r[Me]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=Qg(e);e!==null;){if(r=e[Me])return r;e=Qg(e)}return n}e=r,r=e.parentNode}return null}function _s(e){if(e=e[Me]||e[vs]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Ta(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Ss(e){var n=e[Gf];return n||(n=e[Gf]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ge(e){e[Aa]=!0}var Bf=new Set,Lf={};function Bn(e,n){As(e,n),As(e+"Capture",n)}function As(e,n){for(Lf[e]=n,e=0;e<n.length;e++)Bf.add(n[e])}var Ub=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uf={},kf={};function kb(e){return xe.call(kf,e)?!0:xe.call(Uf,e)?!1:Ub.test(e)?kf[e]=!0:(Uf[e]=!0,!1)}function Pr(e,n,r){if(kb(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function Nr(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function Pi(e,n,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+o)}}var Do,Hf;function Ts(e){if(Do===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Do=n&&n[1]||"",Hf=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Do+e+Hf}var Go=!1;function Bo(e,n){if(!e||Go)return"";Go=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(j){var Y=j}Reflect.construct(e,[],K)}else{try{K.call()}catch(j){Y=j}e.call(K.prototype)}}else{try{throw Error()}catch(j){Y=j}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(j){if(j&&Y&&typeof j.stack=="string")return[j.stack,Y.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),b=d[0],S=d[1];if(b&&S){var R=b.split(`
`),P=S.split(`
`);for(h=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(o===R.length||h===P.length)for(o=R.length-1,h=P.length-1;1<=o&&0<=h&&R[o]!==P[h];)h--;for(;1<=o&&0<=h;o--,h--)if(R[o]!==P[h]){if(o!==1||h!==1)do if(o--,h--,0>h||R[o]!==P[h]){var Z=`
`+R[o].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=o&&0<=h);break}}}finally{Go=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?Ts(r):""}function Hb(e){switch(e.tag){case 26:case 27:case 5:return Ts(e.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 15:return Bo(e.type,!1);case 11:return Bo(e.type.render,!1);case 1:return Bo(e.type,!0);case 31:return Ts("Activity");default:return""}}function Pf(e){try{var n="";do n+=Hb(e),e=e.return;while(e);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function li(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nf(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Pb(e){var n=Nf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,d=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(b){o=""+b,d.call(this,b)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Fr(e){e._valueTracker||(e._valueTracker=Pb(e))}function Ff(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return e&&(o=Nf(e)?e.checked?"true":"false":e.value),e=o,e!==r?(n.setValue(e),!0):!1}function Yr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Nb=/[\n"\\]/g;function oi(e){return e.replace(Nb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Lo(e,n,r,o,h,d,b,S){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),n!=null?b==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+li(n)):e.value!==""+li(n)&&(e.value=""+li(n)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),n!=null?Uo(e,b,li(n)):r!=null?Uo(e,b,li(r)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+li(S):e.removeAttribute("name")}function Yf(e,n,r,o,h,d,b,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||r!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;r=r!=null?""+li(r):"",n=n!=null?""+li(n):r,S||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=S?e.checked:!!o,e.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function Uo(e,n,r){n==="number"&&Yr(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ws(e,n,r,o){if(e=e.options,n){n={};for(var h=0;h<r.length;h++)n["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=n.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&o&&(e[r].defaultSelected=!0)}else{for(r=""+li(r),n=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function If(e,n,r){if(n!=null&&(n=""+li(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+li(r):""}function Xf(e,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(s(92));if(Ft(o)){if(1<o.length)throw Error(s(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=li(n),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o)}function Ms(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var Fb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jf(e,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,r):typeof r!="number"||r===0||Fb.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function qf(e,n,r){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&r[h]!==o&&jf(e,h,o)}else for(var d in n)n.hasOwnProperty(d)&&jf(e,d,n[d])}function ko(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ib=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ir(e){return Ib.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ho=null;function Po(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Es=null,Cs=null;function Vf(e){var n=_s(e);if(n&&(e=n.stateNode)){var r=e[Pe]||null;t:switch(e=n.stateNode,n.type){case"input":if(Lo(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+oi(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==e&&o.form===e.form){var h=o[Pe]||null;if(!h)throw Error(s(90));Lo(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===e.form&&Ff(o)}break t;case"textarea":If(e,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&ws(e,!!r.multiple,n,!1)}}}var No=!1;function $f(e,n,r){if(No)return e(n,r);No=!0;try{var o=e(n);return o}finally{if(No=!1,(Es!==null||Cs!==null)&&(Cl(),Es&&(n=Es,e=Cs,Cs=Es=null,Vf(n),e)))for(n=0;n<e.length;n++)Vf(e[n])}}function wa(e,n){var r=e.stateNode;if(r===null)return null;var o=r[Pe]||null;if(o===null)return null;r=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,n,typeof r));return r}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fo=!1;if(Ni)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{Fo=!1}var ln=null,Yo=null,Xr=null;function Zf(){if(Xr)return Xr;var e,n=Yo,r=n.length,o,h="value"in ln?ln.value:ln.textContent,d=h.length;for(e=0;e<r&&n[e]===h[e];e++);var b=r-e;for(o=1;o<=b&&n[r-o]===h[d-o];o++);return Xr=h.slice(e,1<o?1-o:void 0)}function jr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function qr(){return!0}function Qf(){return!1}function Ne(e){function n(r,o,h,d,b){this._reactName=r,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(r=e[S],this[S]=r?r(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?qr:Qf,this.isPropagationStopped=Qf,this}return m(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),n}var Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vr=Ne(Ln),Ea=m({},Ln,{view:0,detail:0}),Xb=Ne(Ea),Io,Xo,Ca,$r=m({},Ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ca&&(Ca&&e.type==="mousemove"?(Io=e.screenX-Ca.screenX,Xo=e.screenY-Ca.screenY):Xo=Io=0,Ca=e),Io)},movementY:function(e){return"movementY"in e?e.movementY:Xo}}),Kf=Ne($r),jb=m({},$r,{dataTransfer:0}),qb=Ne(jb),Vb=m({},Ea,{relatedTarget:0}),jo=Ne(Vb),$b=m({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0}),Zb=Ne($b),Qb=m({},Ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kb=Ne(Qb),Wb=m({},Ln,{data:0}),Wf=Ne(Wb),Jb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ev={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iv(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ev[e])?!!n[e]:!1}function qo(){return iv}var nv=m({},Ea,{key:function(e){if(e.key){var n=Jb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=jr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(e){return e.type==="keypress"?jr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sv=Ne(nv),av=m({},$r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jf=Ne(av),rv=m({},Ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),lv=Ne(rv),ov=m({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),uv=Ne(ov),cv=m({},$r,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hv=Ne(cv),fv=m({},Ln,{newState:0,oldState:0}),dv=Ne(fv),pv=[9,13,27,32],Vo=Ni&&"CompositionEvent"in window,Ra=null;Ni&&"documentMode"in document&&(Ra=document.documentMode);var gv=Ni&&"TextEvent"in window&&!Ra,td=Ni&&(!Vo||Ra&&8<Ra&&11>=Ra),ed=" ",id=!1;function nd(e,n){switch(e){case"keyup":return pv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rs=!1;function mv(e,n){switch(e){case"compositionend":return sd(n);case"keypress":return n.which!==32?null:(id=!0,ed);case"textInput":return e=n.data,e===ed&&id?null:e;default:return null}}function yv(e,n){if(Rs)return e==="compositionend"||!Vo&&nd(e,n)?(e=Zf(),Xr=Yo=ln=null,Rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return td&&n.locale!=="ko"?null:n.data;default:return null}}var bv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ad(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!bv[e.type]:n==="textarea"}function rd(e,n,r,o){Es?Cs?Cs.push(o):Cs=[o]:Es=o,n=Bl(n,"onChange"),0<n.length&&(r=new Vr("onChange","change",null,r,o),e.push({event:r,listeners:n}))}var Oa=null,za=null;function vv(e){Ng(e,0)}function Zr(e){var n=Ta(e);if(Ff(n))return e}function ld(e,n){if(e==="change")return n}var od=!1;if(Ni){var $o;if(Ni){var Zo="oninput"in document;if(!Zo){var ud=document.createElement("div");ud.setAttribute("oninput","return;"),Zo=typeof ud.oninput=="function"}$o=Zo}else $o=!1;od=$o&&(!document.documentMode||9<document.documentMode)}function cd(){Oa&&(Oa.detachEvent("onpropertychange",hd),za=Oa=null)}function hd(e){if(e.propertyName==="value"&&Zr(za)){var n=[];rd(n,za,e,Po(e)),$f(vv,n)}}function xv(e,n,r){e==="focusin"?(cd(),Oa=n,za=r,Oa.attachEvent("onpropertychange",hd)):e==="focusout"&&cd()}function _v(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zr(za)}function Sv(e,n){if(e==="click")return Zr(n)}function Av(e,n){if(e==="input"||e==="change")return Zr(n)}function Tv(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ke=typeof Object.is=="function"?Object.is:Tv;function Da(e,n){if(Ke(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var h=r[o];if(!xe.call(n,h)||!Ke(e[h],n[h]))return!1}return!0}function fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dd(e,n){var r=fd(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=n&&o>=n)return{node:r,offset:n-e};e=o}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=fd(r)}}function pd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?pd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function gd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Yr(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Yr(e.document)}return n}function Qo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var wv=Ni&&"documentMode"in document&&11>=document.documentMode,Os=null,Ko=null,Ga=null,Wo=!1;function md(e,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wo||Os==null||Os!==Yr(o)||(o=Os,"selectionStart"in o&&Qo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ga&&Da(Ga,o)||(Ga=o,o=Bl(Ko,"onSelect"),0<o.length&&(n=new Vr("onSelect","select",null,n,r),e.push({event:n,listeners:o}),n.target=Os)))}function Un(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var zs={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionrun:Un("Transition","TransitionRun"),transitionstart:Un("Transition","TransitionStart"),transitioncancel:Un("Transition","TransitionCancel"),transitionend:Un("Transition","TransitionEnd")},Jo={},yd={};Ni&&(yd=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function kn(e){if(Jo[e])return Jo[e];if(!zs[e])return e;var n=zs[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in yd)return Jo[e]=n[r];return e}var bd=kn("animationend"),vd=kn("animationiteration"),xd=kn("animationstart"),Mv=kn("transitionrun"),Ev=kn("transitionstart"),Cv=kn("transitioncancel"),_d=kn("transitionend"),Sd=new Map,tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tu.push("scrollEnd");function xi(e,n){Sd.set(e,n),Bn(n,[e])}var Ad=new WeakMap;function ui(e,n){if(typeof e=="object"&&e!==null){var r=Ad.get(e);return r!==void 0?r:(n={value:e,source:n,stack:Pf(n)},Ad.set(e,n),n)}return{value:e,source:n,stack:Pf(n)}}var ci=[],Ds=0,eu=0;function Qr(){for(var e=Ds,n=eu=Ds=0;n<e;){var r=ci[n];ci[n++]=null;var o=ci[n];ci[n++]=null;var h=ci[n];ci[n++]=null;var d=ci[n];if(ci[n++]=null,o!==null&&h!==null){var b=o.pending;b===null?h.next=h:(h.next=b.next,b.next=h),o.pending=h}d!==0&&Td(r,h,d)}}function Kr(e,n,r,o){ci[Ds++]=e,ci[Ds++]=n,ci[Ds++]=r,ci[Ds++]=o,eu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function iu(e,n,r,o){return Kr(e,n,r,o),Wr(e)}function Gs(e,n){return Kr(e,null,null,n),Wr(e)}function Td(e,n,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var h=!1,d=e.return;d!==null;)d.childLanes|=r,o=d.alternate,o!==null&&(o.childLanes|=r),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&n!==null&&(h=31-Qe(r),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=r|536870912),d):null}function Wr(e){if(50<sr)throw sr=0,oc=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Bs={};function Rv(e,n,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function We(e,n,r,o){return new Rv(e,n,r,o)}function nu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fi(e,n){var r=e.alternate;return r===null?(r=We(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function wd(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Jr(e,n,r,o,h,d){var b=0;if(o=e,typeof e=="function")nu(e)&&(b=1);else if(typeof e=="string")b=zx(e,r,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case nt:return e=We(31,r,n,h),e.elementType=nt,e.lanes=d,e;case E:return Hn(r.children,h,d,n);case M:b=8,h|=24;break;case T:return e=We(12,r,n,h|2),e.elementType=T,e.lanes=d,e;case I:return e=We(13,r,n,h),e.elementType=I,e.lanes=d,e;case V:return e=We(19,r,n,h),e.elementType=V,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:case B:b=10;break t;case z:b=9;break t;case N:b=11;break t;case $:b=14;break t;case at:b=16,o=null;break t}b=29,r=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=We(b,r,n,h),n.elementType=e,n.type=o,n.lanes=d,n}function Hn(e,n,r,o){return e=We(7,e,o,n),e.lanes=r,e}function su(e,n,r){return e=We(6,e,null,n),e.lanes=r,e}function au(e,n,r){return n=We(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Ls=[],Us=0,tl=null,el=0,hi=[],fi=0,Pn=null,Yi=1,Ii="";function Nn(e,n){Ls[Us++]=el,Ls[Us++]=tl,tl=e,el=n}function Md(e,n,r){hi[fi++]=Yi,hi[fi++]=Ii,hi[fi++]=Pn,Pn=e;var o=Yi;e=Ii;var h=32-Qe(o)-1;o&=~(1<<h),r+=1;var d=32-Qe(n)+h;if(30<d){var b=h-h%5;d=(o&(1<<b)-1).toString(32),o>>=b,h-=b,Yi=1<<32-Qe(n)+h|r<<h|o,Ii=d+e}else Yi=1<<d|r<<h|o,Ii=e}function ru(e){e.return!==null&&(Nn(e,1),Md(e,1,0))}function lu(e){for(;e===tl;)tl=Ls[--Us],Ls[Us]=null,el=Ls[--Us],Ls[Us]=null;for(;e===Pn;)Pn=hi[--fi],hi[fi]=null,Ii=hi[--fi],hi[fi]=null,Yi=hi[--fi],hi[fi]=null}var Oe=null,Jt=null,Lt=!1,Fn=null,Ci=!1,ou=Error(s(519));function Yn(e){var n=Error(s(418,""));throw Ua(ui(n,e)),ou}function Ed(e){var n=e.stateNode,r=e.type,o=e.memoizedProps;switch(n[Me]=e,n[Pe]=o,r){case"dialog":Tt("cancel",n),Tt("close",n);break;case"iframe":case"object":case"embed":Tt("load",n);break;case"video":case"audio":for(r=0;r<rr.length;r++)Tt(rr[r],n);break;case"source":Tt("error",n);break;case"img":case"image":case"link":Tt("error",n),Tt("load",n);break;case"details":Tt("toggle",n);break;case"input":Tt("invalid",n),Yf(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Fr(n);break;case"select":Tt("invalid",n);break;case"textarea":Tt("invalid",n),Xf(n,o.value,o.defaultValue,o.children),Fr(n)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||Xg(n.textContent,r)?(o.popover!=null&&(Tt("beforetoggle",n),Tt("toggle",n)),o.onScroll!=null&&Tt("scroll",n),o.onScrollEnd!=null&&Tt("scrollend",n),o.onClick!=null&&(n.onclick=Ll),n=!0):n=!1,n||Yn(e)}function Cd(e){for(Oe=e.return;Oe;)switch(Oe.tag){case 5:case 13:Ci=!1;return;case 27:case 3:Ci=!0;return;default:Oe=Oe.return}}function Ba(e){if(e!==Oe)return!1;if(!Lt)return Cd(e),Lt=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Tc(e.type,e.memoizedProps)),r=!r),r&&Jt&&Yn(e),Cd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(n===0){Jt=Si(e.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;e=e.nextSibling}Jt=null}}else n===27?(n=Jt,An(e.type)?(e=Cc,Cc=null,Jt=e):Jt=n):Jt=Oe?Si(e.stateNode.nextSibling):null;return!0}function La(){Jt=Oe=null,Lt=!1}function Rd(){var e=Fn;return e!==null&&(Ie===null?Ie=e:Ie.push.apply(Ie,e),Fn=null),e}function Ua(e){Fn===null?Fn=[e]:Fn.push(e)}var uu=D(null),In=null,Xi=null;function on(e,n,r){X(uu,n._currentValue),n._currentValue=r}function ji(e){e._currentValue=uu.current,U(uu)}function cu(e,n,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===r)break;e=e.return}}function hu(e,n,r,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var b=h.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=h;for(var R=0;R<n.length;R++)if(S.context===n[R]){d.lanes|=r,S=d.alternate,S!==null&&(S.lanes|=r),cu(d.return,r,e),o||(b=null);break t}d=S.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=r,d=b.alternate,d!==null&&(d.lanes|=r),cu(b,r,e),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===e){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function ka(e,n,r,o){e=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var S=h.type;Ke(h.pendingProps.value,b.value)||(e!==null?e.push(S):e=[S])}}else if(h===mt.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(fr):e=[fr])}h=h.return}e!==null&&hu(n,e,r,o),n.flags|=262144}function il(e){for(e=e.firstContext;e!==null;){if(!Ke(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xn(e){In=e,Xi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ee(e){return Od(In,e)}function nl(e,n){return In===null&&Xn(e),Od(e,n)}function Od(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Xi===null){if(e===null)throw Error(s(308));Xi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Xi=Xi.next=n;return r}var Ov=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},zv=a.unstable_scheduleCallback,Dv=a.unstable_NormalPriority,fe={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fu(){return{controller:new Ov,data:new Map,refCount:0}}function Ha(e){e.refCount--,e.refCount===0&&zv(Dv,function(){e.controller.abort()})}var Pa=null,du=0,ks=0,Hs=null;function Gv(e,n){if(Pa===null){var r=Pa=[];du=0,ks=gc(),Hs={status:"pending",value:void 0,then:function(o){r.push(o)}}}return du++,n.then(zd,zd),n}function zd(){if(--du===0&&Pa!==null){Hs!==null&&(Hs.status="fulfilled");var e=Pa;Pa=null,ks=0,Hs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Bv(e,n){var r=[],o={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<r.length;h++)(0,r[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),o}var Dd=x.S;x.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&Gv(e,n),Dd!==null&&Dd(e,n)};var jn=D(null);function pu(){var e=jn.current;return e!==null?e:qt.pooledCache}function sl(e,n){n===null?X(jn,jn.current):X(jn,n.pool)}function Gd(){var e=pu();return e===null?null:{parent:fe._currentValue,pool:e}}var Na=Error(s(460)),Bd=Error(s(474)),al=Error(s(542)),gu={then:function(){}};function Ld(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rl(){}function Ud(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(rl,rl),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Hd(e),e;default:if(typeof n.status=="string")n.then(rl,rl);else{if(e=qt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Hd(e),e}throw Fa=n,Na}}var Fa=null;function kd(){if(Fa===null)throw Error(s(459));var e=Fa;return Fa=null,e}function Hd(e){if(e===Na||e===al)throw Error(s(483))}var un=!1;function mu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function cn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function hn(e,n,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ht&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Wr(e),Td(e,null,r),n}return Kr(e,o,n,r),Wr(e)}function Ya(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,zf(e,r)}}function bu(e,n){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var h=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};d===null?h=d=b:d=d.next=b,r=r.next}while(r!==null);d===null?h=d=n:d=d.next=n}else h=d=n;r={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var vu=!1;function Ia(){if(vu){var e=Hs;if(e!==null)throw e}}function Xa(e,n,r,o){vu=!1;var h=e.updateQueue;un=!1;var d=h.firstBaseUpdate,b=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var R=S,P=R.next;R.next=null,b===null?d=P:b.next=P,b=R;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,S=Z.lastBaseUpdate,S!==b&&(S===null?Z.firstBaseUpdate=P:S.next=P,Z.lastBaseUpdate=R))}if(d!==null){var K=h.baseState;b=0,Z=P=R=null,S=d;do{var Y=S.lane&-536870913,j=Y!==S.lane;if(j?(zt&Y)===Y:(o&Y)===Y){Y!==0&&Y===ks&&(vu=!0),Z!==null&&(Z=Z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var dt=e,ht=S;Y=n;var Xt=r;switch(ht.tag){case 1:if(dt=ht.payload,typeof dt=="function"){K=dt.call(Xt,K,Y);break t}K=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ht.payload,Y=typeof dt=="function"?dt.call(Xt,K,Y):dt,Y==null)break t;K=m({},K,Y);break t;case 2:un=!0}}Y=S.callback,Y!==null&&(e.flags|=64,j&&(e.flags|=8192),j=h.callbacks,j===null?h.callbacks=[Y]:j.push(Y))}else j={lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Z===null?(P=Z=j,R=K):Z=Z.next=j,b|=Y;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;j=S,S=j.next,j.next=null,h.lastBaseUpdate=j,h.shared.pending=null}}while(!0);Z===null&&(R=K),h.baseState=R,h.firstBaseUpdate=P,h.lastBaseUpdate=Z,d===null&&(h.shared.lanes=0),vn|=b,e.lanes=b,e.memoizedState=K}}function Pd(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Nd(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Pd(r[e],n)}var Ps=D(null),ll=D(0);function Fd(e,n){e=Wi,X(ll,e),X(Ps,n),Wi=e|n.baseLanes}function xu(){X(ll,Wi),X(Ps,Ps.current)}function _u(){Wi=ll.current,U(Ps),U(ll)}var fn=0,xt=null,Yt=null,le=null,ol=!1,Ns=!1,qn=!1,ul=0,ja=0,Fs=null,Lv=0;function se(){throw Error(s(321))}function Su(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Ke(e[r],n[r]))return!1;return!0}function Au(e,n,r,o,h,d){return fn=d,xt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,x.H=e===null||e.memoizedState===null?Tp:wp,qn=!1,d=r(o,h),qn=!1,Ns&&(d=Id(n,r,o,h)),Yd(e),d}function Yd(e){x.H=gl;var n=Yt!==null&&Yt.next!==null;if(fn=0,le=Yt=xt=null,ol=!1,ja=0,Fs=null,n)throw Error(s(300));e===null||me||(e=e.dependencies,e!==null&&il(e)&&(me=!0))}function Id(e,n,r,o){xt=e;var h=0;do{if(Ns&&(Fs=null),ja=0,Ns=!1,25<=h)throw Error(s(301));if(h+=1,le=Yt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}x.H=Yv,d=n(r,o)}while(Ns);return d}function Uv(){var e=x.H,n=e.useState()[0];return n=typeof n.then=="function"?qa(n):n,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(xt.flags|=1024),n}function Tu(){var e=ul!==0;return ul=0,e}function wu(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function Mu(e){if(ol){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ol=!1}fn=0,le=Yt=xt=null,Ns=!1,ja=ul=0,Fs=null}function Fe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return le===null?xt.memoizedState=le=e:le=le.next=e,le}function oe(){if(Yt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var n=le===null?xt.memoizedState:le.next;if(n!==null)le=n,Yt=e;else{if(e===null)throw xt.alternate===null?Error(s(467)):Error(s(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},le===null?xt.memoizedState=le=e:le=le.next=e}return le}function Eu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qa(e){var n=ja;return ja+=1,Fs===null&&(Fs=[]),e=Ud(Fs,e,n),n=xt,(le===null?n.memoizedState:le.next)===null&&(n=n.alternate,x.H=n===null||n.memoizedState===null?Tp:wp),e}function cl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qa(e);if(e.$$typeof===B)return Ee(e)}throw Error(s(438,String(e)))}function Cu(e){var n=null,r=xt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=xt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Eu(),xt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),o=0;o<e;o++)r[o]=it;return n.index++,r}function qi(e,n){return typeof n=="function"?n(e):n}function hl(e){var n=oe();return Ru(n,Yt,e)}function Ru(e,n,r){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var b=h.next;h.next=d.next,d.next=b}n.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{n=h.next;var S=b=null,R=null,P=n,Z=!1;do{var K=P.lane&-536870913;if(K!==P.lane?(zt&K)===K:(fn&K)===K){var Y=P.revertLane;if(Y===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),K===ks&&(Z=!0);else if((fn&Y)===Y){P=P.next,Y===ks&&(Z=!0);continue}else K={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},R===null?(S=R=K,b=d):R=R.next=K,xt.lanes|=Y,vn|=Y;K=P.action,qn&&r(d,K),d=P.hasEagerState?P.eagerState:r(d,K)}else Y={lane:K,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},R===null?(S=R=Y,b=d):R=R.next=Y,xt.lanes|=K,vn|=K;P=P.next}while(P!==null&&P!==n);if(R===null?b=d:R.next=S,!Ke(d,e.memoizedState)&&(me=!0,Z&&(r=Hs,r!==null)))throw r;e.memoizedState=d,e.baseState=b,e.baseQueue=R,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Ou(e){var n=oe(),r=n.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var o=r.dispatch,h=r.pending,d=n.memoizedState;if(h!==null){r.pending=null;var b=h=h.next;do d=e(d,b.action),b=b.next;while(b!==h);Ke(d,n.memoizedState)||(me=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),r.lastRenderedState=d}return[d,o]}function Xd(e,n,r){var o=xt,h=oe(),d=Lt;if(d){if(r===void 0)throw Error(s(407));r=r()}else r=n();var b=!Ke((Yt||h).memoizedState,r);b&&(h.memoizedState=r,me=!0),h=h.queue;var S=Vd.bind(null,o,h,e);if(Va(2048,8,S,[e]),h.getSnapshot!==n||b||le!==null&&le.memoizedState.tag&1){if(o.flags|=2048,Ys(9,fl(),qd.bind(null,o,h,r,n),null),qt===null)throw Error(s(349));d||(fn&124)!==0||jd(o,n,r)}return r}function jd(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=xt.updateQueue,n===null?(n=Eu(),xt.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function qd(e,n,r,o){n.value=r,n.getSnapshot=o,$d(n)&&Zd(e)}function Vd(e,n,r){return r(function(){$d(n)&&Zd(e)})}function $d(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Ke(e,r)}catch{return!0}}function Zd(e){var n=Gs(e,2);n!==null&&ni(n,e,2)}function zu(e){var n=Fe();if(typeof e=="function"){var r=e;if(e=r(),qn){an(!0);try{r()}finally{an(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:e},n}function Qd(e,n,r,o){return e.baseState=r,Ru(e,Yt,typeof o=="function"?o:qi)}function kv(e,n,r,o,h){if(pl(e))throw Error(s(485));if(e=n.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){d.listeners.push(b)}};x.T!==null?r(!0):d.isTransition=!1,o(d),r=n.pending,r===null?(d.next=n.pending=d,Kd(n,d)):(d.next=r.next,n.pending=r.next=d)}}function Kd(e,n){var r=n.action,o=n.payload,h=e.state;if(n.isTransition){var d=x.T,b={};x.T=b;try{var S=r(h,o),R=x.S;R!==null&&R(b,S),Wd(e,n,S)}catch(P){Du(e,n,P)}finally{x.T=d}}else try{d=r(h,o),Wd(e,n,d)}catch(P){Du(e,n,P)}}function Wd(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Jd(e,n,o)},function(o){return Du(e,n,o)}):Jd(e,n,r)}function Jd(e,n,r){n.status="fulfilled",n.value=r,tp(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,Kd(e,r)))}function Du(e,n,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,tp(n),n=n.next;while(n!==o)}e.action=null}function tp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function ep(e,n){return n}function ip(e,n){if(Lt){var r=qt.formState;if(r!==null){t:{var o=xt;if(Lt){if(Jt){e:{for(var h=Jt,d=Ci;h.nodeType!==8;){if(!d){h=null;break e}if(h=Si(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){Jt=Si(h.nextSibling),o=h.data==="F!";break t}}Yn(o)}o=!1}o&&(n=r[0])}}return r=Fe(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ep,lastRenderedState:n},r.queue=o,r=_p.bind(null,xt,o),o.dispatch=r,o=zu(!1),d=ku.bind(null,xt,!1,o.queue),o=Fe(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,r=kv.bind(null,xt,h,d,r),h.dispatch=r,o.memoizedState=e,[n,r,!1]}function np(e){var n=oe();return sp(n,Yt,e)}function sp(e,n,r){if(n=Ru(e,n,ep)[0],e=hl(qi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=qa(n)}catch(b){throw b===Na?al:b}else o=n;n=oe();var h=n.queue,d=h.dispatch;return r!==n.memoizedState&&(xt.flags|=2048,Ys(9,fl(),Hv.bind(null,h,r),null)),[o,d,e]}function Hv(e,n){e.action=n}function ap(e){var n=oe(),r=Yt;if(r!==null)return sp(n,r,e);oe(),n=n.memoizedState,r=oe();var o=r.queue.dispatch;return r.memoizedState=e,[n,o,!1]}function Ys(e,n,r,o){return e={tag:e,create:r,deps:o,inst:n,next:null},n=xt.updateQueue,n===null&&(n=Eu(),xt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,n.lastEffect=e),e}function fl(){return{destroy:void 0,resource:void 0}}function rp(){return oe().memoizedState}function dl(e,n,r,o){var h=Fe();o=o===void 0?null:o,xt.flags|=e,h.memoizedState=Ys(1|n,fl(),r,o)}function Va(e,n,r,o){var h=oe();o=o===void 0?null:o;var d=h.memoizedState.inst;Yt!==null&&o!==null&&Su(o,Yt.memoizedState.deps)?h.memoizedState=Ys(n,d,r,o):(xt.flags|=e,h.memoizedState=Ys(1|n,d,r,o))}function lp(e,n){dl(8390656,8,e,n)}function op(e,n){Va(2048,8,e,n)}function up(e,n){return Va(4,2,e,n)}function cp(e,n){return Va(4,4,e,n)}function hp(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function fp(e,n,r){r=r!=null?r.concat([e]):null,Va(4,4,hp.bind(null,n,e),r)}function Gu(){}function dp(e,n){var r=oe();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Su(n,o[1])?o[0]:(r.memoizedState=[e,n],e)}function pp(e,n){var r=oe();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Su(n,o[1]))return o[0];if(o=e(),qn){an(!0);try{e()}finally{an(!1)}}return r.memoizedState=[o,n],o}function Bu(e,n,r){return r===void 0||(fn&1073741824)!==0?e.memoizedState=n:(e.memoizedState=r,e=yg(),xt.lanes|=e,vn|=e,r)}function gp(e,n,r,o){return Ke(r,n)?r:Ps.current!==null?(e=Bu(e,r,o),Ke(e,n)||(me=!0),e):(fn&42)===0?(me=!0,e.memoizedState=r):(e=yg(),xt.lanes|=e,vn|=e,n)}function mp(e,n,r,o,h){var d=w.p;w.p=d!==0&&8>d?d:8;var b=x.T,S={};x.T=S,ku(e,!1,n,r);try{var R=h(),P=x.S;if(P!==null&&P(S,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Z=Bv(R,o);$a(e,n,Z,ii(e))}else $a(e,n,o,ii(e))}catch(K){$a(e,n,{then:function(){},status:"rejected",reason:K},ii())}finally{w.p=d,x.T=b}}function Pv(){}function Lu(e,n,r,o){if(e.tag!==5)throw Error(s(476));var h=yp(e).queue;mp(e,h,n,O,r===null?Pv:function(){return bp(e),r(o)})}function yp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:O},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function bp(e){var n=yp(e).next.queue;$a(e,n,{},ii())}function Uu(){return Ee(fr)}function vp(){return oe().memoizedState}function xp(){return oe().memoizedState}function Nv(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=ii();e=cn(r);var o=hn(n,e,r);o!==null&&(ni(o,n,r),Ya(o,n,r)),n={cache:fu()},e.payload=n;return}n=n.return}}function Fv(e,n,r){var o=ii();r={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},pl(e)?Sp(n,r):(r=iu(e,n,r,o),r!==null&&(ni(r,e,o),Ap(r,n,o)))}function _p(e,n,r){var o=ii();$a(e,n,r,o)}function $a(e,n,r,o){var h={lane:o,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(pl(e))Sp(n,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var b=n.lastRenderedState,S=d(b,r);if(h.hasEagerState=!0,h.eagerState=S,Ke(S,b))return Kr(e,n,h,0),qt===null&&Qr(),!1}catch{}finally{}if(r=iu(e,n,h,o),r!==null)return ni(r,e,o),Ap(r,n,o),!0}return!1}function ku(e,n,r,o){if(o={lane:2,revertLane:gc(),action:o,hasEagerState:!1,eagerState:null,next:null},pl(e)){if(n)throw Error(s(479))}else n=iu(e,r,o,2),n!==null&&ni(n,e,2)}function pl(e){var n=e.alternate;return e===xt||n!==null&&n===xt}function Sp(e,n){Ns=ol=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Ap(e,n,r){if((r&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,r|=o,n.lanes=r,zf(e,r)}}var gl={readContext:Ee,use:cl,useCallback:se,useContext:se,useEffect:se,useImperativeHandle:se,useLayoutEffect:se,useInsertionEffect:se,useMemo:se,useReducer:se,useRef:se,useState:se,useDebugValue:se,useDeferredValue:se,useTransition:se,useSyncExternalStore:se,useId:se,useHostTransitionStatus:se,useFormState:se,useActionState:se,useOptimistic:se,useMemoCache:se,useCacheRefresh:se},Tp={readContext:Ee,use:cl,useCallback:function(e,n){return Fe().memoizedState=[e,n===void 0?null:n],e},useContext:Ee,useEffect:lp,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,dl(4194308,4,hp.bind(null,n,e),r)},useLayoutEffect:function(e,n){return dl(4194308,4,e,n)},useInsertionEffect:function(e,n){dl(4,2,e,n)},useMemo:function(e,n){var r=Fe();n=n===void 0?null:n;var o=e();if(qn){an(!0);try{e()}finally{an(!1)}}return r.memoizedState=[o,n],o},useReducer:function(e,n,r){var o=Fe();if(r!==void 0){var h=r(n);if(qn){an(!0);try{r(n)}finally{an(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=Fv.bind(null,xt,e),[o.memoizedState,e]},useRef:function(e){var n=Fe();return e={current:e},n.memoizedState=e},useState:function(e){e=zu(e);var n=e.queue,r=_p.bind(null,xt,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:Gu,useDeferredValue:function(e,n){var r=Fe();return Bu(r,e,n)},useTransition:function(){var e=zu(!1);return e=mp.bind(null,xt,e.queue,!0,!1),Fe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var o=xt,h=Fe();if(Lt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=n(),qt===null)throw Error(s(349));(zt&124)!==0||jd(o,n,r)}h.memoizedState=r;var d={value:r,getSnapshot:n};return h.queue=d,lp(Vd.bind(null,o,d,e),[e]),o.flags|=2048,Ys(9,fl(),qd.bind(null,o,d,r,n),null),r},useId:function(){var e=Fe(),n=qt.identifierPrefix;if(Lt){var r=Ii,o=Yi;r=(o&~(1<<32-Qe(o)-1)).toString(32)+r,n=""+n+"R"+r,r=ul++,0<r&&(n+="H"+r.toString(32)),n+=""}else r=Lv++,n=""+n+"r"+r.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:Uu,useFormState:ip,useActionState:ip,useOptimistic:function(e){var n=Fe();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=ku.bind(null,xt,!0,r),r.dispatch=n,[e,n]},useMemoCache:Cu,useCacheRefresh:function(){return Fe().memoizedState=Nv.bind(null,xt)}},wp={readContext:Ee,use:cl,useCallback:dp,useContext:Ee,useEffect:op,useImperativeHandle:fp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:pp,useReducer:hl,useRef:rp,useState:function(){return hl(qi)},useDebugValue:Gu,useDeferredValue:function(e,n){var r=oe();return gp(r,Yt.memoizedState,e,n)},useTransition:function(){var e=hl(qi)[0],n=oe().memoizedState;return[typeof e=="boolean"?e:qa(e),n]},useSyncExternalStore:Xd,useId:vp,useHostTransitionStatus:Uu,useFormState:np,useActionState:np,useOptimistic:function(e,n){var r=oe();return Qd(r,Yt,e,n)},useMemoCache:Cu,useCacheRefresh:xp},Yv={readContext:Ee,use:cl,useCallback:dp,useContext:Ee,useEffect:op,useImperativeHandle:fp,useInsertionEffect:up,useLayoutEffect:cp,useMemo:pp,useReducer:Ou,useRef:rp,useState:function(){return Ou(qi)},useDebugValue:Gu,useDeferredValue:function(e,n){var r=oe();return Yt===null?Bu(r,e,n):gp(r,Yt.memoizedState,e,n)},useTransition:function(){var e=Ou(qi)[0],n=oe().memoizedState;return[typeof e=="boolean"?e:qa(e),n]},useSyncExternalStore:Xd,useId:vp,useHostTransitionStatus:Uu,useFormState:ap,useActionState:ap,useOptimistic:function(e,n){var r=oe();return Yt!==null?Qd(r,Yt,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Cu,useCacheRefresh:xp},Is=null,Za=0;function ml(e){var n=Za;return Za+=1,Is===null&&(Is=[]),Ud(Is,e,n)}function Qa(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function yl(e,n){throw n.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Mp(e){var n=e._init;return n(e._payload)}function Ep(e){function n(L,G){if(e){var k=L.deletions;k===null?(L.deletions=[G],L.flags|=16):k.push(G)}}function r(L,G){if(!e)return null;for(;G!==null;)n(L,G),G=G.sibling;return null}function o(L){for(var G=new Map;L!==null;)L.key!==null?G.set(L.key,L):G.set(L.index,L),L=L.sibling;return G}function h(L,G){return L=Fi(L,G),L.index=0,L.sibling=null,L}function d(L,G,k){return L.index=k,e?(k=L.alternate,k!==null?(k=k.index,k<G?(L.flags|=67108866,G):k):(L.flags|=67108866,G)):(L.flags|=1048576,G)}function b(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function S(L,G,k,Q){return G===null||G.tag!==6?(G=su(k,L.mode,Q),G.return=L,G):(G=h(G,k),G.return=L,G)}function R(L,G,k,Q){var st=k.type;return st===E?Z(L,G,k.props.children,Q,k.key):G!==null&&(G.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===at&&Mp(st)===G.type)?(G=h(G,k.props),Qa(G,k),G.return=L,G):(G=Jr(k.type,k.key,k.props,null,L.mode,Q),Qa(G,k),G.return=L,G)}function P(L,G,k,Q){return G===null||G.tag!==4||G.stateNode.containerInfo!==k.containerInfo||G.stateNode.implementation!==k.implementation?(G=au(k,L.mode,Q),G.return=L,G):(G=h(G,k.children||[]),G.return=L,G)}function Z(L,G,k,Q,st){return G===null||G.tag!==7?(G=Hn(k,L.mode,Q,st),G.return=L,G):(G=h(G,k),G.return=L,G)}function K(L,G,k){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=su(""+G,L.mode,k),G.return=L,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _:return k=Jr(G.type,G.key,G.props,null,L.mode,k),Qa(k,G),k.return=L,k;case v:return G=au(G,L.mode,k),G.return=L,G;case at:var Q=G._init;return G=Q(G._payload),K(L,G,k)}if(Ft(G)||rt(G))return G=Hn(G,L.mode,k,null),G.return=L,G;if(typeof G.then=="function")return K(L,ml(G),k);if(G.$$typeof===B)return K(L,nl(L,G),k);yl(L,G)}return null}function Y(L,G,k,Q){var st=G!==null?G.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return st!==null?null:S(L,G,""+k,Q);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return k.key===st?R(L,G,k,Q):null;case v:return k.key===st?P(L,G,k,Q):null;case at:return st=k._init,k=st(k._payload),Y(L,G,k,Q)}if(Ft(k)||rt(k))return st!==null?null:Z(L,G,k,Q,null);if(typeof k.then=="function")return Y(L,G,ml(k),Q);if(k.$$typeof===B)return Y(L,G,nl(L,k),Q);yl(L,k)}return null}function j(L,G,k,Q,st){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return L=L.get(k)||null,S(G,L,""+Q,st);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _:return L=L.get(Q.key===null?k:Q.key)||null,R(G,L,Q,st);case v:return L=L.get(Q.key===null?k:Q.key)||null,P(G,L,Q,st);case at:var _t=Q._init;return Q=_t(Q._payload),j(L,G,k,Q,st)}if(Ft(Q)||rt(Q))return L=L.get(k)||null,Z(G,L,Q,st,null);if(typeof Q.then=="function")return j(L,G,k,ml(Q),st);if(Q.$$typeof===B)return j(L,G,k,nl(G,Q),st);yl(G,Q)}return null}function dt(L,G,k,Q){for(var st=null,_t=null,ut=G,ft=G=0,be=null;ut!==null&&ft<k.length;ft++){ut.index>ft?(be=ut,ut=null):be=ut.sibling;var Bt=Y(L,ut,k[ft],Q);if(Bt===null){ut===null&&(ut=be);break}e&&ut&&Bt.alternate===null&&n(L,ut),G=d(Bt,G,ft),_t===null?st=Bt:_t.sibling=Bt,_t=Bt,ut=be}if(ft===k.length)return r(L,ut),Lt&&Nn(L,ft),st;if(ut===null){for(;ft<k.length;ft++)ut=K(L,k[ft],Q),ut!==null&&(G=d(ut,G,ft),_t===null?st=ut:_t.sibling=ut,_t=ut);return Lt&&Nn(L,ft),st}for(ut=o(ut);ft<k.length;ft++)be=j(ut,L,ft,k[ft],Q),be!==null&&(e&&be.alternate!==null&&ut.delete(be.key===null?ft:be.key),G=d(be,G,ft),_t===null?st=be:_t.sibling=be,_t=be);return e&&ut.forEach(function(Cn){return n(L,Cn)}),Lt&&Nn(L,ft),st}function ht(L,G,k,Q){if(k==null)throw Error(s(151));for(var st=null,_t=null,ut=G,ft=G=0,be=null,Bt=k.next();ut!==null&&!Bt.done;ft++,Bt=k.next()){ut.index>ft?(be=ut,ut=null):be=ut.sibling;var Cn=Y(L,ut,Bt.value,Q);if(Cn===null){ut===null&&(ut=be);break}e&&ut&&Cn.alternate===null&&n(L,ut),G=d(Cn,G,ft),_t===null?st=Cn:_t.sibling=Cn,_t=Cn,ut=be}if(Bt.done)return r(L,ut),Lt&&Nn(L,ft),st;if(ut===null){for(;!Bt.done;ft++,Bt=k.next())Bt=K(L,Bt.value,Q),Bt!==null&&(G=d(Bt,G,ft),_t===null?st=Bt:_t.sibling=Bt,_t=Bt);return Lt&&Nn(L,ft),st}for(ut=o(ut);!Bt.done;ft++,Bt=k.next())Bt=j(ut,L,ft,Bt.value,Q),Bt!==null&&(e&&Bt.alternate!==null&&ut.delete(Bt.key===null?ft:Bt.key),G=d(Bt,G,ft),_t===null?st=Bt:_t.sibling=Bt,_t=Bt);return e&&ut.forEach(function(Ix){return n(L,Ix)}),Lt&&Nn(L,ft),st}function Xt(L,G,k,Q){if(typeof k=="object"&&k!==null&&k.type===E&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _:t:{for(var st=k.key;G!==null;){if(G.key===st){if(st=k.type,st===E){if(G.tag===7){r(L,G.sibling),Q=h(G,k.props.children),Q.return=L,L=Q;break t}}else if(G.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===at&&Mp(st)===G.type){r(L,G.sibling),Q=h(G,k.props),Qa(Q,k),Q.return=L,L=Q;break t}r(L,G);break}else n(L,G);G=G.sibling}k.type===E?(Q=Hn(k.props.children,L.mode,Q,k.key),Q.return=L,L=Q):(Q=Jr(k.type,k.key,k.props,null,L.mode,Q),Qa(Q,k),Q.return=L,L=Q)}return b(L);case v:t:{for(st=k.key;G!==null;){if(G.key===st)if(G.tag===4&&G.stateNode.containerInfo===k.containerInfo&&G.stateNode.implementation===k.implementation){r(L,G.sibling),Q=h(G,k.children||[]),Q.return=L,L=Q;break t}else{r(L,G);break}else n(L,G);G=G.sibling}Q=au(k,L.mode,Q),Q.return=L,L=Q}return b(L);case at:return st=k._init,k=st(k._payload),Xt(L,G,k,Q)}if(Ft(k))return dt(L,G,k,Q);if(rt(k)){if(st=rt(k),typeof st!="function")throw Error(s(150));return k=st.call(k),ht(L,G,k,Q)}if(typeof k.then=="function")return Xt(L,G,ml(k),Q);if(k.$$typeof===B)return Xt(L,G,nl(L,k),Q);yl(L,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,G!==null&&G.tag===6?(r(L,G.sibling),Q=h(G,k),Q.return=L,L=Q):(r(L,G),Q=su(k,L.mode,Q),Q.return=L,L=Q),b(L)):r(L,G)}return function(L,G,k,Q){try{Za=0;var st=Xt(L,G,k,Q);return Is=null,st}catch(ut){if(ut===Na||ut===al)throw ut;var _t=We(29,ut,null,L.mode);return _t.lanes=Q,_t.return=L,_t}finally{}}}var Xs=Ep(!0),Cp=Ep(!1),di=D(null),Ri=null;function dn(e){var n=e.alternate;X(de,de.current&1),X(di,e),Ri===null&&(n===null||Ps.current!==null||n.memoizedState!==null)&&(Ri=e)}function Rp(e){if(e.tag===22){if(X(de,de.current),X(di,e),Ri===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(Ri=e)}}else pn()}function pn(){X(de,de.current),X(di,di.current)}function Vi(e){U(di),Ri===e&&(Ri=null),U(de)}var de=D(0);function bl(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Ec(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Hu(e,n,r,o){n=e.memoizedState,r=r(o,n),r=r==null?n:m({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Pu={enqueueSetState:function(e,n,r){e=e._reactInternals;var o=ii(),h=cn(o);h.payload=n,r!=null&&(h.callback=r),n=hn(e,h,o),n!==null&&(ni(n,e,o),Ya(n,e,o))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var o=ii(),h=cn(o);h.tag=1,h.payload=n,r!=null&&(h.callback=r),n=hn(e,h,o),n!==null&&(ni(n,e,o),Ya(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=ii(),o=cn(r);o.tag=2,n!=null&&(o.callback=n),n=hn(e,o,r),n!==null&&(ni(n,e,r),Ya(n,e,r))}};function Op(e,n,r,o,h,d,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,b):n.prototype&&n.prototype.isPureReactComponent?!Da(r,o)||!Da(h,d):!0}function zp(e,n,r,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==e&&Pu.enqueueReplaceState(n,n.state,null)}function Vn(e,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(e=e.defaultProps){r===n&&(r=m({},r));for(var h in e)r[h]===void 0&&(r[h]=e[h])}return r}var vl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Dp(e){vl(e)}function Gp(e){console.error(e)}function Bp(e){vl(e)}function xl(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Lp(e,n,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Nu(e,n,r){return r=cn(r),r.tag=3,r.payload={element:null},r.callback=function(){xl(e,n)},r}function Up(e){return e=cn(e),e.tag=3,e}function kp(e,n,r,o){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){Lp(n,r,o)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){Lp(n,r,o),typeof h!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function Iv(e,n,r,o,h){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&ka(n,r,h,!0),r=di.current,r!==null){switch(r.tag){case 13:return Ri===null?cc():r.alternate===null&&te===0&&(te=3),r.flags&=-257,r.flags|=65536,r.lanes=h,o===gu?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),fc(e,o,h)),!1;case 22:return r.flags|=65536,o===gu?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),fc(e,o,h)),!1}throw Error(s(435,r.tag))}return fc(e,o,h),cc(),!1}if(Lt)return n=di.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==ou&&(e=Error(s(422),{cause:o}),Ua(ui(e,r)))):(o!==ou&&(n=Error(s(423),{cause:o}),Ua(ui(n,r))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=ui(o,r),h=Nu(e.stateNode,o,h),bu(e,h),te!==4&&(te=2)),!1;var d=Error(s(520),{cause:o});if(d=ui(d,r),nr===null?nr=[d]:nr.push(d),te!==4&&(te=2),n===null)return!0;o=ui(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=h&-h,r.lanes|=e,e=Nu(r.stateNode,o,e),bu(r,e),!1;case 1:if(n=r.type,d=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(xn===null||!xn.has(d))))return r.flags|=65536,h&=-h,r.lanes|=h,h=Up(h),kp(h,e,r,o),bu(r,h),!1}r=r.return}while(r!==null);return!1}var Hp=Error(s(461)),me=!1;function _e(e,n,r,o){n.child=e===null?Cp(n,null,r,o):Xs(n,e.child,r,o)}function Pp(e,n,r,o,h){r=r.render;var d=n.ref;if("ref"in o){var b={};for(var S in o)S!=="ref"&&(b[S]=o[S])}else b=o;return Xn(n),o=Au(e,n,r,b,d,h),S=Tu(),e!==null&&!me?(wu(e,n,h),$i(e,n,h)):(Lt&&S&&ru(n),n.flags|=1,_e(e,n,o,h),n.child)}function Np(e,n,r,o,h){if(e===null){var d=r.type;return typeof d=="function"&&!nu(d)&&d.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=d,Fp(e,n,d,o,h)):(e=Jr(r.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!$u(e,h)){var b=d.memoizedProps;if(r=r.compare,r=r!==null?r:Da,r(b,o)&&e.ref===n.ref)return $i(e,n,h)}return n.flags|=1,e=Fi(d,o),e.ref=n.ref,e.return=n,n.child=e}function Fp(e,n,r,o,h){if(e!==null){var d=e.memoizedProps;if(Da(d,o)&&e.ref===n.ref)if(me=!1,n.pendingProps=o=d,$u(e,h))(e.flags&131072)!==0&&(me=!0);else return n.lanes=e.lanes,$i(e,n,h)}return Fu(e,n,r,o,h)}function Yp(e,n,r){var o=n.pendingProps,h=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=d!==null?d.baseLanes|r:r,e!==null){for(h=n.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;n.childLanes=d&~o}else n.childLanes=0,n.child=null;return Ip(e,n,o,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&sl(n,d!==null?d.cachePool:null),d!==null?Fd(n,d):xu(),Rp(n);else return n.lanes=n.childLanes=536870912,Ip(e,n,d!==null?d.baseLanes|r:r,r)}else d!==null?(sl(n,d.cachePool),Fd(n,d),pn(),n.memoizedState=null):(e!==null&&sl(n,null),xu(),pn());return _e(e,n,h,r),n.child}function Ip(e,n,r,o){var h=pu();return h=h===null?null:{parent:fe._currentValue,pool:h},n.memoizedState={baseLanes:r,cachePool:h},e!==null&&sl(n,null),xu(),Rp(n),e!==null&&ka(e,n,o,!0),null}function _l(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Fu(e,n,r,o,h){return Xn(n),r=Au(e,n,r,o,void 0,h),o=Tu(),e!==null&&!me?(wu(e,n,h),$i(e,n,h)):(Lt&&o&&ru(n),n.flags|=1,_e(e,n,r,h),n.child)}function Xp(e,n,r,o,h,d){return Xn(n),n.updateQueue=null,r=Id(n,o,r,h),Yd(e),o=Tu(),e!==null&&!me?(wu(e,n,d),$i(e,n,d)):(Lt&&o&&ru(n),n.flags|=1,_e(e,n,r,d),n.child)}function jp(e,n,r,o,h){if(Xn(n),n.stateNode===null){var d=Bs,b=r.contextType;typeof b=="object"&&b!==null&&(d=Ee(b)),d=new r(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Pu,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},mu(n),b=r.contextType,d.context=typeof b=="object"&&b!==null?Ee(b):Bs,d.state=n.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(Hu(n,r,b,o),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(b=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),b!==d.state&&Pu.enqueueReplaceState(d,d.state,null),Xa(n,o,d,h),Ia(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){d=n.stateNode;var S=n.memoizedProps,R=Vn(r,S);d.props=R;var P=d.context,Z=r.contextType;b=Bs,typeof Z=="object"&&Z!==null&&(b=Ee(Z));var K=r.getDerivedStateFromProps;Z=typeof K=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||P!==b)&&zp(n,d,o,b),un=!1;var Y=n.memoizedState;d.state=Y,Xa(n,o,d,h),Ia(),P=n.memoizedState,S||Y!==P||un?(typeof K=="function"&&(Hu(n,r,K,o),P=n.memoizedState),(R=un||Op(n,r,R,o,Y,P,b))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=P),d.props=o,d.state=P,d.context=b,o=R):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,yu(e,n),b=n.memoizedProps,Z=Vn(r,b),d.props=Z,K=n.pendingProps,Y=d.context,P=r.contextType,R=Bs,typeof P=="object"&&P!==null&&(R=Ee(P)),S=r.getDerivedStateFromProps,(P=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==K||Y!==R)&&zp(n,d,o,R),un=!1,Y=n.memoizedState,d.state=Y,Xa(n,o,d,h),Ia();var j=n.memoizedState;b!==K||Y!==j||un||e!==null&&e.dependencies!==null&&il(e.dependencies)?(typeof S=="function"&&(Hu(n,r,S,o),j=n.memoizedState),(Z=un||Op(n,r,Z,o,Y,j,R)||e!==null&&e.dependencies!==null&&il(e.dependencies))?(P||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,j,R),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,j,R)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=j),d.props=o,d.state=j,d.context=R,o=Z):(typeof d.componentDidUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),o=!1)}return d=o,_l(e,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&o?(n.child=Xs(n,e.child,null,h),n.child=Xs(n,null,r,h)):_e(e,n,r,h),n.memoizedState=d.state,e=n.child):e=$i(e,n,h),e}function qp(e,n,r,o){return La(),n.flags|=256,_e(e,n,r,o),n.child}var Yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Iu(e){return{baseLanes:e,cachePool:Gd()}}function Xu(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=pi),e}function Vp(e,n,r){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,b;if((b=d)||(b=e!==null&&e.memoizedState===null?!1:(de.current&2)!==0),b&&(h=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,e===null){if(Lt){if(h?dn(n):pn(),Lt){var S=Jt,R;if(R=S){t:{for(R=S,S=Ci;R.nodeType!==8;){if(!S){S=null;break t}if(R=Si(R.nextSibling),R===null){S=null;break t}}S=R}S!==null?(n.memoizedState={dehydrated:S,treeContext:Pn!==null?{id:Yi,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},R=We(18,null,null,0),R.stateNode=S,R.return=n,n.child=R,Oe=n,Jt=null,R=!0):R=!1}R||Yn(n)}if(S=n.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Ec(S)?n.lanes=32:n.lanes=536870912,null;Vi(n)}return S=o.children,o=o.fallback,h?(pn(),h=n.mode,S=Sl({mode:"hidden",children:S},h),o=Hn(o,h,r,null),S.return=n,o.return=n,S.sibling=o,n.child=S,h=n.child,h.memoizedState=Iu(r),h.childLanes=Xu(e,b,r),n.memoizedState=Yu,o):(dn(n),ju(n,S))}if(R=e.memoizedState,R!==null&&(S=R.dehydrated,S!==null)){if(d)n.flags&256?(dn(n),n.flags&=-257,n=qu(e,n,r)):n.memoizedState!==null?(pn(),n.child=e.child,n.flags|=128,n=null):(pn(),h=o.fallback,S=n.mode,o=Sl({mode:"visible",children:o.children},S),h=Hn(h,S,r,null),h.flags|=2,o.return=n,h.return=n,o.sibling=h,n.child=o,Xs(n,e.child,null,r),o=n.child,o.memoizedState=Iu(r),o.childLanes=Xu(e,b,r),n.memoizedState=Yu,n=h);else if(dn(n),Ec(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var P=b.dgst;b=P,o=Error(s(419)),o.stack="",o.digest=b,Ua({value:o,source:null,stack:null}),n=qu(e,n,r)}else if(me||ka(e,n,r,!1),b=(r&e.childLanes)!==0,me||b){if(b=qt,b!==null&&(o=r&-r,o=(o&42)!==0?1:Co(o),o=(o&(b.suspendedLanes|r))!==0?0:o,o!==0&&o!==R.retryLane))throw R.retryLane=o,Gs(e,o),ni(b,e,o),Hp;S.data==="$?"||cc(),n=qu(e,n,r)}else S.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=R.treeContext,Jt=Si(S.nextSibling),Oe=n,Lt=!0,Fn=null,Ci=!1,e!==null&&(hi[fi++]=Yi,hi[fi++]=Ii,hi[fi++]=Pn,Yi=e.id,Ii=e.overflow,Pn=n),n=ju(n,o.children),n.flags|=4096);return n}return h?(pn(),h=o.fallback,S=n.mode,R=e.child,P=R.sibling,o=Fi(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,P!==null?h=Fi(P,h):(h=Hn(h,S,r,null),h.flags|=2),h.return=n,o.return=n,o.sibling=h,n.child=o,o=h,h=n.child,S=e.child.memoizedState,S===null?S=Iu(r):(R=S.cachePool,R!==null?(P=fe._currentValue,R=R.parent!==P?{parent:P,pool:P}:R):R=Gd(),S={baseLanes:S.baseLanes|r,cachePool:R}),h.memoizedState=S,h.childLanes=Xu(e,b,r),n.memoizedState=Yu,o):(dn(n),r=e.child,e=r.sibling,r=Fi(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,e!==null&&(b=n.deletions,b===null?(n.deletions=[e],n.flags|=16):b.push(e)),n.child=r,n.memoizedState=null,r)}function ju(e,n){return n=Sl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Sl(e,n){return e=We(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qu(e,n,r){return Xs(n,e.child,null,r),e=ju(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function $p(e,n,r){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),cu(e.return,n,r)}function Vu(e,n,r,o,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:h}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=h)}function Zp(e,n,r){var o=n.pendingProps,h=o.revealOrder,d=o.tail;if(_e(e,n,o.children,r),o=de.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$p(e,r,n);else if(e.tag===19)$p(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(X(de,o),h){case"forwards":for(r=n.child,h=null;r!==null;)e=r.alternate,e!==null&&bl(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=n.child,n.child=null):(h=r.sibling,r.sibling=null),Vu(n,!1,h,r,d);break;case"backwards":for(r=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&bl(e)===null){n.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}Vu(n,!0,r,null,d);break;case"together":Vu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function $i(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),vn|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(ka(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,r=Fi(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Fi(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function $u(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&il(e)))}function Xv(e,n,r){switch(n.tag){case 3:lt(n,n.stateNode.containerInfo),on(n,fe,e.memoizedState.cache),La();break;case 27:case 5:Rt(n);break;case 4:lt(n,n.stateNode.containerInfo);break;case 10:on(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(dn(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Vp(e,n,r):(dn(n),e=$i(e,n,r),e!==null?e.sibling:null);dn(n);break;case 19:var h=(e.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(ka(e,n,r,!1),o=(r&n.childLanes)!==0),h){if(o)return Zp(e,n,r);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),X(de,de.current),o)break;return null;case 22:case 23:return n.lanes=0,Yp(e,n,r);case 24:on(n,fe,e.memoizedState.cache)}return $i(e,n,r)}function Qp(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)me=!0;else{if(!$u(e,r)&&(n.flags&128)===0)return me=!1,Xv(e,n,r);me=(e.flags&131072)!==0}else me=!1,Lt&&(n.flags&1048576)!==0&&Md(n,el,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,h=o._init;if(o=h(o._payload),n.type=o,typeof o=="function")nu(o)?(e=Vn(o,e),n.tag=1,n=jp(null,n,o,e,r)):(n.tag=0,n=Fu(null,n,o,e,r));else{if(o!=null){if(h=o.$$typeof,h===N){n.tag=11,n=Pp(null,n,o,e,r);break t}else if(h===$){n.tag=14,n=Np(null,n,o,e,r);break t}}throw n=kt(o)||o,Error(s(306,n,""))}}return n;case 0:return Fu(e,n,n.type,n.pendingProps,r);case 1:return o=n.type,h=Vn(o,n.pendingProps),jp(e,n,o,h,r);case 3:t:{if(lt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,yu(e,n),Xa(n,o,null,r);var b=n.memoizedState;if(o=b.cache,on(n,fe,o),o!==d.cache&&hu(n,[fe],r,!0),Ia(),o=b.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=qp(e,n,o,r);break t}else if(o!==h){h=ui(Error(s(424)),n),Ua(h),n=qp(e,n,o,r);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Jt=Si(e.firstChild),Oe=n,Lt=!0,Fn=null,Ci=!0,r=Cp(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(La(),o===h){n=$i(e,n,r);break t}_e(e,n,o,r)}n=n.child}return n;case 26:return _l(e,n),e===null?(r=tm(n.type,null,n.pendingProps,null))?n.memoizedState=r:Lt||(r=n.type,e=n.pendingProps,o=Ul(et.current).createElement(r),o[Me]=n,o[Pe]=e,Ae(o,r,e),ge(o),n.stateNode=o):n.memoizedState=tm(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Rt(n),e===null&&Lt&&(o=n.stateNode=Kg(n.type,n.pendingProps,et.current),Oe=n,Ci=!0,h=Jt,An(n.type)?(Cc=h,Jt=Si(o.firstChild)):Jt=h),_e(e,n,n.pendingProps.children,r),_l(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Lt&&((h=o=Jt)&&(o=bx(o,n.type,n.pendingProps,Ci),o!==null?(n.stateNode=o,Oe=n,Jt=Si(o.firstChild),Ci=!1,h=!0):h=!1),h||Yn(n)),Rt(n),h=n.type,d=n.pendingProps,b=e!==null?e.memoizedProps:null,o=d.children,Tc(h,d)?o=null:b!==null&&Tc(h,b)&&(n.flags|=32),n.memoizedState!==null&&(h=Au(e,n,Uv,null,null,r),fr._currentValue=h),_l(e,n),_e(e,n,o,r),n.child;case 6:return e===null&&Lt&&((e=r=Jt)&&(r=vx(r,n.pendingProps,Ci),r!==null?(n.stateNode=r,Oe=n,Jt=null,e=!0):e=!1),e||Yn(n)),null;case 13:return Vp(e,n,r);case 4:return lt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Xs(n,null,o,r):_e(e,n,o,r),n.child;case 11:return Pp(e,n,n.type,n.pendingProps,r);case 7:return _e(e,n,n.pendingProps,r),n.child;case 8:return _e(e,n,n.pendingProps.children,r),n.child;case 12:return _e(e,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,on(n,n.type,o.value),_e(e,n,o.children,r),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Xn(n),h=Ee(h),o=o(h),n.flags|=1,_e(e,n,o,r),n.child;case 14:return Np(e,n,n.type,n.pendingProps,r);case 15:return Fp(e,n,n.type,n.pendingProps,r);case 19:return Zp(e,n,r);case 31:return o=n.pendingProps,r=n.mode,o={mode:o.mode,children:o.children},e===null?(r=Sl(o,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=Fi(e.child,o),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return Yp(e,n,r);case 24:return Xn(n),o=Ee(fe),e===null?(h=pu(),h===null&&(h=qt,d=fu(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=r),h=d),n.memoizedState={parent:o,cache:h},mu(n),on(n,fe,h)):((e.lanes&r)!==0&&(yu(e,n),Xa(n,null,null,r),Ia()),h=e.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),on(n,fe,o)):(o=d.cache,on(n,fe,o),o!==h.cache&&hu(n,[fe],r,!0))),_e(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Zi(e){e.flags|=4}function Kp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!am(n)){if(n=di.current,n!==null&&((zt&4194048)===zt?Ri!==null:(zt&62914560)!==zt&&(zt&536870912)===0||n!==Ri))throw Fa=gu,Bd;e.flags|=8192}}function Al(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Rf():536870912,e.lanes|=n,$s|=n)}function Ka(e,n){if(!Lt)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Qt(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(n)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=r,n}function jv(e,n,r){var o=n.pendingProps;switch(lu(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(n),null;case 1:return Qt(n),null;case 3:return r=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),ji(fe),Ut(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ba(n)?Zi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Rd())),Qt(n),null;case 26:return r=n.memoizedState,e===null?(Zi(n),r!==null?(Qt(n),Kp(n,r)):(Qt(n),n.flags&=-16777217)):r?r!==e.memoizedState?(Zi(n),Qt(n),Kp(n,r)):(Qt(n),n.flags&=-16777217):(e.memoizedProps!==o&&Zi(n),Qt(n),n.flags&=-16777217),null;case 27:Ue(n),r=et.current;var h=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Zi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Qt(n),null}e=J.current,Ba(n)?Ed(n):(e=Kg(h,o,r),n.stateNode=e,Zi(n))}return Qt(n),null;case 5:if(Ue(n),r=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Zi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Qt(n),null}if(e=J.current,Ba(n))Ed(n);else{switch(h=Ul(et.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(r,{is:o.is}):h.createElement(r)}}e[Me]=n,e[Pe]=o;t:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=e;t:switch(Ae(e,r,o),r){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Zi(n)}}return Qt(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Zi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=et.current,Ba(n)){if(e=n.stateNode,r=n.memoizedProps,o=null,h=Oe,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Me]=n,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Xg(e.nodeValue,r)),e||Yn(n)}else e=Ul(e).createTextNode(o),e[Me]=n,n.stateNode=e}return Qt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Ba(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Me]=n}else La(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Qt(n),h=!1}else h=Rd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Vi(n),n):(Vi(n),null)}if(Vi(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=o!==null,e=e!==null&&e.memoizedState!==null,r){o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return r!==e&&r&&(n.child.flags|=8192),Al(n,n.updateQueue),Qt(n),null;case 4:return Ut(),e===null&&vc(n.stateNode.containerInfo),Qt(n),null;case 10:return ji(n.type),Qt(n),null;case 19:if(U(de),h=n.memoizedState,h===null)return Qt(n),null;if(o=(n.flags&128)!==0,d=h.rendering,d===null)if(o)Ka(h,!1);else{if(te!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=bl(e),d!==null){for(n.flags|=128,Ka(h,!1),e=d.updateQueue,n.updateQueue=e,Al(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)wd(r,e),r=r.sibling;return X(de,de.current&1|2),n.child}e=e.sibling}h.tail!==null&&$e()>Ml&&(n.flags|=128,o=!0,Ka(h,!1),n.lanes=4194304)}else{if(!o)if(e=bl(d),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,Al(n,e),Ka(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Lt)return Qt(n),null}else 2*$e()-h.renderingStartTime>Ml&&r!==536870912&&(n.flags|=128,o=!0,Ka(h,!1),n.lanes=4194304);h.isBackwards?(d.sibling=n.child,n.child=d):(e=h.last,e!==null?e.sibling=d:n.child=d,h.last=d)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=$e(),n.sibling=null,e=de.current,X(de,o?e&1|2:e&1),n):(Qt(n),null);case 22:case 23:return Vi(n),_u(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(Qt(n),n.subtreeFlags&6&&(n.flags|=8192)):Qt(n),r=n.updateQueue,r!==null&&Al(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),e!==null&&U(jn),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),ji(fe),Qt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function qv(e,n){switch(lu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ji(fe),Ut(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ue(n),null;case 13:if(Vi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));La()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return U(de),null;case 4:return Ut(),null;case 10:return ji(n.type),null;case 22:case 23:return Vi(n),_u(),e!==null&&U(jn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ji(fe),null;case 25:return null;default:return null}}function Wp(e,n){switch(lu(n),n.tag){case 3:ji(fe),Ut();break;case 26:case 27:case 5:Ue(n);break;case 4:Ut();break;case 13:Vi(n);break;case 19:U(de);break;case 10:ji(n.type);break;case 22:case 23:Vi(n),_u(),e!==null&&U(jn);break;case 24:ji(fe)}}function Wa(e,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var h=o.next;r=h;do{if((r.tag&e)===e){o=void 0;var d=r.create,b=r.inst;o=d(),b.destroy=o}r=r.next}while(r!==h)}}catch(S){jt(n,n.return,S)}}function gn(e,n,r){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var b=o.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,h=n;var R=r,P=S;try{P()}catch(Z){jt(h,R,Z)}}}o=o.next}while(o!==d)}}catch(Z){jt(n,n.return,Z)}}function Jp(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{Nd(n,r)}catch(o){jt(e,e.return,o)}}}function tg(e,n,r){r.props=Vn(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){jt(e,n,o)}}function Ja(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(h){jt(e,n,h)}}function Oi(e,n){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(h){jt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){jt(e,n,h)}else r.current=null}function eg(e){var n=e.type,r=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break t;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(h){jt(e,e.return,h)}}function Zu(e,n,r){try{var o=e.stateNode;dx(o,e.type,r,n),o[Pe]=n}catch(h){jt(e,e.return,h)}}function ig(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&An(e.type)||e.tag===4}function Qu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||ig(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&An(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ku(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Ll));else if(o!==4&&(o===27&&An(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(Ku(e,n,r),e=e.sibling;e!==null;)Ku(e,n,r),e=e.sibling}function Tl(e,n,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(o!==4&&(o===27&&An(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Tl(e,n,r),e=e.sibling;e!==null;)Tl(e,n,r),e=e.sibling}function ng(e){var n=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Ae(n,o,r),n[Me]=e,n[Pe]=r}catch(d){jt(e,e.return,d)}}var Qi=!1,ae=!1,Wu=!1,sg=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Vv(e,n){if(e=e.containerInfo,Sc=Yl,e=gd(e),Qo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break t}var b=0,S=-1,R=-1,P=0,Z=0,K=e,Y=null;e:for(;;){for(var j;K!==r||h!==0&&K.nodeType!==3||(S=b+h),K!==d||o!==0&&K.nodeType!==3||(R=b+o),K.nodeType===3&&(b+=K.nodeValue.length),(j=K.firstChild)!==null;)Y=K,K=j;for(;;){if(K===e)break e;if(Y===r&&++P===h&&(S=b),Y===d&&++Z===o&&(R=b),(j=K.nextSibling)!==null)break;K=Y,Y=K.parentNode}K=j}r=S===-1||R===-1?null:{start:S,end:R}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ac={focusedElem:e,selectionRange:r},Yl=!1,ye=n;ye!==null;)if(n=ye,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,ye=e;else for(;ye!==null;){switch(n=ye,d=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,r=n,h=d.memoizedProps,d=d.memoizedState,o=r.stateNode;try{var dt=Vn(r.type,h,r.elementType===r.type);e=o.getSnapshotBeforeUpdate(dt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(ht){jt(r,r.return,ht)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)Mc(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Mc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,ye=e;break}ye=n.return}}function ag(e,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:mn(e,r),o&4&&Wa(5,r);break;case 1:if(mn(e,r),o&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(b){jt(r,r.return,b)}else{var h=Vn(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(b){jt(r,r.return,b)}}o&64&&Jp(r),o&512&&Ja(r,r.return);break;case 3:if(mn(e,r),o&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Nd(e,n)}catch(b){jt(r,r.return,b)}}break;case 27:n===null&&o&4&&ng(r);case 26:case 5:mn(e,r),n===null&&o&4&&eg(r),o&512&&Ja(r,r.return);break;case 12:mn(e,r);break;case 13:mn(e,r),o&4&&og(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=ix.bind(null,r),xx(e,r))));break;case 22:if(o=r.memoizedState!==null||Qi,!o){n=n!==null&&n.memoizedState!==null||ae,h=Qi;var d=ae;Qi=o,(ae=n)&&!d?yn(e,r,(r.subtreeFlags&8772)!==0):mn(e,r),Qi=h,ae=d}break;case 30:break;default:mn(e,r)}}function rg(e){var n=e.alternate;n!==null&&(e.alternate=null,rg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&zo(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Vt=null,Ye=!1;function Ki(e,n,r){for(r=r.child;r!==null;)lg(e,n,r),r=r.sibling}function lg(e,n,r){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(xa,r)}catch{}switch(r.tag){case 26:ae||Oi(r,n),Ki(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ae||Oi(r,n);var o=Vt,h=Ye;An(r.type)&&(Vt=r.stateNode,Ye=!1),Ki(e,n,r),or(r.stateNode),Vt=o,Ye=h;break;case 5:ae||Oi(r,n);case 6:if(o=Vt,h=Ye,Vt=null,Ki(e,n,r),Vt=o,Ye=h,Vt!==null)if(Ye)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(r.stateNode)}catch(d){jt(r,n,d)}else try{Vt.removeChild(r.stateNode)}catch(d){jt(r,n,d)}break;case 18:Vt!==null&&(Ye?(e=Vt,Zg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),mr(e)):Zg(Vt,r.stateNode));break;case 4:o=Vt,h=Ye,Vt=r.stateNode.containerInfo,Ye=!0,Ki(e,n,r),Vt=o,Ye=h;break;case 0:case 11:case 14:case 15:ae||gn(2,r,n),ae||gn(4,r,n),Ki(e,n,r);break;case 1:ae||(Oi(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&tg(r,n,o)),Ki(e,n,r);break;case 21:Ki(e,n,r);break;case 22:ae=(o=ae)||r.memoizedState!==null,Ki(e,n,r),ae=o;break;default:Ki(e,n,r)}}function og(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{mr(e)}catch(r){jt(n,n.return,r)}}function $v(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new sg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new sg),n;default:throw Error(s(435,e.tag))}}function Ju(e,n){var r=$v(e);n.forEach(function(o){var h=nx.bind(null,e,o);r.has(o)||(r.add(o),o.then(h,h))})}function Je(e,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var h=r[o],d=e,b=n,S=b;t:for(;S!==null;){switch(S.tag){case 27:if(An(S.type)){Vt=S.stateNode,Ye=!1;break t}break;case 5:Vt=S.stateNode,Ye=!1;break t;case 3:case 4:Vt=S.stateNode.containerInfo,Ye=!0;break t}S=S.return}if(Vt===null)throw Error(s(160));lg(d,b,h),Vt=null,Ye=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ug(n,e),n=n.sibling}var _i=null;function ug(e,n){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Je(n,e),ti(e),o&4&&(gn(3,e,e.return),Wa(3,e),gn(5,e,e.return));break;case 1:Je(n,e),ti(e),o&512&&(ae||r===null||Oi(r,r.return)),o&64&&Qi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var h=_i;if(Je(n,e),ti(e),o&512&&(ae||r===null||Oi(r,r.return)),o&4){var d=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){t:{o=e.type,r=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Aa]||d[Me]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Ae(d,o,r),d[Me]=e,ge(d),o=d;break t;case"link":var b=nm("link","href",h).get(o+(r.href||""));if(b){for(var S=0;S<b.length;S++)if(d=b[S],d.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&d.getAttribute("rel")===(r.rel==null?null:r.rel)&&d.getAttribute("title")===(r.title==null?null:r.title)&&d.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(S,1);break e}}d=h.createElement(o),Ae(d,o,r),h.head.appendChild(d);break;case"meta":if(b=nm("meta","content",h).get(o+(r.content||""))){for(S=0;S<b.length;S++)if(d=b[S],d.getAttribute("content")===(r.content==null?null:""+r.content)&&d.getAttribute("name")===(r.name==null?null:r.name)&&d.getAttribute("property")===(r.property==null?null:r.property)&&d.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&d.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(S,1);break e}}d=h.createElement(o),Ae(d,o,r),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[Me]=e,ge(d),o=d}e.stateNode=o}else sm(h,e.type,e.stateNode);else e.stateNode=im(h,o,e.memoizedProps);else d!==o?(d===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):d.count--,o===null?sm(h,e.type,e.stateNode):im(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Zu(e,e.memoizedProps,r.memoizedProps)}break;case 27:Je(n,e),ti(e),o&512&&(ae||r===null||Oi(r,r.return)),r!==null&&o&4&&Zu(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Je(n,e),ti(e),o&512&&(ae||r===null||Oi(r,r.return)),e.flags&32){h=e.stateNode;try{Ms(h,"")}catch(j){jt(e,e.return,j)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Zu(e,h,r!==null?r.memoizedProps:h)),o&1024&&(Wu=!0);break;case 6:if(Je(n,e),ti(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(j){jt(e,e.return,j)}}break;case 3:if(Pl=null,h=_i,_i=kl(n.containerInfo),Je(n,e),_i=h,ti(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{mr(n.containerInfo)}catch(j){jt(e,e.return,j)}Wu&&(Wu=!1,cg(e));break;case 4:o=_i,_i=kl(e.stateNode.containerInfo),Je(n,e),ti(e),_i=o;break;case 12:Je(n,e),ti(e);break;case 13:Je(n,e),ti(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ac=$e()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ju(e,o)));break;case 22:h=e.memoizedState!==null;var R=r!==null&&r.memoizedState!==null,P=Qi,Z=ae;if(Qi=P||h,ae=Z||R,Je(n,e),ae=Z,Qi=P,ti(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(r===null||R||Qi||ae||$n(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){R=r=n;try{if(d=R.stateNode,h)b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=R.stateNode;var K=R.memoizedProps.style,Y=K!=null&&K.hasOwnProperty("display")?K.display:null;S.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(j){jt(R,R.return,j)}}}else if(n.tag===6){if(r===null){R=n;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(j){jt(R,R.return,j)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Ju(e,r))));break;case 19:Je(n,e),ti(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ju(e,o)));break;case 30:break;case 21:break;default:Je(n,e),ti(e)}}function ti(e){var n=e.flags;if(n&2){try{for(var r,o=e.return;o!==null;){if(ig(o)){r=o;break}o=o.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var h=r.stateNode,d=Qu(e);Tl(e,d,h);break;case 5:var b=r.stateNode;r.flags&32&&(Ms(b,""),r.flags&=-33);var S=Qu(e);Tl(e,S,b);break;case 3:case 4:var R=r.stateNode.containerInfo,P=Qu(e);Ku(e,P,R);break;default:throw Error(s(161))}}catch(Z){jt(e,e.return,Z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function cg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;cg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function mn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ag(e,n.alternate,n),n=n.sibling}function $n(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:gn(4,n,n.return),$n(n);break;case 1:Oi(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&tg(n,n.return,r),$n(n);break;case 27:or(n.stateNode);case 26:case 5:Oi(n,n.return),$n(n);break;case 22:n.memoizedState===null&&$n(n);break;case 30:$n(n);break;default:$n(n)}e=e.sibling}}function yn(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,d=n,b=d.flags;switch(d.tag){case 0:case 11:case 15:yn(h,d,r),Wa(4,d);break;case 1:if(yn(h,d,r),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){jt(o,o.return,P)}if(o=d,h=o.updateQueue,h!==null){var S=o.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Pd(R[h],S)}catch(P){jt(o,o.return,P)}}r&&b&64&&Jp(d),Ja(d,d.return);break;case 27:ng(d);case 26:case 5:yn(h,d,r),r&&o===null&&b&4&&eg(d),Ja(d,d.return);break;case 12:yn(h,d,r);break;case 13:yn(h,d,r),r&&b&4&&og(h,d);break;case 22:d.memoizedState===null&&yn(h,d,r),Ja(d,d.return);break;case 30:break;default:yn(h,d,r)}n=n.sibling}}function tc(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ha(r))}function ec(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ha(e))}function zi(e,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)hg(e,n,r,o),n=n.sibling}function hg(e,n,r,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:zi(e,n,r,o),h&2048&&Wa(9,n);break;case 1:zi(e,n,r,o);break;case 3:zi(e,n,r,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ha(e)));break;case 12:if(h&2048){zi(e,n,r,o),e=n.stateNode;try{var d=n.memoizedProps,b=d.id,S=d.onPostCommit;typeof S=="function"&&S(b,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){jt(n,n.return,R)}}else zi(e,n,r,o);break;case 13:zi(e,n,r,o);break;case 23:break;case 22:d=n.stateNode,b=n.alternate,n.memoizedState!==null?d._visibility&2?zi(e,n,r,o):tr(e,n):d._visibility&2?zi(e,n,r,o):(d._visibility|=2,js(e,n,r,o,(n.subtreeFlags&10256)!==0)),h&2048&&tc(b,n);break;case 24:zi(e,n,r,o),h&2048&&ec(n.alternate,n);break;default:zi(e,n,r,o)}}function js(e,n,r,o,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=e,b=n,S=r,R=o,P=b.flags;switch(b.tag){case 0:case 11:case 15:js(d,b,S,R,h),Wa(8,b);break;case 23:break;case 22:var Z=b.stateNode;b.memoizedState!==null?Z._visibility&2?js(d,b,S,R,h):tr(d,b):(Z._visibility|=2,js(d,b,S,R,h)),h&&P&2048&&tc(b.alternate,b);break;case 24:js(d,b,S,R,h),h&&P&2048&&ec(b.alternate,b);break;default:js(d,b,S,R,h)}n=n.sibling}}function tr(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,o=n,h=o.flags;switch(o.tag){case 22:tr(r,o),h&2048&&tc(o.alternate,o);break;case 24:tr(r,o),h&2048&&ec(o.alternate,o);break;default:tr(r,o)}n=n.sibling}}var er=8192;function qs(e){if(e.subtreeFlags&er)for(e=e.child;e!==null;)fg(e),e=e.sibling}function fg(e){switch(e.tag){case 26:qs(e),e.flags&er&&e.memoizedState!==null&&Gx(_i,e.memoizedState,e.memoizedProps);break;case 5:qs(e);break;case 3:case 4:var n=_i;_i=kl(e.stateNode.containerInfo),qs(e),_i=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=er,er=16777216,qs(e),er=n):qs(e));break;default:qs(e)}}function dg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function ir(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];ye=o,gg(o,e)}dg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)pg(e),e=e.sibling}function pg(e){switch(e.tag){case 0:case 11:case 15:ir(e),e.flags&2048&&gn(9,e,e.return);break;case 3:ir(e);break;case 12:ir(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,wl(e)):ir(e);break;default:ir(e)}}function wl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];ye=o,gg(o,e)}dg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:gn(8,n,n.return),wl(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,wl(n));break;default:wl(n)}e=e.sibling}}function gg(e,n){for(;ye!==null;){var r=ye;switch(r.tag){case 0:case 11:case 15:gn(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ha(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,ye=o;else t:for(r=e;ye!==null;){o=ye;var h=o.sibling,d=o.return;if(rg(o),o===r){ye=null;break t}if(h!==null){h.return=d,ye=h;break t}ye=d}}}var Zv={getCacheForType:function(e){var n=Ee(fe),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r}},Qv=typeof WeakMap=="function"?WeakMap:Map,Ht=0,qt=null,At=null,zt=0,Pt=0,ei=null,bn=!1,Vs=!1,ic=!1,Wi=0,te=0,vn=0,Zn=0,nc=0,pi=0,$s=0,nr=null,Ie=null,sc=!1,ac=0,Ml=1/0,El=null,xn=null,Se=0,_n=null,Zs=null,Qs=0,rc=0,lc=null,mg=null,sr=0,oc=null;function ii(){if((Ht&2)!==0&&zt!==0)return zt&-zt;if(x.T!==null){var e=ks;return e!==0?e:gc()}return Df()}function yg(){pi===0&&(pi=(zt&536870912)===0||Lt?Cf():536870912);var e=di.current;return e!==null&&(e.flags|=32),pi}function ni(e,n,r){(e===qt&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)&&(Ks(e,0),Sn(e,zt,pi,!1)),Sa(e,r),((Ht&2)===0||e!==qt)&&(e===qt&&((Ht&2)===0&&(Zn|=r),te===4&&Sn(e,zt,pi,!1)),Di(e))}function bg(e,n,r){if((Ht&6)!==0)throw Error(s(327));var o=!r&&(n&124)===0&&(n&e.expiredLanes)===0||_a(e,n),h=o?Jv(e,n):hc(e,n,!0),d=o;do{if(h===0){Vs&&!o&&Sn(e,n,0,!1);break}else{if(r=e.current.alternate,d&&!Kv(r)){h=hc(e,n,!1),d=!1;continue}if(h===2){if(d=n,e.errorRecoveryDisabledLanes&d)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;t:{var S=e;h=nr;var R=S.current.memoizedState.isDehydrated;if(R&&(Ks(S,b).flags|=256),b=hc(S,b,!1),b!==2){if(ic&&!R){S.errorRecoveryDisabledLanes|=d,Zn|=d,h=4;break t}d=Ie,Ie=h,d!==null&&(Ie===null?Ie=d:Ie.push.apply(Ie,d))}h=b}if(d=!1,h!==2)continue}}if(h===1){Ks(e,0),Sn(e,n,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Sn(o,n,pi,!bn);break t;case 2:Ie=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(h=ac+300-$e(),10<h)){if(Sn(o,n,pi,!bn),Hr(o,0,!0)!==0)break t;o.timeoutHandle=Vg(vg.bind(null,o,r,Ie,El,sc,n,pi,Zn,$s,bn,d,2,-0,0),h);break t}vg(o,r,Ie,El,sc,n,pi,Zn,$s,bn,d,0,-0,0)}}break}while(!0);Di(e)}function vg(e,n,r,o,h,d,b,S,R,P,Z,K,Y,j){if(e.timeoutHandle=-1,K=n.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(hr={stylesheets:null,count:0,unsuspend:Dx},fg(n),K=Bx(),K!==null)){e.cancelPendingCommit=K(Mg.bind(null,e,n,d,r,o,h,b,S,R,Z,1,Y,j)),Sn(e,d,b,!P);return}Mg(e,n,d,r,o,h,b,S,R)}function Kv(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var h=r[o],d=h.getSnapshot;h=h.value;try{if(!Ke(d(),h))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Sn(e,n,r,o){n&=~nc,n&=~Zn,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var d=31-Qe(h),b=1<<d;o[d]=-1,h&=~b}r!==0&&Of(e,r,n)}function Cl(){return(Ht&6)===0?(ar(0),!1):!0}function uc(){if(At!==null){if(Pt===0)var e=At.return;else e=At,Xi=In=null,Mu(e),Is=null,Za=0,e=At;for(;e!==null;)Wp(e.alternate,e),e=e.return;At=null}}function Ks(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,gx(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),uc(),qt=e,At=r=Fi(e.current,null),zt=n,Pt=0,ei=null,bn=!1,Vs=_a(e,n),ic=!1,$s=pi=nc=Zn=vn=te=0,Ie=nr=null,sc=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-Qe(o),d=1<<h;n|=e[h],o&=~d}return Wi=n,Qr(),r}function xg(e,n){xt=null,x.H=gl,n===Na||n===al?(n=kd(),Pt=3):n===Bd?(n=kd(),Pt=4):Pt=n===Hp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ei=n,At===null&&(te=1,xl(e,ui(n,e.current)))}function _g(){var e=x.H;return x.H=gl,e===null?gl:e}function Sg(){var e=x.A;return x.A=Zv,e}function cc(){te=4,bn||(zt&4194048)!==zt&&di.current!==null||(Vs=!0),(vn&134217727)===0&&(Zn&134217727)===0||qt===null||Sn(qt,zt,pi,!1)}function hc(e,n,r){var o=Ht;Ht|=2;var h=_g(),d=Sg();(qt!==e||zt!==n)&&(El=null,Ks(e,n)),n=!1;var b=te;t:do try{if(Pt!==0&&At!==null){var S=At,R=ei;switch(Pt){case 8:uc(),b=6;break t;case 3:case 2:case 9:case 6:di.current===null&&(n=!0);var P=Pt;if(Pt=0,ei=null,Ws(e,S,R,P),r&&Vs){b=0;break t}break;default:P=Pt,Pt=0,ei=null,Ws(e,S,R,P)}}Wv(),b=te;break}catch(Z){xg(e,Z)}while(!0);return n&&e.shellSuspendCounter++,Xi=In=null,Ht=o,x.H=h,x.A=d,At===null&&(qt=null,zt=0,Qr()),b}function Wv(){for(;At!==null;)Ag(At)}function Jv(e,n){var r=Ht;Ht|=2;var o=_g(),h=Sg();qt!==e||zt!==n?(El=null,Ml=$e()+500,Ks(e,n)):Vs=_a(e,n);t:do try{if(Pt!==0&&At!==null){n=At;var d=ei;e:switch(Pt){case 1:Pt=0,ei=null,Ws(e,n,d,1);break;case 2:case 9:if(Ld(d)){Pt=0,ei=null,Tg(n);break}n=function(){Pt!==2&&Pt!==9||qt!==e||(Pt=7),Di(e)},d.then(n,n);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:Ld(d)?(Pt=0,ei=null,Tg(n)):(Pt=0,ei=null,Ws(e,n,d,7));break;case 5:var b=null;switch(At.tag){case 26:b=At.memoizedState;case 5:case 27:var S=At;if(!b||am(b)){Pt=0,ei=null;var R=S.sibling;if(R!==null)At=R;else{var P=S.return;P!==null?(At=P,Rl(P)):At=null}break e}}Pt=0,ei=null,Ws(e,n,d,5);break;case 6:Pt=0,ei=null,Ws(e,n,d,6);break;case 8:uc(),te=6;break t;default:throw Error(s(462))}}tx();break}catch(Z){xg(e,Z)}while(!0);return Xi=In=null,x.H=o,x.A=h,Ht=r,At!==null?0:(qt=null,zt=0,Qr(),te)}function tx(){for(;At!==null&&!vt();)Ag(At)}function Ag(e){var n=Qp(e.alternate,e,Wi);e.memoizedProps=e.pendingProps,n===null?Rl(e):At=n}function Tg(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=Xp(r,n,n.pendingProps,n.type,void 0,zt);break;case 11:n=Xp(r,n,n.pendingProps,n.type.render,n.ref,zt);break;case 5:Mu(n);default:Wp(r,n),n=At=wd(n,Wi),n=Qp(r,n,Wi)}e.memoizedProps=e.pendingProps,n===null?Rl(e):At=n}function Ws(e,n,r,o){Xi=In=null,Mu(n),Is=null,Za=0;var h=n.return;try{if(Iv(e,h,n,r,zt)){te=1,xl(e,ui(r,e.current)),At=null;return}}catch(d){if(h!==null)throw At=h,d;te=1,xl(e,ui(r,e.current)),At=null;return}n.flags&32768?(Lt||o===1?e=!0:Vs||(zt&536870912)!==0?e=!1:(bn=e=!0,(o===2||o===9||o===3||o===6)&&(o=di.current,o!==null&&o.tag===13&&(o.flags|=16384))),wg(n,e)):Rl(n)}function Rl(e){var n=e;do{if((n.flags&32768)!==0){wg(n,bn);return}e=n.return;var r=jv(n.alternate,n,Wi);if(r!==null){At=r;return}if(n=n.sibling,n!==null){At=n;return}At=n=e}while(n!==null);te===0&&(te=5)}function wg(e,n){do{var r=qv(e.alternate,e);if(r!==null){r.flags&=32767,At=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){At=e;return}At=e=r}while(e!==null);te=6,At=null}function Mg(e,n,r,o,h,d,b,S,R){e.cancelPendingCommit=null;do Ol();while(Se!==0);if((Ht&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(d=n.lanes|n.childLanes,d|=eu,Db(e,r,d,b,S,R),e===qt&&(At=qt=null,zt=0),Zs=n,_n=e,Qs=r,rc=d,lc=h,mg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sx(Lr,function(){return zg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=x.T,x.T=null,h=w.p,w.p=2,b=Ht,Ht|=4;try{Vv(e,n,r)}finally{Ht=b,w.p=h,x.T=o}}Se=1,Eg(),Cg(),Rg()}}function Eg(){if(Se===1){Se=0;var e=_n,n=Zs,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=x.T,x.T=null;var o=w.p;w.p=2;var h=Ht;Ht|=4;try{ug(n,e);var d=Ac,b=gd(e.containerInfo),S=d.focusedElem,R=d.selectionRange;if(b!==S&&S&&S.ownerDocument&&pd(S.ownerDocument.documentElement,S)){if(R!==null&&Qo(S)){var P=R.start,Z=R.end;if(Z===void 0&&(Z=P),"selectionStart"in S)S.selectionStart=P,S.selectionEnd=Math.min(Z,S.value.length);else{var K=S.ownerDocument||document,Y=K&&K.defaultView||window;if(Y.getSelection){var j=Y.getSelection(),dt=S.textContent.length,ht=Math.min(R.start,dt),Xt=R.end===void 0?ht:Math.min(R.end,dt);!j.extend&&ht>Xt&&(b=Xt,Xt=ht,ht=b);var L=dd(S,ht),G=dd(S,Xt);if(L&&G&&(j.rangeCount!==1||j.anchorNode!==L.node||j.anchorOffset!==L.offset||j.focusNode!==G.node||j.focusOffset!==G.offset)){var k=K.createRange();k.setStart(L.node,L.offset),j.removeAllRanges(),ht>Xt?(j.addRange(k),j.extend(G.node,G.offset)):(k.setEnd(G.node,G.offset),j.addRange(k))}}}}for(K=[],j=S;j=j.parentNode;)j.nodeType===1&&K.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<K.length;S++){var Q=K[S];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Yl=!!Sc,Ac=Sc=null}finally{Ht=h,w.p=o,x.T=r}}e.current=n,Se=2}}function Cg(){if(Se===2){Se=0;var e=_n,n=Zs,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=x.T,x.T=null;var o=w.p;w.p=2;var h=Ht;Ht|=4;try{ag(e,n.alternate,n)}finally{Ht=h,w.p=o,x.T=r}}Se=3}}function Rg(){if(Se===4||Se===3){Se=0,Ot();var e=_n,n=Zs,r=Qs,o=mg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Se=5:(Se=0,Zs=_n=null,Og(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(xn=null),Ro(r),n=n.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(xa,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=x.T,h=w.p,w.p=2,x.T=null;try{for(var d=e.onRecoverableError,b=0;b<o.length;b++){var S=o[b];d(S.value,{componentStack:S.stack})}}finally{x.T=n,w.p=h}}(Qs&3)!==0&&Ol(),Di(e),h=e.pendingLanes,(r&4194090)!==0&&(h&42)!==0?e===oc?sr++:(sr=0,oc=e):sr=0,ar(0)}}function Og(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ha(n)))}function Ol(e){return Eg(),Cg(),Rg(),zg()}function zg(){if(Se!==5)return!1;var e=_n,n=rc;rc=0;var r=Ro(Qs),o=x.T,h=w.p;try{w.p=32>r?32:r,x.T=null,r=lc,lc=null;var d=_n,b=Qs;if(Se=0,Zs=_n=null,Qs=0,(Ht&6)!==0)throw Error(s(331));var S=Ht;if(Ht|=4,pg(d.current),hg(d,d.current,b,r),Ht=S,ar(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(xa,d)}catch{}return!0}finally{w.p=h,x.T=o,Og(e,n)}}function Dg(e,n,r){n=ui(r,n),n=Nu(e.stateNode,n,2),e=hn(e,n,2),e!==null&&(Sa(e,2),Di(e))}function jt(e,n,r){if(e.tag===3)Dg(e,e,r);else for(;n!==null;){if(n.tag===3){Dg(n,e,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(xn===null||!xn.has(o))){e=ui(r,e),r=Up(2),o=hn(n,r,2),o!==null&&(kp(r,o,n,e),Sa(o,2),Di(o));break}}n=n.return}}function fc(e,n,r){var o=e.pingCache;if(o===null){o=e.pingCache=new Qv;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(r)||(ic=!0,h.add(r),e=ex.bind(null,e,n,r),n.then(e,e))}function ex(e,n,r){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,qt===e&&(zt&r)===r&&(te===4||te===3&&(zt&62914560)===zt&&300>$e()-ac?(Ht&2)===0&&Ks(e,0):nc|=r,$s===zt&&($s=0)),Di(e)}function Gg(e,n){n===0&&(n=Rf()),e=Gs(e,n),e!==null&&(Sa(e,n),Di(e))}function ix(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),Gg(e,r)}function nx(e,n){var r=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Gg(e,r)}function sx(e,n){return ke(e,n)}var zl=null,Js=null,dc=!1,Dl=!1,pc=!1,Qn=0;function Di(e){e!==Js&&e.next===null&&(Js===null?zl=Js=e:Js=Js.next=e),Dl=!0,dc||(dc=!0,rx())}function ar(e,n){if(!pc&&Dl){pc=!0;do for(var r=!1,o=zl;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var b=o.suspendedLanes,S=o.pingedLanes;d=(1<<31-Qe(42|e)+1)-1,d&=h&~(b&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(r=!0,kg(o,d))}else d=zt,d=Hr(o,o===qt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||_a(o,d)||(r=!0,kg(o,d));o=o.next}while(r);pc=!1}}function ax(){Bg()}function Bg(){Dl=dc=!1;var e=0;Qn!==0&&(px()&&(e=Qn),Qn=0);for(var n=$e(),r=null,o=zl;o!==null;){var h=o.next,d=Lg(o,n);d===0?(o.next=null,r===null?zl=h:r.next=h,h===null&&(Js=r)):(r=o,(e!==0||(d&3)!==0)&&(Dl=!0)),o=h}ar(e)}function Lg(e,n){for(var r=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var b=31-Qe(d),S=1<<b,R=h[b];R===-1?((S&r)===0||(S&o)!==0)&&(h[b]=zb(S,n)):R<=n&&(e.expiredLanes|=S),d&=~S}if(n=qt,r=zt,r=Hr(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===n&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&He(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||_a(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(o!==null&&He(o),Ro(r)){case 2:case 8:r=Mf;break;case 32:r=Lr;break;case 268435456:r=Ef;break;default:r=Lr}return o=Ug.bind(null,e),r=ke(r,o),e.callbackPriority=n,e.callbackNode=r,n}return o!==null&&o!==null&&He(o),e.callbackPriority=2,e.callbackNode=null,2}function Ug(e,n){if(Se!==0&&Se!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Ol()&&e.callbackNode!==r)return null;var o=zt;return o=Hr(e,e===qt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(bg(e,o,n),Lg(e,$e()),e.callbackNode!=null&&e.callbackNode===r?Ug.bind(null,e):null)}function kg(e,n){if(Ol())return null;bg(e,n,!0)}function rx(){mx(function(){(Ht&6)!==0?ke(Mo,ax):Bg()})}function gc(){return Qn===0&&(Qn=Cf()),Qn}function Hg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ir(""+e)}function Pg(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function lx(e,n,r,o,h){if(n==="submit"&&r&&r.stateNode===h){var d=Hg((h[Pe]||null).action),b=o.submitter;b&&(n=(n=b[Pe]||null)?Hg(n.formAction):b.getAttribute("formAction"),n!==null&&(d=n,b=null));var S=new Vr("action","action",null,o,h);e.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Qn!==0){var R=b?Pg(h,b):new FormData(h);Lu(r,{pending:!0,data:R,method:h.method,action:d},null,R)}}else typeof d=="function"&&(S.preventDefault(),R=b?Pg(h,b):new FormData(h),Lu(r,{pending:!0,data:R,method:h.method,action:d},d,R))},currentTarget:h}]})}}for(var mc=0;mc<tu.length;mc++){var yc=tu[mc],ox=yc.toLowerCase(),ux=yc[0].toUpperCase()+yc.slice(1);xi(ox,"on"+ux)}xi(bd,"onAnimationEnd"),xi(vd,"onAnimationIteration"),xi(xd,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(Mv,"onTransitionRun"),xi(Ev,"onTransitionStart"),xi(Cv,"onTransitionCancel"),xi(_d,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rr));function Ng(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],h=o.event;o=o.listeners;t:{var d=void 0;if(n)for(var b=o.length-1;0<=b;b--){var S=o[b],R=S.instance,P=S.currentTarget;if(S=S.listener,R!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=P;try{d(h)}catch(Z){vl(Z)}h.currentTarget=null,d=R}else for(b=0;b<o.length;b++){if(S=o[b],R=S.instance,P=S.currentTarget,S=S.listener,R!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=P;try{d(h)}catch(Z){vl(Z)}h.currentTarget=null,d=R}}}}function Tt(e,n){var r=n[Oo];r===void 0&&(r=n[Oo]=new Set);var o=e+"__bubble";r.has(o)||(Fg(n,e,2,!1),r.add(o))}function bc(e,n,r){var o=0;n&&(o|=4),Fg(r,e,o,n)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function vc(e){if(!e[Gl]){e[Gl]=!0,Bf.forEach(function(r){r!=="selectionchange"&&(cx.has(r)||bc(r,!1,e),bc(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Gl]||(n[Gl]=!0,bc("selectionchange",!1,n))}}function Fg(e,n,r,o){switch(hm(n)){case 2:var h=kx;break;case 8:h=Hx;break;default:h=Gc}r=h.bind(null,n,r,e),h=void 0,!Fo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,r,{capture:!0,passive:h}):e.addEventListener(n,r,!0):h!==void 0?e.addEventListener(n,r,{passive:h}):e.addEventListener(n,r,!1)}function xc(e,n,r,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var S=o.stateNode.containerInfo;if(S===h)break;if(b===4)for(b=o.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;S!==null;){if(b=xs(S),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){o=d=b;continue t}S=S.parentNode}}o=o.return}$f(function(){var P=d,Z=Po(r),K=[];t:{var Y=Sd.get(e);if(Y!==void 0){var j=Vr,dt=e;switch(e){case"keypress":if(jr(r)===0)break t;case"keydown":case"keyup":j=sv;break;case"focusin":dt="focus",j=jo;break;case"focusout":dt="blur",j=jo;break;case"beforeblur":case"afterblur":j=jo;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=qb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=lv;break;case bd:case vd:case xd:j=Zb;break;case _d:j=uv;break;case"scroll":case"scrollend":j=Xb;break;case"wheel":j=hv;break;case"copy":case"cut":case"paste":j=Kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Jf;break;case"toggle":case"beforetoggle":j=dv}var ht=(n&4)!==0,Xt=!ht&&(e==="scroll"||e==="scrollend"),L=ht?Y!==null?Y+"Capture":null:Y;ht=[];for(var G=P,k;G!==null;){var Q=G;if(k=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||k===null||L===null||(Q=wa(G,L),Q!=null&&ht.push(lr(G,Q,k))),Xt)break;G=G.return}0<ht.length&&(Y=new j(Y,dt,null,r,Z),K.push({event:Y,listeners:ht}))}}if((n&7)===0){t:{if(Y=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",Y&&r!==Ho&&(dt=r.relatedTarget||r.fromElement)&&(xs(dt)||dt[vs]))break t;if((j||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,j?(dt=r.relatedTarget||r.toElement,j=P,dt=dt?xs(dt):null,dt!==null&&(Xt=u(dt),ht=dt.tag,dt!==Xt||ht!==5&&ht!==27&&ht!==6)&&(dt=null)):(j=null,dt=P),j!==dt)){if(ht=Kf,Q="onMouseLeave",L="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(ht=Jf,Q="onPointerLeave",L="onPointerEnter",G="pointer"),Xt=j==null?Y:Ta(j),k=dt==null?Y:Ta(dt),Y=new ht(Q,G+"leave",j,r,Z),Y.target=Xt,Y.relatedTarget=k,Q=null,xs(Z)===P&&(ht=new ht(L,G+"enter",dt,r,Z),ht.target=k,ht.relatedTarget=Xt,Q=ht),Xt=Q,j&&dt)e:{for(ht=j,L=dt,G=0,k=ht;k;k=ta(k))G++;for(k=0,Q=L;Q;Q=ta(Q))k++;for(;0<G-k;)ht=ta(ht),G--;for(;0<k-G;)L=ta(L),k--;for(;G--;){if(ht===L||L!==null&&ht===L.alternate)break e;ht=ta(ht),L=ta(L)}ht=null}else ht=null;j!==null&&Yg(K,Y,j,ht,!1),dt!==null&&Xt!==null&&Yg(K,Xt,dt,ht,!0)}}t:{if(Y=P?Ta(P):window,j=Y.nodeName&&Y.nodeName.toLowerCase(),j==="select"||j==="input"&&Y.type==="file")var st=ld;else if(ad(Y))if(od)st=Av;else{st=_v;var _t=xv}else j=Y.nodeName,!j||j.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?P&&ko(P.elementType)&&(st=ld):st=Sv;if(st&&(st=st(e,P))){rd(K,st,r,Z);break t}_t&&_t(e,Y,P),e==="focusout"&&P&&Y.type==="number"&&P.memoizedProps.value!=null&&Uo(Y,"number",Y.value)}switch(_t=P?Ta(P):window,e){case"focusin":(ad(_t)||_t.contentEditable==="true")&&(Os=_t,Ko=P,Ga=null);break;case"focusout":Ga=Ko=Os=null;break;case"mousedown":Wo=!0;break;case"contextmenu":case"mouseup":case"dragend":Wo=!1,md(K,r,Z);break;case"selectionchange":if(wv)break;case"keydown":case"keyup":md(K,r,Z)}var ut;if(Vo)t:{switch(e){case"compositionstart":var ft="onCompositionStart";break t;case"compositionend":ft="onCompositionEnd";break t;case"compositionupdate":ft="onCompositionUpdate";break t}ft=void 0}else Rs?nd(e,r)&&(ft="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ft="onCompositionStart");ft&&(td&&r.locale!=="ko"&&(Rs||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Rs&&(ut=Zf()):(ln=Z,Yo="value"in ln?ln.value:ln.textContent,Rs=!0)),_t=Bl(P,ft),0<_t.length&&(ft=new Wf(ft,e,null,r,Z),K.push({event:ft,listeners:_t}),ut?ft.data=ut:(ut=sd(r),ut!==null&&(ft.data=ut)))),(ut=gv?mv(e,r):yv(e,r))&&(ft=Bl(P,"onBeforeInput"),0<ft.length&&(_t=new Wf("onBeforeInput","beforeinput",null,r,Z),K.push({event:_t,listeners:ft}),_t.data=ut)),lx(K,e,P,r,Z)}Ng(K,n)})}function lr(e,n,r){return{instance:e,listener:n,currentTarget:r}}function Bl(e,n){for(var r=n+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=wa(e,r),h!=null&&o.unshift(lr(e,h,d)),h=wa(e,n),h!=null&&o.push(lr(e,h,d))),e.tag===3)return o;e=e.return}return[]}function ta(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Yg(e,n,r,o,h){for(var d=n._reactName,b=[];r!==null&&r!==o;){var S=r,R=S.alternate,P=S.stateNode;if(S=S.tag,R!==null&&R===o)break;S!==5&&S!==26&&S!==27||P===null||(R=P,h?(P=wa(r,d),P!=null&&b.unshift(lr(r,P,R))):h||(P=wa(r,d),P!=null&&b.push(lr(r,P,R)))),r=r.return}b.length!==0&&e.push({event:n,listeners:b})}var hx=/\r\n?/g,fx=/\u0000|\uFFFD/g;function Ig(e){return(typeof e=="string"?e:""+e).replace(hx,`
`).replace(fx,"")}function Xg(e,n){return n=Ig(n),Ig(e)===n}function Ll(){}function It(e,n,r,o,h,d){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ms(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ms(e,""+o);break;case"className":Nr(e,"class",o);break;case"tabIndex":Nr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Nr(e,r,o);break;case"style":qf(e,o,d);break;case"data":if(n!=="object"){Nr(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Ir(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(r==="formAction"?(n!=="input"&&It(e,n,"name",h.name,h,null),It(e,n,"formEncType",h.formEncType,h,null),It(e,n,"formMethod",h.formMethod,h,null),It(e,n,"formTarget",h.formTarget,h,null)):(It(e,n,"encType",h.encType,h,null),It(e,n,"method",h.method,h,null),It(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Ir(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=Ll);break;case"onScroll":o!=null&&Tt("scroll",e);break;case"onScrollEnd":o!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=Ir(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),Pr(e,"popover",o);break;case"xlinkActuate":Pi(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Pi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Pi(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Pi(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Pi(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Pi(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Pr(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Yb.get(r)||r,Pr(e,r,o))}}function _c(e,n,r,o,h,d){switch(r){case"style":qf(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof o=="string"?Ms(e,o):(typeof o=="number"||typeof o=="bigint")&&Ms(e,""+o);break;case"onScroll":o!=null&&Tt("scroll",e);break;case"onScrollEnd":o!=null&&Tt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Ll);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lf.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),n=r.slice(2,h?r.length-7:void 0),d=e[Pe]||null,d=d!=null?d[r]:null,typeof d=="function"&&e.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,o,h);break t}r in e?e[r]=o:o===!0?e.setAttribute(r,""):Pr(e,r,o)}}}function Ae(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var o=!1,h=!1,d;for(d in r)if(r.hasOwnProperty(d)){var b=r[d];if(b!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:It(e,n,d,b,r,null)}}h&&It(e,n,"srcSet",r.srcSet,r,null),o&&It(e,n,"src",r.src,r,null);return;case"input":Tt("invalid",e);var S=d=b=h=null,R=null,P=null;for(o in r)if(r.hasOwnProperty(o)){var Z=r[o];if(Z!=null)switch(o){case"name":h=Z;break;case"type":b=Z;break;case"checked":R=Z;break;case"defaultChecked":P=Z;break;case"value":d=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,n));break;default:It(e,n,o,Z,r,null)}}Yf(e,d,S,R,P,b,h,!1),Fr(e);return;case"select":Tt("invalid",e),o=b=d=null;for(h in r)if(r.hasOwnProperty(h)&&(S=r[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":b=S;break;case"multiple":o=S;default:It(e,n,h,S,r,null)}n=d,r=b,e.multiple=!!o,n!=null?ws(e,!!o,n,!1):r!=null&&ws(e,!!o,r,!0);return;case"textarea":Tt("invalid",e),d=h=o=null;for(b in r)if(r.hasOwnProperty(b)&&(S=r[b],S!=null))switch(b){case"value":o=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:It(e,n,b,S,r,null)}Xf(e,o,h,d),Fr(e);return;case"option":for(R in r)if(r.hasOwnProperty(R)&&(o=r[R],o!=null))switch(R){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:It(e,n,R,o,r,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(o=0;o<rr.length;o++)Tt(rr[o],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in r)if(r.hasOwnProperty(P)&&(o=r[P],o!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:It(e,n,P,o,r,null)}return;default:if(ko(n)){for(Z in r)r.hasOwnProperty(Z)&&(o=r[Z],o!==void 0&&_c(e,n,Z,o,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(o=r[S],o!=null&&It(e,n,S,o,r,null))}function dx(e,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,b=null,S=null,R=null,P=null,Z=null;for(j in r){var K=r[j];if(r.hasOwnProperty(j)&&K!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":R=K;default:o.hasOwnProperty(j)||It(e,n,j,null,o,K)}}for(var Y in o){var j=o[Y];if(K=r[Y],o.hasOwnProperty(Y)&&(j!=null||K!=null))switch(Y){case"type":d=j;break;case"name":h=j;break;case"checked":P=j;break;case"defaultChecked":Z=j;break;case"value":b=j;break;case"defaultValue":S=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,n));break;default:j!==K&&It(e,n,Y,j,o,K)}}Lo(e,b,S,R,P,Z,d,h);return;case"select":j=b=S=Y=null;for(d in r)if(R=r[d],r.hasOwnProperty(d)&&R!=null)switch(d){case"value":break;case"multiple":j=R;default:o.hasOwnProperty(d)||It(e,n,d,null,o,R)}for(h in o)if(d=o[h],R=r[h],o.hasOwnProperty(h)&&(d!=null||R!=null))switch(h){case"value":Y=d;break;case"defaultValue":S=d;break;case"multiple":b=d;default:d!==R&&It(e,n,h,d,o,R)}n=S,r=b,o=j,Y!=null?ws(e,!!r,Y,!1):!!o!=!!r&&(n!=null?ws(e,!!r,n,!0):ws(e,!!r,r?[]:"",!1));return;case"textarea":j=Y=null;for(S in r)if(h=r[S],r.hasOwnProperty(S)&&h!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:It(e,n,S,null,o,h)}for(b in o)if(h=o[b],d=r[b],o.hasOwnProperty(b)&&(h!=null||d!=null))switch(b){case"value":Y=h;break;case"defaultValue":j=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&It(e,n,b,h,o,d)}If(e,Y,j);return;case"option":for(var dt in r)if(Y=r[dt],r.hasOwnProperty(dt)&&Y!=null&&!o.hasOwnProperty(dt))switch(dt){case"selected":e.selected=!1;break;default:It(e,n,dt,null,o,Y)}for(R in o)if(Y=o[R],j=r[R],o.hasOwnProperty(R)&&Y!==j&&(Y!=null||j!=null))switch(R){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:It(e,n,R,Y,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in r)Y=r[ht],r.hasOwnProperty(ht)&&Y!=null&&!o.hasOwnProperty(ht)&&It(e,n,ht,null,o,Y);for(P in o)if(Y=o[P],j=r[P],o.hasOwnProperty(P)&&Y!==j&&(Y!=null||j!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,n));break;default:It(e,n,P,Y,o,j)}return;default:if(ko(n)){for(var Xt in r)Y=r[Xt],r.hasOwnProperty(Xt)&&Y!==void 0&&!o.hasOwnProperty(Xt)&&_c(e,n,Xt,void 0,o,Y);for(Z in o)Y=o[Z],j=r[Z],!o.hasOwnProperty(Z)||Y===j||Y===void 0&&j===void 0||_c(e,n,Z,Y,o,j);return}}for(var L in r)Y=r[L],r.hasOwnProperty(L)&&Y!=null&&!o.hasOwnProperty(L)&&It(e,n,L,null,o,Y);for(K in o)Y=o[K],j=r[K],!o.hasOwnProperty(K)||Y===j||Y==null&&j==null||It(e,n,K,Y,o,j)}var Sc=null,Ac=null;function Ul(e){return e.nodeType===9?e:e.ownerDocument}function jg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Tc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var wc=null;function px(){var e=window.event;return e&&e.type==="popstate"?e===wc?!1:(wc=e,!0):(wc=null,!1)}var Vg=typeof setTimeout=="function"?setTimeout:void 0,gx=typeof clearTimeout=="function"?clearTimeout:void 0,$g=typeof Promise=="function"?Promise:void 0,mx=typeof queueMicrotask=="function"?queueMicrotask:typeof $g<"u"?function(e){return $g.resolve(null).then(e).catch(yx)}:Vg;function yx(e){setTimeout(function(){throw e})}function An(e){return e==="head"}function Zg(e,n){var r=n,o=0,h=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(0<o&&8>o){r=o;var b=e.ownerDocument;if(r&1&&or(b.documentElement),r&2&&or(b.body),r&4)for(r=b.head,or(r),b=r.firstChild;b;){var S=b.nextSibling,R=b.nodeName;b[Aa]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=S}}if(h===0){e.removeChild(d),mr(n);return}h--}else r==="$"||r==="$?"||r==="$!"?h++:o=r.charCodeAt(0)-48;else o=0;r=d}while(r);mr(n)}function Mc(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Mc(r),zo(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function bx(e,n,r,o){for(;e.nodeType===1;){var h=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Aa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Si(e.nextSibling),e===null)break}return null}function vx(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Si(e.nextSibling),e===null))return null;return e}function Ec(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function xx(e,n){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Si(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var Cc=null;function Qg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}function Kg(e,n,r){switch(n=Ul(r),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function or(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);zo(e)}var gi=new Map,Wg=new Set;function kl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ji=w.d;w.d={f:_x,r:Sx,D:Ax,C:Tx,L:wx,m:Mx,X:Cx,S:Ex,M:Rx};function _x(){var e=Ji.f(),n=Cl();return e||n}function Sx(e){var n=_s(e);n!==null&&n.tag===5&&n.type==="form"?bp(n):Ji.r(e)}var ea=typeof document>"u"?null:document;function Jg(e,n,r){var o=ea;if(o&&typeof n=="string"&&n){var h=oi(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),Wg.has(h)||(Wg.add(h),e={rel:e,crossOrigin:r,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Ae(n,"link",e),ge(n),o.head.appendChild(n)))}}function Ax(e){Ji.D(e),Jg("dns-prefetch",e,null)}function Tx(e,n){Ji.C(e,n),Jg("preconnect",e,n)}function wx(e,n,r){Ji.L(e,n,r);var o=ea;if(o&&e&&n){var h='link[rel="preload"][as="'+oi(n)+'"]';n==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+oi(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+oi(r.imageSizes)+'"]')):h+='[href="'+oi(e)+'"]';var d=h;switch(n){case"style":d=ia(e);break;case"script":d=na(e)}gi.has(d)||(e=m({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),gi.set(d,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(ur(d))||n==="script"&&o.querySelector(cr(d))||(n=o.createElement("link"),Ae(n,"link",e),ge(n),o.head.appendChild(n)))}}function Mx(e,n){Ji.m(e,n);var r=ea;if(r&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+oi(o)+'"][href="'+oi(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=na(e)}if(!gi.has(d)&&(e=m({rel:"modulepreload",href:e},n),gi.set(d,e),r.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(cr(d)))return}o=r.createElement("link"),Ae(o,"link",e),ge(o),r.head.appendChild(o)}}}function Ex(e,n,r){Ji.S(e,n,r);var o=ea;if(o&&e){var h=Ss(o).hoistableStyles,d=ia(e);n=n||"default";var b=h.get(d);if(!b){var S={loading:0,preload:null};if(b=o.querySelector(ur(d)))S.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":n},r),(r=gi.get(d))&&Rc(e,r);var R=b=o.createElement("link");ge(R),Ae(R,"link",e),R._p=new Promise(function(P,Z){R.onload=P,R.onerror=Z}),R.addEventListener("load",function(){S.loading|=1}),R.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Hl(b,n,o)}b={type:"stylesheet",instance:b,count:1,state:S},h.set(d,b)}}}function Cx(e,n){Ji.X(e,n);var r=ea;if(r&&e){var o=Ss(r).hoistableScripts,h=na(e),d=o.get(h);d||(d=r.querySelector(cr(h)),d||(e=m({src:e,async:!0},n),(n=gi.get(h))&&Oc(e,n),d=r.createElement("script"),ge(d),Ae(d,"link",e),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Rx(e,n){Ji.M(e,n);var r=ea;if(r&&e){var o=Ss(r).hoistableScripts,h=na(e),d=o.get(h);d||(d=r.querySelector(cr(h)),d||(e=m({src:e,async:!0,type:"module"},n),(n=gi.get(h))&&Oc(e,n),d=r.createElement("script"),ge(d),Ae(d,"link",e),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function tm(e,n,r,o){var h=(h=et.current)?kl(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=ia(r.href),r=Ss(h).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=ia(r.href);var d=Ss(h).hoistableStyles,b=d.get(e);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,b),(d=h.querySelector(ur(e)))&&!d._p&&(b.instance=d,b.state.loading=5),gi.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},gi.set(e,r),d||Ox(h,e,r,b.state))),n&&o===null)throw Error(s(528,""));return b}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=na(r),r=Ss(h).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ia(e){return'href="'+oi(e)+'"'}function ur(e){return'link[rel="stylesheet"]['+e+"]"}function em(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Ox(e,n,r,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ae(n,"link",r),ge(n),e.head.appendChild(n))}function na(e){return'[src="'+oi(e)+'"]'}function cr(e){return"script[async]"+e}function im(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+oi(r.href)+'"]');if(o)return n.instance=o,ge(o),o;var h=m({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ge(o),Ae(o,"style",h),Hl(o,r.precedence,e),n.instance=o;case"stylesheet":h=ia(r.href);var d=e.querySelector(ur(h));if(d)return n.state.loading|=4,n.instance=d,ge(d),d;o=em(r),(h=gi.get(h))&&Rc(o,h),d=(e.ownerDocument||e).createElement("link"),ge(d);var b=d;return b._p=new Promise(function(S,R){b.onload=S,b.onerror=R}),Ae(d,"link",o),n.state.loading|=4,Hl(d,r.precedence,e),n.instance=d;case"script":return d=na(r.src),(h=e.querySelector(cr(d)))?(n.instance=h,ge(h),h):(o=r,(h=gi.get(d))&&(o=m({},r),Oc(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),ge(h),Ae(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Hl(o,r.precedence,e));return n.instance}function Hl(e,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,b=0;b<o.length;b++){var S=o[b];if(S.dataset.precedence===n)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function Rc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Oc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Pl=null;function nm(e,n,r){if(Pl===null){var o=new Map,h=Pl=new Map;h.set(r,o)}else h=Pl,o=h.get(r),o||(o=new Map,h.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),h=0;h<r.length;h++){var d=r[h];if(!(d[Aa]||d[Me]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var b=d.getAttribute(n)||"";b=e+b;var S=o.get(b);S?S.push(d):o.set(b,[d])}}return o}function sm(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function zx(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function am(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var hr=null;function Dx(){}function Gx(e,n,r){if(hr===null)throw Error(s(475));var o=hr;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=ia(r.href),d=e.querySelector(ur(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Nl.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=d,ge(d);return}d=e.ownerDocument||e,r=em(r),(h=gi.get(h))&&Rc(r,h),d=d.createElement("link"),ge(d);var b=d;b._p=new Promise(function(S,R){b.onload=S,b.onerror=R}),Ae(d,"link",r),n.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=Nl.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function Bx(){if(hr===null)throw Error(s(475));var e=hr;return e.stylesheets&&e.count===0&&zc(e,e.stylesheets),0<e.count?function(n){var r=setTimeout(function(){if(e.stylesheets&&zc(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r)}}:null}function Nl(){if(this.count--,this.count===0){if(this.stylesheets)zc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fl=null;function zc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fl=new Map,n.forEach(Lx,e),Fl=null,Nl.call(e))}function Lx(e,n){if(!(n.state.loading&4)){var r=Fl.get(e);if(r)var o=r.get(null);else{r=new Map,Fl.set(e,r);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var b=h[d];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),o=b)}o&&r.set(null,o)}h=n.instance,b=h.getAttribute("data-precedence"),d=r.get(b)||o,d===o&&r.set(null,h),r.set(b,h),this.count++,o=Nl.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var fr={$$typeof:B,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Ux(e,n,r,o,h,d,b,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.hiddenUpdates=Eo(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function rm(e,n,r,o,h,d,b,S,R,P,Z,K){return e=new Ux(e,n,r,b,S,R,P,K),n=1,d===!0&&(n|=24),d=We(3,null,null,n),e.current=d,d.stateNode=e,n=fu(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:r,cache:n},mu(d),e}function lm(e){return e?(e=Bs,e):Bs}function om(e,n,r,o,h,d){h=lm(h),o.context===null?o.context=h:o.pendingContext=h,o=cn(n),o.payload={element:r},d=d===void 0?null:d,d!==null&&(o.callback=d),r=hn(e,o,n),r!==null&&(ni(r,e,n),Ya(r,e,n))}function um(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Dc(e,n){um(e,n),(e=e.alternate)&&um(e,n)}function cm(e){if(e.tag===13){var n=Gs(e,67108864);n!==null&&ni(n,e,67108864),Dc(e,67108864)}}var Yl=!0;function kx(e,n,r,o){var h=x.T;x.T=null;var d=w.p;try{w.p=2,Gc(e,n,r,o)}finally{w.p=d,x.T=h}}function Hx(e,n,r,o){var h=x.T;x.T=null;var d=w.p;try{w.p=8,Gc(e,n,r,o)}finally{w.p=d,x.T=h}}function Gc(e,n,r,o){if(Yl){var h=Bc(o);if(h===null)xc(e,n,o,Il,r),fm(e,o);else if(Nx(h,e,n,r,o))o.stopPropagation();else if(fm(e,o),n&4&&-1<Px.indexOf(e)){for(;h!==null;){var d=_s(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var b=Gn(d.pendingLanes);if(b!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var R=1<<31-Qe(b);S.entanglements[1]|=R,b&=~R}Di(d),(Ht&6)===0&&(Ml=$e()+500,ar(0))}}break;case 13:S=Gs(d,2),S!==null&&ni(S,d,2),Cl(),Dc(d,2)}if(d=Bc(o),d===null&&xc(e,n,o,Il,r),d===h)break;h=d}h!==null&&o.stopPropagation()}else xc(e,n,o,null,r)}}function Bc(e){return e=Po(e),Lc(e)}var Il=null;function Lc(e){if(Il=null,e=xs(e),e!==null){var n=u(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=c(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Il=e,null}function hm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wo()){case Mo:return 2;case Mf:return 8;case Lr:case wb:return 32;case Ef:return 268435456;default:return 32}default:return 32}}var Uc=!1,Tn=null,wn=null,Mn=null,dr=new Map,pr=new Map,En=[],Px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fm(e,n){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":wn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":dr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(n.pointerId)}}function gr(e,n,r,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=_s(n),n!==null&&cm(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function Nx(e,n,r,o,h){switch(n){case"focusin":return Tn=gr(Tn,e,n,r,o,h),!0;case"dragenter":return wn=gr(wn,e,n,r,o,h),!0;case"mouseover":return Mn=gr(Mn,e,n,r,o,h),!0;case"pointerover":var d=h.pointerId;return dr.set(d,gr(dr.get(d)||null,e,n,r,o,h)),!0;case"gotpointercapture":return d=h.pointerId,pr.set(d,gr(pr.get(d)||null,e,n,r,o,h)),!0}return!1}function dm(e){var n=xs(e.target);if(n!==null){var r=u(n);if(r!==null){if(n=r.tag,n===13){if(n=c(r),n!==null){e.blockedOn=n,Gb(e.priority,function(){if(r.tag===13){var o=ii();o=Co(o);var h=Gs(r,o);h!==null&&ni(h,r,o),Dc(r,o)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=Bc(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);Ho=o,r.target.dispatchEvent(o),Ho=null}else return n=_s(r),n!==null&&cm(n),e.blockedOn=r,!1;n.shift()}return!0}function pm(e,n,r){Xl(e)&&r.delete(n)}function Fx(){Uc=!1,Tn!==null&&Xl(Tn)&&(Tn=null),wn!==null&&Xl(wn)&&(wn=null),Mn!==null&&Xl(Mn)&&(Mn=null),dr.forEach(pm),pr.forEach(pm)}function jl(e,n){e.blockedOn===n&&(e.blockedOn=null,Uc||(Uc=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Fx)))}var ql=null;function gm(e){ql!==e&&(ql=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ql===e&&(ql=null);for(var n=0;n<e.length;n+=3){var r=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Lc(o||r)===null)continue;break}var d=_s(r);d!==null&&(e.splice(n,3),n-=3,Lu(d,{pending:!0,data:h,method:r.method,action:o},o,h))}}))}function mr(e){function n(R){return jl(R,e)}Tn!==null&&jl(Tn,e),wn!==null&&jl(wn,e),Mn!==null&&jl(Mn,e),dr.forEach(n),pr.forEach(n);for(var r=0;r<En.length;r++){var o=En[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<En.length&&(r=En[0],r.blockedOn===null);)dm(r),r.blockedOn===null&&En.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var h=r[o],d=r[o+1],b=h[Pe]||null;if(typeof d=="function")b||gm(r);else if(b){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,b=d[Pe]||null)S=b.formAction;else if(Lc(h)!==null)continue}else S=b.action;typeof S=="function"?r[o+1]=S:(r.splice(o,3),o-=3),gm(r)}}}function kc(e){this._internalRoot=e}Vl.prototype.render=kc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var r=n.current,o=ii();om(r,o,e,n,null,null)},Vl.prototype.unmount=kc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;om(e.current,2,null,e,null,null),Cl(),n[vs]=null}};function Vl(e){this._internalRoot=e}Vl.prototype.unstable_scheduleHydration=function(e){if(e){var n=Df();e={blockedOn:null,target:e,priority:n};for(var r=0;r<En.length&&n!==0&&n<En[r].priority;r++);En.splice(r,0,e),r===0&&dm(e)}};var mm=t.version;if(mm!=="19.1.0")throw Error(s(527,mm,"19.1.0"));w.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(n),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var Yx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{xa=$l.inject(Yx),Ze=$l}catch{}}return br.createRoot=function(e,n){if(!l(e))throw Error(s(299));var r=!1,o="",h=Dp,d=Gp,b=Bp,S=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(S=n.unstable_transitionCallbacks)),n=rm(e,1,!1,null,null,r,o,h,d,b,S,null),e[vs]=n.current,vc(e),new kc(n)},br.hydrateRoot=function(e,n,r){if(!l(e))throw Error(s(299));var o=!1,h="",d=Dp,b=Gp,S=Bp,R=null,P=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks),r.formState!==void 0&&(P=r.formState)),n=rm(e,1,!0,n,r??null,o,h,d,b,S,R,P),n.context=lm(null),r=n.current,o=ii(),o=Co(o),h=cn(o),h.callback=null,hn(r,h,o),r=o,n.current.lanes=r,Sa(n,r),Di(n),e[vs]=n.current,vc(e),new Vl(n)},br.version="19.1.0",br}var Mm;function t_(){if(Mm)return Nc.exports;Mm=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Nc.exports=Jx(),Nc.exports}var e_=t_();const i_="modulepreload",n_=function(a){return"/flappy_space/"+a},Em={},mo=function(t,i,s){let l=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));l=Promise.allSettled(i.map(p=>{if(p=n_(p),p in Em)return;Em[p]=!0;const g=p.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const y=document.createElement("link");if(y.rel=g?"stylesheet":i_,g||(y.as="script"),y.crossOrigin="",y.href=p,f&&y.setAttribute("nonce",f),document.head.appendChild(y),g)return new Promise((_,v)=>{y.addEventListener("load",_),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return l.then(c=>{for(const f of c||[])f.status==="rejected"&&u(f.reason);return t().catch(u)})};var ct=(a=>(a.Application="application",a.WebGLPipes="webgl-pipes",a.WebGLPipesAdaptor="webgl-pipes-adaptor",a.WebGLSystem="webgl-system",a.WebGPUPipes="webgpu-pipes",a.WebGPUPipesAdaptor="webgpu-pipes-adaptor",a.WebGPUSystem="webgpu-system",a.CanvasSystem="canvas-system",a.CanvasPipesAdaptor="canvas-pipes-adaptor",a.CanvasPipes="canvas-pipes",a.Asset="asset",a.LoadParser="load-parser",a.ResolveParser="resolve-parser",a.CacheParser="cache-parser",a.DetectionParser="detection-parser",a.MaskEffect="mask-effect",a.BlendMode="blend-mode",a.TextureSource="texture-source",a.Environment="environment",a.ShapeBuilder="shape-builder",a.Batcher="batcher",a))(ct||{});const xh=a=>{if(typeof a=="function"||typeof a=="object"&&a.extension){if(!a.extension)throw new Error("Extension class must have an extension object");a={...typeof a.extension!="object"?{type:a.extension}:a.extension,ref:a}}if(typeof a=="object")a={...a};else throw new Error("Invalid extension type");return typeof a.type=="string"&&(a.type=[a.type]),a},Zl=(a,t)=>xh(a).priority??t,we={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...a){return a.map(xh).forEach(t=>{t.type.forEach(i=>{var s,l;return(l=(s=this._removeHandlers)[i])==null?void 0:l.call(s,t)})}),this},add(...a){return a.map(xh).forEach(t=>{t.type.forEach(i=>{var u,c;const s=this._addHandlers,l=this._queue;s[i]?(c=s[i])==null||c.call(s,t):(l[i]=l[i]||[],(u=l[i])==null||u.push(t))})}),this},handle(a,t,i){var c;const s=this._addHandlers,l=this._removeHandlers;if(s[a]||l[a])throw new Error(`Extension type ${a} already has a handler`);s[a]=t,l[a]=i;const u=this._queue;return u[a]&&((c=u[a])==null||c.forEach(f=>t(f)),delete u[a]),this},handleByMap(a,t){return this.handle(a,i=>{i.name&&(t[i.name]=i.ref)},i=>{i.name&&delete t[i.name]})},handleByNamedList(a,t,i=-1){return this.handle(a,s=>{t.findIndex(u=>u.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((u,c)=>Zl(c.value,i)-Zl(u.value,i)))},s=>{const l=t.findIndex(u=>u.name===s.name);l!==-1&&t.splice(l,1)})},handleByList(a,t,i=-1){return this.handle(a,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((l,u)=>Zl(u,i)-Zl(l,i)))},s=>{const l=t.indexOf(s.ref);l!==-1&&t.splice(l,1)})},mixin(a,...t){for(const i of t)Object.defineProperties(a.prototype,Object.getOwnPropertyDescriptors(i))}},s_={extension:{type:ct.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await mo(()=>import("./browserAll-DtSZXexP.js"),__vite__mapDeps([0,1,2]))}},a_={extension:{type:ct.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await mo(()=>import("./webworkerAll-C4TbFvuD.js"),__vite__mapDeps([1,2]))}};class je{constructor(t,i,s){this._x=i||0,this._y=s||0,this._observer=t}clone(t){return new je(t??this._observer,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var Xc={exports:{}},Cm;function r_(){return Cm||(Cm=1,function(a){var t=Object.prototype.hasOwnProperty,i="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1));function l(p,g,m){this.fn=p,this.context=g,this.once=m||!1}function u(p,g,m,y,_){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new l(m,y||p,_),E=i?i+g:g;return p._events[E]?p._events[E].fn?p._events[E]=[p._events[E],v]:p._events[E].push(v):(p._events[E]=v,p._eventsCount++),p}function c(p,g){--p._eventsCount===0?p._events=new s:delete p._events[g]}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var g=[],m,y;if(this._eventsCount===0)return g;for(y in m=this._events)t.call(m,y)&&g.push(i?y.slice(1):y);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},f.prototype.listeners=function(g){var m=i?i+g:g,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,v=y.length,E=new Array(v);_<v;_++)E[_]=y[_].fn;return E},f.prototype.listenerCount=function(g){var m=i?i+g:g,y=this._events[m];return y?y.fn?1:y.length:0},f.prototype.emit=function(g,m,y,_,v,E){var M=i?i+g:g;if(!this._events[M])return!1;var T=this._events[M],C=arguments.length,z,B;if(T.fn){switch(T.once&&this.removeListener(g,T.fn,void 0,!0),C){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,m),!0;case 3:return T.fn.call(T.context,m,y),!0;case 4:return T.fn.call(T.context,m,y,_),!0;case 5:return T.fn.call(T.context,m,y,_,v),!0;case 6:return T.fn.call(T.context,m,y,_,v,E),!0}for(B=1,z=new Array(C-1);B<C;B++)z[B-1]=arguments[B];T.fn.apply(T.context,z)}else{var N=T.length,I;for(B=0;B<N;B++)switch(T[B].once&&this.removeListener(g,T[B].fn,void 0,!0),C){case 1:T[B].fn.call(T[B].context);break;case 2:T[B].fn.call(T[B].context,m);break;case 3:T[B].fn.call(T[B].context,m,y);break;case 4:T[B].fn.call(T[B].context,m,y,_);break;default:if(!z)for(I=1,z=new Array(C-1);I<C;I++)z[I-1]=arguments[I];T[B].fn.apply(T[B].context,z)}}return!0},f.prototype.on=function(g,m,y){return u(this,g,m,y,!1)},f.prototype.once=function(g,m,y){return u(this,g,m,y,!0)},f.prototype.removeListener=function(g,m,y,_){var v=i?i+g:g;if(!this._events[v])return this;if(!m)return c(this,v),this;var E=this._events[v];if(E.fn)E.fn===m&&(!_||E.once)&&(!y||E.context===y)&&c(this,v);else{for(var M=0,T=[],C=E.length;M<C;M++)(E[M].fn!==m||_&&!E[M].once||y&&E[M].context!==y)&&T.push(E[M]);T.length?this._events[v]=T.length===1?T[0]:T:c(this,v)}return this},f.prototype.removeAllListeners=function(g){var m;return g?(m=i?i+g:g,this._events[m]&&c(this,m)):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=i,f.EventEmitter=f,a.exports=f}(Xc)),Xc.exports}var l_=r_();const Mi=sf(l_),o_=Math.PI*2,u_=180/Math.PI,c_=Math.PI/180;class Re{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new Re(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return jc.x=0,jc.y=0,jc}}const jc=new Re;class Et{constructor(t=1,i=0,s=0,l=1,u=0,c=0){this.array=null,this.a=t,this.b=i,this.c=s,this.d=l,this.tx=u,this.ty=c}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,s,l,u,c){return this.a=t,this.b=i,this.c=s,this.d=l,this.tx=u,this.ty=c,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const s=i||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,i){i=i||new Re;const s=t.x,l=t.y;return i.x=this.a*s+this.c*l+this.tx,i.y=this.b*s+this.d*l+this.ty,i}applyInverse(t,i){i=i||new Re;const s=this.a,l=this.b,u=this.c,c=this.d,f=this.tx,p=this.ty,g=1/(s*c+u*-l),m=t.x,y=t.y;return i.x=c*g*m+-u*g*y+(p*u-f*c)*g,i.y=s*g*y+-l*g*m+(-p*s+f*l)*g,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),s=Math.sin(t),l=this.a,u=this.c,c=this.tx;return this.a=l*i-this.b*s,this.b=l*s+this.b*i,this.c=u*i-this.d*s,this.d=u*s+this.d*i,this.tx=c*i-this.ty*s,this.ty=c*s+this.ty*i,this}append(t){const i=this.a,s=this.b,l=this.c,u=this.d;return this.a=t.a*i+t.b*l,this.b=t.a*s+t.b*u,this.c=t.c*i+t.d*l,this.d=t.c*s+t.d*u,this.tx=t.tx*i+t.ty*l+this.tx,this.ty=t.tx*s+t.ty*u+this.ty,this}appendFrom(t,i){const s=t.a,l=t.b,u=t.c,c=t.d,f=t.tx,p=t.ty,g=i.a,m=i.b,y=i.c,_=i.d;return this.a=s*g+l*y,this.b=s*m+l*_,this.c=u*g+c*y,this.d=u*m+c*_,this.tx=f*g+p*y+i.tx,this.ty=f*m+p*_+i.ty,this}setTransform(t,i,s,l,u,c,f,p,g){return this.a=Math.cos(f+g)*u,this.b=Math.sin(f+g)*u,this.c=-Math.sin(f-p)*c,this.d=Math.cos(f-p)*c,this.tx=t-(s*this.a+l*this.c),this.ty=i-(s*this.b+l*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,l=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=l*t.a+this.d*t.c,this.d=l*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,s=this.b,l=this.c,u=this.d,c=t.pivot,f=-Math.atan2(-l,u),p=Math.atan2(s,i),g=Math.abs(f+p);return g<1e-5||Math.abs(o_-g)<1e-5?(t.rotation=p,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=f,t.skew.y=p),t.scale.x=Math.sqrt(i*i+s*s),t.scale.y=Math.sqrt(l*l+u*u),t.position.x=this.tx+(c.x*i+c.y*l),t.position.y=this.ty+(c.x*s+c.y*u),t}invert(){const t=this.a,i=this.b,s=this.c,l=this.d,u=this.tx,c=t*l-i*s;return this.a=l/c,this.b=-i/c,this.c=-s/c,this.d=t/c,this.tx=(s*this.ty-l*u)/c,this.ty=-(t*this.ty-i*u)/c,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Et;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return f_.identity()}static get shared(){return h_.identity()}}const h_=new Et,f_=new Et,ts=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],es=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],is=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ns=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],_h=[],$y=[],Ql=Math.sign;function d_(){for(let a=0;a<16;a++){const t=[];_h.push(t);for(let i=0;i<16;i++){const s=Ql(ts[a]*ts[i]+is[a]*es[i]),l=Ql(es[a]*ts[i]+ns[a]*es[i]),u=Ql(ts[a]*is[i]+is[a]*ns[i]),c=Ql(es[a]*is[i]+ns[a]*ns[i]);for(let f=0;f<16;f++)if(ts[f]===s&&es[f]===l&&is[f]===u&&ns[f]===c){t.push(f);break}}}for(let a=0;a<16;a++){const t=new Et;t.set(ts[a],es[a],is[a],ns[a],0,0),$y.push(t)}}d_();const Kt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:a=>ts[a],uY:a=>es[a],vX:a=>is[a],vY:a=>ns[a],inv:a=>a&8?a&15:-a&7,add:(a,t)=>_h[a][t],sub:(a,t)=>_h[a][Kt.inv(t)],rotate180:a=>a^4,isVertical:a=>(a&3)===2,byDirection:(a,t)=>Math.abs(a)*2<=Math.abs(t)?t>=0?Kt.S:Kt.N:Math.abs(t)*2<=Math.abs(a)?a>0?Kt.E:Kt.W:t>0?a>0?Kt.SE:Kt.SW:a>0?Kt.NE:Kt.NW,matrixAppendRotationInv:(a,t,i=0,s=0)=>{const l=$y[Kt.inv(t)];l.tx=i,l.ty=s,a.append(l)}},Kl=[new Re,new Re,new Re,new Re];class ue{constructor(t=0,i=0,s=0,l=0){this.type="rectangle",this.x=Number(t),this.y=Number(i),this.width=Number(s),this.height=Number(l)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new ue(0,0,0,0)}clone(){return new ue(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}strokeContains(t,i,s,l=.5){const{width:u,height:c}=this;if(u<=0||c<=0)return!1;const f=this.x,p=this.y,g=s*(1-l),m=s-g,y=f-g,_=f+u+g,v=p-g,E=p+c+g,M=f+m,T=f+u-m,C=p+m,z=p+c-m;return t>=y&&t<=_&&i>=v&&i<=E&&!(t>M&&t<T&&i>C&&i<z)}intersects(t,i){if(!i){const at=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=at)return!1;const it=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>it}const s=this.left,l=this.right,u=this.top,c=this.bottom;if(l<=s||c<=u)return!1;const f=Kl[0].set(t.left,t.top),p=Kl[1].set(t.left,t.bottom),g=Kl[2].set(t.right,t.top),m=Kl[3].set(t.right,t.bottom);if(g.x<=f.x||p.y<=f.y)return!1;const y=Math.sign(i.a*i.d-i.b*i.c);if(y===0||(i.apply(f,f),i.apply(p,p),i.apply(g,g),i.apply(m,m),Math.max(f.x,p.x,g.x,m.x)<=s||Math.min(f.x,p.x,g.x,m.x)>=l||Math.max(f.y,p.y,g.y,m.y)<=u||Math.min(f.y,p.y,g.y,m.y)>=c))return!1;const _=y*(p.y-f.y),v=y*(f.x-p.x),E=_*s+v*u,M=_*l+v*u,T=_*s+v*c,C=_*l+v*c;if(Math.max(E,M,T,C)<=_*f.x+v*f.y||Math.min(E,M,T,C)>=_*m.x+v*m.y)return!1;const z=y*(f.y-g.y),B=y*(g.x-f.x),N=z*s+B*u,I=z*l+B*u,V=z*s+B*c,$=z*l+B*c;return!(Math.max(N,I,V,$)<=z*f.x+B*f.y||Math.min(N,I,V,$)>=z*m.x+B*m.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),l=Math.max(this.y,t.y),u=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(s-i,0),this.y=l,this.height=Math.max(u-l,0),this}ceil(t=1,i=.001){const s=Math.ceil((this.x+this.width-i)*t)/t,l=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=s-this.x,this.height=l-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),l=Math.min(this.y,t.y),u=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=s-i,this.y=l,this.height=u-l,this}getBounds(t){return t||(t=new ue),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const i=t.x,s=t.y,l=t.x+t.width,u=t.y+t.height;return i>=this.x&&i<this.x+this.width&&s>=this.y&&s<this.y+this.height&&l>=this.x&&l<this.x+this.width&&u>=this.y&&u<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const qc={default:-1};function ce(a="default"){return qc[a]===void 0&&(qc[a]=-1),++qc[a]}const Rm={},Nt="8.0.0",p_="8.3.4";function Gt(a,t,i=3){if(Rm[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${a}`):(s=s.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${a}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${a}`),console.warn(s))),Rm[t]=!0}const Zy=()=>{};function yo(a){return a+=a===0?1:0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1}function Om(a){return!(a&a-1)&&!!a}function Qy(a){const t={};for(const i in a)a[i]!==void 0&&(t[i]=a[i]);return t}const zm=Object.create(null);function g_(a){const t=zm[a];return t===void 0&&(zm[a]=ce("resource")),t}const Ky=class Wy extends Mi{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Wy.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Gt(Nt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=g_(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Ky.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let m_=Ky;const Jy=class t0 extends Mi{constructor(t={}){super(),this.options=t,this.uid=ce("textureSource"),this._resourceType="textureSource",this._resourceId=ce("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...t0.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new m_(Qy(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var i,s;this.style!==t&&((i=this._style)==null||i.off("change",this._onStyleChange,this),this._style=t,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ce("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,i,s){s||(s=this._resolution),t||(t=this.width),i||(i=this.height);const l=Math.round(t*s),u=Math.round(i*s);return this.width=l/s,this.height=u/s,this._resolution=s,this.pixelWidth===l&&this.pixelHeight===u?!1:(this._refreshPOT(),this.pixelWidth=l,this.pixelHeight=u,this.emit("resize",this),this._resourceId=ce("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Om(this.pixelWidth)&&Om(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Jy.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Hi=Jy;class rf extends Hi{constructor(t){const i=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(i instanceof Float32Array?s="rgba32float":i instanceof Int32Array||i instanceof Uint32Array?s="rgba32uint":i instanceof Int16Array||i instanceof Uint16Array?s="rgba16uint":(i instanceof Int8Array,s="bgra8unorm")),super({...t,resource:i,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}rf.extension=ct.TextureSource;const Dm=new Et;class y_{constructor(t,i){this.mapCoord=new Et,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof i>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=i,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var i;this.texture!==t&&((i=this._texture)==null||i.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,i){i===void 0&&(i=t);const s=this.mapCoord;for(let l=0;l<t.length;l+=2){const u=t[l],c=t[l+1];i[l]=u*s.a+c*s.c+s.tx,i[l+1]=u*s.b+c*s.d+s.ty}return i}update(){const t=this._texture;this._updateID++;const i=t.uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const s=t.orig,l=t.trim;l&&(Dm.set(s.width/l.width,0,0,s.height/l.height,-l.x/l.width,-l.y/l.height),this.mapCoord.append(Dm));const u=t.source,c=this.uClampFrame,f=this.clampMargin/u._resolution,p=this.clampOffset/u._resolution;return c[0]=(t.frame.x+f+p)/u.width,c[1]=(t.frame.y+f+p)/u.height,c[2]=(t.frame.x+t.frame.width-f+p)/u.width,c[3]=(t.frame.y+t.frame.height-f+p)/u.height,this.uClampOffset[0]=this.clampOffset/u.pixelWidth,this.uClampOffset[1]=this.clampOffset/u.pixelHeight,this.isSimple=t.frame.width===u.width&&t.frame.height===u.height&&t.rotate===0,!0}}class Ct extends Mi{constructor({source:t,label:i,frame:s,orig:l,trim:u,defaultAnchor:c,defaultBorders:f,rotate:p,dynamic:g}={}){if(super(),this.uid=ce("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ue,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=i,this.source=(t==null?void 0:t.source)??new Hi,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=l||this.frame,this.trim=u,this.rotate=p??0,this.defaultAnchor=c,this.defaultBorders=f,this.destroyed=!1,this.dynamic=g||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new y_(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:i}=this,{width:s,height:l}=this._source,u=i.x/s,c=i.y/l,f=i.width/s,p=i.height/l;let g=this.rotate;if(g){const m=f/2,y=p/2,_=u+m,v=c+y;g=Kt.add(g,Kt.NW),t.x0=_+m*Kt.uX(g),t.y0=v+y*Kt.uY(g),g=Kt.add(g,2),t.x1=_+m*Kt.uX(g),t.y1=v+y*Kt.uY(g),g=Kt.add(g,2),t.x2=_+m*Kt.uX(g),t.y2=v+y*Kt.uY(g),g=Kt.add(g,2),t.x3=_+m*Kt.uX(g),t.y3=v+y*Kt.uY(g)}else t.x0=u,t.y0=c,t.x1=u+f,t.y1=c,t.x2=u+f,t.y2=c+p,t.x3=u,t.y3=c+p}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Gt(Nt,"Texture.baseTexture is now Texture.source"),this._source}}Ct.EMPTY=new Ct({label:"EMPTY",source:new Hi({label:"EMPTY"})});Ct.EMPTY.destroy=Zy;Ct.WHITE=new Ct({source:new rf({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Ct.WHITE.destroy=Zy;function b_(a,t,i){const{width:s,height:l}=i.orig,u=i.trim;if(u){const c=u.width,f=u.height;a.minX=u.x-t._x*s,a.maxX=a.minX+c,a.minY=u.y-t._y*l,a.maxY=a.minY+f}else a.minX=-t._x*s,a.maxX=a.minX+s,a.minY=-t._y*l,a.maxY=a.minY+l}const Gm=new Et;class Le{constructor(t=1/0,i=1/0,s=-1/0,l=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Gm,this.minX=t,this.minY=i,this.maxX=s,this.maxY=l}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ue);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Gm,this}set(t,i,s,l){this.minX=t,this.minY=i,this.maxX=s,this.maxY=l}addFrame(t,i,s,l,u){u||(u=this.matrix);const c=u.a,f=u.b,p=u.c,g=u.d,m=u.tx,y=u.ty;let _=this.minX,v=this.minY,E=this.maxX,M=this.maxY,T=c*t+p*i+m,C=f*t+g*i+y;T<_&&(_=T),C<v&&(v=C),T>E&&(E=T),C>M&&(M=C),T=c*s+p*i+m,C=f*s+g*i+y,T<_&&(_=T),C<v&&(v=C),T>E&&(E=T),C>M&&(M=C),T=c*t+p*l+m,C=f*t+g*l+y,T<_&&(_=T),C<v&&(v=C),T>E&&(E=T),C>M&&(M=C),T=c*s+p*l+m,C=f*s+g*l+y,T<_&&(_=T),C<v&&(v=C),T>E&&(E=T),C>M&&(M=C),this.minX=_,this.minY=v,this.maxX=E,this.maxY=M}addRect(t,i){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,i)}addBounds(t,i){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,i)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const i=this.minX,s=this.minY,l=this.maxX,u=this.maxY,{a:c,b:f,c:p,d:g,tx:m,ty:y}=t;let _=c*i+p*s+m,v=f*i+g*s+y;this.minX=_,this.minY=v,this.maxX=_,this.maxY=v,_=c*l+p*s+m,v=f*l+g*s+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=c*i+p*u+m,v=f*i+g*u+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=c*l+p*u+m,v=f*l+g*u+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,i,s,l){return this.minX<t&&(this.minX=t),this.maxX>i&&(this.maxX=i),this.minY<s&&(this.minY=s),this.maxY>l&&(this.maxY=l),this}pad(t,i=t){return this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Le(this.minX,this.minY,this.maxX,this.maxY)}scale(t,i=t){return this.minX*=t,this.minY*=i,this.maxX*=t,this.maxY*=i,this}get x(){return this.minX}set x(t){const i=this.maxX-this.minX;this.minX=t,this.maxX=t+i}get y(){return this.minY}set y(t){const i=this.maxY-this.minY;this.minY=t,this.maxY=t+i}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,i,s,l){let u=this.minX,c=this.minY,f=this.maxX,p=this.maxY;l||(l=this.matrix);const g=l.a,m=l.b,y=l.c,_=l.d,v=l.tx,E=l.ty;for(let M=i;M<s;M+=2){const T=t[M],C=t[M+1],z=g*T+y*C+v,B=m*T+_*C+E;u=z<u?z:u,c=B<c?B:c,f=z>f?z:f,p=B>p?B:p}this.minX=u,this.minY=c,this.maxX=f,this.maxY=p}containsPoint(t,i){return this.minX<=t&&this.minY<=i&&this.maxX>=t&&this.maxY>=i}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var v_={grad:.9,turn:360,rad:360/(2*Math.PI)},tn=function(a){return typeof a=="string"?a.length>0:typeof a=="number"},ve=function(a,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*a)/i+0},yi=function(a,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),a>i?i:a>t?a:t},e0=function(a){return(a=isFinite(a)?a%360:0)>0?a:a+360},Bm=function(a){return{r:yi(a.r,0,255),g:yi(a.g,0,255),b:yi(a.b,0,255),a:yi(a.a)}},Vc=function(a){return{r:ve(a.r),g:ve(a.g),b:ve(a.b),a:ve(a.a,3)}},x_=/^#([0-9a-f]{3,8})$/i,Wl=function(a){var t=a.toString(16);return t.length<2?"0"+t:t},i0=function(a){var t=a.r,i=a.g,s=a.b,l=a.a,u=Math.max(t,i,s),c=u-Math.min(t,i,s),f=c?u===t?(i-s)/c:u===i?2+(s-t)/c:4+(t-i)/c:0;return{h:60*(f<0?f+6:f),s:u?c/u*100:0,v:u/255*100,a:l}},n0=function(a){var t=a.h,i=a.s,s=a.v,l=a.a;t=t/360*6,i/=100,s/=100;var u=Math.floor(t),c=s*(1-i),f=s*(1-(t-u)*i),p=s*(1-(1-t+u)*i),g=u%6;return{r:255*[s,f,c,c,p,s][g],g:255*[p,s,s,f,c,c][g],b:255*[c,c,p,s,s,f][g],a:l}},Lm=function(a){return{h:e0(a.h),s:yi(a.s,0,100),l:yi(a.l,0,100),a:yi(a.a)}},Um=function(a){return{h:ve(a.h),s:ve(a.s),l:ve(a.l),a:ve(a.a,3)}},km=function(a){return n0((i=(t=a).s,{h:t.h,s:(i*=((s=t.l)<50?s:100-s)/100)>0?2*i/(s+i)*100:0,v:s+i,a:t.a}));var t,i,s},Rr=function(a){return{h:(t=i0(a)).h,s:(l=(200-(i=t.s))*(s=t.v)/100)>0&&l<200?i*s/100/(l<=100?l:200-l)*100:0,l:l/2,a:t.a};var t,i,s,l},__=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,S_=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,A_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,T_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Sh={string:[[function(a){var t=x_.exec(a);return t?(a=t[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:a.length===4?ve(parseInt(a[3]+a[3],16)/255,2):1}:a.length===6||a.length===8?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:a.length===8?ve(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var t=A_.exec(a)||T_.exec(a);return t?t[2]!==t[4]||t[4]!==t[6]?null:Bm({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(a){var t=__.exec(a)||S_.exec(a);if(!t)return null;var i,s,l=Lm({h:(i=t[1],s=t[2],s===void 0&&(s="deg"),Number(i)*(v_[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return km(l)},"hsl"]],object:[[function(a){var t=a.r,i=a.g,s=a.b,l=a.a,u=l===void 0?1:l;return tn(t)&&tn(i)&&tn(s)?Bm({r:Number(t),g:Number(i),b:Number(s),a:Number(u)}):null},"rgb"],[function(a){var t=a.h,i=a.s,s=a.l,l=a.a,u=l===void 0?1:l;if(!tn(t)||!tn(i)||!tn(s))return null;var c=Lm({h:Number(t),s:Number(i),l:Number(s),a:Number(u)});return km(c)},"hsl"],[function(a){var t=a.h,i=a.s,s=a.v,l=a.a,u=l===void 0?1:l;if(!tn(t)||!tn(i)||!tn(s))return null;var c=function(f){return{h:e0(f.h),s:yi(f.s,0,100),v:yi(f.v,0,100),a:yi(f.a)}}({h:Number(t),s:Number(i),v:Number(s),a:Number(u)});return n0(c)},"hsv"]]},Hm=function(a,t){for(var i=0;i<t.length;i++){var s=t[i][0](a);if(s)return[s,t[i][1]]}return[null,void 0]},w_=function(a){return typeof a=="string"?Hm(a.trim(),Sh.string):typeof a=="object"&&a!==null?Hm(a,Sh.object):[null,void 0]},$c=function(a,t){var i=Rr(a);return{h:i.h,s:yi(i.s+100*t,0,100),l:i.l,a:i.a}},Zc=function(a){return(299*a.r+587*a.g+114*a.b)/1e3/255},Pm=function(a,t){var i=Rr(a);return{h:i.h,s:i.s,l:yi(i.l+100*t,0,100),a:i.a}},Ah=function(){function a(t){this.parsed=w_(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return this.parsed!==null},a.prototype.brightness=function(){return ve(Zc(this.rgba),2)},a.prototype.isDark=function(){return Zc(this.rgba)<.5},a.prototype.isLight=function(){return Zc(this.rgba)>=.5},a.prototype.toHex=function(){return t=Vc(this.rgba),i=t.r,s=t.g,l=t.b,c=(u=t.a)<1?Wl(ve(255*u)):"","#"+Wl(i)+Wl(s)+Wl(l)+c;var t,i,s,l,u,c},a.prototype.toRgb=function(){return Vc(this.rgba)},a.prototype.toRgbString=function(){return t=Vc(this.rgba),i=t.r,s=t.g,l=t.b,(u=t.a)<1?"rgba("+i+", "+s+", "+l+", "+u+")":"rgb("+i+", "+s+", "+l+")";var t,i,s,l,u},a.prototype.toHsl=function(){return Um(Rr(this.rgba))},a.prototype.toHslString=function(){return t=Um(Rr(this.rgba)),i=t.h,s=t.s,l=t.l,(u=t.a)<1?"hsla("+i+", "+s+"%, "+l+"%, "+u+")":"hsl("+i+", "+s+"%, "+l+"%)";var t,i,s,l,u},a.prototype.toHsv=function(){return t=i0(this.rgba),{h:ve(t.h),s:ve(t.s),v:ve(t.v),a:ve(t.a,3)};var t},a.prototype.invert=function(){return Gi({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},a.prototype.saturate=function(t){return t===void 0&&(t=.1),Gi($c(this.rgba,t))},a.prototype.desaturate=function(t){return t===void 0&&(t=.1),Gi($c(this.rgba,-t))},a.prototype.grayscale=function(){return Gi($c(this.rgba,-1))},a.prototype.lighten=function(t){return t===void 0&&(t=.1),Gi(Pm(this.rgba,t))},a.prototype.darken=function(t){return t===void 0&&(t=.1),Gi(Pm(this.rgba,-t))},a.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},a.prototype.alpha=function(t){return typeof t=="number"?Gi({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):ve(this.rgba.a,3);var i},a.prototype.hue=function(t){var i=Rr(this.rgba);return typeof t=="number"?Gi({h:t,s:i.s,l:i.l,a:i.a}):ve(i.h)},a.prototype.isEqual=function(t){return this.toHex()===Gi(t).toHex()},a}(),Gi=function(a){return a instanceof Ah?a:new Ah(a)},Nm=[],M_=function(a){a.forEach(function(t){Nm.indexOf(t)<0&&(t(Ah,Sh),Nm.push(t))})};function E_(a,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var l in i)s[i[l]]=l;var u={};a.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var f,p,g=s[this.toHex()];if(g)return g;if(c!=null&&c.closest){var m=this.toRgb(),y=1/0,_="black";if(!u.length)for(var v in i)u[v]=new a(i[v]).toRgb();for(var E in i){var M=(f=m,p=u[E],Math.pow(f.r-p.r,2)+Math.pow(f.g-p.g,2)+Math.pow(f.b-p.b,2));M<y&&(y=M,_=E)}return _}},t.string.push([function(c){var f=c.toLowerCase(),p=f==="transparent"?"#0000":i[f];return p?new a(p).toRgb():null},"name"])}M_([E_]);const fa=class wr{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof wr)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,i){const s=typeof t;if(s!==typeof i)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===i;if(Array.isArray(t)&&Array.isArray(i)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(i))return t.length!==i.length?!1:t.every((u,c)=>u===i[c]);if(t!==null&&i!==null){const u=Object.keys(t),c=Object.keys(i);return u.length!==c.length?!1:u.every(f=>t[f]===i[f])}return t===i}toRgba(){const[t,i,s,l]=this._components;return{r:t,g:i,b:s,a:l}}toRgb(){const[t,i,s]=this._components;return{r:t,g:i,b:s}}toRgbaString(){const[t,i,s]=this.toUint8RgbArray();return`rgba(${t},${i},${s},${this.alpha})`}toUint8RgbArray(t){const[i,s,l]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(i*255),t[1]=Math.round(s*255),t[2]=Math.round(l*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[i,s,l,u]=this._components;return t[0]=i,t[1]=s,t[2]=l,t[3]=u,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[i,s,l]=this._components;return t[0]=i,t[1]=s,t[2]=l,t}toNumber(){return this._int}toBgrNumber(){const[t,i,s]=this.toUint8RgbArray();return(s<<16)+(i<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[i,s,l,u]=wr._temp.setValue(t)._components;return this._components[0]*=i,this._components[1]*=s,this._components[2]*=l,this._components[3]*=u,this._refreshInt(),this._value=null,this}premultiply(t,i=!0){return i&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,i=!0){if(t===1)return(255<<24)+this._int;if(t===0)return i?0:this._int;let s=this._int>>16&255,l=this._int>>8&255,u=this._int&255;return i&&(s=s*t+.5|0,l=l*t+.5|0,u=u*t+.5|0),(t*255<<24)+(s<<16)+(l<<8)+u}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const i=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-i.length)+i}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let i,s,l,u;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const c=t;i=(c>>16&255)/255,s=(c>>8&255)/255,l=(c&255)/255,u=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[i,s,l,u=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[i,s,l,u=255]=t,i/=255,s/=255,l/=255,u/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const f=wr.HEX_PATTERN.exec(t);f&&(t=`#${f[2]}`)}const c=Gi(t);c.isValid()&&({r:i,g:s,b:l,a:u}=c.rgba,i/=255,s/=255,l/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=s,this._components[2]=l,this._components[3]=u,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,i,s]=this._components;this._int=(t*255<<16)+(i*255<<8)+(s*255|0)}_clamp(t,i=0,s=1){return typeof t=="number"?Math.min(Math.max(t,i),s):(t.forEach((l,u)=>{t[u]=Math.min(Math.max(l,i),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof wr||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};fa.shared=new fa;fa._temp=new fa;fa.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let he=fa;const C_={cullArea:null,cullable:!1,cullableChildren:!0};class lf{constructor(t,i){this._pool=[],this._count=0,this._index=0,this._classType=t,i&&this.prepopulate(i)}prepopulate(t){for(let i=0;i<t;i++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var s;let i;return this._index>0?i=this._pool[--this._index]:i=new this._classType,(s=i.init)==null||s.call(i,t),i}return(t){var i;(i=t.reset)==null||i.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class R_{constructor(){this._poolsByClass=new Map}prepopulate(t,i){this.getPool(t).prepopulate(i)}get(t,i){return this.getPool(t).get(i)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new lf(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(i=>{const s=t[i._classType.name]?i._classType.name+i._classType.ID:i._classType.name;t[s]={free:i.totalFree,used:i.totalUsed,size:i.totalSize}}),t}}const en=new R_,O_={get isCachedAsTexture(){var a;return!!((a=this.renderGroup)!=null&&a.isCachedAsTexture)},cacheAsTexture(a){typeof a=="boolean"&&a===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(a===!0?{}:a))},updateCacheTexture(){var a;(a=this.renderGroup)==null||a.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(a){Gt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(a)}};function z_(a,t,i){const s=a.length;let l;if(t>=s||i===0)return;i=t+i>s?s-t:i;const u=s-i;for(l=t;l<u;++l)a[l]=a[l+i];a.length=u}const D_={allowChildren:!0,removeChildren(a=0,t){const i=t??this.children.length,s=i-a,l=[];if(s>0&&s<=i){for(let c=i-1;c>=a;c--){const f=this.children[c];f&&(l.push(f),f.parent=null)}z_(this.children,a,i);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(l);for(let c=0;c<l.length;++c)this.emit("childRemoved",l[c],this,c),l[c].emit("removed",this);return l.length>0&&this._didViewChangeTick++,l}else if(s===0&&this.children.length===0)return l;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(a){const t=this.getChildAt(a);return this.removeChild(t)},getChildAt(a){if(a<0||a>=this.children.length)throw new Error(`getChildAt: Index (${a}) does not exist.`);return this.children[a]},setChildIndex(a,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(a),this.addChildAt(a,t)},getChildIndex(a){const t=this.children.indexOf(a);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(a,t){this.allowChildren||Gt(Nt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:i}=this;if(t<0||t>i.length)throw new Error(`${a}addChildAt: The index ${t} supplied is out of bounds ${i.length}`);if(a.parent){const l=a.parent.children.indexOf(a);if(a.parent===this&&l===t)return a;l!==-1&&a.parent.children.splice(l,1)}t===i.length?i.push(a):i.splice(t,0,a),a.parent=this,a.didChange=!0,a._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(a),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",a,this,t),a.emit("added",this),a},swapChildren(a,t){if(a===t)return;const i=this.getChildIndex(a),s=this.getChildIndex(t);this.children[i]=t,this.children[s]=a;const l=this.renderGroup||this.parentRenderGroup;l&&(l.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var a;(a=this.parent)==null||a.removeChild(this)},reparentChild(...a){return a.length===1?this.reparentChildAt(a[0],this.children.length):(a.forEach(t=>this.reparentChildAt(t,this.children.length)),a[0])},reparentChildAt(a,t){if(a.parent===this)return this.setChildIndex(a,t),a;const i=a.worldTransform.clone();a.removeFromParent(),this.addChildAt(a,t);const s=this.worldTransform.clone();return s.invert(),i.prepend(s),a.setFromMatrix(i),a}},G_={collectRenderables(a,t,i){this.parentRenderLayer&&this.parentRenderLayer!==i||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(a,t,i):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,a):this.collectRenderablesWithEffects(a,t,i))},collectRenderablesSimple(a,t,i){const s=this.children,l=s.length;for(let u=0;u<l;u++)s[u].collectRenderables(a,t,i)},collectRenderablesWithEffects(a,t,i){const{renderPipes:s}=t;for(let l=0;l<this.effects.length;l++){const u=this.effects[l];s[u.pipe].push(u,this,a)}this.collectRenderablesSimple(a,t,i);for(let l=this.effects.length-1;l>=0;l--){const u=this.effects[l];s[u.pipe].pop(u,this,a)}}};class Fm{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class B_{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let i=0;i<this._tests.length;i++){const s=this._tests[i];if(s.test(t))return en.get(s.maskClass,t)}return t}returnMaskEffect(t){en.return(t)}}const Th=new B_;we.handleByList(ct.MaskEffect,Th._effectClasses);const L_={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)},addEffect(a){this.effects.indexOf(a)===-1&&(this.effects.push(a),this.effects.sort((i,s)=>i.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(a){const t=this.effects.indexOf(a);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(a){const t=this._maskEffect;(t==null?void 0:t.mask)!==a&&(t&&(this.removeEffect(t),Th.returnMaskEffect(t),this._maskEffect=null),a!=null&&(this._maskEffect=Th.getMaskEffect(a),this.addEffect(this._maskEffect)))},setMask(a){this._maskOptions={...this._maskOptions,...a},a.mask&&(this.mask=a.mask),this._markStructureAsChanged()},get mask(){var a;return(a=this._maskEffect)==null?void 0:a.mask},set filters(a){var u;!Array.isArray(a)&&a&&(a=[a]);const t=this._filterEffect||(this._filterEffect=new Fm);a=a;const i=(a==null?void 0:a.length)>0,s=((u=t.filters)==null?void 0:u.length)>0,l=i!==s;a=Array.isArray(a)?a.slice(0):a,t.filters=Object.freeze(a),l&&(i?this.addEffect(t):(this.removeEffect(t),t.filters=a??null))},get filters(){var a;return(a=this._filterEffect)==null?void 0:a.filters},set filterArea(a){this._filterEffect||(this._filterEffect=new Fm),this._filterEffect.filterArea=a},get filterArea(){var a;return(a=this._filterEffect)==null?void 0:a.filterArea}},U_={label:null,get name(){return Gt(Nt,"Container.name property has been removed, use Container.label instead"),this.label},set name(a){Gt(Nt,"Container.name property has been removed, use Container.label instead"),this.label=a},getChildByName(a,t=!1){return this.getChildByLabel(a,t)},getChildByLabel(a,t=!1){const i=this.children;for(let s=0;s<i.length;s++){const l=i[s];if(l.label===a||a instanceof RegExp&&a.test(l.label))return l}if(t)for(let s=0;s<i.length;s++){const u=i[s].getChildByLabel(a,!0);if(u)return u}return null},getChildrenByLabel(a,t=!1,i=[]){const s=this.children;for(let l=0;l<s.length;l++){const u=s[l];(u.label===a||a instanceof RegExp&&a.test(u.label))&&i.push(u)}if(t)for(let l=0;l<s.length;l++)s[l].getChildrenByLabel(a,!0,i);return i}},Be=new lf(Et),nn=new lf(Le),k_=new Et,H_={getFastGlobalBounds(a,t){t||(t=new Le),t.clear(),this._getGlobalBoundsRecursive(!!a,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const i=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(i.worldTransform),t},_getGlobalBoundsRecursive(a,t,i){let s=t;if(a&&this.parentRenderLayer&&this.parentRenderLayer!==i||this.localDisplayStatus!==7||!this.measurable)return;const l=!!this.effects.length;if((this.renderGroup||l)&&(s=nn.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const c=this.bounds;s.addFrame(c.minX,c.minY,c.maxX,c.maxY,this.groupTransform)}const u=this.children;for(let c=0;c<u.length;c++)u[c]._getGlobalBoundsRecursive(a,s,i)}if(l){let u=!1;const c=this.renderGroup||this.parentRenderGroup;for(let f=0;f<this.effects.length;f++)this.effects[f].addBounds&&(u||(u=!0,s.applyMatrix(c.worldTransform)),this.effects[f].addBounds(s,!0));u&&(s.applyMatrix(c.worldTransform.copyTo(k_).invert()),t.addBounds(s,this.relativeGroupTransform)),t.addBounds(s),nn.return(s)}else this.renderGroup&&(t.addBounds(s,this.relativeGroupTransform),nn.return(s))}};function s0(a,t,i){i.clear();let s,l;return a.parent?t?s=a.parent.worldTransform:(l=Be.get().identity(),s=of(a,l)):s=Et.IDENTITY,a0(a,i,s,t),l&&Be.return(l),i.isValid||i.set(0,0,0,0),i}function a0(a,t,i,s){var f,p;if(!a.visible||!a.measurable)return;let l;s?l=a.worldTransform:(a.updateLocalTransform(),l=Be.get(),l.appendFrom(a.localTransform,i));const u=t,c=!!a.effects.length;if(c&&(t=nn.get().clear()),a.boundsArea)t.addRect(a.boundsArea,l);else{a.bounds&&(t.matrix=l,t.addBounds(a.bounds));for(let g=0;g<a.children.length;g++)a0(a.children[g],t,l,s)}if(c){for(let g=0;g<a.effects.length;g++)(p=(f=a.effects[g]).addBounds)==null||p.call(f,t);u.addBounds(t,Et.IDENTITY),nn.return(t)}s||Be.return(l)}function of(a,t){const i=a.parent;return i&&(of(i,t),i.updateLocalTransform(),t.append(i.localTransform)),t}function r0(a,t){if(a===16777215||!t)return t;if(t===16777215||!a)return a;const i=a>>16&255,s=a>>8&255,l=a&255,u=t>>16&255,c=t>>8&255,f=t&255,p=i*u/255|0,g=s*c/255|0,m=l*f/255|0;return(p<<16)+(g<<8)+m}const Ym=16777215;function Im(a,t){return a===Ym?t:t===Ym?a:r0(a,t)}function uo(a){return((a&255)<<16)+(a&65280)+(a>>16&255)}const P_={getGlobalAlpha(a){if(a)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,i=this.parent;for(;i;)t*=i.alpha,i=i.parent;return t},getGlobalTransform(a,t){if(t)return a.copyFrom(this.worldTransform);this.updateLocalTransform();const i=of(this,Be.get().identity());return a.appendFrom(this.localTransform,i),Be.return(i),a},getGlobalTint(a){if(a)return this.renderGroup?uo(this.renderGroup.worldColor):this.parentRenderGroup?uo(Im(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,i=this.parent;for(;i;)t=Im(t,i.localColor),i=i.parent;return uo(t)}};let Qc=0;const Xm=500;function Wt(...a){Qc!==Xm&&(Qc++,Qc===Xm?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...a))}function l0(a,t,i){return t.clear(),i||(i=Et.IDENTITY),o0(a,t,i,a,!0),t.isValid||t.set(0,0,0,0),t}function o0(a,t,i,s,l){var p,g;let u;if(l)u=Be.get(),u=i.copyTo(u);else{if(!a.visible||!a.measurable)return;a.updateLocalTransform();const m=a.localTransform;u=Be.get(),u.appendFrom(m,i)}const c=t,f=!!a.effects.length;if(f&&(t=nn.get().clear()),a.boundsArea)t.addRect(a.boundsArea,u);else{a.renderPipeId&&(t.matrix=u,t.addBounds(a.bounds));const m=a.children;for(let y=0;y<m.length;y++)o0(m[y],t,u,s,!1)}if(f){for(let m=0;m<a.effects.length;m++)(g=(p=a.effects[m]).addLocalBounds)==null||g.call(p,t,s);c.addBounds(t,Et.IDENTITY),nn.return(t)}Be.return(u)}function u0(a,t){const i=a.children;for(let s=0;s<i.length;s++){const l=i[s],u=l.uid,c=(l._didViewChangeTick&65535)<<16|l._didContainerChangeTick&65535,f=t.index;(t.data[f]!==u||t.data[f+1]!==c)&&(t.data[t.index]=u,t.data[t.index+1]=c,t.didChange=!0),t.index=f+2,l.children.length&&u0(l,t)}return t.didChange}const N_=new Et,F_={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(a,t){const i=Math.sign(this.scale.x)||1;t!==0?this.scale.x=a/t*i:this.scale.x=i},_setHeight(a,t){const i=Math.sign(this.scale.y)||1;t!==0?this.scale.y=a/t*i:this.scale.y=i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Le});const a=this._localBoundsCacheData;return a.index=1,a.didChange=!1,a.data[0]!==this._didViewChangeTick&&(a.didChange=!0,a.data[0]=this._didViewChangeTick),u0(this,a),a.didChange&&l0(this,a.localBounds,N_),a.localBounds},getBounds(a,t){return s0(this,a,t||new Le)}},Y_={_onRender:null,set onRender(a){const t=this.renderGroup||this.parentRenderGroup;if(!a){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=a},get onRender(){return this._onRender}},I_={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(a){this._zIndex!==a&&(this._zIndex=a,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(X_))}};function X_(a,t){return a._zIndex-t._zIndex}const j_={getGlobalPosition(a=new Re,t=!1){return this.parent?this.parent.toGlobal(this._position,a,t):(a.x=this._position.x,a.y=this._position.y),a},toGlobal(a,t,i=!1){const s=this.getGlobalTransform(Be.get(),i);return t=s.apply(a,t),Be.return(s),t},toLocal(a,t,i,s){t&&(a=t.toGlobal(a,i,s));const l=this.getGlobalTransform(Be.get(),s);return i=l.applyInverse(a,i),Be.return(l),i}};class c0{constructor(){this.uid=ce("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let q_=0;class V_{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,i,s){const l=new Hi({...this.textureOptions,width:t,height:i,resolution:1,antialias:s,autoGarbageCollect:!1});return new Ct({source:l,label:`texturePool_${q_++}`})}getOptimalTexture(t,i,s=1,l){let u=Math.ceil(t*s-1e-6),c=Math.ceil(i*s-1e-6);u=yo(u),c=yo(c);const f=(u<<17)+(c<<1)+(l?1:0);this._texturePool[f]||(this._texturePool[f]=[]);let p=this._texturePool[f].pop();return p||(p=this.createTexture(u,c,l)),p.source._resolution=s,p.source.width=u/s,p.source.height=c/s,p.source.pixelWidth=u,p.source.pixelHeight=c,p.frame.x=0,p.frame.y=0,p.frame.width=t,p.frame.height=i,p.updateUvs(),this._poolKeyHash[p.uid]=f,p}getSameSizeTexture(t,i=!1){const s=t.source;return this.getOptimalTexture(t.width,t.height,s._resolution,i)}returnTexture(t){const i=this._poolKeyHash[t.uid];this._texturePool[i].push(t)}clear(t){if(t=t!==!1,t)for(const i in this._texturePool){const s=this._texturePool[i];if(s)for(let l=0;l<s.length;l++)s[l].destroy(!0)}this._texturePool={}}}const $_=new V_;class Z_{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Et,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new c0,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const i=t.children;for(let s=0;s<i.length;s++){const l=i[s];l._updateFlags=15,this.addChild(l)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&($_.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const i=this.childrenToUpdate[t];i.list.fill(null),i.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const i=this.renderGroupChildren.indexOf(t);i>-1&&this.renderGroupChildren.splice(i,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const i=t.children;for(let s=0;s<i.length;s++)this.addChild(i[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const i=t.children;for(let s=0;s<i.length;s++)this.removeChild(i[s])}removeChildren(t){for(let i=0;i<t.length;i++)this.removeChild(t[i])}onChildUpdate(t){let i=this.childrenToUpdate[t.relativeRenderGroupDepth];i||(i=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),i.list[i.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let i=0;i<this._onRenderContainers.length;i++)this._onRenderContainers[i]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const i=this.root.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],t);return t}_getChildren(t,i=[]){if(i.push(t),t.renderGroup)return i;const s=t.children;for(let l=0;l<s.length;l++)this._getChildren(s[l],i);return i}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Et),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Et),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Et),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Q_(a,t,i={}){for(const s in t)!i[s]&&t[s]!==void 0&&(a[s]=t[s])}const Kc=new je(null),Wc=new je(null),Jc=new je(null,1,1),jm=1,K_=2,th=4;class bi extends Mi{constructor(t={}){var i,s;super(),this.uid=ce("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Et,this.relativeGroupTransform=new Et,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new je(this,0,0),this._scale=Jc,this._pivot=Wc,this._skew=Kc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Q_(this,t,{children:!0,parent:!0,effects:!0}),(i=t.children)==null||i.forEach(l=>this.addChild(l)),(s=t.parent)==null||s.addChild(this)}static mixin(t){Gt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),we.mixin(bi,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Gt(Nt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let l=0;l<t.length;l++)this.addChild(t[l]);return t[0]}const i=t[0],s=this.renderGroup||this.parentRenderGroup;return i.parent===this?(this.children.splice(this.children.indexOf(i),1),this.children.push(i),s&&(s.structureDidChange=!0),i):(i.parent&&i.parent.removeChild(i),this.children.push(i),this.sortableChildren&&(this.sortDirty=!0),i.parent=this,i.didChange=!0,i._updateFlags=15,s&&s.addChild(i),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this),this._didViewChangeTick++,i._zIndex!==0&&i.depthOfChildModified(),i)}removeChild(...t){if(t.length>1){for(let l=0;l<t.length;l++)this.removeChild(t[l]);return t[0]}const i=t[0],s=this.children.indexOf(i);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(i):this.parentRenderGroup&&this.parentRenderGroup.removeChild(i),i.parentRenderLayer&&i.parentRenderLayer.detach(i),i.parent=null,this.emit("childRemoved",i,this,s),i.emit("removed",this)),i}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=en.get(Z_,this),this.groupTransform=Et.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),en.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Et),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*u_}set angle(t){this.rotation=t*c_}get pivot(){return this._pivot===Wc&&(this._pivot=new je(this,0,0)),this._pivot}set pivot(t){this._pivot===Wc&&(this._pivot=new je(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Kc&&(this._skew=new je(this,0,0)),this._skew}set skew(t){this._skew===Kc&&(this._skew=new je(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Jc&&(this._scale=new je(this,1,1)),this._scale}set scale(t){this._scale===Jc&&(this._scale=new je(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const i=this.getLocalBounds().width;this._setWidth(t,i)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const i=this.getLocalBounds().height;this._setHeight(t,i)}getSize(t){t||(t={});const i=this.getLocalBounds();return t.width=Math.abs(this.scale.x*i.width),t.height=Math.abs(this.scale.y*i.height),t}setSize(t,i){const s=this.getLocalBounds();typeof t=="object"?(i=t.height??t.width,t=t.width):i??(i=t),t!==void 0&&this._setWidth(t,s.width),i!==void 0&&this._setHeight(i,s.height)}_updateSkew(){const t=this._rotation,i=this._skew;this._cx=Math.cos(t+i._y),this._sx=Math.sin(t+i._y),this._cy=-Math.sin(t-i._x),this._sy=Math.cos(t-i._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const i=this.localTransform,s=this._scale,l=this._pivot,u=this._position,c=s._x,f=s._y,p=l._x,g=l._y;i.a=this._cx*c,i.b=this._sx*c,i.c=this._cy*f,i.d=this._sy*f,i.tx=u._x-(p*i.a+g*i.c),i.ty=u._y-(p*i.b+g*i.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=jm,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=he.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=jm,this._onUpdate())}get tint(){return uo(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=K_,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const i=t?2:0;(this.localDisplayStatus&2)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=th,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const i=t?0:4;(this.localDisplayStatus&4)!==i&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=th,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const i=t?1:0;(this.localDisplayStatus&1)!==i&&(this._updateFlags|=th,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var l;if(this.destroyed)return;this.destroyed=!0;let i;if(this.children.length&&(i=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&i)for(let u=0;u<i.length;++u)i[u].destroy(t);(l=this.renderGroup)==null||l.destroy(),this.renderGroup=null}}we.mixin(bi,D_,H_,j_,Y_,F_,L_,U_,I_,C_,O_,P_,G_);class uf extends bi{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Le(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const i=this.bounds,{x:s,y:l}=t;return s>=i.minX&&s<=i.maxX&&l>=i.minY&&l<=i.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,i,s){const{renderPipes:l,renderableGC:u}=i;l.blendMode.setBlendMode(this,this.groupBlendMode,t),l[this.renderPipeId].addRenderable(this,t),u.addRenderable(this),this.didViewUpdate=!1;const f=this.children,p=f.length;for(let g=0;g<p;g++)f[g].collectRenderables(t,i,s)}}class da extends uf{constructor(t=Ct.EMPTY){t instanceof Ct&&(t={texture:t});const{texture:i=Ct.EMPTY,anchor:s,roundPixels:l,width:u,height:c,...f}=t;super({label:"Sprite",...f}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new je({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:i.defaultAnchor&&(this.anchor=i.defaultAnchor),this.texture=i,this.allowChildren=!1,this.roundPixels=l??!1,u!==void 0&&(this.width=u),c!==void 0&&(this.height=c)}static from(t,i=!1){return t instanceof Ct?new da(t):new da(Ct.from(t,i))}set texture(t){t||(t=Ct.EMPTY);const i=this._texture;i!==t&&(i&&i.dynamic&&i.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return b_(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Gt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,i=this._texture,s=this._bounds,{width:l,height:u}=i.orig;s.minX=-t._x*l,s.maxX=s.minX+l,s.minY=-t._y*u,s.maxY=s.minY+u}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,i){typeof t=="object"?(i=t.height??t.width,t=t.width):i??(i=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),i!==void 0&&this._setHeight(i,this._texture.orig.height)}}const W_=new Le;function h0(a,t,i){const s=W_;a.measurable=!0,s0(a,i,s),t.addBoundsMask(s),a.measurable=!1}function f0(a,t,i){const s=nn.get();a.measurable=!0;const l=Be.get().identity(),u=d0(a,i,l);l0(a,s,u),a.measurable=!1,t.addBoundsMask(s),Be.return(l),nn.return(s)}function d0(a,t,i){return a?(a!==t&&(d0(a.parent,t,i),a.updateLocalTransform(),i.append(a.localTransform)),i):(Wt("Mask bounds, renderable is not inside the root container"),i)}class p0{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof da),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,i){this.inverse||h0(this.mask,t,i)}addLocalBounds(t,i){f0(this.mask,t,i)}containsPoint(t,i){const s=this.mask;return i(s,t)}destroy(){this.reset()}static test(t){return t instanceof da}}p0.extension=ct.MaskEffect;class g0{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}g0.extension=ct.MaskEffect;class m0{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,i){h0(this.mask,t,i)}addLocalBounds(t,i){f0(this.mask,t,i)}containsPoint(t,i){const s=this.mask;return i(s,t)}destroy(){this.reset()}static test(t){return t instanceof bi}}m0.extension=ct.MaskEffect;const J_={createCanvas:(a,t)=>{const i=document.createElement("canvas");return i.width=a,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(a,t)=>fetch(a,t),parseXML:a=>new DOMParser().parseFromString(a,"text/xml")};let qm=J_;const ne={get(){return qm},set(a){qm=a}};class y0 extends Hi{constructor(t){t.resource||(t.resource=ne.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,i=this.height,s=this._resolution){const l=super.resize(t,i,s);return l&&this.resizeCanvas(),l}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}y0.extension=ct.TextureSource;class ys extends Hi{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const i=ne.get().createCanvas(t.resource.width,t.resource.height);i.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=i,Wt("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}ys.extension=ct.TextureSource;var wh=(a=>(a[a.INTERACTION=50]="INTERACTION",a[a.HIGH=25]="HIGH",a[a.NORMAL=0]="NORMAL",a[a.LOW=-25]="LOW",a[a.UTILITY=-50]="UTILITY",a))(wh||{});class eh{constructor(t,i=null,s=0,l=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=i,this.priority=s,this._once=l}match(t,i=null){return this._fn===t&&this._context===i}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const i=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const b0=class ai{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new eh(null,null,1/0),this.deltaMS=1/ai.targetFPMS,this.elapsedMS=1/ai.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,i,s=wh.NORMAL){return this._addListener(new eh(t,i,s))}addOnce(t,i,s=wh.NORMAL){return this._addListener(new eh(t,i,s,!0))}_addListener(t){let i=this._head.next,s=this._head;if(!i)t.connect(s);else{for(;i;){if(t.priority>i.priority){t.connect(s);break}s=i,i=i.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,i){let s=this._head.next;for(;s;)s.match(t,i)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,i=this._head;for(;i=i.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let i;if(t>this.lastTime){if(i=this.elapsedMS=t-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const u=t-this._lastFrame|0;if(u<this._minElapsedMS)return;this._lastFrame=t-u%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*ai.targetFPMS;const s=this._head;let l=s.next;for(;l;)l=l.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const i=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,i)/1e3,ai.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const i=Math.max(this.minFPS,t);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!ai._shared){const t=ai._shared=new ai;t.autoStart=!0,t._protected=!0}return ai._shared}static get system(){if(!ai._system){const t=ai._system=new ai;t.autoStart=!0,t._protected=!0}return ai._system}};b0.targetFPMS=.06;let Mr=b0,ih;async function v0(){return ih??(ih=(async()=>{var c;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const i=await new Promise(f=>{const p=document.createElement("video");p.onloadeddata=()=>f(p),p.onerror=()=>f(null),p.autoplay=!1,p.crossOrigin="anonymous",p.preload="auto",p.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",p.load()});if(!i)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const l=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,l),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i);const u=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,u),t.deleteFramebuffer(l),t.deleteTexture(s),(c=t.getExtension("WEBGL_lose_context"))==null||c.loseContext(),u[0]<=u[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),ih}const xo=class x0 extends Hi{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...x0.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=Mr.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,i=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(i.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await v0(),this._load=new Promise((s,l)=>{this.isValid?s(this):(this._resolve=s,this._reject=l,i.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${i.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Mr.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Mr.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Mr.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};xo.extension=ct.TextureSource;xo.defaultOptions={...Hi.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};xo.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let co=xo;const wi=(a,t,i=!1)=>(Array.isArray(a)||(a=[a]),t?a.map(s=>typeof s=="string"||i?t(s):s):a);class tS{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||Wt(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const s=wi(t);let l;for(let p=0;p<this.parsers.length;p++){const g=this.parsers[p];if(g.test(i)){l=g.getCacheableAssets(s,i);break}}const u=new Map(Object.entries(l||{}));l||s.forEach(p=>{u.set(p,i)});const c=[...u.keys()],f={cacheKeys:c,keys:s};s.forEach(p=>{this._cacheMap.set(p,f)}),c.forEach(p=>{const g=l?l[p]:i;this._cache.has(p)&&this._cache.get(p)!==g&&Wt("[Cache] already has key:",p),this._cache.set(p,u.get(p))})}remove(t){if(!this._cacheMap.has(t)){Wt(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(l=>{this._cache.delete(l)}),i.keys.forEach(l=>{this._cacheMap.delete(l)})}get parsers(){return this._parsers}}const ie=new tS,Mh=[];we.handleByList(ct.TextureSource,Mh);function _0(a={}){const t=a&&a.resource,i=t?a.resource:a,s=t?a:{resource:a};for(let l=0;l<Mh.length;l++){const u=Mh[l];if(u.test(i))return new u(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function eS(a={},t=!1){const i=a&&a.resource,s=i?a.resource:a,l=i?a:{resource:a};if(!t&&ie.has(s))return ie.get(s);const u=new Ct({source:_0(l)});return u.on("destroy",()=>{ie.has(s)&&ie.remove(s)}),t||ie.set(s,u),u}function iS(a,t=!1){return typeof a=="string"?ie.get(a):a instanceof Hi?new Ct({source:a}):eS(a,t)}Ct.from=iS;Hi.from=_0;we.add(p0,g0,m0,co,ys,y0,rf);var Dn=(a=>(a[a.Low=0]="Low",a[a.Normal=1]="Normal",a[a.High=2]="High",a))(Dn||{});function Ai(a){if(typeof a!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(a)}`)}function vr(a){return a.split("?")[0].split("#")[0]}function nS(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sS(a,t,i){return a.replace(new RegExp(nS(t),"g"),i)}function aS(a,t){let i="",s=0,l=-1,u=0,c=-1;for(let f=0;f<=a.length;++f){if(f<a.length)c=a.charCodeAt(f);else{if(c===47)break;c=47}if(c===47){if(!(l===f-1||u===1))if(l!==f-1&&u===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const p=i.lastIndexOf("/");if(p!==i.length-1){p===-1?(i="",s=0):(i=i.slice(0,p),s=i.length-1-i.lastIndexOf("/")),l=f,u=0;continue}}else if(i.length===2||i.length===1){i="",s=0,l=f,u=0;continue}}}else i.length>0?i+=`/${a.slice(l+1,f)}`:i=a.slice(l+1,f),s=f-l-1;l=f,u=0}else c===46&&u!==-1?++u:u=-1}return i}const ri={toPosix(a){return sS(a,"\\","/")},isUrl(a){return/^https?:/.test(this.toPosix(a))},isDataUrl(a){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(a)},isBlobUrl(a){return a.startsWith("blob:")},hasProtocol(a){return/^[^/:]+:/.test(this.toPosix(a))},getProtocol(a){Ai(a),a=this.toPosix(a);const t=/^file:\/\/\//.exec(a);if(t)return t[0];const i=/^[^/:]+:\/{0,2}/.exec(a);return i?i[0]:""},toAbsolute(a,t,i){if(Ai(a),this.isDataUrl(a)||this.isBlobUrl(a))return a;const s=vr(this.toPosix(t??ne.get().getBaseUrl())),l=vr(this.toPosix(i??this.rootname(s)));return a=this.toPosix(a),a.startsWith("/")?ri.join(l,a.slice(1)):this.isAbsolute(a)?a:this.join(s,a)},normalize(a){if(Ai(a),a.length===0)return".";if(this.isDataUrl(a)||this.isBlobUrl(a))return a;a=this.toPosix(a);let t="";const i=a.startsWith("/");this.hasProtocol(a)&&(t=this.rootname(a),a=a.slice(t.length));const s=a.endsWith("/");return a=aS(a),a.length>0&&s&&(a+="/"),i?`/${a}`:t+a},isAbsolute(a){return Ai(a),a=this.toPosix(a),this.hasProtocol(a)?!0:a.startsWith("/")},join(...a){if(a.length===0)return".";let t;for(let i=0;i<a.length;++i){const s=a[i];if(Ai(s),s.length>0)if(t===void 0)t=s;else{const l=a[i-1]??"";this.joinExtensions.includes(this.extname(l).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(a){if(Ai(a),a.length===0)return".";a=this.toPosix(a);let t=a.charCodeAt(0);const i=t===47;let s=-1,l=!0;const u=this.getProtocol(a),c=a;a=a.slice(u.length);for(let f=a.length-1;f>=1;--f)if(t=a.charCodeAt(f),t===47){if(!l){s=f;break}}else l=!1;return s===-1?i?"/":this.isUrl(c)?u+a:u:i&&s===1?"//":u+a.slice(0,s)},rootname(a){Ai(a),a=this.toPosix(a);let t="";if(a.startsWith("/")?t="/":t=this.getProtocol(a),this.isUrl(a)){const i=a.indexOf("/",t.length);i!==-1?t=a.slice(0,i):t=a,t.endsWith("/")||(t+="/")}return t},basename(a,t){Ai(a),t&&Ai(t),a=vr(this.toPosix(a));let i=0,s=-1,l=!0,u;if(t!==void 0&&t.length>0&&t.length<=a.length){if(t.length===a.length&&t===a)return"";let c=t.length-1,f=-1;for(u=a.length-1;u>=0;--u){const p=a.charCodeAt(u);if(p===47){if(!l){i=u+1;break}}else f===-1&&(l=!1,f=u+1),c>=0&&(p===t.charCodeAt(c)?--c===-1&&(s=u):(c=-1,s=f))}return i===s?s=f:s===-1&&(s=a.length),a.slice(i,s)}for(u=a.length-1;u>=0;--u)if(a.charCodeAt(u)===47){if(!l){i=u+1;break}}else s===-1&&(l=!1,s=u+1);return s===-1?"":a.slice(i,s)},extname(a){Ai(a),a=vr(this.toPosix(a));let t=-1,i=0,s=-1,l=!0,u=0;for(let c=a.length-1;c>=0;--c){const f=a.charCodeAt(c);if(f===47){if(!l){i=c+1;break}continue}s===-1&&(l=!1,s=c+1),f===46?t===-1?t=c:u!==1&&(u=1):t!==-1&&(u=-1)}return t===-1||s===-1||u===0||u===1&&t===s-1&&t===i+1?"":a.slice(t,s)},parse(a){Ai(a);const t={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return t;a=vr(this.toPosix(a));let i=a.charCodeAt(0);const s=this.isAbsolute(a);let l;t.root=this.rootname(a),s||this.hasProtocol(a)?l=1:l=0;let u=-1,c=0,f=-1,p=!0,g=a.length-1,m=0;for(;g>=l;--g){if(i=a.charCodeAt(g),i===47){if(!p){c=g+1;break}continue}f===-1&&(p=!1,f=g+1),i===46?u===-1?u=g:m!==1&&(m=1):u!==-1&&(m=-1)}return u===-1||f===-1||m===0||m===1&&u===f-1&&u===c+1?f!==-1&&(c===0&&s?t.base=t.name=a.slice(1,f):t.base=t.name=a.slice(c,f)):(c===0&&s?(t.name=a.slice(1,u),t.base=a.slice(1,f)):(t.name=a.slice(c,u),t.base=a.slice(c,f)),t.ext=a.slice(u,f)),t.dir=this.dirname(a),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function S0(a,t,i,s,l){const u=t[i];for(let c=0;c<u.length;c++){const f=u[c];i<t.length-1?S0(a.replace(s[i],f),t,i+1,s,l):l.push(a.replace(s[i],f))}}function rS(a){const t=/\{(.*?)\}/g,i=a.match(t),s=[];if(i){const l=[];i.forEach(u=>{const c=u.substring(1,u.length-1).split(",");l.push(c)}),S0(a,l,0,i,s)}else s.push(a);return s}const bo=a=>!Array.isArray(a);class ma{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(i[s])}`).join("&")}}getAlias(t){const{alias:i,src:s}=t;return wi(i||s,u=>typeof u=="string"?u:Array.isArray(u)?u.map(c=>(c==null?void 0:c.src)??c):u!=null&&u.src?u.src:u,!0)}addManifest(t){this._manifest&&Wt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const s=[];let l=i;Array.isArray(i)||(l=Object.entries(i).map(([u,c])=>typeof c=="string"||Array.isArray(c)?{alias:u,src:c}:{alias:u,...c})),l.forEach(u=>{const c=u.src,f=u.alias;let p;if(typeof f=="string"){const g=this._createBundleAssetId(t,f);s.push(g),p=[f,g]}else{const g=f.map(m=>this._createBundleAssetId(t,m));s.push(...g),p=[...f,...g]}this.add({...u,alias:p,src:c})}),this._bundles[t]=s}add(t){const i=[];Array.isArray(t)?i.push(...t):i.push(t);let s;s=u=>{this.hasKey(u)&&Wt(`[Resolver] already has key: ${u} overwriting`)},wi(i).forEach(u=>{const{src:c}=u;let{data:f,format:p,loadParser:g}=u;const m=wi(c).map(v=>typeof v=="string"?rS(v):Array.isArray(v)?v:[v]),y=this.getAlias(u);Array.isArray(y)?y.forEach(s):s(y);const _=[];m.forEach(v=>{v.forEach(E=>{let M={};if(typeof E!="object"){M.src=E;for(let T=0;T<this._parsers.length;T++){const C=this._parsers[T];if(C.test(E)){M=C.parse(E);break}}}else f=E.data??f,p=E.format??p,g=E.loadParser??g,M={...M,...E};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${M.src}`);M=this._buildResolvedAsset(M,{aliases:y,data:f,format:p,loadParser:g}),_.push(M)})}),y.forEach(v=>{this._assetMap[v]=_})})}resolveBundle(t){const i=bo(t);t=wi(t);const s={};return t.forEach(l=>{const u=this._bundles[l];if(u){const c=this.resolve(u),f={};for(const p in c){const g=c[p];f[this._extractAssetIdFromBundle(l,p)]=g}s[l]=f}}),i?s[t[0]]:s}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const s={};for(const l in i)s[l]=i[l].src;return s}return i.src}resolve(t){const i=bo(t);t=wi(t);const s={};return t.forEach(l=>{if(!this._resolverHash[l])if(this._assetMap[l]){let u=this._assetMap[l];const c=this._getPreferredOrder(u);c==null||c.priority.forEach(f=>{c.params[f].forEach(p=>{const g=u.filter(m=>m[f]?m[f]===p:!1);g.length&&(u=g)})}),this._resolverHash[l]=u[0]}else this._resolverHash[l]=this._buildResolvedAsset({alias:[l],src:l},{});s[l]=this._resolverHash[l]}),i?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const s=t[i],l=this._preferredOrder.find(u=>u.params.format.includes(s.format));if(l)return l}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}_buildResolvedAsset(t,i){const{aliases:s,data:l,loadParser:u,format:c}=i;return(this._basePath||this._rootPath)&&(t.src=ri.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...l||{},...t.data},t.loadParser=u??t.loadParser,t.format=c??t.format??lS(t.src),t}}ma.RETINA_PREFIX=/@([0-9\.]+)x/;function lS(a){return a.split(".").pop().split("?").shift().split("#").shift()}const Eh=(a,t)=>{const i=t.split("?")[1];return i&&(a+=`?${i}`),a},A0=class Er{constructor(t,i){this.linkedSheets=[],this._texture=t instanceof Ct?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=i;const s=parseFloat(i.meta.scale);s?(this.resolution=s,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Er.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let i=t;const s=Er.BATCH_SIZE;for(;i-t<s&&i<this._frameKeys.length;){const l=this._frameKeys[i],u=this._frames[l],c=u.frame;if(c){let f=null,p=null;const g=u.trimmed!==!1&&u.sourceSize?u.sourceSize:u.frame,m=new ue(0,0,Math.floor(g.w)/this.resolution,Math.floor(g.h)/this.resolution);u.rotated?f=new ue(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):f=new ue(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),u.trimmed!==!1&&u.spriteSourceSize&&(p=new ue(Math.floor(u.spriteSourceSize.x)/this.resolution,Math.floor(u.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[l]=new Ct({source:this.textureSource,frame:f,orig:m,trim:p,rotate:u.rotated?2:0,defaultAnchor:u.anchor,defaultBorders:u.borders,label:l.toString()})}i++}}_processAnimations(){const t=this.data.animations||{};for(const i in t){this.animations[i]=[];for(let s=0;s<t[i].length;s++){const l=t[i][s];this.animations[i].push(this.textures[l])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Er.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Er.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var i;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((i=this._texture)==null||i.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};A0.BATCH_SIZE=1e3;let Vm=A0;const oS=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function T0(a,t,i){const s={};if(a.forEach(l=>{s[l]=t}),Object.keys(t.textures).forEach(l=>{s[l]=t.textures[l]}),!i){const l=ri.dirname(a[0]);t.linkedSheets.forEach((u,c)=>{const f=T0([`${l}/${t.data.meta.related_multi_packs[c]}`],u,!0);Object.assign(s,f)})}return s}const uS={extension:ct.Asset,cache:{test:a=>a instanceof Vm,getCacheableAssets:(a,t)=>T0(a,t,!1)},resolver:{extension:{type:ct.ResolveParser,name:"resolveSpritesheet"},test:a=>{const i=a.split("?")[0].split("."),s=i.pop(),l=i.pop();return s==="json"&&oS.includes(l)},parse:a=>{var i;const t=a.split(".");return{resolution:parseFloat(((i=ma.RETINA_PREFIX.exec(a))==null?void 0:i[1])??"1"),format:t[t.length-2],src:a}}},loader:{name:"spritesheetLoader",extension:{type:ct.LoadParser,priority:Dn.Normal,name:"spritesheetLoader"},async testParse(a,t){return ri.extname(t.src).toLowerCase()===".json"&&!!a.frames},async parse(a,t,i){var m,y;const{texture:s,imageFilename:l,textureOptions:u}=(t==null?void 0:t.data)??{};let c=ri.dirname(t.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let f;if(s instanceof Ct)f=s;else{const _=Eh(c+(l??a.meta.image),t.src);f=(await i.load([{src:_,data:u}]))[_]}const p=new Vm(f.source,a);await p.parse();const g=(m=a==null?void 0:a.meta)==null?void 0:m.related_multi_packs;if(Array.isArray(g)){const _=[];for(const E of g){if(typeof E!="string")continue;let M=c+E;(y=t.data)!=null&&y.ignoreMultiPack||(M=Eh(M,t.src),_.push(i.load({src:M,data:{textureOptions:u,ignoreMultiPack:!0}})))}const v=await Promise.all(_);p.linkedSheets=v,v.forEach(E=>{E.linkedSheets=[p].concat(p.linkedSheets.filter(M=>M!==E))})}return p},async unload(a,t,i){await i.unload(a.textureSource._sourceOrigin),a.destroy(!1)}}};we.add(uS);const nh=Object.create(null),$m=Object.create(null);function cf(a,t){let i=$m[a];return i===void 0&&(nh[t]===void 0&&(nh[t]=1),$m[a]=i=nh[t]++),i}let sa;function w0(){return(!sa||sa!=null&&sa.isContextLost())&&(sa=ne.get().createCanvas().getContext("webgl",{})),sa}let Jl;function cS(){if(!Jl){Jl="mediump";const a=w0();a&&a.getShaderPrecisionFormat&&(Jl=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision?"highp":"mediump")}return Jl}function hS(a,t,i){return t?a:i?(a=a.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${a}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${a}
        `}function fS(a,t,i){const s=i?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(a.substring(0,9)!=="precision"){let l=i?t.requestedFragmentPrecision:t.requestedVertexPrecision;return l==="highp"&&s!=="highp"&&(l="mediump"),`precision ${l} float;
${a}`}else if(s!=="highp"&&a.substring(0,15)==="precision highp")return a.replace("precision highp","precision mediump");return a}function dS(a,t){return t?`#version 300 es
${a}`:a}const pS={},gS={};function mS(a,{name:t="pixi-program"},i=!0){t=t.replace(/\s+/g,"-"),t+=i?"-fragment":"-vertex";const s=i?pS:gS;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,a.indexOf("#define SHADER_NAME")!==-1?a:`${`#define SHADER_NAME ${t}`}
${a}`}function yS(a,t){return t?a.replace("#version 300 es",""):a}const sh={stripVersion:yS,ensurePrecision:fS,addProgramDefines:hS,setProgramName:mS,insertVersion:dS},ah=Object.create(null),M0=class Ch{constructor(t){t={...Ch.defaultOptions,...t};const i=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:cS()},setProgramName:{name:t.name},addProgramDefines:i,insertVersion:i};let l=t.fragment,u=t.vertex;Object.keys(sh).forEach(c=>{const f=s[c];l=sh[c](l,f,!0),u=sh[c](u,f,!1)}),this.fragment=l,this.vertex=u,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=cf(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const i=`${t.vertex}:${t.fragment}`;return ah[i]||(ah[i]=new Ch(t)),ah[i]}};M0.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let E0=M0;const Zm={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function bS(a){return Zm[a]??Zm.float32}const vS={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function xS({source:a,entryPoint:t}){const i={},s=a.indexOf(`fn ${t}`);if(s!==-1){const l=a.indexOf("->",s);if(l!==-1){const u=a.substring(s,l),c=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let f;for(;(f=c.exec(u))!==null;){const p=vS[f[3]]??"float32";i[f[2]]={location:parseInt(f[1],10),format:p,stride:bS(p).stride,offset:0,instance:!1,start:0}}}}return i}function rh(a){var y,_;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,i=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,l=/var(<[^>]+>)? (\w+)/,u=/:\s*(\w+)/,c=/struct\s+(\w+)\s*{([^}]+)}/g,f=/(\w+)\s*:\s*([\w\<\>]+)/g,p=/struct\s+(\w+)/,g=(y=a.match(t))==null?void 0:y.map(v=>({group:parseInt(v.match(i)[1],10),binding:parseInt(v.match(s)[1],10),name:v.match(l)[2],isUniform:v.match(l)[1]==="<uniform>",type:v.match(u)[1]}));if(!g)return{groups:[],structs:[]};const m=((_=a.match(c))==null?void 0:_.map(v=>{const E=v.match(p)[1],M=v.match(f).reduce((T,C)=>{const[z,B]=C.split(":");return T[z.trim()]=B.trim(),T},{});return M?{name:E,members:M}:null}).filter(({name:v})=>g.some(E=>E.type===v)))??[];return{groups:g,structs:m}}var Cr=(a=>(a[a.VERTEX=1]="VERTEX",a[a.FRAGMENT=2]="FRAGMENT",a[a.COMPUTE=4]="COMPUTE",a))(Cr||{});function _S({groups:a}){const t=[];for(let i=0;i<a.length;i++){const s=a[i];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:Cr.VERTEX|Cr.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:Cr.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:Cr.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function SS({groups:a}){const t=[];for(let i=0;i<a.length;i++){const s=a[i];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function AS(a,t){const i=new Set,s=new Set,l=[...a.structs,...t.structs].filter(c=>i.has(c.name)?!1:(i.add(c.name),!0)),u=[...a.groups,...t.groups].filter(c=>{const f=`${c.name}-${c.binding}`;return s.has(f)?!1:(s.add(f),!0)});return{structs:l,groups:u}}const lh=Object.create(null);class _o{constructor(t){var f,p;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:i,vertex:s,layout:l,gpuLayout:u,name:c}=t;if(this.name=c,this.fragment=i,this.vertex=s,i.source===s.source){const g=rh(i.source);this.structsAndGroups=g}else{const g=rh(s.source),m=rh(i.source);this.structsAndGroups=AS(g,m)}this.layout=l??SS(this.structsAndGroups),this.gpuLayout=u??_S(this.structsAndGroups),this.autoAssignGlobalUniforms=((f=this.layout[0])==null?void 0:f.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((p=this.layout[1])==null?void 0:p.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:i}=this,s=t.source+i.source+t.entryPoint+i.entryPoint;this._layoutKey=cf(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=xS(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const i=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return lh[i]||(lh[i]=new _o(t)),lh[i]}}const C0=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],TS=C0.reduce((a,t)=>(a[t]=!0,a),{});function wS(a,t){switch(a){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const R0=class O0{constructor(t,i){this._touched=0,this.uid=ce("uniform"),this._resourceType="uniformGroup",this._resourceId=ce("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...O0.defaultOptions,...i},this.uniformStructures=t;const s={};for(const l in t){const u=t[l];if(u.name=l,u.size=u.size??1,!TS[u.type])throw new Error(`Uniform type ${u.type} is not supported. Supported uniform types are: ${C0.join(", ")}`);u.value??(u.value=wS(u.type,u.size)),s[l]=u.value}this.uniforms=s,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=cf(Object.keys(s).map(l=>`${l}-${t[l].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};R0.defaultOptions={ubo:!1,isStatic:!1};let z0=R0;class ho{constructor(t){this.resources=Object.create(null),this._dirty=!0;let i=0;for(const s in t){const l=t[s];this.setResource(l,i++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let i=0;for(const s in this.resources)t[i++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,i){var l,u;const s=this.resources[i];t!==s&&(s&&((l=t.off)==null||l.call(t,"change",this.onResourceChange,this)),(u=t.on)==null||u.call(t,"change",this.onResourceChange,this),this.resources[i]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const i=this.resources;for(const s in i)i[s]._touched=t}destroy(){var i;const t=this.resources;for(const s in t){const l=t[s];(i=l.off)==null||i.call(l,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const i=this.resources;for(const s in i)i[s]===t&&(i[s]=null)}else this._updateKey()}}var Rh=(a=>(a[a.WEBGL=1]="WEBGL",a[a.WEBGPU=2]="WEBGPU",a[a.BOTH=3]="BOTH",a))(Rh||{});class hf extends Mi{constructor(t){super(),this.uid=ce("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:i,glProgram:s,groups:l,resources:u,compatibleRenderers:c,groupMap:f}=t;this.gpuProgram=i,this.glProgram=s,c===void 0&&(c=0,i&&(c|=Rh.WEBGPU),s&&(c|=Rh.WEBGL)),this.compatibleRenderers=c;const p={};if(!u&&!l&&(u={}),u&&l)throw new Error("[Shader] Cannot have both resources and groups");if(!i&&l&&!f)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!i&&l&&f)for(const g in f)for(const m in f[g]){const y=f[g][m];p[y]={group:g,binding:m,name:y}}else if(i&&l&&!f){const g=i.structsAndGroups.groups;f={},g.forEach(m=>{f[m.group]=f[m.group]||{},f[m.group][m.binding]=m.name,p[m.name]=m})}else if(u){l={},f={},i&&i.structsAndGroups.groups.forEach(y=>{f[y.group]=f[y.group]||{},f[y.group][y.binding]=y.name,p[y.name]=y});let g=0;for(const m in u)p[m]||(l[99]||(l[99]=new ho,this._ownedBindGroups.push(l[99])),p[m]={group:99,binding:g,name:m},f[99]=f[99]||{},f[99][g]=m,g++);for(const m in u){const y=m;let _=u[m];!_.source&&!_._resourceType&&(_=new z0(_));const v=p[y];v&&(l[v.group]||(l[v.group]=new ho,this._ownedBindGroups.push(l[v.group])),l[v.group].setResource(_,v.binding))}}this.groups=l,this._uniformBindMap=f,this.resources=this._buildResourceAccessor(l,p)}addResource(t,i,s){var l,u;(l=this._uniformBindMap)[i]||(l[i]={}),(u=this._uniformBindMap[i])[s]||(u[s]=t),this.groups[i]||(this.groups[i]=new ho,this._ownedBindGroups.push(this.groups[i]))}_buildResourceAccessor(t,i){const s={};for(const l in i){const u=i[l];Object.defineProperty(s,u.name,{get(){return t[u.group].getResource(u.binding)},set(c){t[u.group].setResource(c,u.binding)}})}return s}destroy(t=!1){var i,s;this.emit("destroy",this),t&&((i=this.gpuProgram)==null||i.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(l=>{l.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:i,gl:s,...l}=t;let u,c;return i&&(u=_o.from(i)),s&&(c=E0.from(s)),new hf({gpuProgram:u,glProgram:c,...l})}}const Oh=[];we.handleByNamedList(ct.Environment,Oh);async function MS(a){if(!a)for(let t=0;t<Oh.length;t++){const i=Oh[t];if(i.value.test()){await i.value.load();return}}}let xr;function ES(){if(typeof xr=="boolean")return xr;try{xr=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{xr=!1}return xr}var to={exports:{}},Qm;function CS(){if(Qm)return to.exports;Qm=1,to.exports=a,to.exports.default=a;function a(x,w,O){O=O||2;var H=w&&w.length,A=H?w[0]*O:x.length,D=t(x,0,A,O,!0),U=[];if(!D||D.next===D.prev)return U;var X,J,tt,et,mt,lt,Ut;if(H&&(D=p(x,w,D,O)),x.length>80*O){X=tt=x[0],J=et=x[1];for(var Rt=O;Rt<A;Rt+=O)mt=x[Rt],lt=x[Rt+1],mt<X&&(X=mt),lt<J&&(J=lt),mt>tt&&(tt=mt),lt>et&&(et=lt);Ut=Math.max(tt-X,et-J),Ut=Ut!==0?32767/Ut:0}return s(D,U,O,X,J,Ut,0),U}function t(x,w,O,H,A){var D,U;if(A===Ft(x,w,O,H)>0)for(D=w;D<O;D+=H)U=rt(D,x[D],x[D+1],U);else for(D=O-H;D>=w;D-=H)U=rt(D,x[D],x[D+1],U);return U&&N(U,U.next)&&(gt(U),U=U.next),U}function i(x,w){if(!x)return x;w||(w=x);var O=x,H;do if(H=!1,!O.steiner&&(N(O,O.next)||B(O.prev,O,O.next)===0)){if(gt(O),O=w=O.prev,O===O.next)break;H=!0}else O=O.next;while(H||O!==w);return w}function s(x,w,O,H,A,D,U){if(x){!U&&D&&v(x,H,A,D);for(var X=x,J,tt;x.prev!==x.next;){if(J=x.prev,tt=x.next,D?u(x,H,A,D):l(x)){w.push(J.i/O|0),w.push(x.i/O|0),w.push(tt.i/O|0),gt(x),x=tt.next,X=tt.next;continue}if(x=tt,x===X){U?U===1?(x=c(i(x),w,O),s(x,w,O,H,A,D,2)):U===2&&f(x,w,O,H,A,D):s(i(x),w,O,H,A,D,1);break}}}}function l(x){var w=x.prev,O=x,H=x.next;if(B(w,O,H)>=0)return!1;for(var A=w.x,D=O.x,U=H.x,X=w.y,J=O.y,tt=H.y,et=A<D?A<U?A:U:D<U?D:U,mt=X<J?X<tt?X:tt:J<tt?J:tt,lt=A>D?A>U?A:U:D>U?D:U,Ut=X>J?X>tt?X:tt:J>tt?J:tt,Rt=H.next;Rt!==w;){if(Rt.x>=et&&Rt.x<=lt&&Rt.y>=mt&&Rt.y<=Ut&&C(A,X,D,J,U,tt,Rt.x,Rt.y)&&B(Rt.prev,Rt,Rt.next)>=0)return!1;Rt=Rt.next}return!0}function u(x,w,O,H){var A=x.prev,D=x,U=x.next;if(B(A,D,U)>=0)return!1;for(var X=A.x,J=D.x,tt=U.x,et=A.y,mt=D.y,lt=U.y,Ut=X<J?X<tt?X:tt:J<tt?J:tt,Rt=et<mt?et<lt?et:lt:mt<lt?mt:lt,Ue=X>J?X>tt?X:tt:J>tt?J:tt,xe=et>mt?et>lt?et:lt:mt>lt?mt:lt,ke=M(Ut,Rt,w,O,H),He=M(Ue,xe,w,O,H),vt=x.prevZ,Ot=x.nextZ;vt&&vt.z>=ke&&Ot&&Ot.z<=He;){if(vt.x>=Ut&&vt.x<=Ue&&vt.y>=Rt&&vt.y<=xe&&vt!==A&&vt!==U&&C(X,et,J,mt,tt,lt,vt.x,vt.y)&&B(vt.prev,vt,vt.next)>=0||(vt=vt.prevZ,Ot.x>=Ut&&Ot.x<=Ue&&Ot.y>=Rt&&Ot.y<=xe&&Ot!==A&&Ot!==U&&C(X,et,J,mt,tt,lt,Ot.x,Ot.y)&&B(Ot.prev,Ot,Ot.next)>=0))return!1;Ot=Ot.nextZ}for(;vt&&vt.z>=ke;){if(vt.x>=Ut&&vt.x<=Ue&&vt.y>=Rt&&vt.y<=xe&&vt!==A&&vt!==U&&C(X,et,J,mt,tt,lt,vt.x,vt.y)&&B(vt.prev,vt,vt.next)>=0)return!1;vt=vt.prevZ}for(;Ot&&Ot.z<=He;){if(Ot.x>=Ut&&Ot.x<=Ue&&Ot.y>=Rt&&Ot.y<=xe&&Ot!==A&&Ot!==U&&C(X,et,J,mt,tt,lt,Ot.x,Ot.y)&&B(Ot.prev,Ot,Ot.next)>=0)return!1;Ot=Ot.nextZ}return!0}function c(x,w,O){var H=x;do{var A=H.prev,D=H.next.next;!N(A,D)&&I(A,H,H.next,D)&&nt(A,D)&&nt(D,A)&&(w.push(A.i/O|0),w.push(H.i/O|0),w.push(D.i/O|0),gt(H),gt(H.next),H=x=D),H=H.next}while(H!==x);return i(H)}function f(x,w,O,H,A,D){var U=x;do{for(var X=U.next.next;X!==U.prev;){if(U.i!==X.i&&z(U,X)){var J=W(U,X);U=i(U,U.next),J=i(J,J.next),s(U,w,O,H,A,D,0),s(J,w,O,H,A,D,0);return}X=X.next}U=U.next}while(U!==x)}function p(x,w,O,H){var A=[],D,U,X,J,tt;for(D=0,U=w.length;D<U;D++)X=w[D]*H,J=D<U-1?w[D+1]*H:x.length,tt=t(x,X,J,H,!1),tt===tt.next&&(tt.steiner=!0),A.push(T(tt));for(A.sort(g),D=0;D<A.length;D++)O=m(A[D],O);return O}function g(x,w){return x.x-w.x}function m(x,w){var O=y(x,w);if(!O)return w;var H=W(O,x);return i(H,H.next),i(O,O.next)}function y(x,w){var O=w,H=x.x,A=x.y,D=-1/0,U;do{if(A<=O.y&&A>=O.next.y&&O.next.y!==O.y){var X=O.x+(A-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(X<=H&&X>D&&(D=X,U=O.x<O.next.x?O:O.next,X===H))return U}O=O.next}while(O!==w);if(!U)return null;var J=U,tt=U.x,et=U.y,mt=1/0,lt;O=U;do H>=O.x&&O.x>=tt&&H!==O.x&&C(A<et?H:D,A,tt,et,A<et?D:H,A,O.x,O.y)&&(lt=Math.abs(A-O.y)/(H-O.x),nt(O,x)&&(lt<mt||lt===mt&&(O.x>U.x||O.x===U.x&&_(U,O)))&&(U=O,mt=lt)),O=O.next;while(O!==J);return U}function _(x,w){return B(x.prev,x,w.prev)<0&&B(w.next,x,x.next)<0}function v(x,w,O,H){var A=x;do A.z===0&&(A.z=M(A.x,A.y,w,O,H)),A.prevZ=A.prev,A.nextZ=A.next,A=A.next;while(A!==x);A.prevZ.nextZ=null,A.prevZ=null,E(A)}function E(x){var w,O,H,A,D,U,X,J,tt=1;do{for(O=x,x=null,D=null,U=0;O;){for(U++,H=O,X=0,w=0;w<tt&&(X++,H=H.nextZ,!!H);w++);for(J=tt;X>0||J>0&&H;)X!==0&&(J===0||!H||O.z<=H.z)?(A=O,O=O.nextZ,X--):(A=H,H=H.nextZ,J--),D?D.nextZ=A:x=A,A.prevZ=D,D=A;O=H}D.nextZ=null,tt*=2}while(U>1);return x}function M(x,w,O,H,A){return x=(x-O)*A|0,w=(w-H)*A|0,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,w=(w|w<<8)&16711935,w=(w|w<<4)&252645135,w=(w|w<<2)&858993459,w=(w|w<<1)&1431655765,x|w<<1}function T(x){var w=x,O=x;do(w.x<O.x||w.x===O.x&&w.y<O.y)&&(O=w),w=w.next;while(w!==x);return O}function C(x,w,O,H,A,D,U,X){return(A-U)*(w-X)>=(x-U)*(D-X)&&(x-U)*(H-X)>=(O-U)*(w-X)&&(O-U)*(D-X)>=(A-U)*(H-X)}function z(x,w){return x.next.i!==w.i&&x.prev.i!==w.i&&!at(x,w)&&(nt(x,w)&&nt(w,x)&&it(x,w)&&(B(x.prev,x,w.prev)||B(x,w.prev,w))||N(x,w)&&B(x.prev,x,x.next)>0&&B(w.prev,w,w.next)>0)}function B(x,w,O){return(w.y-x.y)*(O.x-w.x)-(w.x-x.x)*(O.y-w.y)}function N(x,w){return x.x===w.x&&x.y===w.y}function I(x,w,O,H){var A=$(B(x,w,O)),D=$(B(x,w,H)),U=$(B(O,H,x)),X=$(B(O,H,w));return!!(A!==D&&U!==X||A===0&&V(x,O,w)||D===0&&V(x,H,w)||U===0&&V(O,x,H)||X===0&&V(O,w,H))}function V(x,w,O){return w.x<=Math.max(x.x,O.x)&&w.x>=Math.min(x.x,O.x)&&w.y<=Math.max(x.y,O.y)&&w.y>=Math.min(x.y,O.y)}function $(x){return x>0?1:x<0?-1:0}function at(x,w){var O=x;do{if(O.i!==x.i&&O.next.i!==x.i&&O.i!==w.i&&O.next.i!==w.i&&I(O,O.next,x,w))return!0;O=O.next}while(O!==x);return!1}function nt(x,w){return B(x.prev,x,x.next)<0?B(x,w,x.next)>=0&&B(x,x.prev,w)>=0:B(x,w,x.prev)<0||B(x,x.next,w)<0}function it(x,w){var O=x,H=!1,A=(x.x+w.x)/2,D=(x.y+w.y)/2;do O.y>D!=O.next.y>D&&O.next.y!==O.y&&A<(O.next.x-O.x)*(D-O.y)/(O.next.y-O.y)+O.x&&(H=!H),O=O.next;while(O!==x);return H}function W(x,w){var O=new kt(x.i,x.x,x.y),H=new kt(w.i,w.x,w.y),A=x.next,D=w.prev;return x.next=w,w.prev=x,O.next=A,A.prev=O,H.next=O,O.prev=H,D.next=H,H.prev=D,H}function rt(x,w,O,H){var A=new kt(x,w,O);return H?(A.next=H.next,A.prev=H,H.next.prev=A,H.next=A):(A.prev=A,A.next=A),A}function gt(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function kt(x,w,O){this.i=x,this.x=w,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}a.deviation=function(x,w,O,H){var A=w&&w.length,D=A?w[0]*O:x.length,U=Math.abs(Ft(x,0,D,O));if(A)for(var X=0,J=w.length;X<J;X++){var tt=w[X]*O,et=X<J-1?w[X+1]*O:x.length;U-=Math.abs(Ft(x,tt,et,O))}var mt=0;for(X=0;X<H.length;X+=3){var lt=H[X]*O,Ut=H[X+1]*O,Rt=H[X+2]*O;mt+=Math.abs((x[lt]-x[Rt])*(x[Ut+1]-x[lt+1])-(x[lt]-x[Ut])*(x[Rt+1]-x[lt+1]))}return U===0&&mt===0?0:Math.abs((mt-U)/U)};function Ft(x,w,O,H){for(var A=0,D=w,U=O-H;D<O;D+=H)A+=(x[U]-x[D])*(x[D+1]+x[U+1]),U=D;return A}return a.flatten=function(x){for(var w=x[0][0].length,O={vertices:[],holes:[],dimensions:w},H=0,A=0;A<x.length;A++){for(var D=0;D<x[A].length;D++)for(var U=0;U<w;U++)O.vertices.push(x[A][D][U]);A>0&&(H+=x[A-1].length,O.holes.push(H))}return O},to.exports}var RS=CS();const OS=sf(RS);var D0=(a=>(a[a.NONE=0]="NONE",a[a.COLOR=16384]="COLOR",a[a.STENCIL=1024]="STENCIL",a[a.DEPTH=256]="DEPTH",a[a.COLOR_DEPTH=16640]="COLOR_DEPTH",a[a.COLOR_STENCIL=17408]="COLOR_STENCIL",a[a.DEPTH_STENCIL=1280]="DEPTH_STENCIL",a[a.ALL=17664]="ALL",a))(D0||{});class zS{constructor(t){this.items=[],this._name=t}emit(t,i,s,l,u,c,f,p){const{name:g,items:m}=this;for(let y=0,_=m.length;y<_;y++)m[y][g](t,i,s,l,u,c,f,p);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&this.items.splice(i,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const DS=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],G0=class B0 extends Mi{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const i=[...DS,...this.config.runners??[]];this._addRunners(...i),this._unsafeEvalCheck()}async init(t={}){const i=t.skipExtensionImports===!0?!0:t.manageImports===!1;await MS(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...B0.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,i){let s=t;if(s instanceof bi&&(s={container:s},i&&(Gt(Nt,"passing a second argument is deprecated, please use render options instead"),s.target=i.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const l=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=l?s.clearColor:he.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}resize(t,i,s){const l=this.view.resolution;this.view.resize(t,i,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==l&&this.runners.resolutionChange.emit(s)}clear(t={}){const i=this;t.target||(t.target=i.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=D0.ALL);const{clear:s,clearColor:l,target:u}=t;he.shared.setValue(l??this.background.colorRgba),i.renderTarget.clear(u,s,he.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(i=>{this.runners[i]=new zS(i)})}_addSystems(t){let i;for(i in t){const s=t[i];this._addSystem(s.value,s.name)}}_addSystem(t,i){const s=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=s,this._systemsHash[i]=s;for(const l in this.runners)this.runners[l].add(s);return this}_addPipes(t,i){const s=i.reduce((l,u)=>(l[u.name]=u.value,l),{});t.forEach(l=>{const u=l.value,c=l.name,f=s[c];this.renderPipes[c]=new u(this,f?new f:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(i=>{i.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!ES())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};G0.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let L0=G0,eo;function GS(a){return eo!==void 0||(eo=(()=>{var i;const t={stencil:!0,failIfMajorPerformanceCaveat:a??L0.defaultOptions.failIfMajorPerformanceCaveat};try{if(!ne.get().getWebGLRenderingContext())return!1;let l=ne.get().createCanvas().getContext("webgl",t);const u=!!((i=l==null?void 0:l.getContextAttributes())!=null&&i.stencil);if(l){const c=l.getExtension("WEBGL_lose_context");c&&c.loseContext()}return l=null,u}catch{return!1}})()),eo}let io;async function BS(a={}){return io!==void 0||(io=await(async()=>{const t=ne.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(a)).requestDevice(),!0}catch{return!1}})()),io}const Km=["webgl","webgpu","canvas"];async function LS(a){let t=[];a.preference?(t.push(a.preference),Km.forEach(u=>{u!==a.preference&&t.push(u)})):t=Km.slice();let i,s={};for(let u=0;u<t.length;u++){const c=t[u];if(c==="webgpu"&&await BS()){const{WebGPURenderer:f}=await mo(async()=>{const{WebGPURenderer:p}=await import("./WebGPURenderer-Dm6RYjb3.js");return{WebGPURenderer:p}},__vite__mapDeps([3,2,4]));i=f,s={...a,...a.webgpu};break}else if(c==="webgl"&&GS(a.failIfMajorPerformanceCaveat??L0.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:f}=await mo(async()=>{const{WebGLRenderer:p}=await import("./WebGLRenderer-CglI7Orp.js");return{WebGLRenderer:p}},__vite__mapDeps([5,2,4]));i=f,s={...a,...a.webgl};break}else if(c==="canvas")throw s={...a},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!i)throw new Error("No available renderer for the current environment");const l=new i;return await l.init(s),l}const U0="8.9.1";class k0{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,U0)}static destroy(){}}k0.extension=ct.Application;class US{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,U0)}destroy(){this._renderer=null}}US.extension={type:[ct.WebGLSystem,ct.WebGPUSystem],name:"initHook",priority:-10};const H0=class zh{constructor(...t){this.stage=new bi,t[0]!==void 0&&Gt(Nt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await LS(t),zh._plugins.forEach(i=>{i.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Gt(Nt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,i=!1){const s=zh._plugins.slice(0);s.reverse(),s.forEach(l=>{l.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(t),this.renderer=null}};H0._plugins=[];let P0=H0;we.handleByList(ct.Application,P0._plugins);we.add(k0);class N0 extends Mi{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Gt(Nt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Gt(Nt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Gt(Nt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Gt(Nt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Gt(Nt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var i;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(i=this.chars[s].texture)==null||i.destroy();this.chars=null,t&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}const Wm=[{offset:0,color:"white"},{offset:1,color:"black"}],ff=class Dh{constructor(...t){this.uid=ce("fillGradient"),this.type="linear",this.colorStops=[];let i=kS(t);i={...i.type==="radial"?Dh.defaultRadialOptions:Dh.defaultLinearOptions,...Qy(i)},this._textureSize=i.textureSize,i.type==="radial"?(this.center=i.center,this.outerCenter=i.outerCenter??this.center,this.innerRadius=i.innerRadius,this.outerRadius=i.outerRadius,this.scale=i.scale,this.rotation=i.rotation):(this.start=i.start,this.end=i.end),this.textureSpace=i.textureSpace,this.type=i.type,i.colorStops.forEach(l=>{this.addColorStop(l.offset,l.color)})}addColorStop(t,i){return this.colorStops.push({offset:t,color:he.shared.setValue(i).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:Wm,i=this._textureSize,{canvas:s,context:l}=ty(i,1),u=l.createLinearGradient(0,0,this._textureSize,0);Jm(u,t),l.fillStyle=u,l.fillRect(0,0,i,1),this.texture=new Ct({source:new ys({resource:s})});const{x:c,y:f}=this.start,{x:p,y:g}=this.end,m=new Et,y=p-c,_=g-f,v=Math.sqrt(y*y+_*_),E=Math.atan2(_,y);m.scale(v/i,1),m.rotate(E),m.translate(c,f),this.textureSpace==="local"&&m.scale(i,i),this.transform=m}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:Wm,i=this._textureSize,{canvas:s,context:l}=ty(i,i),{x:u,y:c}=this.center,{x:f,y:p}=this.outerCenter,g=this.innerRadius,m=this.outerRadius,y=f-m,_=p-m,v=i/(m*2),E=(u-y)*v,M=(c-_)*v,T=l.createRadialGradient(E,M,g*v,(f-y)*v,(p-_)*v,m*v);Jm(T,t),l.fillStyle=t[t.length-1].color,l.fillRect(0,0,i,i),l.fillStyle=T,l.translate(E,M),l.rotate(this.rotation),l.scale(1,this.scale),l.translate(-E,-M),l.fillRect(0,0,i,i),this.texture=new Ct({source:new ys({resource:s,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const C=new Et;C.scale(1/v,1/v),C.translate(y,_),this.textureSpace==="local"&&C.scale(i,i),this.transform=C}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};ff.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256};ff.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let vi=ff;function Jm(a,t){for(let i=0;i<t.length;i++){const s=t[i];a.addColorStop(s.offset,s.color)}}function ty(a,t){const i=ne.get().createCanvas(a,t),s=i.getContext("2d");return{canvas:i,context:s}}function kS(a){let t=a[0]??{};return(typeof t=="number"||a[1])&&(Gt("8.5.2","use options object instead"),t={type:"linear",start:{x:a[0],y:a[1]},end:{x:a[2],y:a[3]},textureSpace:a[4],textureSize:a[5]??vi.defaultLinearOptions.textureSize}),t}const ey={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class So{constructor(t,i){this.uid=ce("fillPattern"),this.transform=new Et,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),i&&(t.source.style.addressModeU=ey[i].addressModeU,t.source.style.addressModeV=ey[i].addressModeV)}setTransform(t){const i=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/i.frame.width,1/i.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var oh,iy;function HS(){if(iy)return oh;iy=1,oh=i;var a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function i(u){var c=[];return u.replace(t,function(f,p,g){var m=p.toLowerCase();for(g=l(g),m=="m"&&g.length>2&&(c.push([p].concat(g.splice(0,2))),m="l",p=p=="m"?"l":"L");;){if(g.length==a[m])return g.unshift(p),c.push(g);if(g.length<a[m])throw new Error("malformed path data");c.push([p].concat(g.splice(0,a[m])))}}),c}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function l(u){var c=u.match(s);return c?c.map(Number):[]}return oh}var PS=HS();const NS=sf(PS);function FS(a,t){const i=NS(a),s=[];let l=null,u=0,c=0;for(let f=0;f<i.length;f++){const p=i[f],g=p[0],m=p;switch(g){case"M":u=m[1],c=m[2],t.moveTo(u,c);break;case"m":u+=m[1],c+=m[2],t.moveTo(u,c);break;case"H":u=m[1],t.lineTo(u,c);break;case"h":u+=m[1],t.lineTo(u,c);break;case"V":c=m[1],t.lineTo(u,c);break;case"v":c+=m[1],t.lineTo(u,c);break;case"L":u=m[1],c=m[2],t.lineTo(u,c);break;case"l":u+=m[1],c+=m[2],t.lineTo(u,c);break;case"C":u=m[5],c=m[6],t.bezierCurveTo(m[1],m[2],m[3],m[4],u,c);break;case"c":t.bezierCurveTo(u+m[1],c+m[2],u+m[3],c+m[4],u+m[5],c+m[6]),u+=m[5],c+=m[6];break;case"S":u=m[3],c=m[4],t.bezierCurveToShort(m[1],m[2],u,c);break;case"s":t.bezierCurveToShort(u+m[1],c+m[2],u+m[3],c+m[4]),u+=m[3],c+=m[4];break;case"Q":u=m[3],c=m[4],t.quadraticCurveTo(m[1],m[2],u,c);break;case"q":t.quadraticCurveTo(u+m[1],c+m[2],u+m[3],c+m[4]),u+=m[3],c+=m[4];break;case"T":u=m[1],c=m[2],t.quadraticCurveToShort(u,c);break;case"t":u+=m[1],c+=m[2],t.quadraticCurveToShort(u,c);break;case"A":u=m[6],c=m[7],t.arcToSvg(m[1],m[2],m[3],m[4],m[5],u,c);break;case"a":u+=m[6],c+=m[7],t.arcToSvg(m[1],m[2],m[3],m[4],m[5],u,c);break;case"Z":case"z":t.closePath(),s.length>0&&(l=s.pop(),l?(u=l.startX,c=l.startY):(u=0,c=0)),l=null;break;default:Wt(`Unknown SVG path command: ${g}`)}g!=="Z"&&g!=="z"&&l===null&&(l={startX:u,startY:c},s.push(l))}return t}class df{constructor(t=0,i=0,s=0){this.type="circle",this.x=t,this.y=i,this.radius=s}clone(){return new df(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const s=this.radius*this.radius;let l=this.x-t,u=this.y-i;return l*=l,u*=u,l+u<=s}strokeContains(t,i,s,l=.5){if(this.radius===0)return!1;const u=this.x-t,c=this.y-i,f=this.radius,p=(1-l)*s,g=Math.sqrt(u*u+c*c);return g<=f+p&&g>f-(s-p)}getBounds(t){return t||(t=new ue),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class pf{constructor(t=0,i=0,s=0,l=0){this.type="ellipse",this.x=t,this.y=i,this.halfWidth=s,this.halfHeight=l}clone(){return new pf(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,i){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,l=(i-this.y)/this.halfHeight;return s*=s,l*=l,s+l<=1}strokeContains(t,i,s,l=.5){const{halfWidth:u,halfHeight:c}=this;if(u<=0||c<=0)return!1;const f=s*(1-l),p=s-f,g=u-p,m=c-p,y=u+f,_=c+f,v=t-this.x,E=i-this.y,M=v*v/(g*g)+E*E/(m*m),T=v*v/(y*y)+E*E/(_*_);return M>1&&T<=1}getBounds(t){return t||(t=new ue),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function YS(a,t,i,s,l,u){const c=a-i,f=t-s,p=l-i,g=u-s,m=c*p+f*g,y=p*p+g*g;let _=-1;y!==0&&(_=m/y);let v,E;_<0?(v=i,E=s):_>1?(v=l,E=u):(v=i+_*p,E=s+_*g);const M=a-v,T=t-E;return M*M+T*T}let IS,XS;class Or{constructor(...t){this.type="polygon";let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const s=[];for(let l=0,u=i.length;l<u;l++)s.push(i[l].x,i[l].y);i=s}this.points=i,this.closePath=!0}isClockwise(){let t=0;const i=this.points,s=i.length;for(let l=0;l<s;l+=2){const u=i[l],c=i[l+1],f=i[(l+2)%s],p=i[(l+3)%s];t+=(f-u)*(p+c)}return t<0}containsPolygon(t){const i=this.getBounds(IS),s=t.getBounds(XS);if(!i.containsRect(s))return!1;const l=t.points;for(let u=0;u<l.length;u+=2){const c=l[u],f=l[u+1];if(!this.contains(c,f))return!1}return!0}clone(){const t=this.points.slice(),i=new Or(t);return i.closePath=this.closePath,i}contains(t,i){let s=!1;const l=this.points.length/2;for(let u=0,c=l-1;u<l;c=u++){const f=this.points[u*2],p=this.points[u*2+1],g=this.points[c*2],m=this.points[c*2+1];p>i!=m>i&&t<(g-f)*((i-p)/(m-p))+f&&(s=!s)}return s}strokeContains(t,i,s,l=.5){const u=s*s,c=u*(1-l),f=u-c,{points:p}=this,g=p.length-(this.closePath?0:2);for(let m=0;m<g;m+=2){const y=p[m],_=p[m+1],v=p[(m+2)%p.length],E=p[(m+3)%p.length],M=YS(t,i,y,_,v,E),T=Math.sign((v-y)*(i-_)-(E-_)*(t-y));if(M<=(T<0?f:c))return!0}return!1}getBounds(t){t||(t=new ue);const i=this.points;let s=1/0,l=-1/0,u=1/0,c=-1/0;for(let f=0,p=i.length;f<p;f+=2){const g=i[f],m=i[f+1];s=g<s?g:s,l=g>l?g:l,u=m<u?m:u,c=m>c?m:c}return t.x=s,t.width=l-s,t.y=u,t.height=c-u,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const no=(a,t,i,s,l,u,c)=>{const f=a-i,p=t-s,g=Math.sqrt(f*f+p*p);return g>=l-u&&g<=l+c};class gf{constructor(t=0,i=0,s=0,l=0,u=20){this.type="roundedRectangle",this.x=t,this.y=i,this.width=s,this.height=l,this.radius=u}getBounds(t){return t||(t=new ue),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new gf(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+s&&i<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let l=t-(this.x+s),u=i-(this.y+s);const c=s*s;if(l*l+u*u<=c||(l=t-(this.x+this.width-s),l*l+u*u<=c)||(u=i-(this.y+this.height-s),l*l+u*u<=c)||(l=t-(this.x+s),l*l+u*u<=c))return!0}return!1}strokeContains(t,i,s,l=.5){const{x:u,y:c,width:f,height:p,radius:g}=this,m=s*(1-l),y=s-m,_=u+g,v=c+g,E=f-g*2,M=p-g*2,T=u+f,C=c+p;return(t>=u-m&&t<=u+y||t>=T-y&&t<=T+m)&&i>=v&&i<=v+M||(i>=c-m&&i<=c+y||i>=C-y&&i<=C+m)&&t>=_&&t<=_+E?!0:t<_&&i<v&&no(t,i,_,v,g,y,m)||t>T-g&&i<v&&no(t,i,T-g,v,g,y,m)||t>T-g&&i>C-g&&no(t,i,T-g,C-g,g,y,m)||t<_&&i>C-g&&no(t,i,_,C-g,g,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const jS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function qS(a){let t="";for(let i=0;i<a;++i)i>0&&(t+=`
else `),i<a-1&&(t+=`if(test == ${i}.0){}`);return t}function VS(a,t){if(a===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=jS.replace(/%forloop%/gi,qS(a));if(t.shaderSource(i,s),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))a=a/2|0;else break}}finally{t.deleteShader(i)}return a}let aa=null;function F0(){var t;if(aa)return aa;const a=w0();return aa=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),aa=VS(aa,a),(t=a.getExtension("WEBGL_lose_context"))==null||t.loseContext(),aa}const Y0={};function $S(a,t){let i=2166136261;for(let s=0;s<t;s++)i^=a[s].uid,i=Math.imul(i,16777619),i>>>=0;return Y0[i]||ZS(a,t,i)}let uh=0;function ZS(a,t,i){const s={};let l=0;uh||(uh=F0());for(let c=0;c<uh;c++){const f=c<t?a[c]:Ct.EMPTY.source;s[l++]=f.source,s[l++]=f.style}const u=new ho(s);return Y0[i]=u,u}class ny{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function sy(a,t){const i=a.byteLength/8|0,s=new Float64Array(a,0,i);new Float64Array(t,0,i).set(s);const u=a.byteLength-i*8;if(u>0){const c=new Uint8Array(a,i*8,u);new Uint8Array(t,i*8,u).set(c)}}const QS={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var KS=(a=>(a[a.DISABLED=0]="DISABLED",a[a.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",a[a.MASK_ACTIVE=2]="MASK_ACTIVE",a[a.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",a[a.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",a[a.NONE=5]="NONE",a))(KS||{});function ay(a,t){return t.alphaMode==="no-premultiply-alpha"&&QS[a]||a}class WS{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const i=this.textures[t];this.textures[t]=null,this.ids[i.uid]=null}this.count=0}}class JS{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new WS,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const I0=[];let Gh=0;function ry(){return Gh>0?I0[--Gh]:new JS}function ly(a){I0[Gh++]=a}let _r=0;const X0=class fo{constructor(t={}){this.uid=ce("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],fo.defaultOptions.maxTextures=fo.defaultOptions.maxTextures??F0(),t={...fo.defaultOptions,...t};const{maxTextures:i,attributesInitialSize:s,indicesInitialSize:l}=t;this.attributeBuffer=new ny(s*4),this.indexBuffer=new Uint16Array(l),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)ly(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,i){const s=t._batch.textures.ids[i._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=i,!0)}updateElement(t){this.dirty=!0;const i=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,i.float32View,i.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,i.float32View,i.uint32View,t._attributeStart,t._textureId)}break(t){const i=this._elements;if(!i[this.elementStart])return;let s=ry(),l=s.textures;l.clear();const u=i[this.elementStart];let c=ay(u.blendMode,u.texture._source),f=u.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const p=this.attributeBuffer.float32View,g=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,_=this._batchIndexStart,v="startBatch";const E=this.maxTextures;for(let M=this.elementStart;M<this.elementSize;++M){const T=i[M];i[M]=null;const z=T.texture._source,B=ay(T.blendMode,z),N=c!==B||f!==T.topology;if(z._batchTick===_r&&!N){T._textureId=z._textureBindLocation,y+=T.indexSize,T.packAsQuad?(this.packQuadAttributes(T,p,g,T._attributeStart,T._textureId),this.packQuadIndex(m,T._indexStart,T._attributeStart/this.vertexSize)):(this.packAttributes(T,p,g,T._attributeStart,T._textureId),this.packIndex(T,m,T._indexStart,T._attributeStart/this.vertexSize)),T._batch=s;continue}z._batchTick=_r,(l.count>=E||N)&&(this._finishBatch(s,_,y-_,l,c,f,t,v),v="renderBatch",_=y,c=B,f=T.topology,s=ry(),l=s.textures,l.clear(),++_r),T._textureId=z._textureBindLocation=l.count,l.ids[z.uid]=l.count,l.textures[l.count++]=z,T._batch=s,y+=T.indexSize,T.packAsQuad?(this.packQuadAttributes(T,p,g,T._attributeStart,T._textureId),this.packQuadIndex(m,T._indexStart,T._attributeStart/this.vertexSize)):(this.packAttributes(T,p,g,T._attributeStart,T._textureId),this.packIndex(T,m,T._indexStart,T._attributeStart/this.vertexSize))}l.count>0&&(this._finishBatch(s,_,y-_,l,c,f,t,v),_=y,++_r),this.elementStart=this.elementSize,this._batchIndexStart=_,this._batchIndexSize=y}_finishBatch(t,i,s,l,u,c,f,p){t.gpuBindGroup=null,t.bindGroup=null,t.action=p,t.batcher=this,t.textures=l,t.blendMode=u,t.topology=c,t.start=i,t.size=s,++_r,this.batches[this.batchIndex++]=t,f.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const i=Math.max(t,this.attributeBuffer.size*2),s=new ny(i);sy(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const i=this.indexBuffer;let s=Math.max(t,i.length*1.5);s+=s%2;const l=s>65535?new Uint32Array(s):new Uint16Array(s);if(l.BYTES_PER_ELEMENT!==i.BYTES_PER_ELEMENT)for(let u=0;u<i.length;u++)l[u]=i[u];else sy(i.buffer,l.buffer);this.indexBuffer=l}packQuadIndex(t,i,s){t[i]=s+0,t[i+1]=s+1,t[i+2]=s+2,t[i+3]=s+0,t[i+4]=s+2,t[i+5]=s+3}packIndex(t,i,s,l){const u=t.indices,c=t.indexSize,f=t.indexOffset,p=t.attributeOffset;for(let g=0;g<c;g++)i[s++]=l+u[g+f]-p}destroy(){for(let t=0;t<this.batches.length;t++)ly(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};X0.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let t1=X0;var qe=(a=>(a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE",a[a.STATIC=1024]="STATIC",a))(qe||{});class Gr extends Mi{constructor(t){let{data:i,size:s}=t;const{usage:l,label:u,shrinkToFit:c}=t;super(),this.uid=ce("buffer"),this._resourceType="buffer",this._resourceId=ce("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,i instanceof Array&&(i=new Float32Array(i)),this._data=i,s??(s=i==null?void 0:i.byteLength);const f=!!i;this.descriptor={size:s,usage:l,mappedAtCreation:f,label:u},this.shrinkToFit=c??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&qe.STATIC)}set static(t){t?this.descriptor.usage|=qe.STATIC:this.descriptor.usage&=~qe.STATIC}setDataWithSize(t,i,s){if(this._updateID++,this._updateSize=i*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const l=this._data;if(this._data=t,this._dataInt32=null,!l||l.length!==t.length){!this.shrinkToFit&&l&&t.byteLength<l.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=ce("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function j0(a,t){if(!(a instanceof Gr)){let i=t?qe.INDEX:qe.VERTEX;a instanceof Array&&(t?(a=new Uint32Array(a),i=qe.INDEX|qe.COPY_DST):(a=new Float32Array(a),i=qe.VERTEX|qe.COPY_DST)),a=new Gr({data:a,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return a}function e1(a,t,i){const s=a.getAttribute(t);if(!s)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;const l=s.buffer.data;let u=1/0,c=1/0,f=-1/0,p=-1/0;const g=l.BYTES_PER_ELEMENT,m=(s.offset||0)/g,y=(s.stride||2*4)/g;for(let _=m;_<l.length;_+=y){const v=l[_],E=l[_+1];v>f&&(f=v),E>p&&(p=E),v<u&&(u=v),E<c&&(c=E)}return i.minX=u,i.minY=c,i.maxX=f,i.maxY=p,i}function i1(a){return(a instanceof Gr||Array.isArray(a)||a.BYTES_PER_ELEMENT)&&(a={buffer:a}),a.buffer=j0(a.buffer,!1),a}class n1 extends Mi{constructor(t={}){super(),this.uid=ce("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Le,this._boundsDirty=!0;const{attributes:i,indexBuffer:s,topology:l}=t;if(this.buffers=[],this.attributes={},i)for(const u in i)this.addAttribute(u,i[u]);this.instanceCount=t.instanceCount??1,s&&this.addIndex(s),this.topology=l||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const i=this.attributes[t];return i.buffer.data.length/(i.stride/4||i.size)}return 0}addAttribute(t,i){const s=i1(i);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=s}addIndex(t){this.indexBuffer=j0(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,e1(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(i=>i.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const s1=new Float32Array(1),a1=new Uint32Array(1);class r1 extends n1{constructor(){const i=new Gr({data:s1,label:"attribute-batch-buffer",usage:qe.VERTEX|qe.COPY_DST,shrinkToFit:!1}),s=new Gr({data:a1,label:"index-batch-buffer",usage:qe.INDEX|qe.COPY_DST,shrinkToFit:!1}),l=6*4;super({attributes:{aPosition:{buffer:i,format:"float32x2",stride:l,offset:0},aUV:{buffer:i,format:"float32x2",stride:l,offset:2*4},aColor:{buffer:i,format:"unorm8x4",stride:l,offset:4*4},aTextureIdAndRound:{buffer:i,format:"uint16x2",stride:l,offset:5*4}},indexBuffer:s})}}function oy(a,t,i){if(a)for(const s in a){const l=s.toLocaleLowerCase(),u=t[l];if(u){let c=a[s];s==="header"&&(c=c.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&u.push(`//----${i}----//`),u.push(c)}else Wt(`${s} placement hook does not exist in shader`)}}const l1=/\{\{(.*?)\}\}/g;function uy(a){var s;const t={};return(((s=a.match(l1))==null?void 0:s.map(l=>l.replace(/[{()}]/g,"")))??[]).forEach(l=>{t[l]=[]}),t}function cy(a,t){let i;const s=/@in\s+([^;]+);/g;for(;(i=s.exec(a))!==null;)t.push(i[1])}function hy(a,t,i=!1){const s=[];cy(t,s),a.forEach(f=>{f.header&&cy(f.header,s)});const l=s;i&&l.sort();const u=l.map((f,p)=>`       @location(${p}) ${f},`).join(`
`);let c=t.replace(/@in\s+[^;]+;\s*/g,"");return c=c.replace("{{in}}",`
${u}
`),c}function fy(a,t){let i;const s=/@out\s+([^;]+);/g;for(;(i=s.exec(a))!==null;)t.push(i[1])}function o1(a){const i=/\b(\w+)\s*:/g.exec(a);return i?i[1]:""}function u1(a){const t=/@.*?\s+/g;return a.replace(t,"")}function c1(a,t){const i=[];fy(t,i),a.forEach(p=>{p.header&&fy(p.header,i)});let s=0;const l=i.sort().map(p=>p.indexOf("builtin")>-1?p:`@location(${s++}) ${p}`).join(`,
`),u=i.sort().map(p=>`       var ${u1(p)};`).join(`
`),c=`return VSOutput(
            ${i.sort().map(p=>` ${o1(p)}`).join(`,
`)});`;let f=t.replace(/@out\s+[^;]+;\s*/g,"");return f=f.replace("{{struct}}",`
${l}
`),f=f.replace("{{start}}",`
${u}
`),f=f.replace("{{return}}",`
${c}
`),f}function dy(a,t){let i=a;for(const s in t){const l=t[s];l.join(`
`).length?i=i.replace(`{{${s}}}`,`//-----${s} START-----//
${l.join(`
`)}
//----${s} FINISH----//`):i=i.replace(`{{${s}}}`,"")}return i}const zn=Object.create(null),ch=new Map;let h1=0;function f1({template:a,bits:t}){const i=q0(a,t);if(zn[i])return zn[i];const{vertex:s,fragment:l}=p1(a,t);return zn[i]=V0(s,l,t),zn[i]}function d1({template:a,bits:t}){const i=q0(a,t);return zn[i]||(zn[i]=V0(a.vertex,a.fragment,t)),zn[i]}function p1(a,t){const i=t.map(c=>c.vertex).filter(c=>!!c),s=t.map(c=>c.fragment).filter(c=>!!c);let l=hy(i,a.vertex,!0);l=c1(i,l);const u=hy(s,a.fragment,!0);return{vertex:l,fragment:u}}function q0(a,t){return t.map(i=>(ch.has(i)||ch.set(i,h1++),ch.get(i))).sort((i,s)=>i-s).join("-")+a.vertex+a.fragment}function V0(a,t,i){const s=uy(a),l=uy(t);return i.forEach(u=>{oy(u.vertex,s,u.name),oy(u.fragment,l,u.name)}),{vertex:dy(a,s),fragment:dy(t,l)}}const g1=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,m1=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,y1=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,b1=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,v1={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},x1={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function _1({bits:a,name:t}){const i=f1({template:{fragment:m1,vertex:g1},bits:[v1,...a]});return _o.from({name:t,vertex:{source:i.vertex,entryPoint:"main"},fragment:{source:i.fragment,entryPoint:"main"}})}function S1({bits:a,name:t}){return new E0({name:t,...d1({template:{vertex:y1,fragment:b1},bits:[x1,...a]})})}const A1={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},T1={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},hh={};function w1(a){const t=[];if(a===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let s=0;s<a;s++)t.push(`@group(1) @binding(${i++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${i++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function M1(a){const t=[];if(a===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let i=0;i<a;i++)i===a-1?t.push("  default:{"):t.push(`  case ${i}:{`),t.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function E1(a){return hh[a]||(hh[a]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${w1(a)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${M1(a)}
            `}}),hh[a]}const fh={};function C1(a){const t=[];for(let i=0;i<a;i++)i>0&&t.push("else"),i<a-1&&t.push(`if(vTextureId < ${i}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${i}], vUV);`),t.push("}");return t.join(`
`)}function R1(a){return fh[a]||(fh[a]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${a}];

            `,main:`

                ${C1(a)}
            `}}),fh[a]}const O1={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},z1={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},py={};function D1(a){let t=py[a];if(t)return t;const i=new Int32Array(a);for(let s=0;s<a;s++)i[s]=s;return t=py[a]=new z0({uTextures:{value:i,type:"i32",size:a}},{isStatic:!0}),t}class G1 extends hf{constructor(t){const i=S1({name:"batch",bits:[T1,R1(t),z1]}),s=_1({name:"batch",bits:[A1,E1(t),O1]});super({glProgram:i,gpuProgram:s,resources:{batchSamplers:D1(t)}})}}let gy=null;const $0=class Z0 extends t1{constructor(){super(...arguments),this.geometry=new r1,this.shader=gy||(gy=new G1(this.maxTextures)),this.name=Z0.extension.name,this.vertexSize=6}packAttributes(t,i,s,l,u){const c=u<<16|t.roundPixels&65535,f=t.transform,p=f.a,g=f.b,m=f.c,y=f.d,_=f.tx,v=f.ty,{positions:E,uvs:M}=t,T=t.color,C=t.attributeOffset,z=C+t.attributeSize;for(let B=C;B<z;B++){const N=B*2,I=E[N],V=E[N+1];i[l++]=p*I+m*V+_,i[l++]=y*V+g*I+v,i[l++]=M[N],i[l++]=M[N+1],s[l++]=T,s[l++]=c}}packQuadAttributes(t,i,s,l,u){const c=t.texture,f=t.transform,p=f.a,g=f.b,m=f.c,y=f.d,_=f.tx,v=f.ty,E=t.bounds,M=E.maxX,T=E.minX,C=E.maxY,z=E.minY,B=c.uvs,N=t.color,I=u<<16|t.roundPixels&65535;i[l+0]=p*T+m*z+_,i[l+1]=y*z+g*T+v,i[l+2]=B.x0,i[l+3]=B.y0,s[l+4]=N,s[l+5]=I,i[l+6]=p*M+m*z+_,i[l+7]=y*z+g*M+v,i[l+8]=B.x1,i[l+9]=B.y1,s[l+10]=N,s[l+11]=I,i[l+12]=p*M+m*C+_,i[l+13]=y*C+g*M+v,i[l+14]=B.x2,i[l+15]=B.y2,s[l+16]=N,s[l+17]=I,i[l+18]=p*T+m*C+_,i[l+19]=y*C+g*T+v,i[l+20]=B.x3,i[l+21]=B.y3,s[l+22]=N,s[l+23]=I}};$0.extension={type:[ct.Batcher],name:"default"};let B1=$0;function L1(a,t,i,s,l,u,c,f=null){let p=0;i*=t,l*=u;const g=f.a,m=f.b,y=f.c,_=f.d,v=f.tx,E=f.ty;for(;p<c;){const M=a[i],T=a[i+1];s[l]=g*M+y*T+v,s[l+1]=m*M+_*T+E,l+=u,i+=t,p++}}function U1(a,t,i,s){let l=0;for(t*=i;l<s;)a[t]=0,a[t+1]=0,t+=i,l++}function Q0(a,t,i,s,l){const u=t.a,c=t.b,f=t.c,p=t.d,g=t.tx,m=t.ty;i||(i=0),s||(s=2),l||(l=a.length/s-i);let y=i*s;for(let _=0;_<l;_++){const v=a[y],E=a[y+1];a[y]=u*v+f*E+g,a[y+1]=c*v+p*E+m,y+=s}}const k1=new Et;class K0{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,i=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?r0(i,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):i+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||k1}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Br={extension:{type:ct.ShapeBuilder,name:"circle"},build(a,t){let i,s,l,u,c,f;if(a.type==="circle"){const N=a;i=N.x,s=N.y,c=f=N.radius,l=u=0}else if(a.type==="ellipse"){const N=a;i=N.x,s=N.y,c=N.halfWidth,f=N.halfHeight,l=u=0}else{const N=a,I=N.width/2,V=N.height/2;i=N.x+I,s=N.y+V,c=f=Math.max(0,Math.min(N.radius,Math.min(I,V))),l=I-c,u=V-f}if(!(c>=0&&f>=0&&l>=0&&u>=0))return t;const p=Math.ceil(2.3*Math.sqrt(c+f)),g=p*8+(l?4:0)+(u?4:0);if(g===0)return t;if(p===0)return t[0]=t[6]=i+l,t[1]=t[3]=s+u,t[2]=t[4]=i-l,t[5]=t[7]=s-u,t;let m=0,y=p*4+(l?2:0)+2,_=y,v=g,E=l+c,M=u,T=i+E,C=i-E,z=s+M;if(t[m++]=T,t[m++]=z,t[--y]=z,t[--y]=C,u){const N=s-M;t[_++]=C,t[_++]=N,t[--v]=N,t[--v]=T}for(let N=1;N<p;N++){const I=Math.PI/2*(N/p),V=l+Math.cos(I)*c,$=u+Math.sin(I)*f,at=i+V,nt=i-V,it=s+$,W=s-$;t[m++]=at,t[m++]=it,t[--y]=it,t[--y]=nt,t[_++]=nt,t[_++]=W,t[--v]=W,t[--v]=at}E=l,M=u+f,T=i+E,C=i-E,z=s+M;const B=s-M;return t[m++]=T,t[m++]=z,t[--v]=B,t[--v]=T,l&&(t[m++]=C,t[m++]=z,t[--v]=B,t[--v]=C),t},triangulate(a,t,i,s,l,u){if(a.length===0)return;let c=0,f=0;for(let m=0;m<a.length;m+=2)c+=a[m],f+=a[m+1];c/=a.length/2,f/=a.length/2;let p=s;t[p*i]=c,t[p*i+1]=f;const g=p++;for(let m=0;m<a.length;m+=2)t[p*i]=a[m],t[p*i+1]=a[m+1],m>0&&(l[u++]=p,l[u++]=g,l[u++]=p-1),p++;l[u++]=g+1,l[u++]=g,l[u++]=p-1}},H1={...Br,extension:{...Br.extension,name:"ellipse"}},P1={...Br,extension:{...Br.extension,name:"roundedRectangle"}},W0=1e-4,my=1e-4;function N1(a){const t=a.length;if(t<6)return 1;let i=0;for(let s=0,l=a[t-2],u=a[t-1];s<t;s+=2){const c=a[s],f=a[s+1];i+=(c-l)*(f+u),l=c,u=f}return i<0?-1:1}function yy(a,t,i,s,l,u,c,f){const p=a-i*l,g=t-s*l,m=a+i*u,y=t+s*u;let _,v;c?(_=s,v=-i):(_=-s,v=i);const E=p+_,M=g+v,T=m+_,C=y+v;return f.push(E,M),f.push(T,C),2}function Kn(a,t,i,s,l,u,c,f){const p=i-a,g=s-t;let m=Math.atan2(p,g),y=Math.atan2(l-a,u-t);f&&m<y?m+=Math.PI*2:!f&&m>y&&(y+=Math.PI*2);let _=m;const v=y-m,E=Math.abs(v),M=Math.sqrt(p*p+g*g),T=(15*E*Math.sqrt(M)/Math.PI>>0)+1,C=v/T;if(_+=C,f){c.push(a,t),c.push(i,s);for(let z=1,B=_;z<T;z++,B+=C)c.push(a,t),c.push(a+Math.sin(B)*M,t+Math.cos(B)*M);c.push(a,t),c.push(l,u)}else{c.push(i,s),c.push(a,t);for(let z=1,B=_;z<T;z++,B+=C)c.push(a+Math.sin(B)*M,t+Math.cos(B)*M),c.push(a,t);c.push(l,u),c.push(a,t)}return T*2}function F1(a,t,i,s,l,u){const c=W0;if(a.length===0)return;const f=t;let p=f.alignment;if(t.alignment!==.5){let H=N1(a);p=(p-.5)*H+.5}const g=new Re(a[0],a[1]),m=new Re(a[a.length-2],a[a.length-1]),y=s,_=Math.abs(g.x-m.x)<c&&Math.abs(g.y-m.y)<c;if(y){a=a.slice(),_&&(a.pop(),a.pop(),m.set(a[a.length-2],a[a.length-1]));const H=(g.x+m.x)*.5,A=(m.y+g.y)*.5;a.unshift(H,A),a.push(H,A)}const v=l,E=a.length/2;let M=a.length;const T=v.length/2,C=f.width/2,z=C*C,B=f.miterLimit*f.miterLimit;let N=a[0],I=a[1],V=a[2],$=a[3],at=0,nt=0,it=-(I-$),W=N-V,rt=0,gt=0,kt=Math.sqrt(it*it+W*W);it/=kt,W/=kt,it*=C,W*=C;const Ft=p,x=(1-Ft)*2,w=Ft*2;y||(f.cap==="round"?M+=Kn(N-it*(x-w)*.5,I-W*(x-w)*.5,N-it*x,I-W*x,N+it*w,I+W*w,v,!0)+2:f.cap==="square"&&(M+=yy(N,I,it,W,x,w,!0,v))),v.push(N-it*x,I-W*x),v.push(N+it*w,I+W*w);for(let H=1;H<E-1;++H){N=a[(H-1)*2],I=a[(H-1)*2+1],V=a[H*2],$=a[H*2+1],at=a[(H+1)*2],nt=a[(H+1)*2+1],it=-(I-$),W=N-V,kt=Math.sqrt(it*it+W*W),it/=kt,W/=kt,it*=C,W*=C,rt=-($-nt),gt=V-at,kt=Math.sqrt(rt*rt+gt*gt),rt/=kt,gt/=kt,rt*=C,gt*=C;const A=V-N,D=I-$,U=V-at,X=nt-$,J=A*U+D*X,tt=D*U-X*A,et=tt<0;if(Math.abs(tt)<.001*Math.abs(J)){v.push(V-it*x,$-W*x),v.push(V+it*w,$+W*w),J>=0&&(f.join==="round"?M+=Kn(V,$,V-it*x,$-W*x,V-rt*x,$-gt*x,v,!1)+4:M+=2,v.push(V-rt*w,$-gt*w),v.push(V+rt*x,$+gt*x));continue}const mt=(-it+N)*(-W+$)-(-it+V)*(-W+I),lt=(-rt+at)*(-gt+$)-(-rt+V)*(-gt+nt),Ut=(A*lt-U*mt)/tt,Rt=(X*mt-D*lt)/tt,Ue=(Ut-V)*(Ut-V)+(Rt-$)*(Rt-$),xe=V+(Ut-V)*x,ke=$+(Rt-$)*x,He=V-(Ut-V)*w,vt=$-(Rt-$)*w,Ot=Math.min(A*A+D*D,U*U+X*X),$e=et?x:w,wo=Ot+$e*$e*z;Ue<=wo?f.join==="bevel"||Ue/z>B?(et?(v.push(xe,ke),v.push(V+it*w,$+W*w),v.push(xe,ke),v.push(V+rt*w,$+gt*w)):(v.push(V-it*x,$-W*x),v.push(He,vt),v.push(V-rt*x,$-gt*x),v.push(He,vt)),M+=2):f.join==="round"?et?(v.push(xe,ke),v.push(V+it*w,$+W*w),M+=Kn(V,$,V+it*w,$+W*w,V+rt*w,$+gt*w,v,!0)+4,v.push(xe,ke),v.push(V+rt*w,$+gt*w)):(v.push(V-it*x,$-W*x),v.push(He,vt),M+=Kn(V,$,V-it*x,$-W*x,V-rt*x,$-gt*x,v,!1)+4,v.push(V-rt*x,$-gt*x),v.push(He,vt)):(v.push(xe,ke),v.push(He,vt)):(v.push(V-it*x,$-W*x),v.push(V+it*w,$+W*w),f.join==="round"?et?M+=Kn(V,$,V+it*w,$+W*w,V+rt*w,$+gt*w,v,!0)+2:M+=Kn(V,$,V-it*x,$-W*x,V-rt*x,$-gt*x,v,!1)+2:f.join==="miter"&&Ue/z<=B&&(et?(v.push(He,vt),v.push(He,vt)):(v.push(xe,ke),v.push(xe,ke)),M+=2),v.push(V-rt*x,$-gt*x),v.push(V+rt*w,$+gt*w),M+=2)}N=a[(E-2)*2],I=a[(E-2)*2+1],V=a[(E-1)*2],$=a[(E-1)*2+1],it=-(I-$),W=N-V,kt=Math.sqrt(it*it+W*W),it/=kt,W/=kt,it*=C,W*=C,v.push(V-it*x,$-W*x),v.push(V+it*w,$+W*w),y||(f.cap==="round"?M+=Kn(V-it*(x-w)*.5,$-W*(x-w)*.5,V-it*x,$-W*x,V+it*w,$+W*w,v,!1)+2:f.cap==="square"&&(M+=yy(V,$,it,W,x,w,!1,v)));const O=my*my;for(let H=T;H<M+T-2;++H)N=v[H*2],I=v[H*2+1],V=v[(H+1)*2],$=v[(H+1)*2+1],at=v[(H+2)*2],nt=v[(H+2)*2+1],!(Math.abs(N*($-nt)+V*(nt-I)+at*(I-$))<O)&&u.push(H,H+1,H+2)}function Y1(a,t,i,s){const l=W0;if(a.length===0)return;const u=a[0],c=a[1],f=a[a.length-2],p=a[a.length-1],g=t||Math.abs(u-f)<l&&Math.abs(c-p)<l,m=i,y=a.length/2,_=m.length/2;for(let v=0;v<y;v++)m.push(a[v*2]),m.push(a[v*2+1]);for(let v=0;v<y-1;v++)s.push(_+v,_+v+1);g&&s.push(_+y-1,_)}function J0(a,t,i,s,l,u,c){const f=OS(a,t,2);if(!f)return;for(let g=0;g<f.length;g+=3)u[c++]=f[g]+l,u[c++]=f[g+1]+l,u[c++]=f[g+2]+l;let p=l*s;for(let g=0;g<a.length;g+=2)i[p]=a[g],i[p+1]=a[g+1],p+=s}const I1=[],X1={extension:{type:ct.ShapeBuilder,name:"polygon"},build(a,t){for(let i=0;i<a.points.length;i++)t[i]=a.points[i];return t},triangulate(a,t,i,s,l,u){J0(a,I1,t,i,s,l,u)}},j1={extension:{type:ct.ShapeBuilder,name:"rectangle"},build(a,t){const i=a,s=i.x,l=i.y,u=i.width,c=i.height;return u>=0&&c>=0&&(t[0]=s,t[1]=l,t[2]=s+u,t[3]=l,t[4]=s+u,t[5]=l+c,t[6]=s,t[7]=l+c),t},triangulate(a,t,i,s,l,u){let c=0;s*=i,t[s+c]=a[0],t[s+c+1]=a[1],c+=i,t[s+c]=a[2],t[s+c+1]=a[3],c+=i,t[s+c]=a[6],t[s+c+1]=a[7],c+=i,t[s+c]=a[4],t[s+c+1]=a[5],c+=i;const f=s/i;l[u++]=f,l[u++]=f+1,l[u++]=f+2,l[u++]=f+1,l[u++]=f+3,l[u++]=f+2}},q1={extension:{type:ct.ShapeBuilder,name:"triangle"},build(a,t){return t[0]=a.x,t[1]=a.y,t[2]=a.x2,t[3]=a.y2,t[4]=a.x3,t[5]=a.y3,t},triangulate(a,t,i,s,l,u){let c=0;s*=i,t[s+c]=a[0],t[s+c+1]=a[1],c+=i,t[s+c]=a[2],t[s+c+1]=a[3],c+=i,t[s+c]=a[4],t[s+c+1]=a[5];const f=s/i;l[u++]=f,l[u++]=f+1,l[u++]=f+2}},V1=new Et,$1=new ue;function Z1(a,t,i,s){const l=t.matrix?a.copyFrom(t.matrix).invert():a.identity();if(t.textureSpace==="local"){const u=i.getBounds($1);l.translate(-u.x,-u.y),l.scale(1/u.width,1/u.height)}else{l.translate(t.texture.frame.x,t.texture.frame.y),l.scale(1/t.texture.source.width,1/t.texture.source.height);const u=t.texture.source.style;u.addressMode==="clamp-to-edge"&&(u.addressMode="repeat",u.update())}return s&&l.append(V1.copyFrom(s).invert()),l}const Ao={};we.handleByMap(ct.ShapeBuilder,Ao);we.add(j1,X1,q1,Br,H1,P1);const Q1=new ue,K1=new Et;function W1(a,t){const{geometryData:i,batches:s}=t;s.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let l=0;l<a.instructions.length;l++){const u=a.instructions[l];if(u.action==="texture")J1(u.data,s,i);else if(u.action==="fill"||u.action==="stroke"){const c=u.action==="stroke",f=u.data.path.shapePath,p=u.data.style,g=u.data.hole;c&&g&&by(g.shapePath,p,!0,s,i),g&&(f.shapePrimitives[f.shapePrimitives.length-1].holes=g.shapePath.shapePrimitives),by(f,p,c,s,i)}}}function J1(a,t,i){const{vertices:s,uvs:l,indices:u}=i,c=u.length,f=s.length/2,p=[],g=Ao.rectangle,m=Q1,y=a.image;m.x=a.dx,m.y=a.dy,m.width=a.dw,m.height=a.dh;const _=a.transform;g.build(m,p),_&&Q0(p,_),g.triangulate(p,s,2,f,u,c);const v=y.uvs;l.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const E=en.get(K0);E.indexOffset=c,E.indexSize=u.length-c,E.attributeOffset=f,E.attributeSize=s.length/2-f,E.baseColor=a.style,E.alpha=a.alpha,E.texture=y,E.geometryData=i,t.push(E)}function by(a,t,i,s,l){const{vertices:u,uvs:c,indices:f}=l;a.shapePrimitives.forEach(({shape:p,transform:g,holes:m})=>{const y=f.length,_=u.length/2,v=[],E=Ao[p.type];let M="triangle-list";if(E.build(p,v),g&&Q0(v,g),i){const B=p.closePath??!0,N=t;N.pixelLine?(Y1(v,B,u,f),M="line-list"):F1(v,N,!1,B,u,f)}else if(m){const B=[],N=v.slice();tA(m).forEach(V=>{B.push(N.length/2),N.push(...V)}),J0(N,B,u,2,_,f,y)}else E.triangulate(v,u,2,_,f,y);const T=c.length/2,C=t.texture;if(C!==Ct.WHITE){const B=Z1(K1,t,p,g);L1(u,2,_,c,T,2,u.length/2-_,B)}else U1(c,T,2,u.length/2-_);const z=en.get(K0);z.indexOffset=y,z.indexSize=f.length-y,z.attributeOffset=_,z.attributeSize=u.length/2-_,z.baseColor=t.color,z.alpha=t.alpha,z.texture=C,z.geometryData=l,z.topology=M,s.push(z)})}function tA(a){const t=[];for(let i=0;i<a.length;i++){const s=a[i].shape,l=[];Ao[s.type].build(s,l),t.push(l)}return t}class eA{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class iA{constructor(){this.batcher=new B1,this.instructions=new c0}init(){this.instructions.reset()}get geometry(){return Gt(p_,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const mf=class Bh{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){Bh.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??Bh.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let i=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){i?this._cleanGraphicsContextData(t):i=this._initContext(t),W1(t,i);const s=t.batchMode;t.customShader||s==="no-batch"?i.isBatchable=!1:s==="auto"&&(i.isBatchable=i.geometryData.vertices.length<400),t.dirty=!1}return i}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const i=en.get(iA),{batches:s,geometryData:l}=this._gpuContextHash[t.uid],u=l.vertices.length,c=l.indices.length;for(let m=0;m<s.length;m++)s[m].applyTransform=!1;const f=i.batcher;f.ensureAttributeBuffer(u),f.ensureIndexBuffer(c),f.begin();for(let m=0;m<s.length;m++){const y=s[m];f.add(y)}f.finish(i.instructions);const p=f.geometry;p.indexBuffer.setDataWithSize(f.indexBuffer,f.indexSize,!0),p.buffers[0].setDataWithSize(f.attributeBuffer.float32View,f.attributeSize,!0);const g=f.batches;for(let m=0;m<g.length;m++){const y=g[m];y.bindGroup=$S(y.textures.textures,y.textures.count)}return this._graphicsDataContextHash[t.uid]=i,i}_initContext(t){const i=new eA;return i.context=t,this._gpuContextHash[t.uid]=i,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const i=this._gpuContextHash[t.uid];i.isBatchable||this._graphicsDataContextHash[t.uid]&&(en.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),i.batches&&i.batches.forEach(s=>{en.return(s)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};mf.extension={type:[ct.WebGLSystem,ct.WebGPUSystem,ct.CanvasSystem],name:"graphicsContext"};mf.defaultOptions={bezierSmoothness:.5};let tb=mf;const nA=8,so=11920929e-14,sA=1;function eb(a,t,i,s,l,u,c,f,p,g){const y=Math.min(.99,Math.max(0,g??tb.defaultOptions.bezierSmoothness));let _=(sA-y)/1;return _*=_,aA(t,i,s,l,u,c,f,p,a,_),a}function aA(a,t,i,s,l,u,c,f,p,g){Lh(a,t,i,s,l,u,c,f,p,g,0),p.push(c,f)}function Lh(a,t,i,s,l,u,c,f,p,g,m){if(m>nA)return;const y=(a+i)/2,_=(t+s)/2,v=(i+l)/2,E=(s+u)/2,M=(l+c)/2,T=(u+f)/2,C=(y+v)/2,z=(_+E)/2,B=(v+M)/2,N=(E+T)/2,I=(C+B)/2,V=(z+N)/2;if(m>0){let $=c-a,at=f-t;const nt=Math.abs((i-c)*at-(s-f)*$),it=Math.abs((l-c)*at-(u-f)*$);if(nt>so&&it>so){if((nt+it)*(nt+it)<=g*($*$+at*at)){p.push(I,V);return}}else if(nt>so){if(nt*nt<=g*($*$+at*at)){p.push(I,V);return}}else if(it>so){if(it*it<=g*($*$+at*at)){p.push(I,V);return}}else if($=I-(a+c)/2,at=V-(t+f)/2,$*$+at*at<=g){p.push(I,V);return}}Lh(a,t,y,_,C,z,I,V,p,g,m+1),Lh(I,V,B,N,M,T,c,f,p,g,m+1)}const rA=8,lA=11920929e-14,oA=1;function uA(a,t,i,s,l,u,c,f){const g=Math.min(.99,Math.max(0,f??tb.defaultOptions.bezierSmoothness));let m=(oA-g)/1;return m*=m,cA(t,i,s,l,u,c,a,m),a}function cA(a,t,i,s,l,u,c,f){Uh(c,a,t,i,s,l,u,f,0),c.push(l,u)}function Uh(a,t,i,s,l,u,c,f,p){if(p>rA)return;const g=(t+s)/2,m=(i+l)/2,y=(s+u)/2,_=(l+c)/2,v=(g+y)/2,E=(m+_)/2;let M=u-t,T=c-i;const C=Math.abs((s-u)*T-(l-c)*M);if(C>lA){if(C*C<=f*(M*M+T*T)){a.push(v,E);return}}else if(M=v-(t+u)/2,T=E-(i+c)/2,M*M+T*T<=f){a.push(v,E);return}Uh(a,t,i,g,m,v,E,f,p+1),Uh(a,v,E,y,_,u,c,f,p+1)}function ib(a,t,i,s,l,u,c,f){let p=Math.abs(l-u);(!c&&l>u||c&&u>l)&&(p=2*Math.PI-p),f||(f=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(p/Math.PI)))),f=Math.max(f,3);let g=p/f,m=l;g*=c?-1:1;for(let y=0;y<f+1;y++){const _=Math.cos(m),v=Math.sin(m),E=t+_*s,M=i+v*s;a.push(E,M),m+=g}}function hA(a,t,i,s,l,u){const c=a[a.length-2],p=a[a.length-1]-i,g=c-t,m=l-i,y=s-t,_=Math.abs(p*y-g*m);if(_<1e-8||u===0){(a[a.length-2]!==t||a[a.length-1]!==i)&&a.push(t,i);return}const v=p*p+g*g,E=m*m+y*y,M=p*m+g*y,T=u*Math.sqrt(v)/_,C=u*Math.sqrt(E)/_,z=T*M/v,B=C*M/E,N=T*y+C*g,I=T*m+C*p,V=g*(C+z),$=p*(C+z),at=y*(T+B),nt=m*(T+B),it=Math.atan2($-I,V-N),W=Math.atan2(nt-I,at-N);ib(a,N+t,I+i,u,it,W,g*m>y*p)}const zr=Math.PI*2,dh={centerX:0,centerY:0,ang1:0,ang2:0},ph=({x:a,y:t},i,s,l,u,c,f,p)=>{a*=i,t*=s;const g=l*a-u*t,m=u*a+l*t;return p.x=g+c,p.y=m+f,p};function fA(a,t){const i=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:i,l=Math.cos(a),u=Math.sin(a),c=Math.cos(a+t),f=Math.sin(a+t);return[{x:l-u*s,y:u+l*s},{x:c+f*s,y:f-c*s},{x:c,y:f}]}const vy=(a,t,i,s)=>{const l=a*s-t*i<0?-1:1;let u=a*i+t*s;return u>1&&(u=1),u<-1&&(u=-1),l*Math.acos(u)},dA=(a,t,i,s,l,u,c,f,p,g,m,y,_)=>{const v=Math.pow(l,2),E=Math.pow(u,2),M=Math.pow(m,2),T=Math.pow(y,2);let C=v*E-v*T-E*M;C<0&&(C=0),C/=v*T+E*M,C=Math.sqrt(C)*(c===f?-1:1);const z=C*l/u*y,B=C*-u/l*m,N=g*z-p*B+(a+i)/2,I=p*z+g*B+(t+s)/2,V=(m-z)/l,$=(y-B)/u,at=(-m-z)/l,nt=(-y-B)/u,it=vy(1,0,V,$);let W=vy(V,$,at,nt);f===0&&W>0&&(W-=zr),f===1&&W<0&&(W+=zr),_.centerX=N,_.centerY=I,_.ang1=it,_.ang2=W};function pA(a,t,i,s,l,u,c,f=0,p=0,g=0){if(u===0||c===0)return;const m=Math.sin(f*zr/360),y=Math.cos(f*zr/360),_=y*(t-s)/2+m*(i-l)/2,v=-m*(t-s)/2+y*(i-l)/2;if(_===0&&v===0)return;u=Math.abs(u),c=Math.abs(c);const E=Math.pow(_,2)/Math.pow(u,2)+Math.pow(v,2)/Math.pow(c,2);E>1&&(u*=Math.sqrt(E),c*=Math.sqrt(E)),dA(t,i,s,l,u,c,p,g,m,y,_,v,dh);let{ang1:M,ang2:T}=dh;const{centerX:C,centerY:z}=dh;let B=Math.abs(T)/(zr/4);Math.abs(1-B)<1e-7&&(B=1);const N=Math.max(Math.ceil(B),1);T/=N;let I=a[a.length-2],V=a[a.length-1];const $={x:0,y:0};for(let at=0;at<N;at++){const nt=fA(M,T),{x:it,y:W}=ph(nt[0],u,c,y,m,C,z,$),{x:rt,y:gt}=ph(nt[1],u,c,y,m,C,z,$),{x:kt,y:Ft}=ph(nt[2],u,c,y,m,C,z,$);eb(a,I,V,it,W,rt,gt,kt,Ft),I=kt,V=Ft,M+=T}}function gA(a,t,i){const s=(c,f)=>{const p=f.x-c.x,g=f.y-c.y,m=Math.sqrt(p*p+g*g),y=p/m,_=g/m;return{len:m,nx:y,ny:_}},l=(c,f)=>{c===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y)};let u=t[t.length-1];for(let c=0;c<t.length;c++){const f=t[c%t.length],p=f.radius??i;if(p<=0){l(c,f),u=f;continue}const g=t[(c+1)%t.length],m=s(f,u),y=s(f,g);if(m.len<1e-4||y.len<1e-4){l(c,f),u=f;continue}let _=Math.asin(m.nx*y.ny-m.ny*y.nx),v=1,E=!1;m.nx*y.nx-m.ny*-y.ny<0?_<0?_=Math.PI+_:(_=Math.PI-_,v=-1,E=!0):_>0&&(v=-1,E=!0);const M=_/2;let T,C=Math.abs(Math.cos(M)*p/Math.sin(M));C>Math.min(m.len/2,y.len/2)?(C=Math.min(m.len/2,y.len/2),T=Math.abs(C*Math.sin(M)/Math.cos(M))):T=p;const z=f.x+y.nx*C+-y.ny*T*v,B=f.y+y.ny*C+y.nx*T*v,N=Math.atan2(m.ny,m.nx)+Math.PI/2*v,I=Math.atan2(y.ny,y.nx)-Math.PI/2*v;c===0&&a.moveTo(z+Math.cos(N)*T,B+Math.sin(N)*T),a.arc(z,B,T,N,I,E),u=f}}function mA(a,t,i,s){const l=(f,p)=>Math.sqrt((f.x-p.x)**2+(f.y-p.y)**2),u=(f,p,g)=>({x:f.x+(p.x-f.x)*g,y:f.y+(p.y-f.y)*g}),c=t.length;for(let f=0;f<c;f++){const p=t[(f+1)%c],g=p.radius??i;if(g<=0){f===0?a.moveTo(p.x,p.y):a.lineTo(p.x,p.y);continue}const m=t[f],y=t[(f+2)%c],_=l(m,p);let v;if(_<1e-4)v=p;else{const T=Math.min(_/2,g);v=u(p,m,T/_)}const E=l(y,p);let M;if(E<1e-4)M=p;else{const T=Math.min(E/2,g);M=u(p,y,T/E)}f===0?a.moveTo(v.x,v.y):a.lineTo(v.x,v.y),a.quadraticCurveTo(p.x,p.y,M.x,M.y,s)}}const yA=new ue;class bA{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Le,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,i){return this.startPoly(t,i),this}lineTo(t,i){this._ensurePoly();const s=this._currentPoly.points,l=s[s.length-2],u=s[s.length-1];return(l!==t||u!==i)&&s.push(t,i),this}arc(t,i,s,l,u,c){this._ensurePoly(!1);const f=this._currentPoly.points;return ib(f,t,i,s,l,u,c),this}arcTo(t,i,s,l,u){this._ensurePoly();const c=this._currentPoly.points;return hA(c,t,i,s,l,u),this}arcToSvg(t,i,s,l,u,c,f){const p=this._currentPoly.points;return pA(p,this._currentPoly.lastX,this._currentPoly.lastY,c,f,t,i,s,l,u),this}bezierCurveTo(t,i,s,l,u,c,f){this._ensurePoly();const p=this._currentPoly;return eb(this._currentPoly.points,p.lastX,p.lastY,t,i,s,l,u,c,f),this}quadraticCurveTo(t,i,s,l,u){this._ensurePoly();const c=this._currentPoly;return uA(this._currentPoly.points,c.lastX,c.lastY,t,i,s,l,u),this}closePath(){return this.endPoly(!0),this}addPath(t,i){this.endPoly(),i&&!i.isIdentity()&&(t=t.clone(!0),t.transform(i));const s=this.shapePrimitives,l=s.length;for(let u=0;u<t.instructions.length;u++){const c=t.instructions[u];this[c.action](...c.data)}if(t.checkForHoles&&s.length-l>1){let u=null;for(let c=l;c<s.length;c++){const f=s[c];if(f.shape.type==="polygon"){const p=f.shape,g=u==null?void 0:u.shape;g&&g.containsPolygon(p)?(u.holes||(u.holes=[]),u.holes.push(f),s.copyWithin(c,c+1),s.length--,c--):u=f}}}return this}finish(t=!1){this.endPoly(t)}rect(t,i,s,l,u){return this.drawShape(new ue(t,i,s,l),u),this}circle(t,i,s,l){return this.drawShape(new df(t,i,s),l),this}poly(t,i,s){const l=new Or(t);return l.closePath=i,this.drawShape(l,s),this}regularPoly(t,i,s,l,u=0,c){l=Math.max(l|0,3);const f=-1*Math.PI/2+u,p=Math.PI*2/l,g=[];for(let m=0;m<l;m++){const y=f-m*p;g.push(t+s*Math.cos(y),i+s*Math.sin(y))}return this.poly(g,!0,c),this}roundPoly(t,i,s,l,u,c=0,f){if(l=Math.max(l|0,3),u<=0)return this.regularPoly(t,i,s,l,c);const p=s*Math.sin(Math.PI/l)-.001;u=Math.min(u,p);const g=-1*Math.PI/2+c,m=Math.PI*2/l,y=(l-2)*Math.PI/l/2;for(let _=0;_<l;_++){const v=_*m+g,E=t+s*Math.cos(v),M=i+s*Math.sin(v),T=v+Math.PI+y,C=v-Math.PI-y,z=E+u*Math.cos(T),B=M+u*Math.sin(T),N=E+u*Math.cos(C),I=M+u*Math.sin(C);_===0?this.moveTo(z,B):this.lineTo(z,B),this.quadraticCurveTo(E,M,N,I,f)}return this.closePath()}roundShape(t,i,s=!1,l){return t.length<3?this:(s?mA(this,t,i,l):gA(this,t,i),this.closePath())}filletRect(t,i,s,l,u){if(u===0)return this.rect(t,i,s,l);const c=Math.min(s,l)/2,f=Math.min(c,Math.max(-c,u)),p=t+s,g=i+l,m=f<0?-f:0,y=Math.abs(f);return this.moveTo(t,i+y).arcTo(t+m,i+m,t+y,i,y).lineTo(p-y,i).arcTo(p-m,i+m,p,i+y,y).lineTo(p,g-y).arcTo(p-m,g-m,t+s-y,g,y).lineTo(t+y,g).arcTo(t+m,g-m,t,g-y,y).closePath()}chamferRect(t,i,s,l,u,c){if(u<=0)return this.rect(t,i,s,l);const f=Math.min(u,Math.min(s,l)/2),p=t+s,g=i+l,m=[t+f,i,p-f,i,p,i+f,p,g-f,p-f,g,t+f,g,t,g-f,t,i+f];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,c)}ellipse(t,i,s,l,u){return this.drawShape(new pf(t,i,s,l),u),this}roundRect(t,i,s,l,u,c){return this.drawShape(new gf(t,i,s,l,u),c),this}drawShape(t,i){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:i}),this}startPoly(t,i){let s=this._currentPoly;return s&&this.endPoly(),s=new Or,s.points.push(t,i),this._currentPoly=s,this}endPoly(t=!1){const i=this._currentPoly;return i&&i.points.length>2&&(i.closePath=t,this.shapePrimitives.push({shape:i})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Or,t)){const i=this.shapePrimitives[this.shapePrimitives.length-1];if(i){let s=i.shape.x,l=i.shape.y;if(i.transform&&!i.transform.isIdentity()){const u=i.transform,c=s;s=u.a*s+u.c*l+u.tx,l=u.b*c+u.d*l+u.ty}this._currentPoly.points.push(s,l)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let i=0;i<t.instructions.length;i++){const s=t.instructions[i];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const i=this.shapePrimitives;for(let s=0;s<i.length;s++){const l=i[s],u=l.shape.getBounds(yA);l.transform?t.addRect(u,l.transform):t.addRect(u)}return t}}class pa{constructor(t,i=!1){this.instructions=[],this.uid=ce("graphicsPath"),this._dirty=!0,this.checkForHoles=i,typeof t=="string"?FS(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new bA(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,i){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,i]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,i,s,l,u){const c=this.instructions[this.instructions.length-1],f=this.getLastPoint(Re.shared);let p=0,g=0;if(!c||c.action!=="bezierCurveTo")p=f.x,g=f.y;else{p=c.data[2],g=c.data[3];const m=f.x,y=f.y;p=m+(m-p),g=y+(y-g)}return this.instructions.push({action:"bezierCurveTo",data:[p,g,t,i,s,l,u]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,i,s){const l=this.instructions[this.instructions.length-1],u=this.getLastPoint(Re.shared);let c=0,f=0;if(!l||l.action!=="quadraticCurveTo")c=u.x,f=u.y;else{c=l.data[0],f=l.data[1];const p=u.x,g=u.y;c=p+(p-c),f=g+(g-f)}return this.instructions.push({action:"quadraticCurveTo",data:[c,f,t,i,s]}),this._dirty=!0,this}rect(t,i,s,l,u){return this.instructions.push({action:"rect",data:[t,i,s,l,u]}),this._dirty=!0,this}circle(t,i,s,l){return this.instructions.push({action:"circle",data:[t,i,s,l]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,i,s,l,u,c,f){u||(u=l/2);const p=-1*Math.PI/2+c,g=s*2,m=Math.PI*2/g,y=[];for(let _=0;_<g;_++){const v=_%2?u:l,E=_*m+p;y.push(t+v*Math.cos(E),i+v*Math.sin(E))}return this.poly(y,!0,f),this}clone(t=!1){const i=new pa;if(i.checkForHoles=this.checkForHoles,!t)i.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const l=this.instructions[s];i.instructions.push({action:l.action,data:l.data.slice()})}return i}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const i=t.a,s=t.b,l=t.c,u=t.d,c=t.tx,f=t.ty;let p=0,g=0,m=0,y=0,_=0,v=0,E=0,M=0;for(let T=0;T<this.instructions.length;T++){const C=this.instructions[T],z=C.data;switch(C.action){case"moveTo":case"lineTo":p=z[0],g=z[1],z[0]=i*p+l*g+c,z[1]=s*p+u*g+f;break;case"bezierCurveTo":m=z[0],y=z[1],_=z[2],v=z[3],p=z[4],g=z[5],z[0]=i*m+l*y+c,z[1]=s*m+u*y+f,z[2]=i*_+l*v+c,z[3]=s*_+u*v+f,z[4]=i*p+l*g+c,z[5]=s*p+u*g+f;break;case"quadraticCurveTo":m=z[0],y=z[1],p=z[2],g=z[3],z[0]=i*m+l*y+c,z[1]=s*m+u*y+f,z[2]=i*p+l*g+c,z[3]=s*p+u*g+f;break;case"arcToSvg":p=z[5],g=z[6],E=z[0],M=z[1],z[0]=i*E+l*M,z[1]=s*E+u*M,z[5]=i*p+l*g+c,z[6]=s*p+u*g+f;break;case"circle":z[4]=Sr(z[3],t);break;case"rect":z[4]=Sr(z[4],t);break;case"ellipse":z[8]=Sr(z[8],t);break;case"roundRect":z[5]=Sr(z[5],t);break;case"addPath":z[0].transform(t);break;case"poly":z[2]=Sr(z[2],t);break;default:Wt("unknown transform action",C.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let i=this.instructions.length-1,s=this.instructions[i];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(i--,i<0)return t.x=0,t.y=0,t;s=this.instructions[i]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function Sr(a,t){return a?a.prepend(t):t.clone()}function ee(a,t,i){const s=a.getAttribute(t);return s?Number(s):i}function vA(a,t){const i=a.querySelectorAll("defs");for(let s=0;s<i.length;s++){const l=i[s];for(let u=0;u<l.children.length;u++){const c=l.children[u];switch(c.nodeName.toLowerCase()){case"lineargradient":t.defs[c.id]=xA(c);break;case"radialgradient":t.defs[c.id]=_A();break}}}}function xA(a){const t=ee(a,"x1",0),i=ee(a,"y1",0),s=ee(a,"x2",1),l=ee(a,"y2",0),u=a.getAttribute("gradientUnits")||"objectBoundingBox",c=new vi(t,i,s,l,u==="objectBoundingBox"?"local":"global");for(let f=0;f<a.children.length;f++){const p=a.children[f],g=ee(p,"offset",0),m=he.shared.setValue(p.getAttribute("stop-color")).toNumber();c.addColorStop(g,m)}return c}function _A(a){return Wt("[SVG Parser] Radial gradients are not yet supported"),new vi(0,0,1,0)}function xy(a){const t=a.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const _y={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function nb(a,t){const i=a.getAttribute("style"),s={},l={},u={strokeStyle:s,fillStyle:l,useFill:!1,useStroke:!1};for(const c in _y){const f=a.getAttribute(c);f&&Sy(t,u,c,f.trim())}if(i){const c=i.split(";");for(let f=0;f<c.length;f++){const p=c[f].trim(),[g,m]=p.split(":");_y[g]&&Sy(t,u,g,m.trim())}}return{strokeStyle:u.useStroke?s:null,fillStyle:u.useFill?l:null,useFill:u.useFill,useStroke:u.useStroke}}function Sy(a,t,i,s){switch(i){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const l=xy(s);t.strokeStyle.fill=a.defs[l]}else t.strokeStyle.color=he.shared.setValue(s).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const l=xy(s);t.fillStyle.fill=a.defs[l]}else t.fillStyle.color=he.shared.setValue(s).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(s);break;case"stroke-opacity":t.strokeStyle.alpha=Number(s);break;case"opacity":t.fillStyle.alpha=Number(s),t.strokeStyle.alpha=Number(s);break}}function SA(a,t){if(typeof a=="string"){const c=document.createElement("div");c.innerHTML=a.trim(),a=c.querySelector("svg")}const i={context:t,defs:{},path:new pa};vA(a,i);const s=a.children,{fillStyle:l,strokeStyle:u}=nb(a,i);for(let c=0;c<s.length;c++){const f=s[c];f.nodeName.toLowerCase()!=="defs"&&sb(f,i,l,u)}return t}function sb(a,t,i,s){const l=a.children,{fillStyle:u,strokeStyle:c}=nb(a,t);u&&i?i={...i,...u}:u&&(i=u),c&&s?s={...s,...c}:c&&(s=c);const f=!i&&!s;f&&(i={color:0});let p,g,m,y,_,v,E,M,T,C,z,B,N,I,V,$,at;switch(a.nodeName.toLowerCase()){case"path":I=a.getAttribute("d"),a.getAttribute("fill-rule")==="evenodd"&&Wt("SVG Evenodd fill rule not supported, your svg may render incorrectly"),V=new pa(I,!0),t.context.path(V),i&&t.context.fill(i),s&&t.context.stroke(s);break;case"circle":E=ee(a,"cx",0),M=ee(a,"cy",0),T=ee(a,"r",0),t.context.ellipse(E,M,T,T),i&&t.context.fill(i),s&&t.context.stroke(s);break;case"rect":p=ee(a,"x",0),g=ee(a,"y",0),$=ee(a,"width",0),at=ee(a,"height",0),C=ee(a,"rx",0),z=ee(a,"ry",0),C||z?t.context.roundRect(p,g,$,at,C||z):t.context.rect(p,g,$,at),i&&t.context.fill(i),s&&t.context.stroke(s);break;case"ellipse":E=ee(a,"cx",0),M=ee(a,"cy",0),C=ee(a,"rx",0),z=ee(a,"ry",0),t.context.beginPath(),t.context.ellipse(E,M,C,z),i&&t.context.fill(i),s&&t.context.stroke(s);break;case"line":m=ee(a,"x1",0),y=ee(a,"y1",0),_=ee(a,"x2",0),v=ee(a,"y2",0),t.context.beginPath(),t.context.moveTo(m,y),t.context.lineTo(_,v),s&&t.context.stroke(s);break;case"polygon":N=a.getAttribute("points"),B=N.match(/\d+/g).map(nt=>parseInt(nt,10)),t.context.poly(B,!0),i&&t.context.fill(i),s&&t.context.stroke(s);break;case"polyline":N=a.getAttribute("points"),B=N.match(/\d+/g).map(nt=>parseInt(nt,10)),t.context.poly(B,!1),s&&t.context.stroke(s);break;case"g":case"svg":break;default:{Wt(`[SVG parser] <${a.nodeName}> elements unsupported`);break}}f&&(i=null);for(let nt=0;nt<l.length;nt++)sb(l[nt],t,i,s)}function AA(a){return he.isColorLike(a)}function Ay(a){return a instanceof So}function Ty(a){return a instanceof vi}function TA(a){return a instanceof Ct}function wA(a,t,i){const s=he.shared.setValue(t??0);return a.color=s.toNumber(),a.alpha=s.alpha===1?i.alpha:s.alpha,a.texture=Ct.WHITE,{...i,...a}}function MA(a,t,i){return a.texture=t,{...i,...a}}function wy(a,t,i){return a.fill=t,a.color=16777215,a.texture=t.texture,a.matrix=t.transform,{...i,...a}}function My(a,t,i){return t.buildGradient(),a.fill=t,a.color=16777215,a.texture=t.texture,a.matrix=t.transform,a.textureSpace=t.textureSpace,{...i,...a}}function EA(a,t){const i={...t,...a},s=he.shared.setValue(i.color);return i.alpha*=s.alpha,i.color=s.toNumber(),i}function gs(a,t){if(a==null)return null;const i={},s=a;return AA(a)?wA(i,a,t):TA(a)?MA(i,a,t):Ay(a)?wy(i,a,t):Ty(a)?My(i,a,t):s.fill&&Ay(s.fill)?wy(s,s.fill,t):s.fill&&Ty(s.fill)?My(s,s.fill,t):EA(s,t)}function vo(a,t){const{width:i,alignment:s,miterLimit:l,cap:u,join:c,pixelLine:f,...p}=t,g=gs(a,p);return g?{width:i,alignment:s,miterLimit:l,cap:u,join:c,pixelLine:f,...g}:null}const CA=new Re,Ey=new Et,yf=class Bi extends Mi{constructor(){super(...arguments),this.uid=ce("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new pa,this._transform=new Et,this._fillStyle={...Bi.defaultFillStyle},this._strokeStyle={...Bi.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Le,this._boundsDirty=!0}clone(){const t=new Bi;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=gs(t,Bi.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=vo(t,Bi.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=gs(t,Bi.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=gs(t,Bi.defaultStrokeStyle),this}texture(t,i,s,l,u,c){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:l||0,dw:u||t.frame.width,dh:c||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:i?he.shared.setValue(i).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new pa,this}fill(t,i){let s;const l=this.instructions[this.instructions.length-1];return this._tick===0&&l&&l.action==="stroke"?s=l.data.path:s=this._activePath.clone(),s?(t!=null&&(i!==void 0&&typeof t=="number"&&(Gt(Nt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:i}),this._fillStyle=gs(t,Bi.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:i}=this._activePath.getLastPoint(Re.shared);this._activePath.clear(),this._activePath.moveTo(t,i)}stroke(t){let i;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="fill"?i=s.data.path:i=this._activePath.clone(),i?(t!=null&&(this._strokeStyle=vo(t,Bi.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const i=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(i&&(i.action==="stroke"||i.action==="fill"))if(i.data.hole)i.data.hole.addPath(s);else{i.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,i,s,l,u,c){this._tick++;const f=this._transform;return this._activePath.arc(f.a*t+f.c*i+f.tx,f.b*t+f.d*i+f.ty,s,l,u,c),this}arcTo(t,i,s,l,u){this._tick++;const c=this._transform;return this._activePath.arcTo(c.a*t+c.c*i+c.tx,c.b*t+c.d*i+c.ty,c.a*s+c.c*l+c.tx,c.b*s+c.d*l+c.ty,u),this}arcToSvg(t,i,s,l,u,c,f){this._tick++;const p=this._transform;return this._activePath.arcToSvg(t,i,s,l,u,p.a*c+p.c*f+p.tx,p.b*c+p.d*f+p.ty),this}bezierCurveTo(t,i,s,l,u,c,f){this._tick++;const p=this._transform;return this._activePath.bezierCurveTo(p.a*t+p.c*i+p.tx,p.b*t+p.d*i+p.ty,p.a*s+p.c*l+p.tx,p.b*s+p.d*l+p.ty,p.a*u+p.c*c+p.tx,p.b*u+p.d*c+p.ty,f),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,i,s,l){return this._tick++,this._activePath.ellipse(t,i,s,l,this._transform.clone()),this}circle(t,i,s){return this._tick++,this._activePath.circle(t,i,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,i){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*i+s.tx,s.b*t+s.d*i+s.ty),this}moveTo(t,i){this._tick++;const s=this._transform,l=this._activePath.instructions,u=s.a*t+s.c*i+s.tx,c=s.b*t+s.d*i+s.ty;return l.length===1&&l[0].action==="moveTo"?(l[0].data[0]=u,l[0].data[1]=c,this):(this._activePath.moveTo(u,c),this)}quadraticCurveTo(t,i,s,l,u){this._tick++;const c=this._transform;return this._activePath.quadraticCurveTo(c.a*t+c.c*i+c.tx,c.b*t+c.d*i+c.ty,c.a*s+c.c*l+c.tx,c.b*s+c.d*l+c.ty,u),this}rect(t,i,s,l){return this._tick++,this._activePath.rect(t,i,s,l,this._transform.clone()),this}roundRect(t,i,s,l,u){return this._tick++,this._activePath.roundRect(t,i,s,l,u,this._transform.clone()),this}poly(t,i){return this._tick++,this._activePath.poly(t,i,this._transform.clone()),this}regularPoly(t,i,s,l,u=0,c){return this._tick++,this._activePath.regularPoly(t,i,s,l,u,c),this}roundPoly(t,i,s,l,u,c){return this._tick++,this._activePath.roundPoly(t,i,s,l,u,c),this}roundShape(t,i,s,l){return this._tick++,this._activePath.roundShape(t,i,s,l),this}filletRect(t,i,s,l,u){return this._tick++,this._activePath.filletRect(t,i,s,l,u),this}chamferRect(t,i,s,l,u,c){return this._tick++,this._activePath.chamferRect(t,i,s,l,u,c),this}star(t,i,s,l,u=0,c=0){return this._tick++,this._activePath.star(t,i,s,l,u,c,this._transform.clone()),this}svg(t){return this._tick++,SA(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,i=t){return this._transform.scale(t,i),this}setTransform(t,i,s,l,u,c){return t instanceof Et?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,i,s,l,u,c),this)}transform(t,i,s,l,u,c){return t instanceof Et?(this._transform.append(t),this):(Ey.set(t,i,s,l,u,c),this._transform.append(Ey),this)}translate(t,i=t){return this._transform.translate(t,i),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let i=0;i<this.instructions.length;i++){const s=this.instructions[i],l=s.action;if(l==="fill"){const u=s.data;t.addBounds(u.path.bounds)}else if(l==="texture"){const u=s.data;t.addFrame(u.dx,u.dy,u.dx+u.dw,u.dy+u.dh,u.transform)}if(l==="stroke"){const u=s.data,c=u.style.alignment,f=u.style.width*(1-c),p=u.path.bounds;t.addFrame(p.minX-f,p.minY-f,p.maxX+f,p.maxY+f)}}return t}containsPoint(t){var l;if(!this.bounds.containsPoint(t.x,t.y))return!1;const i=this.instructions;let s=!1;for(let u=0;u<i.length;u++){const c=i[u],f=c.data,p=f.path;if(!c.action||!p)continue;const g=f.style,m=p.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const _=m[y].shape;if(!g||!_)continue;const v=m[y].transform,E=v?v.applyInverse(t,CA):t;if(c.action==="fill")s=_.contains(E.x,E.y);else{const T=g;s=_.strokeContains(E.x,E.y,T.width,T.alignment)}const M=f.hole;if(M){const T=(l=M.shapePath)==null?void 0:l.shapePrimitives;if(T)for(let C=0;C<T.length;C++)T[C].shape.contains(E.x,E.y)&&(s=!1)}if(s)return!0}}return s}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(s),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(s)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};yf.defaultFillStyle={color:16777215,alpha:1,texture:Ct.WHITE,matrix:null,fill:null,textureSpace:"local"};yf.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Ct.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let mi=yf;const Cy=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function RA(a){const t=[];let i=0;for(let s=0;s<Cy.length;s++){const l=`_${Cy[s]}`;t[i++]=a[l]}return i=ab(a._fill,t,i),i=OA(a._stroke,t,i),i=zA(a.dropShadow,t,i),t.join("-")}function ab(a,t,i){var s;return a&&(t[i++]=a.color,t[i++]=a.alpha,t[i++]=(s=a.fill)==null?void 0:s.styleKey),i}function OA(a,t,i){return a&&(i=ab(a,t,i),t[i++]=a.width,t[i++]=a.alignment,t[i++]=a.cap,t[i++]=a.join,t[i++]=a.miterLimit),i}function zA(a,t,i){return a&&(t[i++]=a.alpha,t[i++]=a.angle,t[i++]=a.blur,t[i++]=a.distance,t[i++]=he.shared.setValue(a.color).toNumber()),i}const bf=class oa extends Mi{constructor(t={}){super(),DA(t);const i={...oa.defaultTextStyle,...t};for(const s in i){const l=s;this[l]=i[s]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...oa.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...oa.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...mi.defaultFillStyle,...t},()=>{this._fill=gs({...this._originalFill},mi.defaultFillStyle)})),this._fill=gs(t===0?"black":t,mi.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...mi.defaultStrokeStyle,...t},()=>{this._stroke=vo({...this._originalStroke},mi.defaultStrokeStyle)})),this._stroke=vo(t,mi.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=RA(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=oa.defaultTextStyle;for(const i in t)this[i]=t[i]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new oa({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var s,l,u,c;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const f=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(f),(l=this._originalFill)!=null&&l.texture&&this._originalFill.texture.destroy(f),(u=this._stroke)!=null&&u.texture&&this._stroke.texture.destroy(f),(c=this._originalStroke)!=null&&c.texture&&this._originalStroke.texture.destroy(f)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,i){return new Proxy(t,{set:(s,l,u)=>(s[l]=u,i==null||i(l,u),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(he.isColorLike(t)||t instanceof vi||t instanceof So)}};bf.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};bf.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let bs=bf;function DA(a){const t=a;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const i=bs.defaultDropShadow;a.dropShadow={alpha:t.dropShadowAlpha??i.alpha,angle:t.dropShadowAngle??i.angle,blur:t.dropShadowBlur??i.blur,color:t.dropShadowColor??i.color,distance:t.dropShadowDistance??i.distance}}if(t.strokeThickness!==void 0){Gt(Nt,"strokeThickness is now a part of stroke");const i=t.stroke;let s={};if(he.isColorLike(i))s.color=i;else if(i instanceof vi||i instanceof So)s.fill=i;else if(Object.hasOwnProperty.call(i,"color")||Object.hasOwnProperty.call(i,"fill"))s=i;else throw new Error("Invalid stroke value.");a.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){Gt(Nt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let i;a.fontSize==null?a.fontSize=bs.defaultTextStyle.fontSize:typeof a.fontSize=="string"?i=parseInt(a.fontSize,10):i=a.fontSize;const s=new vi({start:{x:0,y:0},end:{x:0,y:(i||0)*1.7}}),l=t.fillGradientStops.map(u=>he.shared.setValue(u).toNumber());l.forEach((u,c)=>{const f=c/(l.length-1);s.addColorStop(f,u)}),a.fill={fill:s}}}class GA{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,i){const s=ne.get().createCanvas();s.width=t,s.height=i;const l=s.getContext("2d");return{canvas:s,context:l}}getOptimalCanvasAndContext(t,i,s=1){t=Math.ceil(t*s-1e-6),i=Math.ceil(i*s-1e-6),t=yo(t),i=yo(i);const l=(t<<17)+(i<<1);this._canvasPool[l]||(this._canvasPool[l]=[]);let u=this._canvasPool[l].pop();return u||(u=this._createCanvasAndContext(t,i)),u}returnCanvasAndContext(t){const i=t.canvas,{width:s,height:l}=i,u=(s<<17)+(l<<1);t.context.clearRect(0,0,s,l),this._canvasPool[u].push(t)}clear(){this._canvasPool={}}}const Ry=new GA,BA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function kh(a){const t=typeof a.fontSize=="number"?`${a.fontSize}px`:a.fontSize;let i=a.fontFamily;Array.isArray(a.fontFamily)||(i=a.fontFamily.split(","));for(let s=i.length-1;s>=0;s--){let l=i[s].trim();!/([\"\'])[^\'\"]+\1/.test(l)&&!BA.includes(l)&&(l=`"${l}"`),i[s]=l}return`${a.fontStyle} ${a.fontVariant} ${a.fontWeight} ${t} ${i.join(",")}`}const gh={willReadFrequently:!0},Ei=class ot{static get experimentalLetterSpacingSupported(){let t=ot._experimentalLetterSpacingSupported;if(t!==void 0){const i=ne.get().getCanvasRenderingContext2D().prototype;t=ot._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return t}constructor(t,i,s,l,u,c,f,p,g){this.text=t,this.style=i,this.width=s,this.height=l,this.lines=u,this.lineWidths=c,this.lineHeight=f,this.maxLineWidth=p,this.fontProperties=g}static measureText(t=" ",i,s=ot._canvas,l=i.wordWrap){var z;const u=`${t}:${i.styleKey}`;if(ot._measurementCache[u])return ot._measurementCache[u];const c=kh(i),f=ot.measureFont(c);f.fontSize===0&&(f.fontSize=i.fontSize,f.ascent=i.fontSize);const p=ot.__context;p.font=c;const m=(l?ot._wordWrap(t,i,s):t).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let _=0;for(let B=0;B<m.length;B++){const N=ot._measureText(m[B],i.letterSpacing,p);y[B]=N,_=Math.max(_,N)}const v=((z=i._stroke)==null?void 0:z.width)||0;let E=_+v;i.dropShadow&&(E+=i.dropShadow.distance);const M=i.lineHeight||f.fontSize;let T=Math.max(M,f.fontSize+v)+(m.length-1)*(M+i.leading);return i.dropShadow&&(T+=i.dropShadow.distance),new ot(t,i,E,T,m,y,M+i.leading,_,f)}static _measureText(t,i,s){let l=!1;ot.experimentalLetterSpacingSupported&&(ot.experimentalLetterSpacing?(s.letterSpacing=`${i}px`,s.textLetterSpacing=`${i}px`,l=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const u=s.measureText(t);let c=u.width;const f=-u.actualBoundingBoxLeft;let g=u.actualBoundingBoxRight-f;if(c>0)if(l)c-=i,g-=i;else{const m=(ot.graphemeSegmenter(t).length-1)*i;c+=m,g+=m}return Math.max(c,g)}static _wordWrap(t,i,s=ot._canvas){const l=s.getContext("2d",gh);let u=0,c="",f="";const p=Object.create(null),{letterSpacing:g,whiteSpace:m}=i,y=ot._collapseSpaces(m),_=ot._collapseNewlines(m);let v=!y;const E=i.wordWrapWidth+g,M=ot._tokenize(t);for(let T=0;T<M.length;T++){let C=M[T];if(ot._isNewline(C)){if(!_){f+=ot._addLine(c),v=!y,c="",u=0;continue}C=" "}if(y){const B=ot.isBreakingSpace(C),N=ot.isBreakingSpace(c[c.length-1]);if(B&&N)continue}const z=ot._getFromCache(C,g,p,l);if(z>E)if(c!==""&&(f+=ot._addLine(c),c="",u=0),ot.canBreakWords(C,i.breakWords)){const B=ot.wordWrapSplit(C);for(let N=0;N<B.length;N++){let I=B[N],V=I,$=1;for(;B[N+$];){const nt=B[N+$];if(!ot.canBreakChars(V,nt,C,N,i.breakWords))I+=nt;else break;V=nt,$++}N+=$-1;const at=ot._getFromCache(I,g,p,l);at+u>E&&(f+=ot._addLine(c),v=!1,c="",u=0),c+=I,u+=at}}else{c.length>0&&(f+=ot._addLine(c),c="",u=0);const B=T===M.length-1;f+=ot._addLine(C,!B),v=!1,c="",u=0}else z+u>E&&(v=!1,f+=ot._addLine(c),c="",u=0),(c.length>0||!ot.isBreakingSpace(C)||v)&&(c+=C,u+=z)}return f+=ot._addLine(c,!1),f}static _addLine(t,i=!0){return t=ot._trimRight(t),t=i?`${t}
`:t,t}static _getFromCache(t,i,s,l){let u=s[t];return typeof u!="number"&&(u=ot._measureText(t,i,l)+i,s[t]=u),u}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let i=t.length-1;i>=0;i--){const s=t[i];if(!ot.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:ot._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,i){return typeof t!="string"?!1:ot._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const i=[];let s="";if(typeof t!="string")return i;for(let l=0;l<t.length;l++){const u=t[l],c=t[l+1];if(ot.isBreakingSpace(u,c)||ot._isNewline(u)){s!==""&&(i.push(s),s=""),i.push(u);continue}s+=u}return s!==""&&i.push(s),i}static canBreakWords(t,i){return i}static canBreakChars(t,i,s,l,u){return!0}static wordWrapSplit(t){return ot.graphemeSegmenter(t)}static measureFont(t){if(ot._fonts[t])return ot._fonts[t];const i=ot._context;i.font=t;const s=i.measureText(ot.METRICS_STRING+ot.BASELINE_SYMBOL),l={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return ot._fonts[t]=l,l}static clearMetrics(t=""){t?delete ot._fonts[t]:ot._fonts={}}static get _canvas(){if(!ot.__canvas){let t;try{const i=new OffscreenCanvas(0,0),s=i.getContext("2d",gh);if(s!=null&&s.measureText)return ot.__canvas=i,i;t=ne.get().createCanvas()}catch{t=ne.get().createCanvas()}t.width=t.height=10,ot.__canvas=t}return ot.__canvas}static get _context(){return ot.__context||(ot.__context=ot._canvas.getContext("2d",gh)),ot.__context}};Ei.METRICS_STRING="|q";Ei.BASELINE_SYMBOL="M";Ei.BASELINE_MULTIPLIER=1.4;Ei.HEIGHT_MULTIPLIER=2;Ei.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const a=new Intl.Segmenter;return t=>[...a.segment(t)].map(i=>i.segment)}return a=>[...a]})();Ei.experimentalLetterSpacing=!1;Ei._fonts={};Ei._newlines=[10,13];Ei._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Ei._measurementCache={};let Hh=Ei;const Oy=1e5;function zy(a,t,i,s=0){if(a.texture===Ct.WHITE&&!a.fill)return he.shared.setValue(a.color).setAlpha(a.alpha??1).toHexa();if(a.fill){if(a.fill instanceof So){const l=a.fill,u=t.createPattern(l.texture.source.resource,"repeat"),c=l.transform.copyTo(Et.shared);return c.scale(l.texture.frame.width,l.texture.frame.height),u.setTransform(c),u}else if(a.fill instanceof vi){const l=a.fill,u=l.type==="linear",c=l.textureSpace==="local";let f=1,p=1;c&&i&&(f=i.width+s,p=i.height+s);let g,m=!1;if(u){const{start:y,end:_}=l;g=t.createLinearGradient(y.x*f,y.y*p,_.x*f,_.y*p),m=Math.abs(_.x-y.x)<Math.abs((_.y-y.y)*.1)}else{const{center:y,innerRadius:_,outerCenter:v,outerRadius:E}=l;g=t.createRadialGradient(y.x*f,y.y*p,_*f,v.x*f,v.y*p,E*f)}if(m&&c&&i){const y=i.lineHeight/p;for(let _=0;_<i.lines.length;_++){const v=(_*i.lineHeight+s/2)/p;l.colorStops.forEach(E=>{const M=v+E.offset*y;g.addColorStop(Math.floor(M*Oy)/Oy,he.shared.setValue(E.color).toHex())})}}else l.colorStops.forEach(y=>{g.addColorStop(y.offset,he.shared.setValue(y.color).toHex())});return g}}else{const l=t.createPattern(a.texture.source.resource,"repeat"),u=a.matrix.copyTo(Et.shared);return u.scale(a.texture.frame.width,a.texture.frame.height),l.setTransform(u),l}return Wt("FillStyle not recognised",a),"red"}function rb(a){if(a==="")return[];typeof a=="string"&&(a=[a]);const t=[];for(let i=0,s=a.length;i<s;i++){const l=a[i];if(Array.isArray(l)){if(l.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${l.length}.`);if(l[0].length===0||l[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const u=l[0].charCodeAt(0),c=l[1].charCodeAt(0);if(c<u)throw new Error("[BitmapFont]: Invalid character range.");for(let f=u,p=c;f<=p;f++)t.push(String.fromCharCode(f))}else t.push(...Array.from(l))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const lb=class ob extends N0{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const i={...ob.defaultOptions,...t};this._textureSize=i.textureSize,this._mipmap=i.mipmap;const s=i.style.clone();i.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=Ct.WHITE,s._fill.fill=null),this.applyFillAsTint=i.overrideFill;const l=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const u=kh(s);i.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/l):s.fontSize=this.baseRenderedFontSize=l,this._style=s,this._skipKerning=i.skipKerning??!1,this.resolution=i.resolution??1,this._padding=i.padding??4,this.fontMetrics=Hh.measureFont(u),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){var T,C;const i=rb(t).filter(z=>!this._currentChars.includes(z)).filter((z,B,N)=>N.indexOf(z)===B);if(!i.length)return;this._currentChars=[...this._currentChars,...i];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:l,context:u}=s.canvasAndContext,c=s.texture.source;const f=this._style;let p=this._currentX,g=this._currentY;const m=this.baseRenderedFontSize/this.baseMeasurementFontSize,y=this._padding*m;let _=0,v=!1;const E=l.width/this.resolution,M=l.height/this.resolution;for(let z=0;z<i.length;z++){const B=i[z],N=Hh.measureText(B,f,l,!1);N.lineHeight=N.height;const I=N.width*m,V=Math.ceil((f.fontStyle==="italic"?2:1)*I),$=N.height*m,at=V+y*2,nt=$+y*2;if(v=!1,B!==`
`&&B!=="\r"&&B!=="	"&&B!==" "&&(v=!0,_=Math.ceil(Math.max(nt,_))),p+at>E&&(g+=_,_=nt,p=0,g+_>M)){c.update();const W=this._nextPage();l=W.canvasAndContext.canvas,u=W.canvasAndContext.context,c=W.texture.source,g=0}const it=I/m-(((T=f.dropShadow)==null?void 0:T.distance)??0)-(((C=f._stroke)==null?void 0:C.width)??0);if(this.chars[B]={id:B.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:it,kerning:{}},v){this._drawGlyph(u,N,p+y,g+y,m,f);const W=c.width*m,rt=c.height*m,gt=new ue(p/W*c.width,g/rt*c.height,at/W*c.width,nt/rt*c.height);this.chars[B].texture=new Ct({source:c,frame:gt}),p+=Math.ceil(at)}}c.update(),this._currentX=p,this._currentY=g,this._skipKerning&&this._applyKerning(i,u)}get pageTextures(){return Gt(Nt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,i){const s=this._measureCache;for(let l=0;l<t.length;l++){const u=t[l];for(let c=0;c<this._currentChars.length;c++){const f=this._currentChars[c];let p=s[u];p||(p=s[u]=i.measureText(u).width);let g=s[f];g||(g=s[f]=i.measureText(f).width);let m=i.measureText(u+f).width,y=m-(p+g);y&&(this.chars[u].kerning[f]=y),m=i.measureText(u+f).width,y=m-(p+g),y&&(this.chars[f].kerning[u]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,i=Ry.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(i.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),l=new Ct({source:new ys({resource:i.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),u={canvasAndContext:i,texture:l};return this.pages[this._currentPageIndex]=u,u}_setupContext(t,i,s){i.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=kh(i),i.fontSize=this.baseMeasurementFontSize,t.textBaseline=i.textBaseline;const l=i._stroke,u=(l==null?void 0:l.width)??0;if(l&&(t.lineWidth=u,t.lineJoin=l.join,t.miterLimit=l.miterLimit,t.strokeStyle=zy(l,t)),i._fill&&(t.fillStyle=zy(i._fill,t)),i.dropShadow){const c=i.dropShadow,f=he.shared.setValue(c.color).toArray(),p=c.blur*s,g=c.distance*s;t.shadowColor=`rgba(${f[0]*255},${f[1]*255},${f[2]*255},${c.alpha})`,t.shadowBlur=p,t.shadowOffsetX=Math.cos(c.angle)*g,t.shadowOffsetY=Math.sin(c.angle)*g}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,i,s,l,u,c){const f=i.text,p=i.fontProperties,g=c._stroke,m=((g==null?void 0:g.width)??0)*u,y=s+m/2,_=l-m/2,v=p.descent*u,E=i.lineHeight*u;c.stroke&&m&&t.strokeText(f,y,_+E-v),c._fill&&t.fillText(f,y,_+E-v)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:i,texture:s}=this.pages[t];Ry.returnCanvasAndContext(i),s.destroy(!0)}this.pages=null}};lb.defaultOptions={textureSize:512,style:new bs,mipmap:!0};let Dy=lb;function LA(a,t,i,s){const l={width:0,height:0,offsetY:0,scale:t.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};l.offsetY=i.baseLineOffset;let u=l.lines[0],c=null,f=!0;const p={width:0,start:0,index:0,positions:[],chars:[]},g=E=>{const M=u.width;for(let T=0;T<p.index;T++){const C=E.positions[T];u.chars.push(E.chars[T]),u.charPositions.push(C+M)}u.width+=E.width,f=!1,p.width=0,p.index=0,p.chars.length=0},m=()=>{let E=u.chars.length-1;if(s){let M=u.chars[E];for(;M===" ";)u.width-=i.chars[M].xAdvance,M=u.chars[--E]}l.width=Math.max(l.width,u.width),u={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},f=!0,l.lines.push(u),l.height+=i.lineHeight},y=i.baseMeasurementFontSize/t.fontSize,_=t.letterSpacing*y,v=t.wordWrapWidth*y;for(let E=0;E<a.length+1;E++){let M;const T=E===a.length;T||(M=a[E]);const C=i.chars[M]||i.chars[" "];if(/(?:\s)/.test(M)||M==="\r"||M===`
`||T){if(!f&&t.wordWrap&&u.width+p.width-_>v?(m(),g(p),T||u.charPositions.push(0)):(p.start=u.width,g(p),T||u.charPositions.push(0)),M==="\r"||M===`
`)u.width!==0&&m();else if(!T){const I=C.xAdvance+(C.kerning[c]||0)+_;u.width+=I,u.spaceWidth=I,u.spacesIndex.push(u.charPositions.length),u.chars.push(M)}}else{const N=C.kerning[c]||0,I=C.xAdvance+N+_;p.positions[p.index++]=p.width+N,p.chars.push(M),p.width+=I}c=M}return m(),t.align==="center"?UA(l):t.align==="right"?kA(l):t.align==="justify"&&HA(l),l}function UA(a){for(let t=0;t<a.lines.length;t++){const i=a.lines[t],s=a.width/2-i.width/2;for(let l=0;l<i.charPositions.length;l++)i.charPositions[l]+=s}}function kA(a){for(let t=0;t<a.lines.length;t++){const i=a.lines[t],s=a.width-i.width;for(let l=0;l<i.charPositions.length;l++)i.charPositions[l]+=s}}function HA(a){const t=a.width;for(let i=0;i<a.lines.length;i++){const s=a.lines[i];let l=0,u=s.spacesIndex[l++],c=0;const f=s.spacesIndex.length,g=(t-s.width)/f;for(let m=0;m<s.charPositions.length;m++)m===u&&(u=s.spacesIndex[l++],c+=g),s.charPositions[m]+=c}}let ao=0;class PA{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,i){var c;let s=`${i.fontFamily}-bitmap`,l=!0;if(i._fill.fill&&!i._stroke)s+=i._fill.fill.styleKey,l=!1;else if(i._stroke||i.dropShadow){let f=i.styleKey;f=f.substring(0,f.lastIndexOf("-")),s=`${f}-bitmap`,l=!1}if(!ie.has(s)){const f=new Dy({style:i,overrideFill:l,overrideSize:!0,...this.defaultOptions});ao++,ao>50&&Wt("BitmapText",`You have dynamically created ${ao} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),f.once("destroy",()=>{ao--,ie.remove(s)}),ie.set(s,f)}const u=ie.get(s);return(c=u.ensureCharacters)==null||c.call(u,t),u}getLayout(t,i,s=!0){const l=this.getFont(t,i);return LA([...t],i,l,s)}measureText(t,i,s=!0){return this.getLayout(t,i,s)}install(...t){var g,m,y,_;let i=t[0];typeof i=="string"&&(i={name:i,style:t[1],chars:(g=t[2])==null?void 0:g.chars,resolution:(m=t[2])==null?void 0:m.resolution,padding:(y=t[2])==null?void 0:y.padding,skipKerning:(_=t[2])==null?void 0:_.skipKerning},Gt(Nt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=i==null?void 0:i.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");i={...this.defaultOptions,...i};const l=i.style,u=l instanceof bs?l:new bs(l),c=u._fill.fill!==null&&u._fill.fill!==void 0,f=new Dy({style:u,overrideFill:c,skipKerning:i.skipKerning,padding:i.padding,resolution:i.resolution,overrideSize:!1}),p=rb(i.chars);return f.ensureCharacters(p.join("")),ie.set(`${s}-bitmap`,f),f.once("destroy",()=>ie.remove(`${s}-bitmap`)),f}uninstall(t){const i=`${t}-bitmap`,s=ie.get(i);s&&s.destroy()}}const Gy=new PA;class ub extends N0{constructor(t,i){super();const{textures:s,data:l}=t;Object.keys(l.pages).forEach(u=>{const c=l.pages[parseInt(u,10)],f=s[c.id];this.pages.push({texture:f})}),Object.keys(l.chars).forEach(u=>{const c=l.chars[u],{frame:f,source:p}=s[c.page],g=new ue(c.x+f.x,c.y+f.y,c.width,c.height),m=new Ct({source:p,frame:g});this.chars[u]={id:u.codePointAt(0),xOffset:c.xOffset,yOffset:c.yOffset,xAdvance:c.xAdvance,kerning:c.kerning??{},texture:m}}),this.baseRenderedFontSize=l.fontSize,this.baseMeasurementFontSize=l.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:l.fontSize},this.baseLineOffset=l.baseLineOffset,this.lineHeight=l.lineHeight,this.fontFamily=l.fontFamily,this.distanceField=l.distanceField??{type:"none",range:0},this.url=i}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:i}=this.pages[t];i.destroy(!0)}this.pages=null}static install(t){Gy.install(t)}static uninstall(t){Gy.uninstall(t)}}const mh={test(a){return typeof a=="string"&&a.startsWith("info face=")},parse(a){const t=a.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const _=t[y].match(/^[a-z]+/gm)[0],v=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),E={};for(const M in v){const T=v[M].split("="),C=T[0],z=T[1].replace(/"/gm,""),B=parseFloat(z),N=isNaN(B)?z:B;E[C]=N}i[_].push(E)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[l]=i.info,[u]=i.common,[c]=i.distanceField??[];c&&(s.distanceField={range:parseInt(c.distanceRange,10),type:c.fieldType}),s.fontSize=parseInt(l.size,10),s.fontFamily=l.face,s.lineHeight=parseInt(u.lineHeight,10);const f=i.page;for(let y=0;y<f.length;y++)s.pages.push({id:parseInt(f[y].id,10)||0,file:f[y].file});const p={};s.baseLineOffset=s.lineHeight-parseInt(u.base,10);const g=i.char;for(let y=0;y<g.length;y++){const _=g[y],v=parseInt(_.id,10);let E=_.letter??_.char??String.fromCharCode(v);E==="space"&&(E=" "),p[v]=E,s.chars[E]={id:v,page:parseInt(_.page,10)||0,x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xOffset:parseInt(_.xoffset,10),yOffset:parseInt(_.yoffset,10),xAdvance:parseInt(_.xadvance,10),kerning:{}}}const m=i.kerning||[];for(let y=0;y<m.length;y++){const _=parseInt(m[y].first,10),v=parseInt(m[y].second,10),E=parseInt(m[y].amount,10);s.chars[p[v]].kerning[p[_]]=E}return s}},By={test(a){const t=a;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(a){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=a.getElementsByTagName("info")[0],s=a.getElementsByTagName("common")[0],l=a.getElementsByTagName("distanceField")[0];l&&(t.distanceField={type:l.getAttribute("fieldType"),range:parseInt(l.getAttribute("distanceRange"),10)});const u=a.getElementsByTagName("page"),c=a.getElementsByTagName("char"),f=a.getElementsByTagName("kerning");t.fontSize=parseInt(i.getAttribute("size"),10),t.fontFamily=i.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let g=0;g<u.length;g++)t.pages.push({id:parseInt(u[g].getAttribute("id"),10)||0,file:u[g].getAttribute("file")});const p={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let g=0;g<c.length;g++){const m=c[g],y=parseInt(m.getAttribute("id"),10);let _=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);_==="space"&&(_=" "),p[y]=_,t.chars[_]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let g=0;g<f.length;g++){const m=parseInt(f[g].getAttribute("first"),10),y=parseInt(f[g].getAttribute("second"),10),_=parseInt(f[g].getAttribute("amount"),10);t.chars[p[y]].kerning[p[m]]=_}return t}},Ly={test(a){return typeof a=="string"&&a.includes("<font>")?By.test(ne.get().parseXML(a)):!1},parse(a){return By.parse(ne.get().parseXML(a))}},NA=[".xml",".fnt"],FA={extension:{type:ct.CacheParser,name:"cacheBitmapFont"},test:a=>a instanceof ub,getCacheableAssets(a,t){const i={};return a.forEach(s=>{i[s]=t,i[`${s}-bitmap`]=t}),i[`${t.fontFamily}-bitmap`]=t,i}},YA={extension:{type:ct.LoadParser,priority:Dn.Normal},name:"loadBitmapFont",test(a){return NA.includes(ri.extname(a).toLowerCase())},async testParse(a){return mh.test(a)||Ly.test(a)},async parse(a,t,i){const s=mh.test(a)?mh.parse(a):Ly.parse(a),{src:l}=t,{pages:u}=s,c=[],f=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<u.length;++y){const _=u[y].file;let v=ri.join(ri.dirname(l),_);v=Eh(v,l),c.push({src:v,data:f})}const p=await i.load(c),g=c.map(y=>p[y.src]);return new ub({data:s,textures:g},l)},async load(a,t){return await(await ne.get().fetch(a)).text()},async unload(a,t,i){await Promise.all(a.pages.map(s=>i.unload(s.texture.source._sourceOrigin))),a.destroy()}};class IA{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<i;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const XA={extension:{type:ct.CacheParser,name:"cacheTextureArray"},test:a=>Array.isArray(a)&&a.every(t=>t instanceof Ct),getCacheableAssets:(a,t)=>{const i={};return a.forEach(s=>{t.forEach((l,u)=>{i[s+(u===0?"":u+1)]=l})}),i}};async function cb(a){if("Image"in globalThis)return new Promise(t=>{const i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=a});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(a)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const jA={extension:{type:ct.DetectionParser,priority:1},test:async()=>cb("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async a=>[...a,"avif"],remove:async a=>a.filter(t=>t!=="avif")},Uy=["png","jpg","jpeg"],qA={extension:{type:ct.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async a=>[...a,...Uy],remove:async a=>a.filter(t=>!Uy.includes(t))},VA="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function vf(a){return VA?!1:document.createElement("video").canPlayType(a)!==""}const $A={extension:{type:ct.DetectionParser,priority:0},test:async()=>vf("video/mp4"),add:async a=>[...a,"mp4","m4v"],remove:async a=>a.filter(t=>t!=="mp4"&&t!=="m4v")},ZA={extension:{type:ct.DetectionParser,priority:0},test:async()=>vf("video/ogg"),add:async a=>[...a,"ogv"],remove:async a=>a.filter(t=>t!=="ogv")},QA={extension:{type:ct.DetectionParser,priority:0},test:async()=>vf("video/webm"),add:async a=>[...a,"webm"],remove:async a=>a.filter(t=>t!=="webm")},KA={extension:{type:ct.DetectionParser,priority:0},test:async()=>cb("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async a=>[...a,"webp"],remove:async a=>a.filter(t=>t!=="webp")};class WA{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,i,s)=>(this._parsersValidated=!1,t[i]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,i){const s={promise:null,parser:null};return s.promise=(async()=>{var c,f;let l=null,u=null;if(i.loadParser&&(u=this._parserHash[i.loadParser],u||Wt(`[Assets] specified load parser "${i.loadParser}" not found while loading ${t}`)),!u){for(let p=0;p<this.parsers.length;p++){const g=this.parsers[p];if(g.load&&((c=g.test)!=null&&c.call(g,t,i,this))){u=g;break}}if(!u)return Wt(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}l=await u.load(t,i,this),s.parser=u;for(let p=0;p<this.parsers.length;p++){const g=this.parsers[p];g.parse&&g.parse&&await((f=g.testParse)==null?void 0:f.call(g,l,i,this))&&(l=await g.parse(l,i,this)||l,s.parser=g)}return l})(),s}async load(t,i){this._parsersValidated||this._validateParsers();let s=0;const l={},u=bo(t),c=wi(t,g=>({alias:[g],src:g,data:{}})),f=c.length,p=c.map(async g=>{const m=ri.toAbsolute(g.src);if(!l[g.src])try{this.promiseCache[m]||(this.promiseCache[m]=this._getLoadPromiseAndParser(m,g)),l[g.src]=await this.promiseCache[m].promise,i&&i(++s/f)}catch(y){throw delete this.promiseCache[m],delete l[g.src],new Error(`[Loader.load] Failed to load ${m}.
${y}`)}});return await Promise.all(p),u?l[c[0].src]:l}async unload(t){const s=wi(t,l=>({alias:[l],src:l})).map(async l=>{var f,p;const u=ri.toAbsolute(l.src),c=this.promiseCache[u];if(c){const g=await c.promise;delete this.promiseCache[u],await((p=(f=c.parser)==null?void 0:f.unload)==null?void 0:p.call(f,g,l,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,i)=>(i.name?t[i.name]&&Wt(`[Assets] loadParser name conflict "${i.name}"`):Wt("[Assets] loadParser should have a name"),{...t,[i.name]:i}),{})}}function ya(a,t){if(Array.isArray(t)){for(const i of t)if(a.startsWith(`data:${i}`))return!0;return!1}return a.startsWith(`data:${t}`)}function ba(a,t){const i=a.split("?")[0],s=ri.extname(i).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const JA=".json",tT="application/json",eT={extension:{type:ct.LoadParser,priority:Dn.Low},name:"loadJson",test(a){return ya(a,tT)||ba(a,JA)},async load(a){return await(await ne.get().fetch(a)).json()}},iT=".txt",nT="text/plain",sT={name:"loadTxt",extension:{type:ct.LoadParser,priority:Dn.Low,name:"loadTxt"},test(a){return ya(a,nT)||ba(a,iT)},async load(a){return await(await ne.get().fetch(a)).text()}},aT=["normal","bold","100","200","300","400","500","600","700","800","900"],rT=[".ttf",".otf",".woff",".woff2"],lT=["font/ttf","font/otf","font/woff","font/woff2"],oT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function uT(a){const t=ri.extname(a),l=ri.basename(a,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1));let u=l.length>0;for(const f of l)if(!f.match(oT)){u=!1;break}let c=l.join(" ");return u||(c=`"${c.replace(/[\\"]/g,"\\$&")}"`),c}const cT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function hT(a){return cT.test(a)?a:encodeURI(a)}const fT={extension:{type:ct.LoadParser,priority:Dn.Low},name:"loadWebFont",test(a){return ya(a,lT)||ba(a,rT)},async load(a,t){var s,l,u;const i=ne.get().getFontFaceSet();if(i){const c=[],f=((s=t.data)==null?void 0:s.family)??uT(a),p=((u=(l=t.data)==null?void 0:l.weights)==null?void 0:u.filter(m=>aT.includes(m)))??["normal"],g=t.data??{};for(let m=0;m<p.length;m++){const y=p[m],_=new FontFace(f,`url(${hT(a)})`,{...g,weight:y});await _.load(),i.add(_),c.push(_)}return ie.set(`${f}-and-url`,{url:a,fontFaces:c}),c.length===1?c[0]:c}return Wt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(a){(Array.isArray(a)?a:[a]).forEach(t=>{ie.remove(`${t.family}-and-url`),ne.get().getFontFaceSet().delete(t)})}};function xf(a,t=1){var s;const i=(s=ma.RETINA_PREFIX)==null?void 0:s.exec(a);return i?parseFloat(i[1]):t}function _f(a,t,i){a.label=i,a._sourceOrigin=i;const s=new Ct({source:a,label:i}),l=()=>{delete t.promiseCache[i],ie.has(i)&&ie.remove(i)};return s.source.once("destroy",()=>{t.promiseCache[i]&&(Wt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),l())}),s.once("destroy",()=>{a.destroyed||(Wt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),l())}),s}const dT=".svg",pT="image/svg+xml",gT={extension:{type:ct.LoadParser,priority:Dn.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(a){return ya(a,pT)||ba(a,dT)},async load(a,t,i){var s;return((s=t.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?yT(a):mT(a,t,i,this.config.crossOrigin)},unload(a){a.destroy(!0)}};async function mT(a,t,i,s){var T,C,z;const u=await(await ne.get().fetch(a)).blob(),c=URL.createObjectURL(u),f=new Image;f.src=c,f.crossOrigin=s,await f.decode(),URL.revokeObjectURL(c);const p=document.createElement("canvas"),g=p.getContext("2d"),m=((T=t.data)==null?void 0:T.resolution)||xf(a),y=((C=t.data)==null?void 0:C.width)??f.width,_=((z=t.data)==null?void 0:z.height)??f.height;p.width=y*m,p.height=_*m,g.drawImage(f,0,0,y*m,_*m);const{parseAsGraphicsContext:v,...E}=t.data??{},M=new ys({resource:p,alphaMode:"premultiply-alpha-on-upload",resolution:m,...E});return _f(M,i,a)}async function yT(a){const i=await(await ne.get().fetch(a)).text(),s=new mi;return s.svg(i),s}const bT=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let ca=null,Ph=class{constructor(){ca||(ca=URL.createObjectURL(new Blob([bT],{type:"application/javascript"}))),this.worker=new Worker(ca)}};Ph.revokeObjectURL=function(){ca&&(URL.revokeObjectURL(ca),ca=null)};const vT=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let ha=null;class hb{constructor(){ha||(ha=URL.createObjectURL(new Blob([vT],{type:"application/javascript"}))),this.worker=new Worker(ha)}}hb.revokeObjectURL=function(){ha&&(URL.revokeObjectURL(ha),ha=null)};let ky=0,yh;class xT{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:i}=new Ph;i.addEventListener("message",s=>{i.terminate(),Ph.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,i){var s;return this._run("loadImageBitmap",[t,(s=i==null?void 0:i.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){yh===void 0&&(yh=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<yh&&(this._createdWorkers++,t=new hb().worker,t.addEventListener("message",i=>{this._complete(i.data),this._returnWorker(i.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const s=new Promise((l,u)=>{this._queue.push({id:t,arguments:i,resolve:l,reject:u})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const i=this._queue.pop(),s=i.id;this._resolveHash[ky]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:ky++,id:s})}}const Hy=new xT,_T=[".jpeg",".jpg",".png",".webp",".avif"],ST=["image/jpeg","image/png","image/webp","image/avif"];async function AT(a,t){var l;const i=await ne.get().fetch(a);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${a}: ${i.status} ${i.statusText}`);const s=await i.blob();return((l=t==null?void 0:t.data)==null?void 0:l.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const fb={name:"loadTextures",extension:{type:ct.LoadParser,priority:Dn.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(a){return ya(a,ST)||ba(a,_T)},async load(a,t,i){var u;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Hy.isImageBitmapSupported()?s=await Hy.loadImageBitmap(a,t):s=await AT(a,t):s=await new Promise((c,f)=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=a,s.complete?c(s):(s.onload=()=>{c(s)},s.onerror=f)});const l=new ys({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((u=t.data)==null?void 0:u.resolution)||xf(a),...t.data});return _f(l,i,a)},unload(a){a.destroy(!0)}},db=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],TT=db.map(a=>`video/${a.substring(1)}`);function wT(a,t,i){i===void 0&&!t.startsWith("data:")?a.crossOrigin=ET(t):i!==!1&&(a.crossOrigin=typeof i=="string"?i:"anonymous")}function MT(a){return new Promise((t,i)=>{a.addEventListener("canplaythrough",s),a.addEventListener("error",l),a.load();function s(){u(),t()}function l(c){u(),i(c)}function u(){a.removeEventListener("canplaythrough",s),a.removeEventListener("error",l)}})}function ET(a,t=globalThis.location){if(a.startsWith("data:"))return"";t||(t=globalThis.location);const i=new URL(a,document.baseURI);return i.hostname!==t.hostname||i.port!==t.port||i.protocol!==t.protocol?"anonymous":""}const CT={name:"loadVideo",extension:{type:ct.LoadParser,name:"loadVideo"},test(a){const t=ya(a,TT),i=ba(a,db);return t||i},async load(a,t,i){var p,g;const s={...co.defaultOptions,resolution:((p=t.data)==null?void 0:p.resolution)||xf(a),alphaMode:((g=t.data)==null?void 0:g.alphaMode)||await v0(),...t.data},l=document.createElement("video"),u={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(u).forEach(m=>{const y=u[m];y!==void 0&&l.setAttribute(m,y)}),s.muted===!0&&(l.muted=!0),wT(l,a,s.crossorigin);const c=document.createElement("source");let f;if(a.startsWith("data:"))f=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const m=a.split("?")[0].slice(a.lastIndexOf(".")+1).toLowerCase();f=co.MIME_TYPES[m]||`video/${m}`}return c.src=a,f&&(c.type=f),new Promise(m=>{const y=async()=>{const _=new co({...s,resource:l});l.removeEventListener("canplay",y),t.data.preload&&await MT(l),m(_f(_,i,a))};l.addEventListener("canplay",y),l.appendChild(c)})},unload(a){a.destroy(!0)}},pb={extension:{type:ct.ResolveParser,name:"resolveTexture"},test:fb.test,parse:a=>{var t;return{resolution:parseFloat(((t=ma.RETINA_PREFIX.exec(a))==null?void 0:t[1])??"1"),format:a.split(".").pop(),src:a}}},RT={extension:{type:ct.ResolveParser,priority:-2,name:"resolveJson"},test:a=>ma.RETINA_PREFIX.test(a)&&a.endsWith(".json"),parse:pb.parse};class OT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ma,this.loader=new WA,this.cache=ie,this._backgroundLoader=new IA(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var u,c;if(this._initialized){Wt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let f=t.manifest;typeof f=="string"&&(f=await this.load(f)),this.resolver.addManifest(f)}const i=((u=t.texturePreference)==null?void 0:u.resolution)??1,s=typeof i=="number"?[i]:i,l=await this._detectFormats({preferredFormats:(c=t.texturePreference)==null?void 0:c.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:l,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,i){this._initialized||await this.init();const s=bo(t),l=wi(t).map(f=>{if(typeof f!="string"){const p=this.resolver.getAlias(f);return p.some(g=>!this.resolver.hasKey(g))&&this.add(f),Array.isArray(p)?p[0]:p}return this.resolver.hasKey(f)||this.add({alias:f,src:f}),f}),u=this.resolver.resolve(l),c=await this._mapLoadToResolve(u,i);return s?c[l[0]]:c}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const l=this.resolver.resolveBundle(t),u={},c=Object.keys(l);let f=0,p=0;const g=()=>{i==null||i(++f/p)},m=c.map(y=>{const _=l[y];return p+=Object.keys(_).length,this._mapLoadToResolve(_,g).then(v=>{u[y]=v})});return await Promise.all(m),s?u[t[0]]:u}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return ie.get(t);const i={};for(let s=0;s<t.length;s++)i[s]=ie.get(t[s]);return i}async _mapLoadToResolve(t,i){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const l=await this.loader.load(s,i);this._backgroundLoader.active=!0;const u={};return s.forEach(c=>{const f=l[c.src],p=[c.src];c.alias&&p.push(...c.alias),p.forEach(g=>{u[g]=f}),ie.set(p,f)}),u}async unload(t){this._initialized||await this.init();const i=wi(t).map(l=>typeof l!="string"?l.src:l),s=this.resolver.resolve(i);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=wi(t);const i=this.resolver.resolveBundle(t),s=Object.keys(i).map(l=>this._unloadFromResolved(i[l]));await Promise.all(s)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(s=>{ie.remove(s.src)}),await this.loader.unload(i)}async _detectFormats(t){let i=[];t.preferredFormats&&(i=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?i=await s.add(i):t.skipDetections||(i=await s.remove(i));return i=i.filter((s,l)=>i.indexOf(s)===l),i}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(s=>s in t).forEach(s=>{i.config[s]=t[s]})})}}const ms=new OT;we.handleByList(ct.LoadParser,ms.loader.parsers).handleByList(ct.ResolveParser,ms.resolver.parsers).handleByList(ct.CacheParser,ms.cache.parsers).handleByList(ct.DetectionParser,ms.detections);we.add(XA,qA,jA,KA,$A,ZA,QA,eT,sT,fT,gT,fb,CT,YA,FA,pb,RT);const Py={loader:ct.LoadParser,resolver:ct.ResolveParser,cache:ct.CacheParser,detection:ct.DetectionParser};we.handle(ct.Asset,a=>{const t=a.ref;Object.entries(Py).filter(([i])=>!!t[i]).forEach(([i,s])=>we.add(Object.assign(t[i],{extension:t[i].extension??s})))},a=>{const t=a.ref;Object.keys(Py).filter(i=>!!t[i]).forEach(i=>we.remove(t[i]))});class Zt extends uf{constructor(t){t instanceof mi&&(t={context:t});const{context:i,roundPixels:s,...l}=t||{};super({label:"Graphics",...l}),this.renderPipeId="graphics",i?this._context=i:this._context=this._ownedContext=new mi,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=s??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,i){return this.context[t](...i),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Zt(this._context.clone()):(this._ownedContext=null,new Zt(this._context))}lineStyle(t,i,s){Gt(Nt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const l={};return t&&(l.width=t),i&&(l.color=i),s&&(l.alpha=s),this.context.strokeStyle=l,this}beginFill(t,i){Gt(Nt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return t!==void 0&&(s.color=t),i!==void 0&&(s.alpha=i),this.context.fillStyle=s,this}endFill(){Gt(Nt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==mi.defaultStrokeStyle.width||t.color!==mi.defaultStrokeStyle.color||t.alpha!==mi.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Gt(Nt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Gt(Nt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Gt(Nt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Gt(Nt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Gt(Nt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Gt(Nt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class zT extends uf{constructor(t,i){const{text:s,resolution:l,style:u,anchor:c,width:f,height:p,roundPixels:g,...m}=t;super({...m}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=i,this.text=s??"",this.style=u,this.resolution=l??null,this.allowChildren=!1,this._anchor=new je({_onUpdate:()=>{this.onViewUpdate()}}),c&&(this.anchor=c),this.roundPixels=g??!1,f!==void 0&&(this.width=f),p!==void 0&&(this.height=p)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var i;t||(t={}),(i=this._style)==null||i.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,i){typeof t=="object"?(i=t.height??t.width,t=t.width):i??(i=t),t!==void 0&&this._setWidth(t,this.bounds.width),i!==void 0&&this._setHeight(i,this.bounds.height)}containsPoint(t){const i=this.bounds.width,s=this.bounds.height,l=-i*this.anchor.x;let u=0;return t.x>=l&&t.x<=l+i&&(u=-s*this.anchor.y,t.y>=u&&t.y<=u+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function DT(a,t){let i=a[0]??{};return(typeof i=="string"||a[1])&&(Gt(Nt,`use new ${t}({ text: "hi!", style }) instead`),i={text:i,style:a[1]}),i}class ua extends zT{constructor(...t){const i=DT(t,"Text");super(i,bs),this.renderPipeId="text"}updateBounds(){const t=this._bounds,i=this._anchor,s=Hh.measureText(this._text,this._style),{width:l,height:u}=s;t.minX=-i._x*l,t.maxX=t.minX+l,t.minY=-i._y*u,t.maxY=t.minY+u}}we.add(s_,a_);const sn=800,Te=600,GT=.1,Ny=-5,bh=12,ro={startX:150,startY:Te/2-50},ze={planet:3,secondaryPlanet:2.5,orb:2},De=[1,1.25,1.5,1.8,2],Dr=[{speeds:{planet:ze.planet*De[0],secondaryPlanet:ze.secondaryPlanet*De[0],orb:ze.orb*De[0]},spawnInterval:2500,label:"Level 1",orbsRequired:5,timeLimit:6e4,orbFrequency:1},{speeds:{planet:ze.planet*De[1],secondaryPlanet:ze.secondaryPlanet*De[1],orb:ze.orb*De[1]},spawnInterval:2200,label:"Level 2",orbsRequired:8,timeLimit:6e4,orbFrequency:3e3},{speeds:{planet:ze.planet*De[2],secondaryPlanet:ze.secondaryPlanet*De[2],orb:ze.orb*De[2]},spawnInterval:2e3,label:"Level 3",orbsRequired:12,timeLimit:7e4,orbFrequency:3e3},{speeds:{planet:ze.planet*De[3],secondaryPlanet:ze.secondaryPlanet*De[3],orb:ze.orb*De[3]},spawnInterval:1800,label:"Level 4",orbsRequired:15,timeLimit:7e4,orbFrequency:3e3},{speeds:{planet:ze.planet*De[4],secondaryPlanet:ze.secondaryPlanet*De[4],orb:ze.orb*De[4]},spawnInterval:1600,label:"Level 5",orbsRequired:20,timeLimit:8e4,orbFrequency:3e3}],BT=.4;var Nh=function(a,t){return Nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=s[l])},Nh(a,t)};function va(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Nh(a,t);function i(){this.constructor=a}a.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function Fh(a){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&a[t],s=0;if(i)return i.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&s>=a.length&&(a=void 0),{value:a&&a[s++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yh(a,t){var i=typeof Symbol=="function"&&a[Symbol.iterator];if(!i)return a;var s=i.call(a),l,u=[],c;try{for(;(t===void 0||t-- >0)&&!(l=s.next()).done;)u.push(l.value)}catch(f){c={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(c)throw c.error}}return u}function Ih(a,t,i){if(i||arguments.length===2)for(var s=0,l=t.length,u;s<l;s++)(u||!(s in t))&&(u||(u=Array.prototype.slice.call(t,0,s)),u[s]=t[s]);return a.concat(u||Array.prototype.slice.call(t))}function ki(a){return typeof a=="function"}function gb(a){var t=function(s){Error.call(s),s.stack=new Error().stack},i=a(t);return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var vh=gb(function(a){return function(i){a(this),this.message=i?i.length+` errors occurred during unsubscription:
`+i.map(function(s,l){return l+1+") "+s.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=i}});function Xh(a,t){if(a){var i=a.indexOf(t);0<=i&&a.splice(i,1)}}var To=function(){function a(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return a.prototype.unsubscribe=function(){var t,i,s,l,u;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var f=Fh(c),p=f.next();!p.done;p=f.next()){var g=p.value;g.remove(this)}}catch(M){t={error:M}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(t)throw t.error}}else c.remove(this);var m=this.initialTeardown;if(ki(m))try{m()}catch(M){u=M instanceof vh?M.errors:[M]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var _=Fh(y),v=_.next();!v.done;v=_.next()){var E=v.value;try{Fy(E)}catch(M){u=u??[],M instanceof vh?u=Ih(Ih([],Yh(u)),Yh(M.errors)):u.push(M)}}}catch(M){s={error:M}}finally{try{v&&!v.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}if(u)throw new vh(u)}},a.prototype.add=function(t){var i;if(t&&t!==this)if(this.closed)Fy(t);else{if(t instanceof a){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(t)}},a.prototype._hasParent=function(t){var i=this._parentage;return i===t||Array.isArray(i)&&i.includes(t)},a.prototype._addParent=function(t){var i=this._parentage;this._parentage=Array.isArray(i)?(i.push(t),i):i?[i,t]:t},a.prototype._removeParent=function(t){var i=this._parentage;i===t?this._parentage=null:Array.isArray(i)&&Xh(i,t)},a.prototype.remove=function(t){var i=this._finalizers;i&&Xh(i,t),t instanceof a&&t._removeParent(this)},a.EMPTY=function(){var t=new a;return t.closed=!0,t}(),a}(),mb=To.EMPTY;function yb(a){return a instanceof To||a&&"closed"in a&&ki(a.remove)&&ki(a.add)&&ki(a.unsubscribe)}function Fy(a){ki(a)?a():a.unsubscribe()}var LT={Promise:void 0},UT={setTimeout:function(a,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return setTimeout.apply(void 0,Ih([a,t],Yh(i)))},clearTimeout:function(a){return clearTimeout(a)},delegate:void 0};function kT(a){UT.setTimeout(function(){throw a})}function Yy(){}function po(a){a()}var Sf=function(a){va(t,a);function t(i){var s=a.call(this)||this;return s.isStopped=!1,i?(s.destination=i,yb(i)&&i.add(s)):s.destination=NT,s}return t.create=function(i,s,l){return new jh(i,s,l)},t.prototype.next=function(i){this.isStopped||this._next(i)},t.prototype.error=function(i){this.isStopped||(this.isStopped=!0,this._error(i))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(i){this.destination.next(i)},t.prototype._error=function(i){try{this.destination.error(i)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(To),HT=function(){function a(t){this.partialObserver=t}return a.prototype.next=function(t){var i=this.partialObserver;if(i.next)try{i.next(t)}catch(s){lo(s)}},a.prototype.error=function(t){var i=this.partialObserver;if(i.error)try{i.error(t)}catch(s){lo(s)}else lo(t)},a.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(i){lo(i)}},a}(),jh=function(a){va(t,a);function t(i,s,l){var u=a.call(this)||this,c;return ki(i)||!i?c={next:i??void 0,error:s??void 0,complete:l??void 0}:c=i,u.destination=new HT(c),u}return t}(Sf);function lo(a){kT(a)}function PT(a){throw a}var NT={closed:!0,next:Yy,error:PT,complete:Yy},FT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function bb(a){return a}function YT(a){return a.length===0?bb:a.length===1?a[0]:function(i){return a.reduce(function(s,l){return l(s)},i)}}var Iy=function(){function a(t){t&&(this._subscribe=t)}return a.prototype.lift=function(t){var i=new a;return i.source=this,i.operator=t,i},a.prototype.subscribe=function(t,i,s){var l=this,u=XT(t)?t:new jh(t,i,s);return po(function(){var c=l,f=c.operator,p=c.source;u.add(f?f.call(u,p):p?l._subscribe(u):l._trySubscribe(u))}),u},a.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(i){t.error(i)}},a.prototype.forEach=function(t,i){var s=this;return i=Xy(i),new i(function(l,u){var c=new jh({next:function(f){try{t(f)}catch(p){u(p),c.unsubscribe()}},error:u,complete:l});s.subscribe(c)})},a.prototype._subscribe=function(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)},a.prototype[FT]=function(){return this},a.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return YT(t)(this)},a.prototype.toPromise=function(t){var i=this;return t=Xy(t),new t(function(s,l){var u;i.subscribe(function(c){return u=c},function(c){return l(c)},function(){return s(u)})})},a.create=function(t){return new a(t)},a}();function Xy(a){var t;return(t=a??LT.Promise)!==null&&t!==void 0?t:Promise}function IT(a){return a&&ki(a.next)&&ki(a.error)&&ki(a.complete)}function XT(a){return a&&a instanceof Sf||IT(a)&&yb(a)}function jT(a){return ki(a==null?void 0:a.lift)}function Af(a){return function(t){if(jT(t))return t.lift(function(i){try{return a(i,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function Tf(a,t,i,s,l){return new qT(a,t,i,s,l)}var qT=function(a){va(t,a);function t(i,s,l,u,c,f){var p=a.call(this,i)||this;return p.onFinalize=c,p.shouldUnsubscribe=f,p._next=s?function(g){try{s(g)}catch(m){i.error(m)}}:a.prototype._next,p._error=u?function(g){try{u(g)}catch(m){i.error(m)}finally{this.unsubscribe()}}:a.prototype._error,p._complete=l?function(){try{l()}catch(g){i.error(g)}finally{this.unsubscribe()}}:a.prototype._complete,p}return t.prototype.unsubscribe=function(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var s=this.closed;a.prototype.unsubscribe.call(this),!s&&((i=this.onFinalize)===null||i===void 0||i.call(this))}},t}(Sf),VT=gb(function(a){return function(){a(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),wf=function(a){va(t,a);function t(){var i=a.call(this)||this;return i.closed=!1,i.currentObservers=null,i.observers=[],i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return t.prototype.lift=function(i){var s=new jy(this,this);return s.operator=i,s},t.prototype._throwIfClosed=function(){if(this.closed)throw new VT},t.prototype.next=function(i){var s=this;po(function(){var l,u;if(s._throwIfClosed(),!s.isStopped){s.currentObservers||(s.currentObservers=Array.from(s.observers));try{for(var c=Fh(s.currentObservers),f=c.next();!f.done;f=c.next()){var p=f.value;p.next(i)}}catch(g){l={error:g}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}}})},t.prototype.error=function(i){var s=this;po(function(){if(s._throwIfClosed(),!s.isStopped){s.hasError=s.isStopped=!0,s.thrownError=i;for(var l=s.observers;l.length;)l.shift().error(i)}})},t.prototype.complete=function(){var i=this;po(function(){if(i._throwIfClosed(),!i.isStopped){i.isStopped=!0;for(var s=i.observers;s.length;)s.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(i){return this._throwIfClosed(),a.prototype._trySubscribe.call(this,i)},t.prototype._subscribe=function(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)},t.prototype._innerSubscribe=function(i){var s=this,l=this,u=l.hasError,c=l.isStopped,f=l.observers;return u||c?mb:(this.currentObservers=null,f.push(i),new To(function(){s.currentObservers=null,Xh(f,i)}))},t.prototype._checkFinalizedStatuses=function(i){var s=this,l=s.hasError,u=s.thrownError,c=s.isStopped;l?i.error(u):c&&i.complete()},t.prototype.asObservable=function(){var i=new Iy;return i.source=this,i},t.create=function(i,s){return new jy(i,s)},t}(Iy),jy=function(a){va(t,a);function t(i,s){var l=a.call(this)||this;return l.destination=i,l.source=s,l}return t.prototype.next=function(i){var s,l;(l=(s=this.destination)===null||s===void 0?void 0:s.next)===null||l===void 0||l.call(s,i)},t.prototype.error=function(i){var s,l;(l=(s=this.destination)===null||s===void 0?void 0:s.error)===null||l===void 0||l.call(s,i)},t.prototype.complete=function(){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.complete)===null||s===void 0||s.call(i)},t.prototype._subscribe=function(i){var s,l;return(l=(s=this.source)===null||s===void 0?void 0:s.subscribe(i))!==null&&l!==void 0?l:mb},t}(wf),$T=function(a){va(t,a);function t(i){var s=a.call(this)||this;return s._value=i,s}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(i){var s=a.prototype._subscribe.call(this,i);return!s.closed&&i.next(this._value),s},t.prototype.getValue=function(){var i=this,s=i.hasError,l=i.thrownError,u=i._value;if(s)throw l;return this._throwIfClosed(),u},t.prototype.next=function(i){a.prototype.next.call(this,this._value=i)},t}(wf);function vb(a,t){return Af(function(i,s){var l=0;i.subscribe(Tf(s,function(u){s.next(a.call(t,u,l++))}))})}function ZT(a,t){return Af(function(i,s){var l=0;i.subscribe(Tf(s,function(u){return a.call(t,u,l++)&&s.next(u)}))})}function QT(a,t){return t===void 0&&(t=bb),a=a??KT,Af(function(i,s){var l,u=!0;i.subscribe(Tf(s,function(c){var f=t(c);(u||!a(l,f))&&(u=!1,l=f,s.next(c))}))})}function KT(a,t){return a===t}var go={exports:{}},WT=go.exports,qy;function JT(){return qy||(qy=1,function(a){(function(t,i){a.exports?a.exports=i():t.log=i()})(WT,function(){var t=function(){},i="undefined",s=typeof window!==i&&typeof window.navigator!==i&&/Trident\/|MSIE /.test(window.navigator.userAgent),l=["trace","debug","info","warn","error"],u={},c=null;function f(M,T){var C=M[T];if(typeof C.bind=="function")return C.bind(M);try{return Function.prototype.bind.call(C,M)}catch{return function(){return Function.prototype.apply.apply(C,[M,arguments])}}}function p(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function g(M){return M==="debug"&&(M="log"),typeof console===i?!1:M==="trace"&&s?p:console[M]!==void 0?f(console,M):console.log!==void 0?f(console,"log"):t}function m(){for(var M=this.getLevel(),T=0;T<l.length;T++){var C=l[T];this[C]=T<M?t:this.methodFactory(C,M,this.name)}if(this.log=this.debug,typeof console===i&&M<this.levels.SILENT)return"No console available for logging"}function y(M){return function(){typeof console!==i&&(m.call(this),this[M].apply(this,arguments))}}function _(M,T,C){return g(M)||y.apply(this,arguments)}function v(M,T){var C=this,z,B,N,I="loglevel";typeof M=="string"?I+=":"+M:typeof M=="symbol"&&(I=void 0);function V(W){var rt=(l[W]||"silent").toUpperCase();if(!(typeof window===i||!I)){try{window.localStorage[I]=rt;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+rt+";"}catch{}}}function $(){var W;if(!(typeof window===i||!I)){try{W=window.localStorage[I]}catch{}if(typeof W===i)try{var rt=window.document.cookie,gt=encodeURIComponent(I),kt=rt.indexOf(gt+"=");kt!==-1&&(W=/^([^;]+)/.exec(rt.slice(kt+gt.length+1))[1])}catch{}return C.levels[W]===void 0&&(W=void 0),W}}function at(){if(!(typeof window===i||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function nt(W){var rt=W;if(typeof rt=="string"&&C.levels[rt.toUpperCase()]!==void 0&&(rt=C.levels[rt.toUpperCase()]),typeof rt=="number"&&rt>=0&&rt<=C.levels.SILENT)return rt;throw new TypeError("log.setLevel() called with invalid level: "+W)}C.name=M,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=T||_,C.getLevel=function(){return N??B??z},C.setLevel=function(W,rt){return N=nt(W),rt!==!1&&V(N),m.call(C)},C.setDefaultLevel=function(W){B=nt(W),$()||C.setLevel(W,!1)},C.resetLevel=function(){N=null,at(),m.call(C)},C.enableAll=function(W){C.setLevel(C.levels.TRACE,W)},C.disableAll=function(W){C.setLevel(C.levels.SILENT,W)},C.rebuild=function(){if(c!==C&&(z=nt(c.getLevel())),m.call(C),c===C)for(var W in u)u[W].rebuild()},z=nt(c?c.getLevel():"WARN");var it=$();it!=null&&(N=nt(it)),m.call(C)}c=new v,c.getLogger=function(T){if(typeof T!="symbol"&&typeof T!="string"||T==="")throw new TypeError("You must supply a name when creating a logger.");var C=u[T];return C||(C=u[T]=new v(T,c.methodFactory)),C};var E=typeof window!==i?window.log:void 0;return c.noConflict=function(){return typeof window!==i&&window.log===c&&(window.log=E),c},c.getLoggers=function(){return u},c.default=c,c})}(go)),go.exports}var ss=JT(),xb=(a=>(a.TRACE="trace",a.DEBUG="debug",a.INFO="info",a.WARN="warn",a.ERROR="error",a.SILENT="silent",a))(xb||{});const _b={level:"error",showTimestamp:!0,showLogLevel:!0};function Sb(a={}){const t={..._b,...a};ss.setLevel("debug"),window.__loggerConfig=t,Ab.info("Logger initialized",{level:t.level})}function Ar(a,t,i){const s=window.__loggerConfig||_b,l=[];return s.showTimestamp&&l.push(`[${new Date().toISOString()}]`),s.showLogLevel&&l.push(`[${a.toUpperCase()}]`),t&&l.push(`[${t}]`),l.push(i),l.join(" ")}function Ve(a){return{trace:(t,...i)=>ss.trace(Ar("trace",a,t),...i),debug:(t,...i)=>ss.debug(Ar("debug",a,t),...i),info:(t,...i)=>ss.info(Ar("info",a,t),...i),warn:(t,...i)=>ss.warn(Ar("warn",a,t),...i),error:(t,...i)=>ss.error(Ar("error",a,t),...i)}}const Ab=Ve("");Sb();const ra=Ve("EventBus");var pt=(a=>(a.SCORE_CHANGED="SCORE_CHANGED",a.LEVEL_CHANGED="LEVEL_CHANGED",a.GAME_OVER="GAME_OVER",a.LEVEL_COMPLETE="LEVEL_COMPLETE",a.GAME_STARTED="GAME_STARTED",a.GAME_RESET="GAME_RESET",a.ORB_COLLECTED="ORB_COLLECTED",a.OBSTACLE_PASSED="OBSTACLE_PASSED",a.COLLISION_DETECTED="COLLISION_DETECTED",a.JUMP_ACTION="JUMP_ACTION",a.DEBUG_TOGGLED="DEBUG_TOGGLED",a.ENTITY_CREATED="ENTITY_CREATED",a.ENTITY_DESTROYED="ENTITY_DESTROYED",a.TIME_UPDATED="TIME_UPDATED",a.START_GAME="START_GAME",a.SHOW_START_PROMPT="SHOW_START_PROMPT",a.HIDE_START_PROMPT="HIDE_START_PROMPT",a.RESTART_GAME="RESTART_GAME",a.PLAYER_DEATH="PLAYER_DEATH",a.COLLECT_ORB="COLLECT_ORB",a.PLAYER_HIT_OBSTACLE="PLAYER_HIT_OBSTACLE",a.ASSETS_LOADED="ASSETS_LOADED",a))(pt||{});const as=class as{constructor(){q(this,"eventSubject");q(this,"debug",!1);this.eventSubject=new wf}static getInstance(){return as.instance||(as.instance=new as),as.instance}enableDebug(){this.debug=!0,ra.info("Debug mode enabled - all events will be logged")}disableDebug(){this.debug=!1,ra.info("Debug mode disabled")}emit(t,i){this.debug?ra.debug(`EMIT: ${t}`,i):ra.debug(`${t}`,i),this.eventSubject.next({type:t,data:i})}on(t){return this.debug?ra.debug(`SUBSCRIBE: ${t}`):ra.debug(`Subscribing to ${t}`),this.eventSubject.pipe(ZT(i=>i.type===t),vb(i=>i.data))}getEventStream(){return this.eventSubject.asObservable()}};q(as,"instance");let qh=as;const St=qh.getInstance(),Xe=Ve("AssetManager"),oo=[{name:"astronaut",url:"./assets/astro-sprite.png",type:"texture"}];class tw{constructor(){q(this,"loaded",!1);q(this,"loadPromise",null);this.registerAssets()}registerAssets(){oo.forEach(t=>{if(!t.url){Xe.error(`Asset ${t.name} has no URL defined`);return}Xe.debug(`Registering asset: ${t.name} with URL: ${t.url}`),ms.add({alias:t.name,src:t.url})})}async loadAssets(){if(this.loaded)return Promise.resolve();if(this.loadPromise)return this.loadPromise;Xe.info("Starting to load assets...");try{return this.loadPromise=new Promise(async(t,i)=>{try{for(const s of oo)Xe.debug(`Loading asset: ${s.name} from ${s.url}`),await ms.load(s.name),Xe.debug(`Successfully loaded: ${s.name}`);this.loaded=!0,Xe.info("All assets loaded successfully"),St.emit(pt.ASSETS_LOADED,oo.map(s=>s.name)),t()}catch(s){Xe.error("Failed to load assets:",s),i(s)}}),this.loadPromise}catch(t){throw Xe.error("Asset loading error:",t),t}}loadAssetsAsync(){this.loaded||this.loadPromise||(Xe.info("Starting asset loading asynchronously..."),this.loadAssets().then(()=>Xe.info("Async asset loading completed")).catch(t=>Xe.error("Async asset loading failed:",t)))}getTexture(t){this.loaded||Xe.warn(`Asset ${t} requested before assets were loaded.`);try{const i=ms.get(t);return i||(Xe.error(`Texture '${t}' not found. Available assets:`,oo.map(s=>s.name).join(", ")),Ct.WHITE)}catch(i){return Xe.error(`Error getting texture '${t}':`,i),Ct.WHITE}}isLoaded(){return this.loaded}}const Vh=new tw,pe=Ve("InputManager");var On=(a=>(a.JUMP="jump",a.START_GAME="start_game",a.TOUCH="touch",a))(On||{});class ew{constructor(){q(this,"keyMap");q(this,"eventHandlers");q(this,"enabled");q(this,"touchActive",!1);q(this,"lastTouchTime",0);q(this,"touchThrottleTime",150);q(this,"handleKeyDown",t=>{const i=t.code;pe.debug(`KeyDown event - ${i}, enabled: ${this.enabled}`),this.keyMap.get(i)||(this.keyMap.set(i,!0),(i==="Space"||i==="ArrowUp"||i==="KeyW")&&(pe.debug(`Triggering JUMP event from key ${i}`),this.triggerEvent("jump"),i==="Space"&&(pe.debug("Triggering START_GAME event from spacebar"),this.triggerEvent("start_game"))))});q(this,"handleKeyUp",t=>{const i=t.code;this.keyMap.set(i,!1),pe.debug(`KeyUp event - ${i}`)});q(this,"handleTouchStart",t=>{if(!this.enabled){pe.debug("Touch ignored - input disabled");return}const i=Date.now();if(i-this.lastTouchTime<this.touchThrottleTime){pe.debug("Touch throttled - too soon after last touch"),t.preventDefault();return}this.lastTouchTime=i;const s=t.touches[0],l={x:s.clientX,y:s.clientY,timestamp:i};pe.debug(`TouchStart event at (${l.x}, ${l.y})`),this.touchActive=!0,pe.debug("Triggering START_GAME event from touch"),this.triggerEvent("start_game"),pe.debug("Triggering TOUCH event"),this.triggerEventWithData("touch",l),pe.debug("Triggering JUMP event from touch"),this.triggerEvent("jump"),t.preventDefault()});q(this,"handleTouchEnd",t=>{pe.debug("TouchEnd event detected"),this.touchActive=!1,t.preventDefault()});q(this,"handleTouchMove",t=>{t.preventDefault()});this.keyMap=new Map,this.eventHandlers=new Map,this.enabled=!1,Object.values(On).forEach(t=>{this.eventHandlers.set(t,[])}),pe.info("Created")}enable(){this.enabled||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchend",this.handleTouchEnd),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),this.enabled=!0,pe.info("Enabled with keyboard and touch support"))}disable(){this.enabled&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchmove",this.handleTouchMove),this.enabled=!1,pe.info("Disabled"))}on(t,i){const s=this.eventHandlers.get(t)||[];s.push(i),this.eventHandlers.set(t,s),pe.debug(`Registered handler for ${t}, total handlers: ${s.length}`)}off(t,i){const s=this.eventHandlers.get(t)||[],l=s.indexOf(i);l!==-1&&(s.splice(l,1),this.eventHandlers.set(t,s),pe.debug(`Unregistered handler for ${t}, remaining handlers: ${s.length}`))}isKeyDown(t){return this.keyMap.get(t)||!1}isTouchActive(){return this.touchActive}triggerEvent(t){const i=this.eventHandlers.get(t)||[];pe.debug(`Triggering ${t} event, handlers: ${i.length}`),i.forEach(s=>s())}triggerEventWithData(t,i){const s=this.eventHandlers.get(t)||[];pe.debug(`Triggering ${t} event with data, handlers: ${s.length}`),this.lastEventData=i,s.forEach(l=>l()),delete this.lastEventData}getLastEventData(){return this.lastEventData}triggerStartGame(){pe.debug("Manual START_GAME trigger"),this.triggerEvent("start_game")}}const Li=new ew,rs=class rs{constructor(){q(this,"state$");this.state$=new $T(this.getInitialState()),this.setupEventPublishers()}getInitialState(){const t=Dr[0];return{score:0,level:1,warps:0,time:0,orbsCollected:0,orbsRequired:t.orbsRequired,timeLimit:t.timeLimit,timeRemaining:t.timeLimit,isStarted:!1,isGameOver:!1,isLevelComplete:!1,debugMode:!1}}setupEventPublishers(){this.select(t=>t.score).subscribe(t=>{St.emit(pt.SCORE_CHANGED,t)}),this.select(t=>t.level).subscribe(t=>{St.emit(pt.LEVEL_CHANGED,t)}),this.select(t=>t.isGameOver).subscribe(t=>{t&&St.emit(pt.GAME_OVER,null)}),this.select(t=>t.isLevelComplete).subscribe(t=>{t&&St.emit(pt.LEVEL_COMPLETE,this.getState().level)})}static getInstance(){return rs.instance||(rs.instance=new rs),rs.instance}getState(){return this.state$.getValue()}getState$(){return this.state$.asObservable()}select(t){return this.state$.pipe(vb(t),QT())}setState(t){this.state$.next(t(this.getState()))}startGame(){console.log("GameStateService: startGame() called"),console.log(`GameStateService: Current state before starting - isStarted: ${this.getState().isStarted}, isGameOver: ${this.getState().isGameOver}, isLevelComplete: ${this.getState().isLevelComplete}`),this.setState(t=>({...t,isStarted:!0,isGameOver:!1,isLevelComplete:!1})),console.log(`GameStateService: State updated - isStarted: ${this.getState().isStarted}, isGameOver: ${this.getState().isGameOver}, isLevelComplete: ${this.getState().isLevelComplete}`),console.log("GameStateService: Emitting GAME_STARTED event"),St.emit(pt.GAME_STARTED,null),console.log("GameStateService: startGame() complete")}gameOver(){this.setState(t=>({...t,isGameOver:!0,isStarted:!1}))}resetGame(){console.log("GameStateService: Resetting game state to initial values");const t=this.getInitialState();console.log("GameStateService: Initial state:",t),this.state$.next(t),console.log("GameStateService: State reset complete - time:",this.getState().time),St.emit(pt.GAME_RESET,null)}incrementScore(t){this.setState(i=>({...i,score:i.score+t}))}collectOrb(){this.setState(t=>{const i=t.orbsCollected+1,s=i>=t.orbsRequired;return St.emit(pt.ORB_COLLECTED,i),{...t,orbsCollected:i,score:t.score+10,isLevelComplete:s}})}levelComplete(){this.setState(t=>{if(t.level>=Dr.length)return{...t,isLevelComplete:!0,isGameOver:!0};const i=t.level+1,s=Dr[i-1];return{...t,level:i,warps:t.warps+1,orbsCollected:0,orbsRequired:s.orbsRequired,timeLimit:s.timeLimit,timeRemaining:s.timeLimit,isLevelComplete:!0}})}updateTime(t){console.log("GameStateService: updateTime() called with deltaMS:",t),this.setState(i=>{const s=i.time+t,l=Math.max(0,i.timeRemaining-t),u=i.timeRemaining>0&&l<=0;return u&&St.emit(pt.TIME_UPDATED,{time:s,timeRemaining:l,timeRanOut:u}),{...i,time:s,timeRemaining:l,isGameOver:u?!0:i.isGameOver}})}toggleDebugMode(){this.setState(t=>{const i=!t.debugMode;return St.emit(pt.DEBUG_TOGGLED,i),{...t,debugMode:i}})}};q(rs,"instance");let $h=rs;const Dt=$h.getInstance(),Ti=Ve("FrameRateMonitor"),ls=class ls{constructor(){q(this,"frameCount",0);q(this,"lastTime",0);q(this,"fps",0);q(this,"fpsHistory",[]);q(this,"deltaMSHistory",[]);q(this,"enabled",!1);q(this,"logInterval",1e3);q(this,"maxHistorySize",10);q(this,"restartCount",0);q(this,"tickerSpeedHistory",[])}static getInstance(){return ls.instance||(ls.instance=new ls),ls.instance}enable(){this.enabled=!0,this.lastTime=performance.now(),this.frameCount=0,this.fpsHistory=[],Ti.info("Frame rate monitoring enabled")}disable(){this.enabled=!1,Ti.info("Frame rate monitoring disabled")}setLogInterval(t){this.logInterval=t,Ti.info(`Log interval set to ${t}ms`)}recordRestart(t){this.restartCount++;const i=performance.now();this.tickerSpeedHistory.push({restart:this.restartCount,time:i,speed:t}),this.tickerSpeedHistory.length>this.maxHistorySize*2&&(this.tickerSpeedHistory=this.tickerSpeedHistory.slice(-this.maxHistorySize)),Ti.info(`Game restart #${this.restartCount} recorded at ${i}ms, ticker speed: ${t}`),this.tickerSpeedHistory.length>1&&(Ti.info("Ticker speed history:"),this.tickerSpeedHistory.forEach(s=>{Ti.info(`Restart #${s.restart}: ${s.speed.toFixed(4)} at ${Math.round(s.time)}ms`)}))}trackFrame(t){if(!this.enabled)return;this.frameCount++,this.deltaMSHistory.push(t),this.deltaMSHistory.length>100&&(this.deltaMSHistory=this.deltaMSHistory.slice(-100));const i=performance.now(),s=i-this.lastTime;if(s>=this.logInterval){this.fps=this.frameCount/s*1e3,this.fpsHistory.push(this.fps),this.fpsHistory.length>this.maxHistorySize&&this.fpsHistory.shift();const l=this.deltaMSHistory.reduce((f,p)=>f+p,0)/this.deltaMSHistory.length,u=Math.min(...this.deltaMSHistory),c=Math.max(...this.deltaMSHistory);if(Ti.info(`FPS: ${this.fps.toFixed(1)} | deltaMS avg: ${l.toFixed(2)}ms, min: ${u.toFixed(2)}ms, max: ${c.toFixed(2)}ms | Restart count: ${this.restartCount}`),this.fpsHistory.length>1){const f=this.fpsHistory.map(p=>p.toFixed(1)).join("  ");Ti.info(`FPS trend: ${f}`),this.detectPerformanceIssues()}this.lastTime=i,this.frameCount=0,this.deltaMSHistory=[]}}detectPerformanceIssues(){if(this.fpsHistory.length<3)return;let t=!0;for(let i=1;i<this.fpsHistory.length;i++)if(this.fpsHistory[i]>=this.fpsHistory[i-1]){t=!1;break}if(t){Ti.warn("PERFORMANCE ALERT: FPS has been consistently decreasing!");const i=this.fpsHistory[0],s=this.fpsHistory[this.fpsHistory.length-1],l=(i-s)/i*100;if(Ti.warn(`FPS dropped by ${l.toFixed(1)}% from ${i.toFixed(1)} to ${s.toFixed(1)}`),this.tickerSpeedHistory.length>1){const u=this.tickerSpeedHistory[0].speed,c=this.tickerSpeedHistory[this.tickerSpeedHistory.length-1].speed;Ti.warn(`Ticker speed changed from ${u.toFixed(4)} to ${c.toFixed(4)}`)}}}getFPS(){return this.fps}getFPSHistory(){return[...this.fpsHistory]}getTickerSpeedHistory(){return[...this.tickerSpeedHistory]}};q(ls,"instance");let Zh=ls;const Wn=Zh.getInstance(),F=Ve("GameController");class iw{constructor(t,i,s,l,u,c,f,p,g,m){q(this,"app");q(this,"eventBus");q(this,"gameStateService");q(this,"inputSystem");q(this,"audioSystem");q(this,"entityManager");q(this,"renderSystem");q(this,"physicsSystem");q(this,"spawningSystem");q(this,"uiSystem");q(this,"gameLoopFunc");q(this,"initialized",!1);F.info("Constructor called"),this.app=t,this.eventBus=i,this.gameStateService=s,this.inputSystem=l,this.audioSystem=u,this.entityManager=c,this.renderSystem=f,this.physicsSystem=p,this.spawningSystem=g,this.uiSystem=m,F.info("Creating game loop function"),this.gameLoopFunc=this.createGameLoop(),F.debug("Is app.ticker available?",!!this.app.ticker),F.info("Constructor completed")}initialize(){if(this.initialized){F.warn("Already initialized, skipping");return}F.info("Initializing..."),this.app=this.app,F.info("Enabling frame rate monitor"),Wn.enable(),Wn.setLogInterval(2e3),F.debug("Initializing InputSystem"),this.inputSystem.initialize(),F.debug("Initializing AudioSystem"),this.audioSystem.initialize(),F.debug("Initializing EntityManager"),this.entityManager.initialize(this.app),F.debug("Initializing RenderSystem"),this.renderSystem.initialize(this.app),F.debug("Initializing PhysicsSystem"),this.physicsSystem.initialize(),F.debug("Initializing SpawningSystem"),this.spawningSystem.initialize(),F.debug("Initializing UISystem");try{this.uiSystem.initialize(this.app)}catch(t){F.error("Failed to initialize UISystem:",t)}this.gameLoopFunc=this.createGameLoop(),this.app.ticker?(F.info("Starting ticker for background animation"),F.info(`Initial ticker configuration - speed: ${this.app.ticker.speed}, minFPS: ${this.app.ticker.minFPS}, maxFPS: ${this.app.ticker.maxFPS}`),this.app.ticker.remove(this.gameLoopFunc),this.app.ticker.add(this.gameLoopFunc),this.app.ticker.start(),Wn.recordRestart(this.app.ticker.speed)):F.error("Ticker not available"),this.initialized=!0,F.info("Initialization complete"),this.setupEventListeners()}analyzeEntitySpeeds(){F.info("Running entity speed analysis...");const t=this.entityManager.getObstacles(),i=this.entityManager.getOrbs();if(F.info(`Entity counts - obstacles: ${t.length}, orbs: ${i.length}`),t.length===0&&i.length===0){F.info("No entities to analyze");return}if(t.length>0){const s=t.map(p=>({id:p.id||"unknown",speed:p.speed,initialSpeed:p.initialSpeed,ratio:p.speed/p.initialSpeed,x:p.x,y:p.y,type:p.constructor.name})),l=s.reduce((p,g)=>p+g.speed,0)/s.length,u=Math.min(...s.map(p=>p.speed)),c=Math.max(...s.map(p=>p.speed));F.info(`Obstacle speed stats - avg: ${l.toFixed(2)}, min: ${u.toFixed(2)}, max: ${c.toFixed(2)}`);const f=s.filter(p=>Math.abs(p.ratio-1)>.1);f.length>0&&(F.warn(`Found ${f.length} obstacles with abnormal speed ratio!`),f.forEach(p=>{F.warn(`Issue with ${p.type} ${p.id}: speed=${p.speed.toFixed(2)}, initialSpeed=${p.initialSpeed.toFixed(2)}, ratio=${p.ratio.toFixed(2)}`)}))}if(i.length>0){const s=i.map(p=>({id:p.id||"unknown",speed:p.speed,initialSpeed:p.initialSpeed,ratio:p.speed/p.initialSpeed,x:p.x,y:p.y,type:"Orb"})),l=s.reduce((p,g)=>p+g.speed,0)/s.length,u=Math.min(...s.map(p=>p.speed)),c=Math.max(...s.map(p=>p.speed));F.info(`Orb speed stats - avg: ${l.toFixed(2)}, min: ${u.toFixed(2)}, max: ${c.toFixed(2)}`);const f=s.filter(p=>Math.abs(p.ratio-1)>.1);f.length>0&&(F.warn(`Found ${f.length} orbs with abnormal speed ratio!`),f.forEach(p=>{F.warn(`Issue with Orb ${p.id}: speed=${p.speed.toFixed(2)}, initialSpeed=${p.initialSpeed.toFixed(2)}, ratio=${p.ratio.toFixed(2)}`)}))}}setupGame(){var s,l,u;F.info("Setting up game..."),(s=this.app)!=null&&s.ticker&&F.info(`TICKER STATUS BEFORE RESET - speed: ${this.app.ticker.speed}, started: ${this.app.ticker.started}, deltaMS: ${this.app.ticker.deltaMS}, deltaTime: ${this.app.ticker.deltaTime}, lastTime: ${this.app.ticker.lastTime}`),this.analyzeEntitySpeeds(),F.info("Resetting game state"),this.gameStateService.resetGame(),F.info("Clearing all entities"),this.entityManager.clearAll(),F.info("Resetting spawning system"),this.spawningSystem.resetSpawning(),F.info("Enabling speed diagnostics"),this.physicsSystem.setSpeedDiagnostics(!0,3e3);const t=this.gameStateService.getState().level;if(F.info(`Initializing level ${t}`),this.initializeLevel(t),(l=this.app)!=null&&l.ticker){const c=this.app.ticker.speed;this.app.ticker.speed=1,F.info(`Reset ticker speed from ${c} to ${this.app.ticker.speed}`),Wn.recordRestart(this.app.ticker.speed)}const i=this.entityManager.getAstronaut();i?F.info("Astronaut position verified - x:",i.sprite.x,"y:",i.sprite.y):(F.info("Astronaut not created during initialization. Creating it now."),this.entityManager.createAstronaut()),F.info("Updating background ticker function"),this.app.ticker.remove(this.gameLoopFunc),this.app.ticker.add(this.gameLoopFunc),this.app.ticker.started||(F.info("Starting ticker for background animation"),this.app.ticker.start()),F.info("Showing start prompt"),this.eventBus.emit(pt.SHOW_START_PROMPT,null),F.info("Setup complete. Waiting for START_GAME."),(u=this.app)!=null&&u.ticker&&F.info(`TICKER STATUS AFTER RESET - speed: ${this.app.ticker.speed}, started: ${this.app.ticker.started}, deltaMS: ${this.app.ticker.deltaMS}, deltaTime: ${this.app.ticker.deltaTime}`)}startGame(){var t;if(F.info("startGame() called"),this.gameStateService.getState().isStarted){F.info("Game already in progress, ignoring start request");return}if(F.info("DIAGNOSTIC INFO:"),F.info("- Game state:",this.gameStateService.getState()),F.info("- Astronaut exists:",!!this.entityManager.getAstronaut()),F.info("- Obstacles count:",this.entityManager.getObstacles().length),F.info("- Orbs count:",this.entityManager.getOrbs().length),F.info("- Stars count:",this.entityManager.getStars().length),F.info("Calling gameStateService.startGame()"),this.gameStateService.startGame(),F.info("app =",this.app),F.info("app.ticker =",this.app.ticker),F.info("app.ticker.started =",this.app.ticker?this.app.ticker.started:"ticker undefined"),F.info("gameLoopFunc =",typeof this.gameLoopFunc=="function"?"function defined":this.gameLoopFunc),F.info("Removing any existing game loop from ticker"),this.app.ticker.remove(this.gameLoopFunc),F.info("Adding game loop to ticker"),this.app.ticker.add(this.gameLoopFunc),(t=this.app)!=null&&t.ticker&&F.info(`TICKER STATUS BEFORE START - speed: ${this.app.ticker.speed}, FPS: ${(1e3/this.app.ticker.deltaMS).toFixed(1)}, deltaMS: ${this.app.ticker.deltaMS}, minFPS: ${this.app.ticker.minFPS}, maxFPS: ${this.app.ticker.maxFPS}`),this.app.ticker.started)F.info("Ticker already started"),F.info("Forcing initial update cycle on already running ticker..."),this.gameLoopFunc({deltaTime:1/60,deltaMS:16.667,elapsedMS:16.667});else{F.info("Ticker not started, starting it now");try{this.app.ticker.start(),F.info("Ticker started successfully");const i=this.gameStateService.getState();F.info(`GameController: Game state after start - isStarted: ${i.isStarted}, tickerStarted: ${this.app.ticker.started}`),F.info("Forcing initial update cycle..."),this.gameLoopFunc({deltaTime:1/60,deltaMS:16.667,elapsedMS:16.667})}catch(i){F.error("Error starting ticker:",i)}}F.info("Hiding start prompt"),this.eventBus.emit(pt.HIDE_START_PROMPT,null),F.info("Game started")}pauseGame(){this.gameStateService.getState().isStarted&&(F.info("Pausing game"),this.app.ticker.stop(),F.info("Game paused"))}resumeGame(){this.gameStateService.getState().isGameOver||(F.info("Resuming game"),this.app.ticker.start(),F.info("Game resumed"))}gameOver(){var i;F.info("Game over"),(i=this.app)!=null&&i.ticker&&F.info(`TICKER STATUS AT GAME OVER - speed: ${this.app.ticker.speed}, FPS: ${(1e3/this.app.ticker.deltaMS).toFixed(1)}, deltaMS: ${this.app.ticker.deltaMS}`),F.info("Calling gameStateService.gameOver()"),this.gameStateService.gameOver(),F.info("Removing game loop from ticker"),this.app.ticker.remove(this.gameLoopFunc);const t=this.entityManager.getAstronaut();t&&!t.dead&&(F.info("Setting astronaut to dead state"),t.die()),F.info("Game over processing complete")}initializeLevel(t){F.info(`Initializing level ${t}`),this.checkTickerHealth("Before level initialization");let i=Dr[t-1];i||(F.error(`Invalid level number ${t}. Cannot find config. Falling back to level 1.`),i=Dr[0]);const s={speeds:i.speeds,spawnInterval:i.spawnInterval,orbFrequency:i.orbFrequency||3e3};F.info("GameController: Level config for SpawningSystem:",s),F.info("GameController: Setting level config in SpawningSystem"),this.spawningSystem.setLevelConfig(s),F.info("GameController: Creating astronaut entity");const l=this.entityManager.createAstronaut();l?F.info(`GameController: Astronaut created at position (${l.sprite.x}, ${l.sprite.y})`):F.error("GameController: Failed to create astronaut"),F.info("GameController: Creating background"),this.renderSystem.createBackground(),this.checkTickerHealth("Before adding game loop to ticker during level init"),F.info("Updating ticker for background animation"),this.app.ticker.remove(this.gameLoopFunc),this.app.ticker.add(this.gameLoopFunc),this.app.ticker.started?F.info("Ticker already running for background animation"):(F.info("Starting ticker for background animation"),this.app.ticker.start()),this.checkTickerHealth("After level initialization"),F.info(`GameController: Level ${t} initialization complete`)}checkTickerHealth(t){var c;if(!((c=this.app)!=null&&c.ticker)){F.error(`${t}: Ticker not available`);return}const i=this.app.ticker,s=i.FPS,l=i.deltaMS,u=1e3/l;F.info(`TICKER HEALTH [${t}]:`),F.info(`- Speed: ${i.speed.toFixed(4)}`),F.info(`- Started: ${i.started}`),F.info(`- DeltaMS: ${l.toFixed(2)}ms`),F.info(`- FPS property: ${s.toFixed(1)}`),F.info(`- Calculated FPS: ${u.toFixed(1)}`),F.info(`- Min FPS: ${i.minFPS}`),F.info(`- Max FPS: ${i.maxFPS}`),i.speed!==1&&F.warn(`TICKER ISSUE: Speed is not 1.0 (actual: ${i.speed.toFixed(4)})`),(u<55||u>65)&&F.warn(`TICKER ISSUE: Frame rate out of normal range: ${u.toFixed(1)} FPS`),l>20&&F.warn(`TICKER ISSUE: DeltaMS too high: ${l.toFixed(2)}ms (expected ~16.7ms at 60fps)`)}setupEventListeners(){F.info("Setting up event listeners"),F.info("Subscribing to START_GAME event"),this.eventBus.on(pt.START_GAME).subscribe(()=>{F.info("Received START_GAME event from EventBus"),this.startGame()}),this.eventBus.on(pt.RESTART_GAME).subscribe(()=>{F.info("Received RESTART_GAME event from EventBus"),this.setupGame()}),F.info("Subscribing to COLLISION_DETECTED event"),this.eventBus.on(pt.COLLISION_DETECTED).subscribe(()=>{F.info("Received COLLISION_DETECTED"),this.gameOver()}),F.info("Subscribing to ORB_COLLECTED event"),this.eventBus.on(pt.ORB_COLLECTED).subscribe(t=>{F.info("GameController: Received ORB_COLLECTED, data:",t);const i=this.gameStateService.getState();F.info(`GameController: Current state - orbsCollected: ${i.orbsCollected}, orbsRequired: ${i.orbsRequired}, isGameOver: ${i.isGameOver}`),i.orbsCollected>=i.orbsRequired&&!i.isGameOver&&(F.info("GameController: Orb collection goal met"),this.levelComplete())}),F.info("Subscribing to TIME_UPDATED event"),this.eventBus.on(pt.TIME_UPDATED).subscribe(t=>{F.info("GameController: Received TIME_UPDATED, data:",t),t&&t.timeRemaining<=0&&(F.info("GameController: Time expired"),this.gameOver())}),F.info("Event listeners setup complete")}levelComplete(){F.info("Level complete"),F.info("Stopping ticker for level transition"),this.app.ticker.stop(),F.info("Calling gameStateService.levelComplete()"),this.gameStateService.levelComplete(),F.info("GameController: Level complete UI should be shown"),F.info("Setting up timeout for next level"),setTimeout(()=>{const t=this.gameStateService.getState().level;F.info(`GameController: Initializing next level (${t})`),this.initializeLevel(t),F.info("Restarting ticker"),this.app.ticker.start(),F.info("Level transition complete")},3e3)}checkAndFixTickerIssues(){var l;if(!((l=this.app)!=null&&l.ticker))return;const t=this.app.ticker;Math.abs(t.speed-1)>.01&&(F.warn(`Ticker speed has drifted to ${t.speed.toFixed(4)}, resetting to 1.0`),Wn.recordRestart(t.speed),t.speed=1,Wn.recordRestart(t.speed));const i=16.667,s=t.deltaMS;(s>25||s<10)&&F.warn(`Abnormal deltaMS: ${s.toFixed(2)}ms (expected ~${i.toFixed(2)}ms)`)}createGameLoop(){F.info("Creating game loop function");let t=0,i=0;return F.debug("GameController: Game loop ticker called"),s=>{if(F.debug("GameController: Game loop ticker called"),t++,Wn.trackFrame(s.deltaMS),Math.random()<.05){const f=this.gameStateService.getState();F.info(`TICKER STATUS - speed: ${s.speed.toFixed(4)}, deltaMS: ${s.deltaMS.toFixed(2)}, FPS est: ${(1e3/s.deltaMS).toFixed(1)}, isStarted: ${f.isStarted}, isGameOver: ${f.isGameOver}`)}t%300===0&&(F.info(`Performing periodic ticker health check (tick #${t})`),this.checkAndFixTickerIssues());const l=performance.now();l-i>15e3&&(this.analyzeEntitySpeeds(),i=l);const u=this.gameStateService.getState(),c=s.deltaMS/1e3;try{this.renderSystem.updateBackground(c)}catch(f){F.error("GameController: Error updating background:",f)}if(!(!u.isStarted||u.isGameOver)){this.gameStateService.updateTime(s.deltaMS);try{if(Math.random()<.01){const f=this.entityManager.getAllEntities();F.info(`GameController: Updating ${f.length} entities`);const p=this.entityManager.getAstronaut();p?F.info(`GameController: Astronaut position: (${p.sprite.x}, ${p.sprite.y})`):F.warn("GameController: No astronaut found!")}F.info("GameController: Updating physics..."),this.physicsSystem.update(c,this.entityManager.getAllEntities()),F.info("GameController: Updating spawning..."),this.spawningSystem.update(c,this.gameStateService.getState()),F.info("GameController: Updating rendering..."),this.renderSystem.update(c,this.entityManager.getAllEntities()),F.info("GameController: Updating UI..."),this.uiSystem.update()}catch(f){F.error("GameController: Error in game loop update:",f)}if(this.checkGameConditions(),Math.random()<.01){const g=Math.abs(s.deltaMS-16.667)/16.667*100;g>10&&F.warn(`Significant ticker drift detected: ${g.toFixed(1)}% - current: ${s.deltaMS.toFixed(2)}ms, expected: ${16.667.toFixed(2)}ms`)}}}}checkGameConditions(){const t=this.gameStateService.getState();t.timeRemaining<=0&&!t.isGameOver&&(F.info("GameController: Time has run out, emitting TIME_UPDATED event"),this.eventBus.emit(pt.TIME_UPDATED,{timeRemaining:0,timeRanOut:!0})),t.orbsCollected>=t.orbsRequired&&!t.isGameOver&&(F.info("GameController: All orbs collected, emitting ORB_COLLECTED event"),this.eventBus.emit(pt.ORB_COLLECTED,t.orbsCollected))}dispose(){F.info("Disposing..."),F.info("Removing game loop from ticker"),this.app.ticker.remove(this.gameLoopFunc),F.info("Disposing InputSystem"),this.inputSystem.dispose(),F.info("Disposing AudioSystem"),this.audioSystem.dispose(),F.info("Disposing EntityManager"),this.entityManager.dispose(),F.info("Disposing RenderSystem"),this.renderSystem.dispose(),F.info("Disposing PhysicsSystem"),this.physicsSystem.dispose(),F.info("Disposing SpawningSystem"),this.spawningSystem.dispose(),F.info("Disposing UISystem"),this.uiSystem.dispose(),F.info("Disposed")}}const wt=Ve("InputSystem"),os=class os{constructor(){q(this,"subscriptions",[]);q(this,"initialized",!1);q(this,"enabled",!1);q(this,"inTransition",!1);q(this,"lastTouchCoordinates",null);q(this,"handleJumpAction",()=>{if(wt.debug(`Jump action received, enabled: ${this.enabled}`),!this.enabled){wt.debug("Jump action ignored - input disabled");return}wt.debug("Emitting JUMP_ACTION event"),St.emit(pt.JUMP_ACTION,null)});q(this,"handleTouchAction",()=>{const t=Li.getLastEventData();if(!t){wt.warn("Touch event received without touch data");return}wt.debug(`Touch action at (${t.x}, ${t.y})`),this.lastTouchCoordinates={x:t.x,y:t.y}});q(this,"handleRestartGame",()=>{wt.info("Emitting RESTART_GAME event"),St.emit(pt.RESTART_GAME,null)});q(this,"handleStartGame",()=>{wt.debug("START_GAME event received from InputManager"),this.startOrResetGame()});q(this,"handleGameClick",()=>{wt.debug("Game area clicked/tapped"),this.startOrResetGame()});q(this,"handleDirectTouch",(t,i)=>{wt.debug(`Direct touch at (${t}, ${i})`),this.lastTouchCoordinates={x:t,y:i},!Dt.getState().isStarted||Dt.getState().isGameOver?(wt.info("Direct touch triggering game start"),this.startOrResetGame()):(wt.debug("Direct touch triggering jump in active game"),St.emit(pt.JUMP_ACTION,null))});q(this,"handleKeyDown",t=>{wt.debug(`KeyDown event - ${t.key}, isStarted: ${Dt.getState().isStarted}`),t.key===" "||t.code==="Space"?(wt.info("Spacebar pressed"),this.startOrResetGame()):t.key==="d"||t.key==="D"?(wt.info("Debug mode toggle"),Dt.toggleDebugMode()):(t.key==="r"||t.key==="R")&&(wt.info("Restart game"),St.emit(pt.RESTART_GAME,null))});wt.info("Instance created")}static getInstance(){return os.instance||(os.instance=new os),os.instance}initialize(){if(this.initialized){wt.warn("Already initialized, skipping");return}wt.info("Initializing..."),wt.debug("Registering JUMP event handler"),Li.on(On.JUMP,this.handleJumpAction),wt.debug("Registering START_GAME event handler"),Li.on(On.START_GAME,this.handleStartGame),wt.debug("Registering TOUCH event handler"),Li.on(On.TOUCH,this.handleTouchAction),wt.debug("Adding keydown event listener"),document.addEventListener("keydown",this.handleKeyDown),this.subscriptions.push(Dt.select(t=>t.isGameOver).subscribe(t=>{t&&(wt.info("Game over detected, disabling input"),this.disable())})),this.subscriptions.push(Dt.select(t=>t.isStarted).subscribe(t=>{wt.debug(`isStarted changed to ${t}`),t?(wt.info("Game started, enabling input"),this.enable()):(wt.info("Game stopped, disabling input"),this.disable())})),this.initialized=!0,wt.info("Initialization complete")}dispose(){wt.info("Disposing..."),Li.off(On.JUMP,this.handleJumpAction),Li.off(On.START_GAME,this.handleStartGame),Li.off(On.TOUCH,this.handleTouchAction),document.removeEventListener("keydown",this.handleKeyDown),this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[],this.initialized=!1,wt.info("Disposed")}enable(){Li.enable(),this.enabled=!0,wt.info("Input enabled")}disable(){Li.disable(),this.enabled=!1,wt.info("Input disabled")}startOrResetGame(){if(this.inTransition)return wt.info("Game transition already in progress, ignoring request"),!1;const t=Dt.getState();wt.info(`Current game state - isStarted: ${t.isStarted}, isGameOver: ${t.isGameOver}`);try{return this.inTransition=!0,t.isGameOver?(wt.info("Game was over - emitting RESTART_GAME event"),St.emit(pt.RESTART_GAME,null),setTimeout(()=>{wt.info("Starting game after reset"),St.emit(pt.START_GAME,null),this.inTransition=!1},200),!0):t.isStarted?(this.inTransition=!1,!1):(wt.info("Starting new game"),St.emit(pt.START_GAME,null),this.inTransition=!1,!0)}catch(i){return wt.error(`Error controlling game: ${i}`),this.inTransition=!1,!1}}getLastTouchCoordinates(){return this.lastTouchCoordinates}};q(os,"instance");let Qh=os;const la=Qh.getInstance();class nw{constructor(){q(this,"context",null);q(this,"sounds",{});q(this,"initialized",!1);this.initialize()}initialize(){if(!this.initialized)try{this.context=new AudioContext,this.loadSounds(),this.initialized=!0}catch(t){console.error("Web Audio API not supported:",t)}}async loadSounds(){if(!this.context)return;const t={jump:this.createSimpleTone(800,.1),score:this.createSimpleTone(600,.15),hit:this.createSimpleTone(200,.2),levelUp:this.createSimpleTone(1200,.3)};this.sounds=t}createSimpleTone(t,i){if(!this.context)throw new Error("Audio context not initialized");const s=this.context.sampleRate,l=this.context.createBuffer(1,s*i,s),u=l.getChannelData(0);for(let c=0;c<l.length;c++){u[c]=Math.sin(2*Math.PI*t*c/s);const f=c<l.length*.1?c/(l.length*.1):1-(c-l.length*.1)/(l.length*.9);u[c]*=f}return l}play(t){if(!this.context||!this.sounds[t])return;this.context.state==="suspended"&&this.context.resume();const i=this.context.createBufferSource();i.buffer=this.sounds[t],i.connect(this.context.destination),i.start()}}const Jn=new nw,us=class us{constructor(){q(this,"subscriptions",[]);q(this,"initialized",!1)}static getInstance(){return us.instance||(us.instance=new us),us.instance}initialize(){this.initialized||(Jn.initialize(),this.setupEventListeners(),this.initialized=!0,console.log("AudioSystem initialized"))}dispose(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[],this.initialized=!1,console.log("AudioSystem disposed")}setupEventListeners(){this.subscriptions.push(St.on(pt.JUMP_ACTION).subscribe(()=>{console.log("Playing jump sound"),Jn.play("jump")})),this.subscriptions.push(St.on(pt.OBSTACLE_PASSED).subscribe(()=>{console.log("Playing score sound"),Jn.play("score")})),this.subscriptions.push(St.on(pt.ORB_COLLECTED).subscribe(()=>{console.log("Playing orb collection sound"),Jn.play("score")})),this.subscriptions.push(St.on(pt.COLLISION_DETECTED).subscribe(()=>{console.log("Playing hit sound"),Jn.play("hit")})),this.subscriptions.push(St.on(pt.GAME_OVER).subscribe(()=>{console.log("Playing game over sound"),Jn.play("hit")})),this.subscriptions.push(St.on(pt.LEVEL_COMPLETE).subscribe(()=>{console.log("Playing level complete sound"),Jn.play("levelUp")}))}};q(us,"instance");let Kh=us;const sw=Kh.getInstance(),Rn=Ve("Astronaut");class aw{constructor(t,i,s){q(this,"sprite");q(this,"velocity");q(this,"rotation");q(this,"dead");this.sprite=new da(t),this.sprite.width=50,this.sprite.height=50,this.sprite.x=i,this.sprite.y=s,this.sprite.anchor.set(.5),this.velocity=0,this.rotation=0,this.dead=!1,St.on(pt.JUMP_ACTION).subscribe(()=>{Rn.debug("Astronaut: Received JUMP_ACTION event from EventBus"),this.flap()}),Rn.info("Astronaut: Created and subscribed to JUMP_ACTION events")}update(t=16.667){if(this.dead)return;Math.random()<.01&&Rn.debug(`Astronaut: Position (${this.sprite.x}, ${this.sprite.y}), Velocity: ${this.velocity}`);const i=t/16.667;this.velocity+=GT*i,this.velocity>bh&&(this.velocity=bh),this.sprite.y+=this.velocity*i;const s=this.velocity/bh*Math.PI/6;this.rotation=this.rotation*.9+s*.1,this.sprite.rotation=this.rotation,this.sprite.y-this.sprite.height/2<0&&(this.sprite.y=this.sprite.height/2,this.velocity=0,Rn.info("Astronaut: Hit top boundary")),this.sprite.y+this.sprite.height/2>Te&&(this.sprite.y=Te-this.sprite.height/2,this.velocity=0,Rn.info("Astronaut: Hit bottom boundary - dying"),this.die())}getHitbox(){const t=new Le,i=.7,s=this.sprite.width*i,l=this.sprite.height*i;return t.minX=this.sprite.x-s/2,t.maxX=this.sprite.x+s/2,t.minY=this.sprite.y-l/2,t.maxY=this.sprite.y+l/2,t}flap(){if(this.dead){Rn.debug("Astronaut: Flap attempted but astronaut is dead");return}Rn.debug(`Astronaut: Flap! Setting velocity from ${this.velocity} to ${Ny}`),this.velocity=Ny}die(){Rn.info("Astronaut: Dying..."),this.dead=!0,this.sprite.tint=16733525}reset(t,i){this.sprite.x=t,this.sprite.y=i,this.velocity=0,this.rotation=0,this.dead=!1,this.sprite.tint=16777215}}function rw(a,t){return!(a.maxX<t.minX||a.minX>t.maxX||a.maxY<t.minY||a.minY>t.maxY)}function lw(a,t,i,s){const l=Math.max(s.minX,Math.min(a,s.maxX)),u=Math.max(s.minY,Math.min(t,s.maxY)),c=a-l,f=t-u;return c*c+f*f<i*i}const Tr=Ve("Obstacle"),Ui=class Ui{constructor(t,i){q(this,"passed");q(this,"speed");q(this,"initialSpeed");q(this,"x");q(this,"y");q(this,"id");q(this,"createdAt");q(this,"speedHistory");q(this,"lastUpdateTime");this.x=t,this.y=0,this.passed=!1,this.speed=i,this.initialSpeed=i,this.createdAt=performance.now(),this.id=`obstacle_${Ui.nextLogId++}`,this.speedHistory=[{time:this.createdAt,speed:i}],this.lastUpdateTime=this.createdAt,Tr.debug(`Created ${this.id} with initial speed: ${this.speed}`)}static enableSpeedTracking(t){Ui.trackSpeedEnabled=t,Tr.info(`Speed tracking ${t?"enabled":"disabled"}`)}static setSpeedLoggingInterval(t){Ui.speedLoggingInterval=t,Tr.info(`Speed logging interval set to ${t}ms`)}trackSpeed(){if(!Ui.trackSpeedEnabled)return;const t=performance.now(),i=t-this.lastUpdateTime,s=t-this.createdAt;if(this.speed!==this.speedHistory[this.speedHistory.length-1].speed&&(this.speedHistory.push({time:t,speed:this.speed}),Tr.debug(`${this.id} speed changed to ${this.speed} (was ${this.speedHistory[this.speedHistory.length-2].speed})`)),i>=Ui.speedLoggingInterval){const l=this.speed/this.initialSpeed;Tr.info(`${this.id} | Age: ${Math.round(s)}ms | Current speed: ${this.speed.toFixed(4)} | Initial speed: ${this.initialSpeed.toFixed(4)} | Ratio: ${l.toFixed(4)} | Position: (${Math.round(this.x)}, ${Math.round(this.y)})`),this.lastUpdateTime=t}}getSpeedStats(){return{id:this.id,initialSpeed:this.initialSpeed,currentSpeed:this.speed,ratio:this.speed/this.initialSpeed,history:this.speedHistory}}isPassed(t){return this.passed?!1:this.x<t?(this.passed=!0,!0):!1}};q(Ui,"trackSpeedEnabled",!0),q(Ui,"speedLoggingInterval",2e3),q(Ui,"nextLogId",1);let ga=Ui;const Vy=[{color:16739179,name:"red",hasRings:!1},{color:5164484,name:"cyan",hasRings:!0},{color:16770669,name:"yellow",hasRings:!1},{color:7077780,name:"green",hasRings:!1},{color:11240447,name:"purple",hasRings:!0},{color:16745430,name:"pink",hasRings:!1}];class Tb extends ga{constructor(i,s,l,u){super(i,u);q(this,"graphics");q(this,"glowGraphics");q(this,"radius");q(this,"rotationSpeed");q(this,"ringRotationSpeed");q(this,"glowPulseSpeed");q(this,"glowSize");q(this,"planetType");q(this,"ringAngle");q(this,"timeOffset");q(this,"hasRings");this.y=s,this.radius=l,this.timeOffset=Math.random()*Math.PI*2,this.planetType=Vy[Math.floor(Math.random()*Vy.length)],this.hasRings=Math.random()<.4?!0:this.planetType.hasRings,this.graphics=new Zt,this.glowGraphics=new Zt,this.glowSize=this.radius*.3,this.drawPlanet(),this.graphics.x=i,this.graphics.y=s,this.glowGraphics.x=i,this.glowGraphics.y=s,this.rotationSpeed=(Math.random()*.02-.01)*u,this.ringRotationSpeed=(Math.random()*.005-.0025)*u,this.glowPulseSpeed=.03+Math.random()*.02,this.ringAngle=Math.random()*Math.PI*2}drawPlanet(){const i=this.graphics;i.clear();const s=this.planetType.color;this.drawGlow(s),this.hasRings&&this.drawRings(s),i.fill({color:s}),i.circle(0,0,this.radius),new Et().translate(-this.radius*.5,-this.radius*.5);const u=this.adjustColor(s,1.2),c=new vi({type:"linear",start:{x:0,y:0},end:{x:this.radius*2,y:this.radius*2},colorStops:[{offset:0,color:u},{offset:1,color:s}],textureSpace:"local"});i.fill({fill:c,alpha:.6}),i.circle(0,0,this.radius),i.setStrokeStyle({width:this.radius*.05,color:this.adjustColor(s,.7)}),i.stroke(),i.circle(0,0,this.radius),this.drawSurfaceDetails(s)}adjustColor(i,s){const l=(i>>16&255)*s,u=(i>>8&255)*s,c=(i&255)*s,f=Math.min(255,Math.max(0,Math.floor(l))),p=Math.min(255,Math.max(0,Math.floor(u))),g=Math.min(255,Math.max(0,Math.floor(c)));return f<<16|p<<8|g}drawGlow(i){const s=this.glowGraphics;s.clear();const l=this.radius+this.glowSize,u=this.adjustColor(i,1.2),c=new vi({type:"radial",center:{x:0,y:0},innerRadius:0,outerRadius:l,colorStops:[{offset:0,color:u},{offset:.5,color:i},{offset:1,color:i}],textureSpace:"local"});s.fill({fill:c,alpha:.15}),s.circle(0,0,l)}drawRings(i){const s=this.graphics,l=Math.sin(this.ringAngle)*.6,u=this.radius*1.8,c=this.radius*1.1,f=new Et;f.translate(0,0),f.scale(1,l),s.fill({color:this.adjustColor(i,1.1),alpha:.6}),s.circle(0,0,u),s.circle(0,0,c);const p=Math.floor(Math.random()*3)+2;for(let g=0;g<p;g++){const m=c+(u-c)*(g+.5)/p,y=.9+Math.random()*.3;s.setStrokeStyle({width:(u-c)*.1,color:this.adjustColor(i,y),alpha:.7}),s.ellipse(0,0,m,m*l)}s.setStrokeStyle({width:0})}drawSurfaceDetails(i){const s=this.graphics,l=this.adjustColor(i,.8),u=this.adjustColor(i,1.2),c=Math.floor(Math.random()*5)+3;for(let f=0;f<c;f++){const p=Math.random()*Math.PI*2,g=Math.random()*this.radius*.7,m=Math.cos(p)*g,y=Math.sin(p)*g,_=this.radius*(Math.random()*.15+.05);s.fill({color:l}),s.circle(m,y,_);const v=p+Math.PI/4,E=m+Math.cos(v)*(_*.5),M=y+Math.sin(v)*(_*.5),T=_*.4;s.fill({color:u,alpha:.5}),s.circle(E,M,T)}if(this.radius>30){const f=Math.floor(Math.random()*3)+2;for(let p=0;p<f;p++){const g=new Zt,m=(Math.random()*2-1)*this.radius*.5,y=(Math.random()*2-1)*this.radius*.6,_=this.radius*(.4+Math.random()*.3),v=this.radius*(.1+Math.random()*.1),E=Math.random()*Math.PI*2,M=.9+Math.random()*.2;g.fill({color:this.adjustColor(i,M),alpha:.5}),g.ellipse(m,y,_,v),g.rotation=E,s.addChild(g)}}}update(i=1/60){this.trackSpeed();const s=this.speed*i*60;this.x-=s,this.graphics.x=this.x,this.glowGraphics.x=this.x;const l=performance.now()*.001;this.graphics.rotation+=this.rotationSpeed,this.hasRings&&(this.ringAngle+=this.ringRotationSpeed);const u=.2*Math.sin(l*this.glowPulseSpeed+this.timeOffset)+1;this.glowGraphics.scale.set(u),this.glowGraphics.alpha=.6+.1*Math.sin(l*this.glowPulseSpeed*1.5+this.timeOffset),this.hasRings&&Math.abs(this.ringRotationSpeed)>.001&&this.drawPlanet()}isOffScreen(){return this.x+this.radius*2<0}checkCollision(i){if(i.dead)return!1;const s=i.getHitbox();return lw(this.x,this.y,this.radius*.9,s)}}const ow=Ve("Orb");class uw extends ga{constructor(i,s,l,u){super(i,u);q(this,"graphics");q(this,"glowGraphics");q(this,"radius");q(this,"rotationSpeed");q(this,"glowPulseSpeed");q(this,"glowSize");q(this,"timeOffset");q(this,"collected");this.y=s,this.radius=l,this.timeOffset=Math.random()*Math.PI*2,this.collected=!1,this.graphics=new Zt,this.glowGraphics=new Zt,this.glowSize=this.radius*.7,this.drawOrb(),this.graphics.x=i,this.graphics.y=s,this.glowGraphics.x=i,this.glowGraphics.y=s,this.rotationSpeed=Math.random()*.05-.025,this.glowPulseSpeed=.05+Math.random()*.03}drawOrb(){const i=this.graphics;i.clear(),this.drawGlow(),i.beginFill(43775),i.drawCircle(0,0,this.radius),i.fill();const l=new vi({type:"linear",start:{x:0,y:0},end:{x:this.radius*2,y:this.radius*2},colorStops:[{offset:0,color:56831},{offset:1,color:26282}],textureSpace:"local"});i.fill({fill:l,alpha:.6}),i.drawCircle(0,0,this.radius),i.beginFill(16777215,.5),i.drawCircle(-this.radius*.3,-this.radius*.3,this.radius*.2),i.fill()}drawGlow(){const i=this.glowGraphics;i.clear();const s=this.radius+this.glowSize,l=new vi({type:"radial",center:{x:0,y:0},innerRadius:0,outerRadius:s,colorStops:[{offset:0,color:6741503},{offset:.5,color:43775},{offset:1,color:26282}],textureSpace:"local"});i.fill({fill:l,alpha:.4}),i.drawCircle(0,0,s)}update(i=1/60){if(this.collected)return;this.trackSpeed();const s=this.speed*i*60;this.x-=s,this.graphics.x=this.x,this.glowGraphics.x=this.x;const l=performance.now()*.001;this.graphics.rotation+=this.rotationSpeed;const u=.3*Math.sin(l*this.glowPulseSpeed+this.timeOffset)+1.2;this.glowGraphics.scale.set(u),this.glowGraphics.alpha=.3+.2*Math.sin(l*this.glowPulseSpeed*1.5+this.timeOffset)}collect(){return this.collected?0:(this.collected=!0,ow.info(`Orb collected at ${this.x}, ${this.y}`),St.emit(pt.ORB_COLLECTED,{x:this.x,y:this.y,radius:this.radius,graphics:this.graphics,glowGraphics:this.glowGraphics,speed:this.speed}),this.graphics.visible=!1,this.glowGraphics.visible=!1,50)}isOffScreen(){return this.x+this.radius*2<0}checkCollision(i){if(i.dead||this.collected)return!1;const s=i.getHitbox(),l=new Le;return l.minX=this.x-this.radius,l.maxX=this.x+this.radius,l.minY=this.y-this.radius,l.maxY=this.y+this.radius,rw(s,l)}}class cw{constructor(t,i,s,l,u=0){q(this,"graphics");q(this,"blinkSpeed");q(this,"blinkDirection");q(this,"alpha");q(this,"speed");q(this,"size");q(this,"layer");this.size=s,this.layer=u;const c=[.05,.15,.4];this.speed=c[u]||.05,this.graphics=new Zt;let f;u===0?f=6710954:u===1?f=11184810:f=16777215,this.graphics.circle(0,0,s),this.graphics.fill({color:f,alpha:l}),this.graphics.x=t,this.graphics.y=i,this.blinkSpeed=.005*Math.random(),this.blinkDirection=Math.random()>.5?1:-1,this.alpha=l}update(){this.alpha+=this.blinkSpeed*this.blinkDirection,this.alpha>1?(this.alpha=1,this.blinkDirection=-1):this.alpha<.2&&(this.alpha=.2,this.blinkDirection=1),this.graphics.alpha=this.alpha}}const cs=class cs{constructor(){q(this,"app",null);q(this,"astronaut",null);q(this,"obstacles",[]);q(this,"orbs",[]);q(this,"stars",[]);q(this,"initialized",!1);q(this,"logger",Ve("EntityManager"))}static getInstance(){return cs.instance||(cs.instance=new cs),cs.instance}initialize(t){this.initialized||(t&&(this.app=t),this.initialized=!0,this.logger.info("EntityManager initialized"))}clearAll(){var t;this.app&&(this.logger.info("EntityManager: Clearing all entities"),this.astronaut?(this.logger.info("Removing astronaut from stage"),this.astronaut.sprite&&this.app.stage.children.includes(this.astronaut.sprite)&&this.app.stage.removeChild(this.astronaut.sprite),(t=this.astronaut.sprite)==null||t.destroy(),this.astronaut=null,this.logger.info("Astronaut reference cleared")):this.logger.info("EntityManager: No astronaut to clear"),this.clearObstacles(),this.clearOrbs(),this.clearStars(),this.logger.info("EntityManager: All entities cleared"))}createAstronaut(){if(!this.app)return this.logger.error("App not initialized in EntityManager"),null;if(this.astronaut)return this.logger.warn("Astronaut already exists, returning existing one"),this.astronaut;const t=Vh.getTexture("astronaut");return t?(this.astronaut=new aw(t,ro.startX,ro.startY),this.app.stage.addChild(this.astronaut.sprite),this.logger.info(`EntityManager: Astronaut created at position (${ro.startX}, ${ro.startY})`),St.emit(pt.ENTITY_CREATED,{type:"astronaut",entity:this.astronaut}),this.astronaut):(this.logger.error("EntityManager: Failed to get astronaut texture"),null)}createPlanet(t,i,s,l){if(!this.app)throw new Error("App not initialized in EntityManager");this.logger.info(`EntityManager: Creating planet at (${t}, ${i}) with radius ${s}`);const u=new Tb(t,i,s,l);return this.app.stage.addChild(u.glowGraphics),this.app.stage.addChild(u.graphics),this.obstacles.push(u),this.logger.info(`EntityManager: Total obstacles now: ${this.obstacles.length}`),St.emit(pt.ENTITY_CREATED,{type:"planet",entity:u}),u}createOrb(t,i,s,l){if(!this.app)throw new Error("App not initialized in EntityManager");this.logger.info(`EntityManager: Creating orb at (${t}, ${i}) with radius ${s}`);const u=new uw(t,i,s,l);return this.app.stage.addChild(u.glowGraphics),this.app.stage.addChild(u.graphics),this.orbs.push(u),this.logger.info(`EntityManager: Total orbs now: ${this.orbs.length}`),St.emit(pt.ENTITY_CREATED,{type:"orb",entity:u}),u}createStar(t,i,s,l,u){if(!this.app)throw new Error("App not initialized in EntityManager");const c=new cw(t,i,s,l,u);return this.app.stage.addChild(c.graphics),this.stars.push(c),c}createBackground(){if(this.app){this.logger.debug("EntityManager: Creating background starfield2"),this.clearStars();for(let t=0;t<80;t++)this.createStar(Math.random()*sn,Math.random()*Te,Math.random()*1+.5,Math.random()*.5+.2,0);for(let t=0;t<40;t++)this.createStar(Math.random()*sn,Math.random()*Te,Math.random()*1.5+1,Math.random()*.6+.3,1);for(let t=0;t<20;t++)this.createStar(Math.random()*sn,Math.random()*Te,Math.random()*2+1.5,Math.random()*.7+.4,2)}}removeObstacle(t){if(!this.app||!this.app.stage)return;const i=this.obstacles.indexOf(t);if(i!==-1){if("graphics"in t&&t.graphics instanceof Zt){const s=t.graphics;if(this.app.stage.children.includes(s)&&this.app.stage.removeChild(s),s.destroy(),"glowGraphics"in t&&t.glowGraphics instanceof Zt){const l=t.glowGraphics;this.app.stage.children.includes(l)&&this.app.stage.removeChild(l),l.destroy()}}this.obstacles.splice(i,1),St.emit(pt.ENTITY_DESTROYED,{type:"obstacle",entity:t})}}removeOrb(t){if(!this.app||!this.app.stage)return;const i=this.orbs.indexOf(t);i!==-1&&(t.graphics instanceof Zt&&(this.app.stage.children.includes(t.graphics)&&this.app.stage.removeChild(t.graphics),t.graphics.destroy()),t.glowGraphics instanceof Zt&&(this.app.stage.children.includes(t.glowGraphics)&&this.app.stage.removeChild(t.glowGraphics),t.glowGraphics.destroy()),this.orbs.splice(i,1),St.emit(pt.ENTITY_DESTROYED,{type:"orb",entity:t}))}clearObstacles(){!this.app||!this.app.stage||(this.logger.debug(`Clearing ${this.obstacles.length} obstacles`),this.obstacles.forEach(t=>{var i,s;if("graphics"in t&&t.graphics instanceof Zt){const l=t.graphics;if((i=this.app)!=null&&i.stage.children.includes(l)&&this.app.stage.removeChild(l),l.destroy(),"glowGraphics"in t&&t.glowGraphics instanceof Zt){const u=t.glowGraphics;(s=this.app)!=null&&s.stage.children.includes(u)&&this.app.stage.removeChild(u),u.destroy()}}}),this.obstacles=[],this.logger.debug("Obstacles cleared"))}clearOrbs(){!this.app||!this.app.stage||(this.logger.debug(`Clearing ${this.orbs.length} orbs`),this.orbs.forEach(t=>{var i,s;t.graphics instanceof Zt&&((i=this.app)!=null&&i.stage.children.includes(t.graphics)&&this.app.stage.removeChild(t.graphics),t.graphics.destroy()),t.glowGraphics instanceof Zt&&((s=this.app)!=null&&s.stage.children.includes(t.glowGraphics)&&this.app.stage.removeChild(t.glowGraphics),t.glowGraphics.destroy())}),this.orbs=[],this.logger.debug("Orbs cleared"))}clearStars(){!this.app||!this.app.stage||(this.logger.debug(`Clearing ${this.stars.length} stars`),this.stars.forEach(t=>{var i;t.graphics instanceof Zt&&((i=this.app)!=null&&i.stage.children.includes(t.graphics)&&this.app.stage.removeChild(t.graphics),t.graphics.destroy())}),this.stars=[],this.logger.debug("Stars cleared"))}getAstronaut(){return this.astronaut}getObstacles(){return this.obstacles}getOrbs(){return this.orbs}getStars(){return this.stars}getAllEntities(){Math.random()<.01&&this.logger.debug(`EntityManager.getAllEntities: Astronaut: ${this.astronaut?"present":"null"}, Obstacles: ${this.obstacles.length}, Orbs: ${this.orbs.length}, Stars: ${this.stars.length}`);const t=[...this.obstacles,...this.orbs,...this.stars];return this.astronaut&&t.unshift(this.astronaut),t}dispose(){this.clearAll(),this.initialized=!1,this.logger.info("EntityManager disposed")}};q(cs,"instance");let Wh=cs;const $t=Wh.getInstance(),hs=class hs{constructor(){q(this,"app",null);q(this,"debugGraphics",null);q(this,"initialized",!1)}static getInstance(){return hs.instance||(hs.instance=new hs),hs.instance}initialize(t){this.initialized||(this.app=t,this.debugGraphics=new Zt,this.app.stage.addChild(this.debugGraphics),this.initialized=!0,console.log("RenderSystem initialized"))}update(t,i){!this.initialized||!this.app||this.renderDebugInfo()}createBackground(){this.initialized&&$t.createBackground()}updateBackground(t){if(!this.initialized)return;const i=$t.getStars();if(i.length>0){const s=Math.min(t,.05);for(const l of i)l.graphics.x-=l.speed*s*60,l.graphics.x+l.size<0&&(l.graphics.x=sn+l.size,l.graphics.y=Math.random()*Te),l.update()}}renderDebugInfo(){if(!this.debugGraphics||!this.app)return;if(!Dt.getState().debugMode){this.debugGraphics.clear();return}this.debugGraphics.clear();const i=$t.getAstronaut();if(i){const u=i.sprite.getBounds();this.debugGraphics.lineStyle(1,16776960,.5),this.debugGraphics.drawRect(u.minX,u.minY,u.maxX-u.minX,u.maxY-u.minY);const c=i.getHitbox();this.debugGraphics.lineStyle(2,65280),this.debugGraphics.drawRect(c.minX,c.minY,c.maxX-c.minX,c.maxY-c.minY)}const s=$t.getObstacles();for(const u of s)if("radius"in u){this.debugGraphics.lineStyle(2,16711680);const c=new Le;c.minX=u.x-u.radius,c.maxX=u.x+u.radius,c.minY=u.y-u.radius,c.maxY=u.y+u.radius,this.debugGraphics.drawRect(c.minX,c.minY,c.maxX-c.minX,c.maxY-c.minY)}const l=$t.getOrbs();for(const u of l){this.debugGraphics.lineStyle(2,255);const c=new Le;c.minX=u.x-u.radius,c.maxX=u.x+u.radius,c.minY=u.y-u.radius,c.maxY=u.y+u.radius,this.debugGraphics.drawRect(c.minX,c.minY,c.maxX-c.minX,c.maxY-c.minY)}}add(t){this.app&&this.app.stage.addChild(t)}remove(t){this.app&&this.app.stage.removeChild(t)}clearStage(){if(!(!this.app||!this.app.stage)){for(;this.app.stage.children.length>0;)this.app.stage.removeChildAt(0);this.debugGraphics&&this.app.stage.addChild(this.debugGraphics)}}dispose(){this.app&&this.debugGraphics&&(this.app.stage.removeChild(this.debugGraphics),this.debugGraphics=null),this.initialized=!1,console.log("RenderSystem disposed")}};q(hs,"instance");let Jh=hs;const hw=Jh.getInstance(),Ge=Ve("PhysicsSystem"),fs=class fs{constructor(){q(this,"initialized",!1);q(this,"scrollSpeed",0);q(this,"lastSpeedDiagnosticTime",0);q(this,"speedDiagnosticInterval",5e3)}static getInstance(){return fs.instance||(fs.instance=new fs),fs.instance}initialize(){this.initialized||(this.initialized=!0,Ge.info("PhysicsSystem initialized"))}setScrollSpeed(t){this.scrollSpeed=t,Ge.info(`Scroll speed set to ${t}`)}setSpeedDiagnostics(t,i=5e3){this.speedDiagnosticInterval=t?i:0,Ge.info(`Speed diagnostics ${t?"enabled":"disabled"}, interval: ${i}ms`),ga.enableSpeedTracking(t),ga.setSpeedLoggingInterval(Math.floor(i/2))}logObstacleSpeedDiagnostics(){const t=$t.getObstacles();if(t.length===0){Ge.info("No obstacles to analyze");return}const i=$t.getOrbs(),s=t.length+i.length,l=t.map(m=>m.getSpeedStats().ratio),u=l.reduce((m,y)=>m+y,0)/l.length,c=Math.min(...l),f=Math.max(...l);let p={avgRatio:0,minRatio:0,maxRatio:0};if(i.length>0){const m=i.map(y=>y.getSpeedStats().ratio);p={count:i.length,avgRatio:m.reduce((y,_)=>y+_,0)/m.length,minRatio:Math.min(...m),maxRatio:Math.max(...m)}}Ge.info("===== SPEED DIAGNOSTICS ====="),Ge.info(`Total entities: ${s} (${t.length} obstacles, ${i.length} orbs)`),Ge.info(`Obstacles - Avg ratio: ${u.toFixed(4)}, Min: ${c.toFixed(4)}, Max: ${f.toFixed(4)}`),i.length>0&&Ge.info(`Orbs - Avg ratio: ${p.avgRatio.toFixed(4)}, Min: ${p.minRatio.toFixed(4)}, Max: ${p.maxRatio.toFixed(4)}`);const g=.1;t.forEach(m=>{const y=m.getSpeedStats();Math.abs(y.ratio-1)>g&&Ge.warn(`${y.id} has significant speed deviation: ${y.ratio.toFixed(4)} (current: ${y.currentSpeed.toFixed(4)}, initial: ${y.initialSpeed.toFixed(4)})`)}),Ge.info("=============================")}update(t,i){if(!this.initialized)return;const s=$t.getAstronaut();if(!Dt.getState().isStarted||Dt.getState().isGameOver)return;if(Math.random()<.01&&(Ge.debug(`Update called with deltaTime: ${t}`),s&&Ge.debug(`Astronaut position: x=${s.sprite.x}, y=${s.sprite.y}, vel=${s.velocity}`),Ge.debug(`Active entities - obstacles: ${$t.getObstacles().length}, orbs: ${$t.getOrbs().length}`)),this.speedDiagnosticInterval>0){const f=performance.now();f-this.lastSpeedDiagnosticTime>this.speedDiagnosticInterval&&(this.logObstacleSpeedDiagnostics(),this.lastSpeedDiagnosticTime=f)}s&&(s.update(t*1e3),s.dead&&(Ge.info("PhysicsSystem: Astronaut died from physics (hit boundary)"),St.emit(pt.COLLISION_DETECTED,null)));const l=$t.getObstacles();for(let f=l.length-1;f>=0;f--){const p=l[f];p.update(t),s&&p.isPassed(s.sprite.x)&&(St.emit(pt.OBSTACLE_PASSED,p),Dt.incrementScore(10)),s&&!s.dead&&p.checkCollision(s)&&(s.die(),St.emit(pt.COLLISION_DETECTED,{astronaut:s,obstacle:p})),p.isOffScreen()&&$t.removeObstacle(p)}const u=$t.getOrbs();for(let f=u.length-1;f>=0;f--){const p=u[f];p.update(t),s&&!s.dead&&!p.collected&&p.checkCollision(s)&&(p.collect(),Dt.collectOrb(),Dt.incrementScore(50)),(p.isOffScreen()||p.collected)&&$t.removeOrb(p)}$t.getStars().forEach(f=>f.update())}checkCollisions(t){if(!t||t.dead)return;const i=$t.getObstacles();for(const l of i)if(l.checkCollision(t)){t.die(),St.emit(pt.COLLISION_DETECTED,{astronaut:t,obstacle:l});return}const s=$t.getOrbs();for(const l of s)!l.collected&&l.checkCollision(t)&&(l.collect(),Dt.collectOrb(),Dt.incrementScore(50))}dispose(){this.initialized=!1,Ge.info("PhysicsSystem disposed")}};q(fs,"instance");let tf=fs;const fw=tf.getInstance(),si=Ve("SpawningSystem"),ds=class ds{constructor(){q(this,"initialized",!1);q(this,"lastObstacleTime",0);q(this,"lastOrbTime",0);q(this,"levelConfig",{speeds:{planet:1,secondaryPlanet:1.1,orb:.9},spawnInterval:2500});q(this,"hasSpawnedFirstObstacle",!1)}static getInstance(){return ds.instance||(ds.instance=new ds),ds.instance}initialize(){this.initialized||(this.resetSpawning(),this.initialized=!0,si.info("SpawningSystem initialized"))}resetSpawning(){this.lastObstacleTime=0,this.lastOrbTime=0,this.hasSpawnedFirstObstacle=!1}setLevelConfig(t){this.levelConfig={...this.levelConfig,...t},si.info("SpawningSystem: Level config updated",this.levelConfig)}update(t,i){if(!this.initialized){si.info("SpawningSystem: Not initialized, skipping update");return}if(!i.isStarted){Math.random()<.01&&si.debug("SpawningSystem: Game not started, skipping update");return}if(i.isGameOver){Math.random()<.01&&si.debug("SpawningSystem: Game over, skipping update");return}const s=i.time;Math.random()<.05&&(si.debug(`SpawningSystem: time=${s.toFixed(2)}, lastObstacleTime=${this.lastObstacleTime.toFixed(2)}, interval=${this.levelConfig.spawnInterval}, planetSpeed=${this.levelConfig.speeds.planet}`),si.debug(`SpawningSystem: hasSpawnedFirstObstacle=${this.hasSpawnedFirstObstacle}, obstacles=${$t.getObstacles().length}, orbs=${$t.getOrbs().length}`)),!this.hasSpawnedFirstObstacle&&s>1500?(si.info("SpawningSystem: Spawning first obstacle"),this.spawnObstacle(),this.lastObstacleTime=s,this.hasSpawnedFirstObstacle=!0):this.hasSpawnedFirstObstacle&&s-this.lastObstacleTime>this.levelConfig.spawnInterval&&(si.info(`SpawningSystem: Spawning obstacle at time=${s.toFixed(2)}`),this.spawnObstacle(),this.lastObstacleTime=s,Math.random()<BT&&(si.info("SpawningSystem: Planning to spawn orb with delay"),setTimeout(()=>{i.isStarted&&!i.isGameOver?(si.info("SpawningSystem: Spawning orb after delay"),this.spawnOrb()):si.info("SpawningSystem: Cancelled orb spawn - game state changed")},this.levelConfig.spawnInterval*.4)))}spawnObstacle(){const t=this.getCurrentLevelIndex()+1,i=20,s=40+t*5,l=i+Math.random()*(s-i),u=Te*.4,c=Te*.2+Math.random()*(Te*.6),f=Math.random()>.5;let p;f?p=Math.random()*(c-l*2)+l:p=c+u+Math.random()*(Te-(c+u)-l*2)+l;const g=$t.createPlanet(sn+l,p,l,this.levelConfig.speeds.planet);if(this.ensureNoOverlap(g),Math.random()<.3&&t>1){const m=f?c+u+Math.random()*(Te-(c+u)-l*2)+l:Math.random()*(c-l*2)+l,y=l*(.7+Math.random()*.6),_=$t.createPlanet(sn+l+100+Math.random()*150,m,y,this.levelConfig.speeds.secondaryPlanet);this.ensureNoOverlap(_)}}spawnOrb(){const t=12+Math.random()*6,i=Te*.2,s=Te*.8,l=i+Math.random()*(s-i);$t.createOrb(sn+t,l,t,this.levelConfig.speeds.orb)}ensureNoOverlap(t){let s=0,l=!1;do{l=!1;const u=$t.getObstacles();for(const c of u)if(c!==t&&c instanceof Tb&&!c.isOffScreen()){const f=c;if(this.planetsOverlap(t,f)){l=!0,t.y<f.y?t.y=Math.max(t.radius,f.y-f.radius-t.radius-20):t.y=Math.min(Te-t.radius,f.y+f.radius+t.radius+20),s>2&&(t.x+=t.radius*1.2),t.graphics.y=t.y,t.glowGraphics.y=t.y,t.graphics.x=t.x,t.glowGraphics.x=t.x;break}}s++}while(l&&s<5)}planetsOverlap(t,i){const s=i.x-t.x,l=i.y-t.y,u=Math.sqrt(s*s+l*l),c=t.radius+i.radius+10;return u<c}getCurrentLevelIndex(){return 0}dispose(){this.initialized=!1,si.info("SpawningSystem disposed")}};q(ds,"instance");let ef=ds;const dw=ef.getInstance();class pw{constructor(){q(this,"container");q(this,"scoreText");q(this,"levelText");q(this,"orbsText");q(this,"timeText");q(this,"progressBar");q(this,"progressFill");q(this,"style");try{console.log("Scoreboard: Constructor started"),this.container=new bi,this.container.x=10,this.container.y=10,console.log("Scoreboard: Container created",this.container),this.style=new bs({fontFamily:"Arial",fontSize:16,fill:"#0ff",align:"left",stroke:{color:"#000",width:4}}),console.log("Scoreboard: Style created"),this.scoreText=new ua("Score: 0",this.style),this.scoreText.y=0,this.container.addChild(this.scoreText),console.log("Scoreboard: Score text added"),this.levelText=new ua("Level: 1",this.style),this.levelText.y=20,this.container.addChild(this.levelText),console.log("Scoreboard: Level text added"),this.orbsText=new ua("Orbs: 0/0",this.style),this.orbsText.y=40,this.container.addChild(this.orbsText),console.log("Scoreboard: Orbs text added"),this.timeText=new ua("Time: 0:0",this.style),this.timeText.y=60,this.container.addChild(this.timeText),console.log("Scoreboard: Time text added"),this.progressBar=new Zt,this.progressBar.beginFill(3355443),this.progressBar.drawRect(0,85,200,10),this.progressBar.endFill(),this.container.addChild(this.progressBar),console.log("Scoreboard: Progress bar added"),this.progressFill=new Zt,this.progressFill.beginFill(6728447),this.progressFill.drawRect(0,85,0,10),this.progressFill.endFill(),this.container.addChild(this.progressFill),console.log("Scoreboard: Progress fill added"),console.log("Scoreboard: UI elements created successfully")}catch(t){console.error("Scoreboard: Error during construction",t)}}update(t,i,s,l,u){this.scoreText.text=`Score: ${t}`,this.levelText.text=`Level: ${i}`,this.orbsText.text=`Orbs: ${s}/${l}`;const c=Math.floor(u/6e4),f=Math.floor(u%6e4/1e3),p=Math.floor(u%1e3/100);let g=`Time: ${c}:${f.toString().padStart(2,"0")}.${p}`;this.timeText.text=g;const m=Math.min(100,s/l*100);this.progressFill.clear();let y=6728447;if(m>=75?y=65416:m>=50?y=8978176:m>=25&&(y=16763904),m>=100&&(y=65280),this.progressFill.beginFill(y),this.progressFill.drawRect(0,85,m*2,10),this.progressFill.endFill(),u<=5e3){this.timeText.style.fill="#FF0000";const _=1+.1*Math.sin(Date.now()*.01);this.timeText.scale.set(_)}else u<=1e4?(this.timeText.style.fill="#FF0000",this.timeText.scale.set(1)):u<=3e4?(this.timeText.style.fill="#FFAA00",this.timeText.scale.set(1)):(this.timeText.style.fill="#00FFFF",this.timeText.scale.set(1))}getContainer(){return console.log("Scoreboard: getContainer called",this.container),this.container?this.container:(console.error("Scoreboard: Container is undefined!"),new bi)}}const ps=class ps{constructor(){q(this,"app");q(this,"scoreboard");q(this,"initialized",!1);q(this,"orbEffects");q(this,"gameState");q(this,"subscriptions",[]);q(this,"orbCollectionSubscription",null);q(this,"logger",ss.getLogger("UISystem"));this.gameState=Dt.getState(),this.subscribeToStateChanges()}subscribeToStateChanges(){this.subscriptions.push(Dt.select(t=>t.score).subscribe(()=>{this.updateScoreboard()})),this.subscriptions.push(Dt.select(t=>t.orbsCollected).subscribe(()=>{this.updateScoreboard()})),this.subscriptions.push(Dt.select(t=>t.timeRemaining).subscribe(()=>{this.updateScoreboard()})),this.orbCollectionSubscription=St.on(pt.ORB_COLLECTED).subscribe(t=>{this.logger.debug("orbCollectionSubscription",t),t&&typeof t=="object"&&"x"in t&&"y"in t&&this.createOrbCollectionEffect(t.x,t.y,t.radius,t.speed)})}static getInstance(){return ps.instance||(ps.instance=new ps),ps.instance}initialize(t){console.log("UISystem: Initialization started",t);try{const i="stage"in t?t.stage:t;console.log("UISystem: Using stage",i),"stage"in t&&(this.app=t,console.log("UISystem: Stored app reference"));const s=new bi;if(i.addChild(s),console.log("UISystem: Created UI container"),console.log("UISystem: Creating scoreboard"),this.scoreboard=new pw,this.scoreboard){const l=this.scoreboard.getContainer();console.log("UISystem: Adding scoreboard container to stage",l),i.addChild(l)}else console.warn("UISystem: Scoreboard could not be created");console.log("UISystem: Creating orb effects container"),this.orbEffects=new bi,i.addChild(this.orbEffects),this.initialized=!0,console.log("UISystem: Initialized successfully")}catch(i){throw console.error("UISystem: Error during initialization",i),i}}update(){this.initialized}updateScoreboard(){if(!this.initialized||!this.scoreboard)return;const t=Dt.getState();this.scoreboard.update(t.score,t.level,t.orbsCollected,t.orbsRequired,t.timeRemaining)}createOrbCollectionEffect(t,i,s,l){if(!this.initialized||!this.orbEffects){this.logger.warn("Cannot create orb collection effect - not initialized");return}this.logger.debug(`Creating orb collection effect at ${t},${i}`);const u=Dt.getState().level,c=Math.max(0,u-1),p=[1,1.25,1.5,1.8,2][c]||1,y=2.5*Math.max(1,Math.sqrt(l||p)),_=new bi;if(_.x=t,_.y=i,this.orbEffects.addChild(_),s){const B=new Zt,N=new Zt;B.beginFill(43775),B.drawCircle(0,0,s),B.endFill(),B.beginFill(16777215,.5),B.drawCircle(-s*.3,-s*.3,s*.3),B.endFill();const I=s*1.5;N.beginFill(43775,.3),N.drawCircle(0,0,I),N.endFill(),_.addChild(N),_.addChild(B),B.userData={isOrb:!0},N.userData={isGlow:!0}}const v=12;for(let B=0;B<v;B++){const N=new Zt,I=[65535,52479,16777215,8969727],V=I[Math.floor(Math.random()*I.length)];N.beginFill(V),N.drawCircle(0,0,3+Math.random()*3),N.endFill();const $=B/v*Math.PI*2,at=30+Math.random()*50,nt=.1/Math.sqrt(p);N.userData={vx:Math.cos($)*at*nt,vy:Math.sin($)*at*nt,alpha:1,rotation:Math.random()*.2-.1},_.addChild(N)}const E=new ua("+50",{fontFamily:"Arial",fontSize:20,fill:16777215,align:"center",stroke:{color:26282,width:3}});E.anchor.set(.5),E.x=0,E.y=-20,_.addChild(E);const M=_;let T=0;const C=Mr.shared,z=()=>{if(!M||!M.parent){C.remove(z);return}try{T+=C.deltaMS/1e3;const B=Math.min(T/y,1);for(let N=0;N<M.children.length;N++){const I=M.children[N];if(!I)continue;const V=I.userData;if(V){if(V.isOrb){const $=1+B*1;I.scale.set($),I.alpha=Math.max(0,1-B*1.2);continue}if(V.isGlow){const $=1+B*1.5;I.scale.set($),I.alpha=Math.max(0,.3-B*.3);continue}if(I instanceof ua){const $=1.5/Math.sqrt(p);I.y-=$,I.alpha=Math.max(0,1-B*1.2);continue}if(V.vx!==void 0&&V.vy!==void 0){I.x+=V.vx,I.y+=V.vy,V.vx*=.95,V.vy*=.95;const $=.02/Math.sqrt(p);V.alpha-=$,I.alpha=Math.max(0,V.alpha),V.rotation&&(I.rotation+=V.rotation)}}}T>=y&&(C.remove(z),this.orbEffects&&this.orbEffects.children.includes(M)&&(this.orbEffects.removeChild(M),M.destroy({children:!0})))}catch(B){this.logger.error(`Animation error: ${B}`),C.remove(z),this.orbEffects&&M&&this.orbEffects.children.includes(M)&&this.orbEffects.removeChild(M)}};C.add(z)}dispose(){this.initialized&&(this.orbCollectionSubscription&&this.orbCollectionSubscription.unsubscribe(),this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[],this.initialized=!1,console.log("UISystem: Disposed"))}};q(ps,"instance");let nf=ps;const gw=nf.getInstance(),yt=Ve("GameDisplay"),mw=({gameStarted:a,onGameClick:t,onGameStateChange:i})=>{const s=re.useRef(null),l=re.useRef(null),u=re.useRef(null),c=re.useRef(!0),[f,p]=re.useState(!1),[g,m]=re.useState(null),[y,_]=re.useState(!1);re.useEffect(()=>{(()=>{const z="ontouchstart"in window||navigator.maxTouchPoints>0;yt.debug(`Touch support detected: ${z}, max touch points: ${navigator.maxTouchPoints}`),_(z)})()},[]),re.useEffect(()=>{yt.debug("Setting up game state subscription");const C=Dt.getState$().subscribe(z=>{c.current&&i(z)});return()=>{yt.debug("Cleaning up game state subscription"),C.unsubscribe()}},[i]);const v=re.useCallback(()=>{yt.debug("Cleaning up PIXI and game controller"),u.current&&(yt.debug("Disposing game controller"),u.current.dispose(),u.current=null),yt.debug("Disabling input manager"),Li.disable(),l.current&&(yt.debug("Destroying PIXI application"),l.current.destroy(!0,{children:!0,texture:!0}),l.current=null)},[]),E=re.useCallback(()=>{if(yt.debug("Initializing game controller after assets loaded"),!c.current||!l.current){yt.debug("Cannot initialize - component unmounted or app destroyed");return}p(!0),m(null);try{const C=l.current;if(!C||!C.ticker){yt.error("PIXI application or ticker not properly initialized"),m("Game engine failed to initialize properly");return}yt.debug("Creating GameController instance"),St.enableDebug(),yt.debug("PIXI app state before controller creation:",{hasApp:!!C,hasTicker:!!(C&&C.ticker)});const z=new iw(C,St,Dt,la,sw,$t,hw,fw,dw,gw);yt.debug("Calling GameController.initialize()"),z.initialize(),yt.debug("Storing GameController reference"),u.current=z,yt.debug("Calling GameController.setupGame()"),z.setupGame(),yt.debug("Game controller initialized successfully")}catch(C){yt.error("Failed to initialize game controller:",C),c.current&&m(`Failed to initialize game controller: ${C instanceof Error?C.message:String(C)}`)}},[]);re.useEffect(()=>{const C=async()=>{if(!s.current||l.current){yt.debug("Setup skipped - container ref missing or app already exists");return}try{yt.debug("Setting up Pixi application..."),v(),yt.debug("Creating new PIXI Application");const z=new P0;yt.debug("Initializing PIXI Application"),await z.init({background:"#1A1A1A",antialias:!0,resolution:window.devicePixelRatio||1}),yt.debug("PIXI Application created successfully"),l.current=z,s.current.firstChild&&(yt.debug("Clearing container"),s.current.innerHTML=""),yt.debug("Adding canvas to DOM"),s.current.appendChild(z.canvas);const B=()=>{if(!s.current||!z.renderer){yt.debug("Resize handler skipped - missing container or renderer");return}yt.debug("Handling resize");const N=s.current,I=N.clientWidth,V=N.clientHeight;z.renderer.resize(I,V);const $=Math.min(I/sn,V/Te);z.stage.scale.set($),z.stage.position.x=(I-sn*$)/2,z.stage.position.y=(V-Te*$)/2,z.canvas&&(z.canvas.style.width="100%",z.canvas.style.height="100%"),yt.debug(`Resize complete - width: ${I}, height: ${V}, scale: ${$}`)};return yt.debug("Performing initial resize"),B(),yt.debug("Adding window resize listener"),window.addEventListener("resize",B),yt.debug("Starting asset loading process"),Vh.isLoaded()?(yt.debug("Assets already loaded, initializing game controller"),E()):Vh.loadAssetsAsync(),()=>{yt.debug("Removing window resize listener"),window.removeEventListener("resize",B)}}catch(z){yt.error("Error initializing Pixi application:",z),c.current&&m(`Error initializing game: ${z instanceof Error?z.message:String(z)}`),v()}};return yt.debug("Calling setupApp"),C(),()=>{yt.debug("Component unmounting, cleaning up"),c.current=!1,v()}},[v,E]),re.useEffect(()=>{yt.debug("Setting up ASSETS_LOADED event listener");const C=St.on(pt.ASSETS_LOADED).subscribe(z=>{yt.debug("ASSETS_LOADED event received",{assetNames:z}),c.current&&E()});return()=>{yt.debug("Cleaning up ASSETS_LOADED event listener"),C.unsubscribe()}},[E]),re.useEffect(()=>{if(!u.current){yt.debug("gameStarted effect skipped - no gameController");return}yt.debug(`gameStarted prop changed to ${a}`),a&&la.startOrResetGame()},[a]);const M=re.useCallback(C=>{yt.debug(`Game area clicked at (${C.clientX}, ${C.clientY})`),la.handleDirectTouch(C.clientX,C.clientY),t&&t()},[t]),T=re.useCallback(C=>{C.preventDefault();const z=C.touches[0];z&&(yt.debug(`Touch detected at (${z.clientX}, ${z.clientY})`),la.handleDirectTouch(z.clientX,z.clientY),t&&t())},[t]);return Mt.jsxs("div",{className:"game-display-wrapper",children:[Mt.jsx("div",{ref:s,className:"game-display",style:{cursor:a?"pointer":"default",width:"100%",height:"100%",position:"relative"},onClick:M,onTouchStart:T}),g&&Mt.jsxs("div",{className:"error-overlay",children:[Mt.jsx("h3",{children:"Error"}),Mt.jsx("p",{children:g}),Mt.jsx("p",{className:"error-tip",children:"Check browser console for more details (F12)"})]}),!f&&!g&&Mt.jsxs("div",{className:"loading-overlay",children:[Mt.jsx("h3",{children:"Loading game assets..."}),Mt.jsx("div",{className:"loading-spinner"})]}),f&&(!a||Dt.getState().isGameOver)&&Mt.jsxs("div",{className:"start-overlay",onClick:()=>la.startOrResetGame(),onTouchStart:C=>{C.preventDefault(),la.startOrResetGame()},children:[Mt.jsx("h2",{children:Dt.getState().isGameOver?"Game Over!":"Flappy Spaceman"}),Dt.getState().isGameOver&&Mt.jsxs(Mt.Fragment,{children:[Mt.jsxs("p",{children:["Score: ",Dt.getState().score]}),Mt.jsxs("p",{children:["Orbs: ",Dt.getState().orbsCollected,"/",Dt.getState().orbsRequired]}),Mt.jsxs("p",{children:["Level: ",Dt.getState().level]}),Dt.getState().timeRemaining<=0&&Mt.jsx("p",{className:"game-over-reason",children:"Time ran out!"})]}),Mt.jsx("p",{children:Dt.getState().isGameOver?"Press SPACE to try again":"Press SPACE to start"}),Mt.jsx("p",{children:"Use SPACE, Up Arrow, or W to fly!"}),y&&Mt.jsx("p",{className:"mobile-instruction",children:"Tap anywhere to jump!"}),!Dt.getState().isGameOver&&Mt.jsx("p",{className:"mission-goal",children:"Collect all orbs before time runs out!"})]}),f&&a&&!Dt.getState().isGameOver&&y&&Mt.jsx("div",{className:"touch-overlay",onClick:M,onTouchStart:T,children:Mt.jsx("div",{className:"touch-hint-container",children:Mt.jsx("div",{className:"touch-hint",children:"Tap to fly!"})})})]})},yw=({isVisible:a,level:t})=>{const[i,s]=re.useState(0);return re.useEffect(()=>{if(a){s(1);const l=setTimeout(()=>{s(0)},2e3);return()=>clearTimeout(l)}else s(0)},[a]),!a&&i===0?null:Mt.jsx("div",{className:"level-message",style:{opacity:i,transition:"opacity 0.5s ease-in-out"},children:Mt.jsxs("div",{className:"level-message-content",children:[Mt.jsxs("h2",{children:["Level ",t," Complete!"]}),Mt.jsx("p",{children:"Warping to next level..."})]})})};function bw(){const[a,t]=re.useState(!1),[i,s]=re.useState({score:0,level:1,warps:0,time:0,orbsCollected:0,orbsRequired:5,timeLimit:6e4,timeRemaining:6e4,isStarted:!1,isGameOver:!1,isLevelComplete:!1,debugMode:!1}),l=u=>{s(u),u.isGameOver?t(!1):u.isStarted&&!a&&t(!0)};return Mt.jsxs("div",{className:"App",children:[Mt.jsx("header",{className:"App-header",children:Mt.jsx("h1",{children:"Flappy Spaceman"})}),Mt.jsx("main",{className:"App-main",children:Mt.jsx("div",{className:"game-container",children:Mt.jsx(mw,{gameStarted:a,onGameStateChange:l})})}),i.isLevelComplete&&Mt.jsx(yw,{level:i.level,isVisible:i.isLevelComplete})]})}Sb({level:xb.WARN,showTimestamp:!0,showLogLevel:!0});Ab.info("Application starting...",{env:"production",version:"unknown"});e_.createRoot(document.getElementById("root")).render(Mt.jsx(re.StrictMode,{children:Mt.jsx(bw,{})}));export{U0 as $,L0 as A,qe as B,bi as C,ne as D,ct as E,Le as F,_o as G,$_ as H,Fm as I,da as J,bS as K,ES as L,Et as M,ce as N,ue as O,Re as P,zS as Q,Rh as R,KS as S,Mr as T,wh as U,Im as V,th as W,jm as X,K_ as Y,he as Z,l0 as _,Mi as a,Gt as a0,Nt as a1,US as a2,n1 as a3,S1 as a4,T1 as a5,R1 as a6,z1 as a7,D1 as a8,bs as a9,RA as aa,K0 as ab,ay as ac,ny as ad,m_ as ae,Gy as af,LA as ag,Zt as ah,ie as ai,b_ as aj,Hh as ak,yo as al,kh as am,zy as an,tb as ao,Gr as b,ho as c,cf as d,we as e,sy as f,$S as g,D0 as h,y0 as i,Hi as j,z0 as k,Ry as l,_1 as m,A1 as n,E1 as o,O1 as p,F0 as q,z_ as r,hf as s,Ct as t,E0 as u,y_ as v,Wt as w,B1 as x,en as y,s0 as z};
