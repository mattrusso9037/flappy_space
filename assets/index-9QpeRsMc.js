const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-pmEWw9lH.js","assets/webworkerAll-BJhvmUF1.js","assets/colorToUniform-C2GHuDhf.js","assets/WebGPURenderer-BUsgyEnj.js","assets/SharedSystems-BLyLZqlZ.js","assets/WebGLRenderer-MMVZWgfq.js"])))=>i.map(i=>d[i]);
var yx=Object.defineProperty;var bx=(a,t,n)=>t in a?yx(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var Z=(a,t,n)=>bx(a,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Dh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var pc={exports:{}},Wa={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function vx(){if(Vg)return Wa;Vg=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var f in o)f!=="key"&&(u[f]=o[f])}else u=o;return o=u.ref,{$$typeof:a,type:s,key:c,ref:o!==void 0?o:null,props:u}}return Wa.Fragment=t,Wa.jsx=n,Wa.jsxs=n,Wa}var $g;function xx(){return $g||($g=1,pc.exports=vx()),pc.exports}var St=xx(),gc={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function _x(){if(Zg)return gt;Zg=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function _(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,E={};function w(A,G,L){this.props=A,this.context=G,this.refs=E,this.updater=L||v}w.prototype.isReactComponent={},w.prototype.setState=function(A,G){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,G,"setState")},w.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function z(){}z.prototype=w.prototype;function B(A,G,L){this.props=A,this.context=G,this.refs=E,this.updater=L||v}var U=B.prototype=new z;U.constructor=B,T(U,w.prototype),U.isPureReactComponent=!0;var j=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function $(A,G,L,Y,K,W){return L=W.ref,{$$typeof:a,type:A,key:G,ref:L!==void 0?L:null,props:W}}function rt(A,G){return $(A.type,G,void 0,void 0,void 0,A.props)}function nt(A){return typeof A=="object"&&A!==null&&A.$$typeof===a}function et(A){var G={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(L){return G[L]})}var J=/\/+/g;function ft(A,G){return typeof A=="object"&&A!==null&&A.key!=null?et(""+A.key):G.toString(36)}function bt(){}function Yt(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(bt,bt):(A.status="pending",A.then(function(G){A.status==="pending"&&(A.status="fulfilled",A.value=G)},function(G){A.status==="pending"&&(A.status="rejected",A.reason=G)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function Xt(A,G,L,Y,K){var W=typeof A;(W==="undefined"||W==="boolean")&&(A=null);var tt=!1;if(A===null)tt=!0;else switch(W){case"bigint":case"string":case"number":tt=!0;break;case"object":switch(A.$$typeof){case a:case t:tt=!0;break;case m:return tt=A._init,Xt(tt(A._payload),G,L,Y,K)}}if(tt)return K=K(A),tt=Y===""?"."+ft(A,0):Y,j(K)?(L="",tt!=null&&(L=tt.replace(J,"$&/")+"/"),Xt(K,G,L,"",function(Dt){return Dt})):K!=null&&(nt(K)&&(K=rt(K,L+(K.key==null||A&&A.key===K.key?"":(""+K.key).replace(J,"$&/")+"/")+tt)),G.push(K)),1;tt=0;var dt=Y===""?".":Y+":";if(j(A))for(var st=0;st<A.length;st++)Y=A[st],W=dt+ft(Y,st),tt+=Xt(Y,G,L,W,K);else if(st=_(A),typeof st=="function")for(A=st.call(A),st=0;!(Y=A.next()).done;)Y=Y.value,W=dt+ft(Y,st++),tt+=Xt(Y,G,L,W,K);else if(W==="object"){if(typeof A.then=="function")return Xt(Yt(A),G,L,Y,K);throw G=String(A),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return tt}function x(A,G,L){if(A==null)return A;var Y=[],K=0;return Xt(A,Y,"","",function(W){return G.call(L,W,K++)}),Y}function M(A){if(A._status===-1){var G=A._result;G=G(),G.then(function(L){(A._status===0||A._status===-1)&&(A._status=1,A._result=L)},function(L){(A._status===0||A._status===-1)&&(A._status=2,A._result=L)}),A._status===-1&&(A._status=0,A._result=G)}if(A._status===1)return A._result.default;throw A._result}var R=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function N(){}return gt.Children={map:x,forEach:function(A,G,L){x(A,function(){G.apply(this,arguments)},L)},count:function(A){var G=0;return x(A,function(){G++}),G},toArray:function(A){return x(A,function(G){return G})||[]},only:function(A){if(!nt(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},gt.Component=w,gt.Fragment=n,gt.Profiler=o,gt.PureComponent=B,gt.StrictMode=s,gt.Suspense=p,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,gt.__COMPILER_RUNTIME={__proto__:null,c:function(A){return q.H.useMemoCache(A)}},gt.cache=function(A){return function(){return A.apply(null,arguments)}},gt.cloneElement=function(A,G,L){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var Y=T({},A.props),K=A.key,W=void 0;if(G!=null)for(tt in G.ref!==void 0&&(W=void 0),G.key!==void 0&&(K=""+G.key),G)!V.call(G,tt)||tt==="key"||tt==="__self"||tt==="__source"||tt==="ref"&&G.ref===void 0||(Y[tt]=G[tt]);var tt=arguments.length-2;if(tt===1)Y.children=L;else if(1<tt){for(var dt=Array(tt),st=0;st<tt;st++)dt[st]=arguments[st+2];Y.children=dt}return $(A.type,K,void 0,void 0,W,Y)},gt.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:u,_context:A},A},gt.createElement=function(A,G,L){var Y,K={},W=null;if(G!=null)for(Y in G.key!==void 0&&(W=""+G.key),G)V.call(G,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(K[Y]=G[Y]);var tt=arguments.length-2;if(tt===1)K.children=L;else if(1<tt){for(var dt=Array(tt),st=0;st<tt;st++)dt[st]=arguments[st+2];K.children=dt}if(A&&A.defaultProps)for(Y in tt=A.defaultProps,tt)K[Y]===void 0&&(K[Y]=tt[Y]);return $(A,W,void 0,void 0,null,K)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(A){return{$$typeof:f,render:A}},gt.isValidElement=nt,gt.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:M}},gt.memo=function(A,G){return{$$typeof:g,type:A,compare:G===void 0?null:G}},gt.startTransition=function(A){var G=q.T,L={};q.T=L;try{var Y=A(),K=q.S;K!==null&&K(L,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(N,R)}catch(W){R(W)}finally{q.T=G}},gt.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},gt.use=function(A){return q.H.use(A)},gt.useActionState=function(A,G,L){return q.H.useActionState(A,G,L)},gt.useCallback=function(A,G){return q.H.useCallback(A,G)},gt.useContext=function(A){return q.H.useContext(A)},gt.useDebugValue=function(){},gt.useDeferredValue=function(A,G){return q.H.useDeferredValue(A,G)},gt.useEffect=function(A,G,L){var Y=q.H;if(typeof L=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(A,G)},gt.useId=function(){return q.H.useId()},gt.useImperativeHandle=function(A,G,L){return q.H.useImperativeHandle(A,G,L)},gt.useInsertionEffect=function(A,G){return q.H.useInsertionEffect(A,G)},gt.useLayoutEffect=function(A,G){return q.H.useLayoutEffect(A,G)},gt.useMemo=function(A,G){return q.H.useMemo(A,G)},gt.useOptimistic=function(A,G){return q.H.useOptimistic(A,G)},gt.useReducer=function(A,G,L){return q.H.useReducer(A,G,L)},gt.useRef=function(A){return q.H.useRef(A)},gt.useState=function(A){return q.H.useState(A)},gt.useSyncExternalStore=function(A,G,L){return q.H.useSyncExternalStore(A,G,L)},gt.useTransition=function(){return q.H.useTransition()},gt.version="19.1.0",gt}var Qg;function Bh(){return Qg||(Qg=1,gc.exports=_x()),gc.exports}var be=Bh(),mc={exports:{}},Ja={},yc={exports:{}},bc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function Sx(){return Kg||(Kg=1,function(a){function t(x,M){var R=x.length;x.push(M);t:for(;0<R;){var N=R-1>>>1,A=x[N];if(0<o(A,M))x[N]=M,x[R]=A,R=N;else break t}}function n(x){return x.length===0?null:x[0]}function s(x){if(x.length===0)return null;var M=x[0],R=x.pop();if(R!==M){x[0]=R;t:for(var N=0,A=x.length,G=A>>>1;N<G;){var L=2*(N+1)-1,Y=x[L],K=L+1,W=x[K];if(0>o(Y,R))K<A&&0>o(W,Y)?(x[N]=W,x[K]=R,N=K):(x[N]=Y,x[L]=R,N=L);else if(K<A&&0>o(W,R))x[N]=W,x[K]=R,N=K;else break t}}return M}function o(x,M){var R=x.sortIndex-M.sortIndex;return R!==0?R:x.id-M.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var c=Date,f=c.now();a.unstable_now=function(){return c.now()-f}}var p=[],g=[],m=1,y=null,_=3,v=!1,T=!1,E=!1,w=!1,z=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function j(x){for(var M=n(g);M!==null;){if(M.callback===null)s(g);else if(M.startTime<=x)s(g),M.sortIndex=M.expirationTime,t(p,M);else break;M=n(g)}}function q(x){if(E=!1,j(x),!T)if(n(p)!==null)T=!0,V||(V=!0,ft());else{var M=n(g);M!==null&&Xt(q,M.startTime-x)}}var V=!1,$=-1,rt=5,nt=-1;function et(){return w?!0:!(a.unstable_now()-nt<rt)}function J(){if(w=!1,V){var x=a.unstable_now();nt=x;var M=!0;try{t:{T=!1,E&&(E=!1,B($),$=-1),v=!0;var R=_;try{e:{for(j(x),y=n(p);y!==null&&!(y.expirationTime>x&&et());){var N=y.callback;if(typeof N=="function"){y.callback=null,_=y.priorityLevel;var A=N(y.expirationTime<=x);if(x=a.unstable_now(),typeof A=="function"){y.callback=A,j(x),M=!0;break e}y===n(p)&&s(p),j(x)}else s(p);y=n(p)}if(y!==null)M=!0;else{var G=n(g);G!==null&&Xt(q,G.startTime-x),M=!1}}break t}finally{y=null,_=R,v=!1}M=void 0}}finally{M?ft():V=!1}}}var ft;if(typeof U=="function")ft=function(){U(J)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Yt=bt.port2;bt.port1.onmessage=J,ft=function(){Yt.postMessage(null)}}else ft=function(){z(J,0)};function Xt(x,M){$=z(function(){x(a.unstable_now())},M)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(x){x.callback=null},a.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<x?Math.floor(1e3/x):5},a.unstable_getCurrentPriorityLevel=function(){return _},a.unstable_next=function(x){switch(_){case 1:case 2:case 3:var M=3;break;default:M=_}var R=_;_=M;try{return x()}finally{_=R}},a.unstable_requestPaint=function(){w=!0},a.unstable_runWithPriority=function(x,M){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var R=_;_=x;try{return M()}finally{_=R}},a.unstable_scheduleCallback=function(x,M,R){var N=a.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?N+R:N):R=N,x){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=R+A,x={id:m++,callback:M,priorityLevel:x,startTime:R,expirationTime:A,sortIndex:-1},R>N?(x.sortIndex=R,t(g,x),n(p)===null&&x===n(g)&&(E?(B($),$=-1):E=!0,Xt(q,R-N))):(x.sortIndex=A,t(p,x),T||v||(T=!0,V||(V=!0,ft()))),x},a.unstable_shouldYield=et,a.unstable_wrapCallback=function(x){var M=_;return function(){var R=_;_=M;try{return x.apply(this,arguments)}finally{_=R}}}}(bc)),bc}var Wg;function Ax(){return Wg||(Wg=1,yc.exports=Sx()),yc.exports}var vc={exports:{}},Ae={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function Tx(){if(Jg)return Ae;Jg=1;var a=Bh();function t(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:p,containerInfo:g,implementation:m}}var c=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ae.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ae.createPortal=function(p,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return u(p,g,null,m)},Ae.flushSync=function(p){var g=c.T,m=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=g,s.p=m,s.d.f()}},Ae.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Ae.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ae.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var m=g.as,y=f(m,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,v=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:v}):m==="script"&&s.d.X(p,{crossOrigin:y,integrity:_,fetchPriority:v,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ae.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=f(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Ae.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,y=f(m,g.crossOrigin);s.d.L(p,m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ae.preloadModule=function(p,g){if(typeof p=="string")if(g){var m=f(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Ae.requestFormReset=function(p){s.d.r(p)},Ae.unstable_batchedUpdates=function(p,g){return p(g)},Ae.useFormState=function(p,g,m){return c.H.useFormState(p,g,m)},Ae.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ae.version="19.1.0",Ae}var tm;function wx(){if(tm)return vc.exports;tm=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),vc.exports=Tx(),vc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function Mx(){if(em)return Ja;em=1;var a=Ax(),t=Bh(),n=wx();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,r=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(r=i.return),e=i.return;while(e)}return i.tag===3?r:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function f(e){if(u(e)!==e)throw Error(s(188))}function p(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var r=e,l=i;;){var h=r.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){r=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===r)return f(h),e;if(d===l)return f(h),i;d=d.sibling}throw Error(s(188))}if(r.return!==l.return)r=h,l=d;else{for(var b=!1,S=h.child;S;){if(S===r){b=!0,r=h,l=d;break}if(S===l){b=!0,l=h,r=d;break}S=S.sibling}if(!b){for(S=d.child;S;){if(S===r){b=!0,r=d,l=h;break}if(S===l){b=!0,l=d,r=h;break}S=S.sibling}if(!b)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),U=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ft(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var bt=Symbol.for("react.client.reference");function Yt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===bt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case w:return"Profiler";case E:return"StrictMode";case q:return"Suspense";case V:return"SuspenseList";case nt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case U:return(e.displayName||"Context")+".Provider";case B:return(e._context.displayName||"Context")+".Consumer";case j:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return i=e.displayName||null,i!==null?i:Yt(e.type)||"Memo";case rt:i=e._payload,e=e._init;try{return Yt(e(i))}catch{}}return null}var Xt=Array.isArray,x=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},N=[],A=-1;function G(e){return{current:e}}function L(e){0>A||(e.current=N[A],N[A]=null,A--)}function Y(e,i){A++,N[A]=e.current,e.current=i}var K=G(null),W=G(null),tt=G(null),dt=G(null);function st(e,i){switch(Y(tt,i),Y(W,e),Y(K,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?_g(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=_g(i),e=Sg(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(K),Y(K,e)}function Dt(){L(K),L(W),L(tt)}function Mt(e){e.memoizedState!==null&&Y(dt,e);var i=K.current,r=Sg(i,e.type);i!==r&&(Y(W,e),Y(K,r))}function Ee(e){W.current===e&&(L(K),L(W)),dt.current===e&&(L(dt),Va._currentValue=R)}var pe=Object.prototype.hasOwnProperty,Re=a.unstable_scheduleCallback,Ge=a.unstable_cancelCallback,mt=a.unstable_shouldYield,Ct=a.unstable_requestPaint,Ne=a.unstable_now,to=a.unstable_getCurrentPriorityLevel,eo=a.unstable_ImmediatePriority,ef=a.unstable_UserBlockingPriority,dr=a.unstable_NormalPriority,W0=a.unstable_LowPriority,nf=a.unstable_IdlePriority,J0=a.log,tb=a.unstable_setDisableYieldValue,ea=null,He=null;function Fi(e){if(typeof J0=="function"&&tb(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(ea,e)}catch{}}var Pe=Math.clz32?Math.clz32:nb,eb=Math.log,ib=Math.LN2;function nb(e){return e>>>=0,e===0?32:31-(eb(e)/ib|0)|0}var pr=256,gr=4194304;function bn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function mr(e,i,r){var l=e.pendingLanes;if(l===0)return 0;var h=0,d=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?h=bn(l):(b&=S,b!==0?h=bn(b):r||(r=S&~e,r!==0&&(h=bn(r))))):(S=l&~d,S!==0?h=bn(S):b!==0?h=bn(b):r||(r=l&~e,r!==0&&(h=bn(r)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,r=i&-i,d>=r||d===32&&(r&4194048)!==0)?i:h}function ia(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function sb(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sf(){var e=pr;return pr<<=1,(pr&4194048)===0&&(pr=256),e}function af(){var e=gr;return gr<<=1,(gr&62914560)===0&&(gr=4194304),e}function io(e){for(var i=[],r=0;31>r;r++)i.push(e);return i}function na(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ab(e,i,r,l,h,d){var b=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var S=e.entanglements,C=e.expirationTimes,H=e.hiddenUpdates;for(r=b&~r;0<r;){var I=31-Pe(r),Q=1<<I;S[I]=0,C[I]=-1;var P=H[I];if(P!==null)for(H[I]=null,I=0;I<P.length;I++){var X=P[I];X!==null&&(X.lane&=-536870913)}r&=~Q}l!==0&&rf(e,l,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(b&~i))}function rf(e,i,r){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Pe(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|r&4194090}function lf(e,i){var r=e.entangledLanes|=i;for(e=e.entanglements;r;){var l=31-Pe(r),h=1<<l;h&i|e[l]&i&&(e[l]|=i),r&=~h}}function no(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function so(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function of(){var e=M.p;return e!==0?e:(e=window.event,e===void 0?32:Yg(e.type))}function rb(e,i){var r=M.p;try{return M.p=e,i()}finally{M.p=r}}var qi=Math.random().toString(36).slice(2),_e="__reactFiber$"+qi,Oe="__reactProps$"+qi,is="__reactContainer$"+qi,ao="__reactEvents$"+qi,lb="__reactListeners$"+qi,ob="__reactHandles$"+qi,uf="__reactResources$"+qi,sa="__reactMarker$"+qi;function ro(e){delete e[_e],delete e[Oe],delete e[ao],delete e[lb],delete e[ob]}function ns(e){var i=e[_e];if(i)return i;for(var r=e.parentNode;r;){if(i=r[is]||r[_e]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(e=Mg(e);e!==null;){if(r=e[_e])return r;e=Mg(e)}return i}e=r,r=e.parentNode}return null}function ss(e){if(e=e[_e]||e[is]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function aa(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function as(e){var i=e[uf];return i||(i=e[uf]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ue(e){e[sa]=!0}var cf=new Set,hf={};function vn(e,i){rs(e,i),rs(e+"Capture",i)}function rs(e,i){for(hf[e]=i,e=0;e<i.length;e++)cf.add(i[e])}var ub=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ff={},df={};function cb(e){return pe.call(df,e)?!0:pe.call(ff,e)?!1:ub.test(e)?df[e]=!0:(ff[e]=!0,!1)}function yr(e,i,r){if(cb(i))if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+r)}}function br(e,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+r)}}function Mi(e,i,r,l){if(l===null)e.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(i,r,""+l)}}var lo,pf;function ls(e){if(lo===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);lo=i&&i[1]||"",pf=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lo+e+pf}var oo=!1;function uo(e,i){if(!e||oo)return"";oo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(X){var P=X}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(X){P=X}e.call(Q.prototype)}}else{try{throw Error()}catch(X){P=X}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(X){if(X&&P&&typeof X.stack=="string")return[X.stack,P.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),b=d[0],S=d[1];if(b&&S){var C=b.split(`
`),H=S.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===H.length)for(l=C.length-1,h=H.length-1;1<=l&&0<=h&&C[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==H[h]){var I=`
`+C[l].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=l&&0<=h);break}}}finally{oo=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?ls(r):""}function hb(e){switch(e.tag){case 26:case 27:case 5:return ls(e.type);case 16:return ls("Lazy");case 13:return ls("Suspense");case 19:return ls("SuspenseList");case 0:case 15:return uo(e.type,!1);case 11:return uo(e.type.render,!1);case 1:return uo(e.type,!0);case 31:return ls("Activity");default:return""}}function gf(e){try{var i="";do i+=hb(e),e=e.return;while(e);return i}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Ke(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mf(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function fb(e){var i=mf(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),l=""+e[i];if(!e.hasOwnProperty(i)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,d=r.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,d.call(this,b)}}),Object.defineProperty(e,i,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function vr(e){e._valueTracker||(e._valueTracker=fb(e))}function yf(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var r=i.getValue(),l="";return e&&(l=mf(e)?e.checked?"true":"false":e.value),e=l,e!==r?(i.setValue(e),!0):!1}function xr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var db=/[\n"\\]/g;function We(e){return e.replace(db,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function co(e,i,r,l,h,d,b,S){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),i!=null?b==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Ke(i)):e.value!==""+Ke(i)&&(e.value=""+Ke(i)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),i!=null?ho(e,b,Ke(i)):r!=null?ho(e,b,Ke(r)):l!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Ke(S):e.removeAttribute("name")}function bf(e,i,r,l,h,d,b,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||r!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;r=r!=null?""+Ke(r):"",i=i!=null?""+Ke(i):r,S||i===e.value||(e.value=i),e.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function ho(e,i,r){i==="number"&&xr(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function os(e,i,r,l){if(e=e.options,i){i={};for(var h=0;h<r.length;h++)i["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=i.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&l&&(e[r].defaultSelected=!0)}else{for(r=""+Ke(r),i=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function vf(e,i,r){if(i!=null&&(i=""+Ke(i),i!==e.value&&(e.value=i),r==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=r!=null?""+Ke(r):""}function xf(e,i,r,l){if(i==null){if(l!=null){if(r!=null)throw Error(s(92));if(Xt(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),i=r}r=Ke(i),e.defaultValue=r,l=e.textContent,l===r&&l!==""&&l!==null&&(e.value=l)}function us(e,i){if(i){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=i;return}}e.textContent=i}var pb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _f(e,i,r){var l=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,r):typeof r!="number"||r===0||pb.has(i)?i==="float"?e.cssFloat=r:e[i]=(""+r).trim():e[i]=r+"px"}function Sf(e,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&r[h]!==l&&_f(e,h,l)}else for(var d in i)i.hasOwnProperty(d)&&_f(e,d,i[d])}function fo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _r(e){return mb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var po=null;function go(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cs=null,hs=null;function Af(e){var i=ss(e);if(i&&(e=i.stateNode)){var r=e[Oe]||null;t:switch(e=i.stateNode,i.type){case"input":if(co(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+We(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var l=r[i];if(l!==e&&l.form===e.form){var h=l[Oe]||null;if(!h)throw Error(s(90));co(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<r.length;i++)l=r[i],l.form===e.form&&yf(l)}break t;case"textarea":vf(e,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&os(e,!!r.multiple,i,!1)}}}var mo=!1;function Tf(e,i,r){if(mo)return e(i,r);mo=!0;try{var l=e(i);return l}finally{if(mo=!1,(cs!==null||hs!==null)&&(rl(),cs&&(i=cs,e=hs,hs=cs=null,Af(i),e)))for(i=0;i<e.length;i++)Af(e[i])}}function ra(e,i){var r=e.stateNode;if(r===null)return null;var l=r[Oe]||null;if(l===null)return null;r=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yo=!1;if(Ci)try{var la={};Object.defineProperty(la,"passive",{get:function(){yo=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{yo=!1}var Vi=null,bo=null,Sr=null;function wf(){if(Sr)return Sr;var e,i=bo,r=i.length,l,h="value"in Vi?Vi.value:Vi.textContent,d=h.length;for(e=0;e<r&&i[e]===h[e];e++);var b=r-e;for(l=1;l<=b&&i[r-l]===h[d-l];l++);return Sr=h.slice(e,1<l?1-l:void 0)}function Ar(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Tr(){return!0}function Mf(){return!1}function ze(e){function i(r,l,h,d,b){this._reactName=r,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(r=e[S],this[S]=r?r(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Tr:Mf,this.isPropagationStopped=Mf,this}return m(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),i}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wr=ze(xn),oa=m({},xn,{view:0,detail:0}),yb=ze(oa),vo,xo,ua,Mr=m({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:So,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ua&&(ua&&e.type==="mousemove"?(vo=e.screenX-ua.screenX,xo=e.screenY-ua.screenY):xo=vo=0,ua=e),vo)},movementY:function(e){return"movementY"in e?e.movementY:xo}}),Cf=ze(Mr),bb=m({},Mr,{dataTransfer:0}),vb=ze(bb),xb=m({},oa,{relatedTarget:0}),_o=ze(xb),_b=m({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sb=ze(_b),Ab=m({},xn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tb=ze(Ab),wb=m({},xn,{data:0}),Ef=ze(wb),Mb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rb(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Eb[e])?!!i[e]:!1}function So(){return Rb}var Gb=m({},oa,{key:function(e){if(e.key){var i=Mb[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ar(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:So,charCode:function(e){return e.type==="keypress"?Ar(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ar(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ob=ze(Gb),zb=m({},Mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rf=ze(zb),Db=m({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:So}),Bb=ze(Db),Ub=m({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lb=ze(Ub),kb=m({},Mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nb=ze(kb),Hb=m({},xn,{newState:0,oldState:0}),Pb=ze(Hb),Yb=[9,13,27,32],Ao=Ci&&"CompositionEvent"in window,ca=null;Ci&&"documentMode"in document&&(ca=document.documentMode);var Xb=Ci&&"TextEvent"in window&&!ca,Gf=Ci&&(!Ao||ca&&8<ca&&11>=ca),Of=" ",zf=!1;function Df(e,i){switch(e){case"keyup":return Yb.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fs=!1;function jb(e,i){switch(e){case"compositionend":return Bf(i);case"keypress":return i.which!==32?null:(zf=!0,Of);case"textInput":return e=i.data,e===Of&&zf?null:e;default:return null}}function Ib(e,i){if(fs)return e==="compositionend"||!Ao&&Df(e,i)?(e=wf(),Sr=bo=Vi=null,fs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Gf&&i.locale!=="ko"?null:i.data;default:return null}}var Fb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uf(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Fb[e.type]:i==="textarea"}function Lf(e,i,r,l){cs?hs?hs.push(l):hs=[l]:cs=l,i=fl(i,"onChange"),0<i.length&&(r=new wr("onChange","change",null,r,l),e.push({event:r,listeners:i}))}var ha=null,fa=null;function qb(e){mg(e,0)}function Cr(e){var i=aa(e);if(yf(i))return e}function kf(e,i){if(e==="change")return i}var Nf=!1;if(Ci){var To;if(Ci){var wo="oninput"in document;if(!wo){var Hf=document.createElement("div");Hf.setAttribute("oninput","return;"),wo=typeof Hf.oninput=="function"}To=wo}else To=!1;Nf=To&&(!document.documentMode||9<document.documentMode)}function Pf(){ha&&(ha.detachEvent("onpropertychange",Yf),fa=ha=null)}function Yf(e){if(e.propertyName==="value"&&Cr(fa)){var i=[];Lf(i,fa,e,go(e)),Tf(qb,i)}}function Vb(e,i,r){e==="focusin"?(Pf(),ha=i,fa=r,ha.attachEvent("onpropertychange",Yf)):e==="focusout"&&Pf()}function $b(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cr(fa)}function Zb(e,i){if(e==="click")return Cr(i)}function Qb(e,i){if(e==="input"||e==="change")return Cr(i)}function Kb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Ye=typeof Object.is=="function"?Object.is:Kb;function da(e,i){if(Ye(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var r=Object.keys(e),l=Object.keys(i);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var h=r[l];if(!pe.call(i,h)||!Ye(e[h],i[h]))return!1}return!0}function Xf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jf(e,i){var r=Xf(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=i&&l>=i)return{node:r,offset:i-e};e=l}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Xf(r)}}function If(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?If(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Ff(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=xr(e.document);i instanceof e.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)e=i.contentWindow;else break;i=xr(e.document)}return i}function Mo(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Wb=Ci&&"documentMode"in document&&11>=document.documentMode,ds=null,Co=null,pa=null,Eo=!1;function qf(e,i,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Eo||ds==null||ds!==xr(l)||(l=ds,"selectionStart"in l&&Mo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),pa&&da(pa,l)||(pa=l,l=fl(Co,"onSelect"),0<l.length&&(i=new wr("onSelect","select",null,i,r),e.push({event:i,listeners:l}),i.target=ds)))}function _n(e,i){var r={};return r[e.toLowerCase()]=i.toLowerCase(),r["Webkit"+e]="webkit"+i,r["Moz"+e]="moz"+i,r}var ps={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionrun:_n("Transition","TransitionRun"),transitionstart:_n("Transition","TransitionStart"),transitioncancel:_n("Transition","TransitionCancel"),transitionend:_n("Transition","TransitionEnd")},Ro={},Vf={};Ci&&(Vf=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Sn(e){if(Ro[e])return Ro[e];if(!ps[e])return e;var i=ps[e],r;for(r in i)if(i.hasOwnProperty(r)&&r in Vf)return Ro[e]=i[r];return e}var $f=Sn("animationend"),Zf=Sn("animationiteration"),Qf=Sn("animationstart"),Jb=Sn("transitionrun"),tv=Sn("transitionstart"),ev=Sn("transitioncancel"),Kf=Sn("transitionend"),Wf=new Map,Go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Go.push("scrollEnd");function ci(e,i){Wf.set(e,i),vn(i,[e])}var Jf=new WeakMap;function Je(e,i){if(typeof e=="object"&&e!==null){var r=Jf.get(e);return r!==void 0?r:(i={value:e,source:i,stack:gf(i)},Jf.set(e,i),i)}return{value:e,source:i,stack:gf(i)}}var ti=[],gs=0,Oo=0;function Er(){for(var e=gs,i=Oo=gs=0;i<e;){var r=ti[i];ti[i++]=null;var l=ti[i];ti[i++]=null;var h=ti[i];ti[i++]=null;var d=ti[i];if(ti[i++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}d!==0&&td(r,h,d)}}function Rr(e,i,r,l){ti[gs++]=e,ti[gs++]=i,ti[gs++]=r,ti[gs++]=l,Oo|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function zo(e,i,r,l){return Rr(e,i,r,l),Gr(e)}function ms(e,i){return Rr(e,null,null,i),Gr(e)}function td(e,i,r){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r);for(var h=!1,d=e.return;d!==null;)d.childLanes|=r,l=d.alternate,l!==null&&(l.childLanes|=r),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-Pe(r),e=d.hiddenUpdates,l=e[h],l===null?e[h]=[i]:l.push(i),i.lane=r|536870912),d):null}function Gr(e){if(50<Ha)throw Ha=0,Nu=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ys={};function iv(e,i,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(e,i,r,l){return new iv(e,i,r,l)}function Do(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ei(e,i){var r=e.alternate;return r===null?(r=Xe(e.tag,i,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=i,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,i=e.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function ed(e,i){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,i=r.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Or(e,i,r,l,h,d){var b=0;if(l=e,typeof e=="function")Do(e)&&(b=1);else if(typeof e=="string")b=sx(e,r,K.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case nt:return e=Xe(31,r,i,h),e.elementType=nt,e.lanes=d,e;case T:return An(r.children,h,d,i);case E:b=8,h|=24;break;case w:return e=Xe(12,r,i,h|2),e.elementType=w,e.lanes=d,e;case q:return e=Xe(13,r,i,h),e.elementType=q,e.lanes=d,e;case V:return e=Xe(19,r,i,h),e.elementType=V,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:case U:b=10;break t;case B:b=9;break t;case j:b=11;break t;case $:b=14;break t;case rt:b=16,l=null;break t}b=29,r=Error(s(130,e===null?"null":typeof e,"")),l=null}return i=Xe(b,r,i,h),i.elementType=e,i.type=l,i.lanes=d,i}function An(e,i,r,l){return e=Xe(7,e,l,i),e.lanes=r,e}function Bo(e,i,r){return e=Xe(6,e,null,i),e.lanes=r,e}function Uo(e,i,r){return i=Xe(4,e.children!==null?e.children:[],e.key,i),i.lanes=r,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var bs=[],vs=0,zr=null,Dr=0,ei=[],ii=0,Tn=null,Ri=1,Gi="";function wn(e,i){bs[vs++]=Dr,bs[vs++]=zr,zr=e,Dr=i}function id(e,i,r){ei[ii++]=Ri,ei[ii++]=Gi,ei[ii++]=Tn,Tn=e;var l=Ri;e=Gi;var h=32-Pe(l)-1;l&=~(1<<h),r+=1;var d=32-Pe(i)+h;if(30<d){var b=h-h%5;d=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Ri=1<<32-Pe(i)+h|r<<h|l,Gi=d+e}else Ri=1<<d|r<<h|l,Gi=e}function Lo(e){e.return!==null&&(wn(e,1),id(e,1,0))}function ko(e){for(;e===zr;)zr=bs[--vs],bs[vs]=null,Dr=bs[--vs],bs[vs]=null;for(;e===Tn;)Tn=ei[--ii],ei[ii]=null,Gi=ei[--ii],ei[ii]=null,Ri=ei[--ii],ei[ii]=null}var we=null,$t=null,zt=!1,Mn=null,yi=!1,No=Error(s(519));function Cn(e){var i=Error(s(418,""));throw ya(Je(i,e)),No}function nd(e){var i=e.stateNode,r=e.type,l=e.memoizedProps;switch(i[_e]=e,i[Oe]=l,r){case"dialog":_t("cancel",i),_t("close",i);break;case"iframe":case"object":case"embed":_t("load",i);break;case"video":case"audio":for(r=0;r<Ya.length;r++)_t(Ya[r],i);break;case"source":_t("error",i);break;case"img":case"image":case"link":_t("error",i),_t("load",i);break;case"details":_t("toggle",i);break;case"input":_t("invalid",i),bf(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),vr(i);break;case"select":_t("invalid",i);break;case"textarea":_t("invalid",i),xf(i,l.value,l.defaultValue,l.children),vr(i)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||l.suppressHydrationWarning===!0||xg(i.textContent,r)?(l.popover!=null&&(_t("beforetoggle",i),_t("toggle",i)),l.onScroll!=null&&_t("scroll",i),l.onScrollEnd!=null&&_t("scrollend",i),l.onClick!=null&&(i.onclick=dl),i=!0):i=!1,i||Cn(e)}function sd(e){for(we=e.return;we;)switch(we.tag){case 5:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:we=we.return}}function ga(e){if(e!==we)return!1;if(!zt)return sd(e),zt=!0,!1;var i=e.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||tc(e.type,e.memoizedProps)),r=!r),r&&$t&&Cn(e),sd(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(i===0){$t=fi(e.nextSibling);break t}i--}else r!=="$"&&r!=="$!"&&r!=="$?"||i++;e=e.nextSibling}$t=null}}else i===27?(i=$t,cn(e.type)?(e=sc,sc=null,$t=e):$t=i):$t=we?fi(e.stateNode.nextSibling):null;return!0}function ma(){$t=we=null,zt=!1}function ad(){var e=Mn;return e!==null&&(Ue===null?Ue=e:Ue.push.apply(Ue,e),Mn=null),e}function ya(e){Mn===null?Mn=[e]:Mn.push(e)}var Ho=G(null),En=null,Oi=null;function $i(e,i,r){Y(Ho,i._currentValue),i._currentValue=r}function zi(e){e._currentValue=Ho.current,L(Ho)}function Po(e,i,r){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===r)break;e=e.return}}function Yo(e,i,r,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var b=h.child;d=d.firstContext;t:for(;d!==null;){var S=d;d=h;for(var C=0;C<i.length;C++)if(S.context===i[C]){d.lanes|=r,S=d.alternate,S!==null&&(S.lanes|=r),Po(d.return,r,e),l||(b=null);break t}d=S.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=r,d=b.alternate,d!==null&&(d.lanes|=r),Po(b,r,e),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===e){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function ba(e,i,r,l){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var S=h.type;Ye(h.pendingProps.value,b.value)||(e!==null?e.push(S):e=[S])}}else if(h===dt.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Va):e=[Va])}h=h.return}e!==null&&Yo(i,e,r,l),i.flags|=262144}function Br(e){for(e=e.firstContext;e!==null;){if(!Ye(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rn(e){En=e,Oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Se(e){return rd(En,e)}function Ur(e,i){return En===null&&Rn(e),rd(e,i)}function rd(e,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Oi===null){if(e===null)throw Error(s(308));Oi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Oi=Oi.next=i;return r}var nv=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(r,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(r){return r()})}},sv=a.unstable_scheduleCallback,av=a.unstable_NormalPriority,le={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xo(){return{controller:new nv,data:new Map,refCount:0}}function va(e){e.refCount--,e.refCount===0&&sv(av,function(){e.controller.abort()})}var xa=null,jo=0,xs=0,_s=null;function rv(e,i){if(xa===null){var r=xa=[];jo=0,xs=Fu(),_s={status:"pending",value:void 0,then:function(l){r.push(l)}}}return jo++,i.then(ld,ld),i}function ld(){if(--jo===0&&xa!==null){_s!==null&&(_s.status="fulfilled");var e=xa;xa=null,xs=0,_s=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function lv(e,i){var r=[],l={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<r.length;h++)(0,r[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),l}var od=x.S;x.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&rv(e,i),od!==null&&od(e,i)};var Gn=G(null);function Io(){var e=Gn.current;return e!==null?e:jt.pooledCache}function Lr(e,i){i===null?Y(Gn,Gn.current):Y(Gn,i.pool)}function ud(){var e=Io();return e===null?null:{parent:le._currentValue,pool:e}}var _a=Error(s(460)),cd=Error(s(474)),kr=Error(s(542)),Fo={then:function(){}};function hd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nr(){}function fd(e,i,r){switch(r=e[r],r===void 0?e.push(i):r!==i&&(i.then(Nr,Nr),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,pd(e),e;default:if(typeof i.status=="string")i.then(Nr,Nr);else{if(e=jt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,pd(e),e}throw Sa=i,_a}}var Sa=null;function dd(){if(Sa===null)throw Error(s(459));var e=Sa;return Sa=null,e}function pd(e){if(e===_a||e===kr)throw Error(s(483))}var Zi=!1;function qo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vo(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ki(e,i,r){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Bt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Gr(e),td(e,null,r),i}return Rr(e,l,i,r),Gr(e)}function Aa(e,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,r|=l,i.lanes=r,lf(e,r)}}function $o(e,i){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var h=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};d===null?h=d=b:d=d.next=b,r=r.next}while(r!==null);d===null?h=d=i:d=d.next=i}else h=d=i;r={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=i:e.next=i,r.lastBaseUpdate=i}var Zo=!1;function Ta(){if(Zo){var e=_s;if(e!==null)throw e}}function wa(e,i,r,l){Zo=!1;var h=e.updateQueue;Zi=!1;var d=h.firstBaseUpdate,b=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var C=S,H=C.next;C.next=null,b===null?d=H:b.next=H,b=C;var I=e.alternate;I!==null&&(I=I.updateQueue,S=I.lastBaseUpdate,S!==b&&(S===null?I.firstBaseUpdate=H:S.next=H,I.lastBaseUpdate=C))}if(d!==null){var Q=h.baseState;b=0,I=H=C=null,S=d;do{var P=S.lane&-536870913,X=P!==S.lane;if(X?(Et&P)===P:(l&P)===P){P!==0&&P===xs&&(Zo=!0),I!==null&&(I=I.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var ht=e,ut=S;P=i;var Ht=r;switch(ut.tag){case 1:if(ht=ut.payload,typeof ht=="function"){Q=ht.call(Ht,Q,P);break t}Q=ht;break t;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=ut.payload,P=typeof ht=="function"?ht.call(Ht,Q,P):ht,P==null)break t;Q=m({},Q,P);break t;case 2:Zi=!0}}P=S.callback,P!==null&&(e.flags|=64,X&&(e.flags|=8192),X=h.callbacks,X===null?h.callbacks=[P]:X.push(P))}else X={lane:P,tag:S.tag,payload:S.payload,callback:S.callback,next:null},I===null?(H=I=X,C=Q):I=I.next=X,b|=P;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;X=S,S=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);I===null&&(C=Q),h.baseState=C,h.firstBaseUpdate=H,h.lastBaseUpdate=I,d===null&&(h.shared.lanes=0),rn|=b,e.lanes=b,e.memoizedState=Q}}function gd(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function md(e,i){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)gd(r[e],i)}var Ss=G(null),Hr=G(0);function yd(e,i){e=Hi,Y(Hr,e),Y(Ss,i),Hi=e|i.baseLanes}function Qo(){Y(Hr,Hi),Y(Ss,Ss.current)}function Ko(){Hi=Hr.current,L(Ss),L(Hr)}var Wi=0,yt=null,kt=null,ie=null,Pr=!1,As=!1,On=!1,Yr=0,Ma=0,Ts=null,ov=0;function te(){throw Error(s(321))}function Wo(e,i){if(i===null)return!1;for(var r=0;r<i.length&&r<e.length;r++)if(!Ye(e[r],i[r]))return!1;return!0}function Jo(e,i,r,l,h,d){return Wi=d,yt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,x.H=e===null||e.memoizedState===null?tp:ep,On=!1,d=r(l,h),On=!1,As&&(d=vd(i,r,l,h)),bd(e),d}function bd(e){x.H=Vr;var i=kt!==null&&kt.next!==null;if(Wi=0,ie=kt=yt=null,Pr=!1,Ma=0,Ts=null,i)throw Error(s(300));e===null||ce||(e=e.dependencies,e!==null&&Br(e)&&(ce=!0))}function vd(e,i,r,l){yt=e;var h=0;do{if(As&&(Ts=null),Ma=0,As=!1,25<=h)throw Error(s(301));if(h+=1,ie=kt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}x.H=gv,d=i(r,l)}while(As);return d}function uv(){var e=x.H,i=e.useState()[0];return i=typeof i.then=="function"?Ca(i):i,e=e.useState()[0],(kt!==null?kt.memoizedState:null)!==e&&(yt.flags|=1024),i}function tu(){var e=Yr!==0;return Yr=0,e}function eu(e,i,r){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~r}function iu(e){if(Pr){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Pr=!1}Wi=0,ie=kt=yt=null,As=!1,Ma=Yr=0,Ts=null}function De(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ie===null?yt.memoizedState=ie=e:ie=ie.next=e,ie}function ne(){if(kt===null){var e=yt.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var i=ie===null?yt.memoizedState:ie.next;if(i!==null)ie=i,kt=e;else{if(e===null)throw yt.alternate===null?Error(s(467)):Error(s(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},ie===null?yt.memoizedState=ie=e:ie=ie.next=e}return ie}function nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ca(e){var i=Ma;return Ma+=1,Ts===null&&(Ts=[]),e=fd(Ts,e,i),i=yt,(ie===null?i.memoizedState:ie.next)===null&&(i=i.alternate,x.H=i===null||i.memoizedState===null?tp:ep),e}function Xr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ca(e);if(e.$$typeof===U)return Se(e)}throw Error(s(438,String(e)))}function su(e){var i=null,r=yt.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var l=yt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=nu(),yt.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(e),l=0;l<e;l++)r[l]=et;return i.index++,r}function Di(e,i){return typeof i=="function"?i(e):i}function jr(e){var i=ne();return au(i,kt,e)}function au(e,i,r){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var h=e.baseQueue,d=l.pending;if(d!==null){if(h!==null){var b=h.next;h.next=d.next,d.next=b}i.baseQueue=h=d,l.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var S=b=null,C=null,H=i,I=!1;do{var Q=H.lane&-536870913;if(Q!==H.lane?(Et&Q)===Q:(Wi&Q)===Q){var P=H.revertLane;if(P===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),Q===xs&&(I=!0);else if((Wi&P)===P){H=H.next,P===xs&&(I=!0);continue}else Q={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(S=C=Q,b=d):C=C.next=Q,yt.lanes|=P,rn|=P;Q=H.action,On&&r(d,Q),d=H.hasEagerState?H.eagerState:r(d,Q)}else P={lane:Q,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(S=C=P,b=d):C=C.next=P,yt.lanes|=Q,rn|=Q;H=H.next}while(H!==null&&H!==i);if(C===null?b=d:C.next=S,!Ye(d,e.memoizedState)&&(ce=!0,I&&(r=_s,r!==null)))throw r;e.memoizedState=d,e.baseState=b,e.baseQueue=C,l.lastRenderedState=d}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ru(e){var i=ne(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var l=r.dispatch,h=r.pending,d=i.memoizedState;if(h!==null){r.pending=null;var b=h=h.next;do d=e(d,b.action),b=b.next;while(b!==h);Ye(d,i.memoizedState)||(ce=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),r.lastRenderedState=d}return[d,l]}function xd(e,i,r){var l=yt,h=ne(),d=zt;if(d){if(r===void 0)throw Error(s(407));r=r()}else r=i();var b=!Ye((kt||h).memoizedState,r);b&&(h.memoizedState=r,ce=!0),h=h.queue;var S=Ad.bind(null,l,h,e);if(Ea(2048,8,S,[e]),h.getSnapshot!==i||b||ie!==null&&ie.memoizedState.tag&1){if(l.flags|=2048,ws(9,Ir(),Sd.bind(null,l,h,r,i),null),jt===null)throw Error(s(349));d||(Wi&124)!==0||_d(l,i,r)}return r}function _d(e,i,r){e.flags|=16384,e={getSnapshot:i,value:r},i=yt.updateQueue,i===null?(i=nu(),yt.updateQueue=i,i.stores=[e]):(r=i.stores,r===null?i.stores=[e]:r.push(e))}function Sd(e,i,r,l){i.value=r,i.getSnapshot=l,Td(i)&&wd(e)}function Ad(e,i,r){return r(function(){Td(i)&&wd(e)})}function Td(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!Ye(e,r)}catch{return!0}}function wd(e){var i=ms(e,2);i!==null&&Ve(i,e,2)}function lu(e){var i=De();if(typeof e=="function"){var r=e;if(e=r(),On){Fi(!0);try{r()}finally{Fi(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:e},i}function Md(e,i,r,l){return e.baseState=r,au(e,kt,typeof l=="function"?l:Di)}function cv(e,i,r,l,h){if(qr(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){d.listeners.push(b)}};x.T!==null?r(!0):d.isTransition=!1,l(d),r=i.pending,r===null?(d.next=i.pending=d,Cd(i,d)):(d.next=r.next,i.pending=r.next=d)}}function Cd(e,i){var r=i.action,l=i.payload,h=e.state;if(i.isTransition){var d=x.T,b={};x.T=b;try{var S=r(h,l),C=x.S;C!==null&&C(b,S),Ed(e,i,S)}catch(H){ou(e,i,H)}finally{x.T=d}}else try{d=r(h,l),Ed(e,i,d)}catch(H){ou(e,i,H)}}function Ed(e,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Rd(e,i,l)},function(l){return ou(e,i,l)}):Rd(e,i,r)}function Rd(e,i,r){i.status="fulfilled",i.value=r,Gd(i),e.state=r,i=e.pending,i!==null&&(r=i.next,r===i?e.pending=null:(r=r.next,i.next=r,Cd(e,r)))}function ou(e,i,r){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=r,Gd(i),i=i.next;while(i!==l)}e.action=null}function Gd(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Od(e,i){return i}function zd(e,i){if(zt){var r=jt.formState;if(r!==null){t:{var l=yt;if(zt){if($t){e:{for(var h=$t,d=yi;h.nodeType!==8;){if(!d){h=null;break e}if(h=fi(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){$t=fi(h.nextSibling),l=h.data==="F!";break t}}Cn(l)}l=!1}l&&(i=r[0])}}return r=De(),r.memoizedState=r.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Od,lastRenderedState:i},r.queue=l,r=Kd.bind(null,yt,l),l.dispatch=r,l=lu(!1),d=du.bind(null,yt,!1,l.queue),l=De(),h={state:i,dispatch:null,action:e,pending:null},l.queue=h,r=cv.bind(null,yt,h,d,r),h.dispatch=r,l.memoizedState=e,[i,r,!1]}function Dd(e){var i=ne();return Bd(i,kt,e)}function Bd(e,i,r){if(i=au(e,i,Od)[0],e=jr(Di)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ca(i)}catch(b){throw b===_a?kr:b}else l=i;i=ne();var h=i.queue,d=h.dispatch;return r!==i.memoizedState&&(yt.flags|=2048,ws(9,Ir(),hv.bind(null,h,r),null)),[l,d,e]}function hv(e,i){e.action=i}function Ud(e){var i=ne(),r=kt;if(r!==null)return Bd(i,r,e);ne(),i=i.memoizedState,r=ne();var l=r.queue.dispatch;return r.memoizedState=e,[i,l,!1]}function ws(e,i,r,l){return e={tag:e,create:r,deps:l,inst:i,next:null},i=yt.updateQueue,i===null&&(i=nu(),yt.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,i.lastEffect=e),e}function Ir(){return{destroy:void 0,resource:void 0}}function Ld(){return ne().memoizedState}function Fr(e,i,r,l){var h=De();l=l===void 0?null:l,yt.flags|=e,h.memoizedState=ws(1|i,Ir(),r,l)}function Ea(e,i,r,l){var h=ne();l=l===void 0?null:l;var d=h.memoizedState.inst;kt!==null&&l!==null&&Wo(l,kt.memoizedState.deps)?h.memoizedState=ws(i,d,r,l):(yt.flags|=e,h.memoizedState=ws(1|i,d,r,l))}function kd(e,i){Fr(8390656,8,e,i)}function Nd(e,i){Ea(2048,8,e,i)}function Hd(e,i){return Ea(4,2,e,i)}function Pd(e,i){return Ea(4,4,e,i)}function Yd(e,i){if(typeof i=="function"){e=e();var r=i(e);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Xd(e,i,r){r=r!=null?r.concat([e]):null,Ea(4,4,Yd.bind(null,i,e),r)}function uu(){}function jd(e,i){var r=ne();i=i===void 0?null:i;var l=r.memoizedState;return i!==null&&Wo(i,l[1])?l[0]:(r.memoizedState=[e,i],e)}function Id(e,i){var r=ne();i=i===void 0?null:i;var l=r.memoizedState;if(i!==null&&Wo(i,l[1]))return l[0];if(l=e(),On){Fi(!0);try{e()}finally{Fi(!1)}}return r.memoizedState=[l,i],l}function cu(e,i,r){return r===void 0||(Wi&1073741824)!==0?e.memoizedState=i:(e.memoizedState=r,e=Vp(),yt.lanes|=e,rn|=e,r)}function Fd(e,i,r,l){return Ye(r,i)?r:Ss.current!==null?(e=cu(e,r,l),Ye(e,i)||(ce=!0),e):(Wi&42)===0?(ce=!0,e.memoizedState=r):(e=Vp(),yt.lanes|=e,rn|=e,i)}function qd(e,i,r,l,h){var d=M.p;M.p=d!==0&&8>d?d:8;var b=x.T,S={};x.T=S,du(e,!1,i,r);try{var C=h(),H=x.S;if(H!==null&&H(S,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var I=lv(C,l);Ra(e,i,I,qe(e))}else Ra(e,i,l,qe(e))}catch(Q){Ra(e,i,{then:function(){},status:"rejected",reason:Q},qe())}finally{M.p=d,x.T=b}}function fv(){}function hu(e,i,r,l){if(e.tag!==5)throw Error(s(476));var h=Vd(e).queue;qd(e,h,i,R,r===null?fv:function(){return $d(e),r(l)})}function Vd(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:R},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:r},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function $d(e){var i=Vd(e).next.queue;Ra(e,i,{},qe())}function fu(){return Se(Va)}function Zd(){return ne().memoizedState}function Qd(){return ne().memoizedState}function dv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var r=qe();e=Qi(r);var l=Ki(i,e,r);l!==null&&(Ve(l,i,r),Aa(l,i,r)),i={cache:Xo()},e.payload=i;return}i=i.return}}function pv(e,i,r){var l=qe();r={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},qr(e)?Wd(i,r):(r=zo(e,i,r,l),r!==null&&(Ve(r,e,l),Jd(r,i,l)))}function Kd(e,i,r){var l=qe();Ra(e,i,r,l)}function Ra(e,i,r,l){var h={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(qr(e))Wd(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var b=i.lastRenderedState,S=d(b,r);if(h.hasEagerState=!0,h.eagerState=S,Ye(S,b))return Rr(e,i,h,0),jt===null&&Er(),!1}catch{}finally{}if(r=zo(e,i,h,l),r!==null)return Ve(r,e,l),Jd(r,i,l),!0}return!1}function du(e,i,r,l){if(l={lane:2,revertLane:Fu(),action:l,hasEagerState:!1,eagerState:null,next:null},qr(e)){if(i)throw Error(s(479))}else i=zo(e,r,l,2),i!==null&&Ve(i,e,2)}function qr(e){var i=e.alternate;return e===yt||i!==null&&i===yt}function Wd(e,i){As=Pr=!0;var r=e.pending;r===null?i.next=i:(i.next=r.next,r.next=i),e.pending=i}function Jd(e,i,r){if((r&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,r|=l,i.lanes=r,lf(e,r)}}var Vr={readContext:Se,use:Xr,useCallback:te,useContext:te,useEffect:te,useImperativeHandle:te,useLayoutEffect:te,useInsertionEffect:te,useMemo:te,useReducer:te,useRef:te,useState:te,useDebugValue:te,useDeferredValue:te,useTransition:te,useSyncExternalStore:te,useId:te,useHostTransitionStatus:te,useFormState:te,useActionState:te,useOptimistic:te,useMemoCache:te,useCacheRefresh:te},tp={readContext:Se,use:Xr,useCallback:function(e,i){return De().memoizedState=[e,i===void 0?null:i],e},useContext:Se,useEffect:kd,useImperativeHandle:function(e,i,r){r=r!=null?r.concat([e]):null,Fr(4194308,4,Yd.bind(null,i,e),r)},useLayoutEffect:function(e,i){return Fr(4194308,4,e,i)},useInsertionEffect:function(e,i){Fr(4,2,e,i)},useMemo:function(e,i){var r=De();i=i===void 0?null:i;var l=e();if(On){Fi(!0);try{e()}finally{Fi(!1)}}return r.memoizedState=[l,i],l},useReducer:function(e,i,r){var l=De();if(r!==void 0){var h=r(i);if(On){Fi(!0);try{r(i)}finally{Fi(!1)}}}else h=i;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=pv.bind(null,yt,e),[l.memoizedState,e]},useRef:function(e){var i=De();return e={current:e},i.memoizedState=e},useState:function(e){e=lu(e);var i=e.queue,r=Kd.bind(null,yt,i);return i.dispatch=r,[e.memoizedState,r]},useDebugValue:uu,useDeferredValue:function(e,i){var r=De();return cu(r,e,i)},useTransition:function(){var e=lu(!1);return e=qd.bind(null,yt,e.queue,!0,!1),De().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,r){var l=yt,h=De();if(zt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),jt===null)throw Error(s(349));(Et&124)!==0||_d(l,i,r)}h.memoizedState=r;var d={value:r,getSnapshot:i};return h.queue=d,kd(Ad.bind(null,l,d,e),[e]),l.flags|=2048,ws(9,Ir(),Sd.bind(null,l,d,r,i),null),r},useId:function(){var e=De(),i=jt.identifierPrefix;if(zt){var r=Gi,l=Ri;r=(l&~(1<<32-Pe(l)-1)).toString(32)+r,i=""+i+"R"+r,r=Yr++,0<r&&(i+="H"+r.toString(32)),i+=""}else r=ov++,i=""+i+"r"+r.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:fu,useFormState:zd,useActionState:zd,useOptimistic:function(e){var i=De();i.memoizedState=i.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=du.bind(null,yt,!0,r),r.dispatch=i,[e,i]},useMemoCache:su,useCacheRefresh:function(){return De().memoizedState=dv.bind(null,yt)}},ep={readContext:Se,use:Xr,useCallback:jd,useContext:Se,useEffect:Nd,useImperativeHandle:Xd,useInsertionEffect:Hd,useLayoutEffect:Pd,useMemo:Id,useReducer:jr,useRef:Ld,useState:function(){return jr(Di)},useDebugValue:uu,useDeferredValue:function(e,i){var r=ne();return Fd(r,kt.memoizedState,e,i)},useTransition:function(){var e=jr(Di)[0],i=ne().memoizedState;return[typeof e=="boolean"?e:Ca(e),i]},useSyncExternalStore:xd,useId:Zd,useHostTransitionStatus:fu,useFormState:Dd,useActionState:Dd,useOptimistic:function(e,i){var r=ne();return Md(r,kt,e,i)},useMemoCache:su,useCacheRefresh:Qd},gv={readContext:Se,use:Xr,useCallback:jd,useContext:Se,useEffect:Nd,useImperativeHandle:Xd,useInsertionEffect:Hd,useLayoutEffect:Pd,useMemo:Id,useReducer:ru,useRef:Ld,useState:function(){return ru(Di)},useDebugValue:uu,useDeferredValue:function(e,i){var r=ne();return kt===null?cu(r,e,i):Fd(r,kt.memoizedState,e,i)},useTransition:function(){var e=ru(Di)[0],i=ne().memoizedState;return[typeof e=="boolean"?e:Ca(e),i]},useSyncExternalStore:xd,useId:Zd,useHostTransitionStatus:fu,useFormState:Ud,useActionState:Ud,useOptimistic:function(e,i){var r=ne();return kt!==null?Md(r,kt,e,i):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:su,useCacheRefresh:Qd},Ms=null,Ga=0;function $r(e){var i=Ga;return Ga+=1,Ms===null&&(Ms=[]),fd(Ms,e,i)}function Oa(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Zr(e,i){throw i.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function ip(e){var i=e._init;return i(e._payload)}function np(e){function i(D,O){if(e){var k=D.deletions;k===null?(D.deletions=[O],D.flags|=16):k.push(O)}}function r(D,O){if(!e)return null;for(;O!==null;)i(D,O),O=O.sibling;return null}function l(D){for(var O=new Map;D!==null;)D.key!==null?O.set(D.key,D):O.set(D.index,D),D=D.sibling;return O}function h(D,O){return D=Ei(D,O),D.index=0,D.sibling=null,D}function d(D,O,k){return D.index=k,e?(k=D.alternate,k!==null?(k=k.index,k<O?(D.flags|=67108866,O):k):(D.flags|=67108866,O)):(D.flags|=1048576,O)}function b(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function S(D,O,k,F){return O===null||O.tag!==6?(O=Bo(k,D.mode,F),O.return=D,O):(O=h(O,k),O.return=D,O)}function C(D,O,k,F){var it=k.type;return it===T?I(D,O,k.props.children,F,k.key):O!==null&&(O.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===rt&&ip(it)===O.type)?(O=h(O,k.props),Oa(O,k),O.return=D,O):(O=Or(k.type,k.key,k.props,null,D.mode,F),Oa(O,k),O.return=D,O)}function H(D,O,k,F){return O===null||O.tag!==4||O.stateNode.containerInfo!==k.containerInfo||O.stateNode.implementation!==k.implementation?(O=Uo(k,D.mode,F),O.return=D,O):(O=h(O,k.children||[]),O.return=D,O)}function I(D,O,k,F,it){return O===null||O.tag!==7?(O=An(k,D.mode,F,it),O.return=D,O):(O=h(O,k),O.return=D,O)}function Q(D,O,k){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Bo(""+O,D.mode,k),O.return=D,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case _:return k=Or(O.type,O.key,O.props,null,D.mode,k),Oa(k,O),k.return=D,k;case v:return O=Uo(O,D.mode,k),O.return=D,O;case rt:var F=O._init;return O=F(O._payload),Q(D,O,k)}if(Xt(O)||ft(O))return O=An(O,D.mode,k,null),O.return=D,O;if(typeof O.then=="function")return Q(D,$r(O),k);if(O.$$typeof===U)return Q(D,Ur(D,O),k);Zr(D,O)}return null}function P(D,O,k,F){var it=O!==null?O.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return it!==null?null:S(D,O,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return k.key===it?C(D,O,k,F):null;case v:return k.key===it?H(D,O,k,F):null;case rt:return it=k._init,k=it(k._payload),P(D,O,k,F)}if(Xt(k)||ft(k))return it!==null?null:I(D,O,k,F,null);if(typeof k.then=="function")return P(D,O,$r(k),F);if(k.$$typeof===U)return P(D,O,Ur(D,k),F);Zr(D,k)}return null}function X(D,O,k,F,it){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return D=D.get(k)||null,S(O,D,""+F,it);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case _:return D=D.get(F.key===null?k:F.key)||null,C(O,D,F,it);case v:return D=D.get(F.key===null?k:F.key)||null,H(O,D,F,it);case rt:var vt=F._init;return F=vt(F._payload),X(D,O,k,F,it)}if(Xt(F)||ft(F))return D=D.get(k)||null,I(O,D,F,it,null);if(typeof F.then=="function")return X(D,O,k,$r(F),it);if(F.$$typeof===U)return X(D,O,k,Ur(O,F),it);Zr(O,F)}return null}function ht(D,O,k,F){for(var it=null,vt=null,lt=O,ct=O=0,fe=null;lt!==null&&ct<k.length;ct++){lt.index>ct?(fe=lt,lt=null):fe=lt.sibling;var Ot=P(D,lt,k[ct],F);if(Ot===null){lt===null&&(lt=fe);break}e&&lt&&Ot.alternate===null&&i(D,lt),O=d(Ot,O,ct),vt===null?it=Ot:vt.sibling=Ot,vt=Ot,lt=fe}if(ct===k.length)return r(D,lt),zt&&wn(D,ct),it;if(lt===null){for(;ct<k.length;ct++)lt=Q(D,k[ct],F),lt!==null&&(O=d(lt,O,ct),vt===null?it=lt:vt.sibling=lt,vt=lt);return zt&&wn(D,ct),it}for(lt=l(lt);ct<k.length;ct++)fe=X(lt,D,ct,k[ct],F),fe!==null&&(e&&fe.alternate!==null&&lt.delete(fe.key===null?ct:fe.key),O=d(fe,O,ct),vt===null?it=fe:vt.sibling=fe,vt=fe);return e&&lt.forEach(function(gn){return i(D,gn)}),zt&&wn(D,ct),it}function ut(D,O,k,F){if(k==null)throw Error(s(151));for(var it=null,vt=null,lt=O,ct=O=0,fe=null,Ot=k.next();lt!==null&&!Ot.done;ct++,Ot=k.next()){lt.index>ct?(fe=lt,lt=null):fe=lt.sibling;var gn=P(D,lt,Ot.value,F);if(gn===null){lt===null&&(lt=fe);break}e&&lt&&gn.alternate===null&&i(D,lt),O=d(gn,O,ct),vt===null?it=gn:vt.sibling=gn,vt=gn,lt=fe}if(Ot.done)return r(D,lt),zt&&wn(D,ct),it;if(lt===null){for(;!Ot.done;ct++,Ot=k.next())Ot=Q(D,Ot.value,F),Ot!==null&&(O=d(Ot,O,ct),vt===null?it=Ot:vt.sibling=Ot,vt=Ot);return zt&&wn(D,ct),it}for(lt=l(lt);!Ot.done;ct++,Ot=k.next())Ot=X(lt,D,ct,Ot.value,F),Ot!==null&&(e&&Ot.alternate!==null&&lt.delete(Ot.key===null?ct:Ot.key),O=d(Ot,O,ct),vt===null?it=Ot:vt.sibling=Ot,vt=Ot);return e&&lt.forEach(function(mx){return i(D,mx)}),zt&&wn(D,ct),it}function Ht(D,O,k,F){if(typeof k=="object"&&k!==null&&k.type===T&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _:t:{for(var it=k.key;O!==null;){if(O.key===it){if(it=k.type,it===T){if(O.tag===7){r(D,O.sibling),F=h(O,k.props.children),F.return=D,D=F;break t}}else if(O.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===rt&&ip(it)===O.type){r(D,O.sibling),F=h(O,k.props),Oa(F,k),F.return=D,D=F;break t}r(D,O);break}else i(D,O);O=O.sibling}k.type===T?(F=An(k.props.children,D.mode,F,k.key),F.return=D,D=F):(F=Or(k.type,k.key,k.props,null,D.mode,F),Oa(F,k),F.return=D,D=F)}return b(D);case v:t:{for(it=k.key;O!==null;){if(O.key===it)if(O.tag===4&&O.stateNode.containerInfo===k.containerInfo&&O.stateNode.implementation===k.implementation){r(D,O.sibling),F=h(O,k.children||[]),F.return=D,D=F;break t}else{r(D,O);break}else i(D,O);O=O.sibling}F=Uo(k,D.mode,F),F.return=D,D=F}return b(D);case rt:return it=k._init,k=it(k._payload),Ht(D,O,k,F)}if(Xt(k))return ht(D,O,k,F);if(ft(k)){if(it=ft(k),typeof it!="function")throw Error(s(150));return k=it.call(k),ut(D,O,k,F)}if(typeof k.then=="function")return Ht(D,O,$r(k),F);if(k.$$typeof===U)return Ht(D,O,Ur(D,k),F);Zr(D,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,O!==null&&O.tag===6?(r(D,O.sibling),F=h(O,k),F.return=D,D=F):(r(D,O),F=Bo(k,D.mode,F),F.return=D,D=F),b(D)):r(D,O)}return function(D,O,k,F){try{Ga=0;var it=Ht(D,O,k,F);return Ms=null,it}catch(lt){if(lt===_a||lt===kr)throw lt;var vt=Xe(29,lt,null,D.mode);return vt.lanes=F,vt.return=D,vt}finally{}}}var Cs=np(!0),sp=np(!1),ni=G(null),bi=null;function Ji(e){var i=e.alternate;Y(oe,oe.current&1),Y(ni,e),bi===null&&(i===null||Ss.current!==null||i.memoizedState!==null)&&(bi=e)}function ap(e){if(e.tag===22){if(Y(oe,oe.current),Y(ni,e),bi===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(bi=e)}}else tn()}function tn(){Y(oe,oe.current),Y(ni,ni.current)}function Bi(e){L(ni),bi===e&&(bi=null),L(oe)}var oe=G(0);function Qr(e){for(var i=e;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||nc(r)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function pu(e,i,r,l){i=e.memoizedState,r=r(l,i),r=r==null?i:m({},i,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gu={enqueueSetState:function(e,i,r){e=e._reactInternals;var l=qe(),h=Qi(l);h.payload=i,r!=null&&(h.callback=r),i=Ki(e,h,l),i!==null&&(Ve(i,e,l),Aa(i,e,l))},enqueueReplaceState:function(e,i,r){e=e._reactInternals;var l=qe(),h=Qi(l);h.tag=1,h.payload=i,r!=null&&(h.callback=r),i=Ki(e,h,l),i!==null&&(Ve(i,e,l),Aa(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var r=qe(),l=Qi(r);l.tag=2,i!=null&&(l.callback=i),i=Ki(e,l,r),i!==null&&(Ve(i,e,r),Aa(i,e,r))}};function rp(e,i,r,l,h,d,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,b):i.prototype&&i.prototype.isPureReactComponent?!da(r,l)||!da(h,d):!0}function lp(e,i,r,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,l),i.state!==e&&gu.enqueueReplaceState(i,i.state,null)}function zn(e,i){var r=i;if("ref"in i){r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}if(e=e.defaultProps){r===i&&(r=m({},r));for(var h in e)r[h]===void 0&&(r[h]=e[h])}return r}var Kr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function op(e){Kr(e)}function up(e){console.error(e)}function cp(e){Kr(e)}function Wr(e,i){try{var r=e.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function hp(e,i,r){try{var l=e.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function mu(e,i,r){return r=Qi(r),r.tag=3,r.payload={element:null},r.callback=function(){Wr(e,i)},r}function fp(e){return e=Qi(e),e.tag=3,e}function dp(e,i,r,l){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;e.payload=function(){return h(d)},e.callback=function(){hp(i,r,l)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){hp(i,r,l),typeof h!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function mv(e,i,r,l,h){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=r.alternate,i!==null&&ba(i,r,h,!0),r=ni.current,r!==null){switch(r.tag){case 13:return bi===null?Pu():r.alternate===null&&Zt===0&&(Zt=3),r.flags&=-257,r.flags|=65536,r.lanes=h,l===Fo?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([l]):i.add(l),Xu(e,l,h)),!1;case 22:return r.flags|=65536,l===Fo?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([l]):r.add(l)),Xu(e,l,h)),!1}throw Error(s(435,r.tag))}return Xu(e,l,h),Pu(),!1}if(zt)return i=ni.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==No&&(e=Error(s(422),{cause:l}),ya(Je(e,r)))):(l!==No&&(i=Error(s(423),{cause:l}),ya(Je(i,r))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=Je(l,r),h=mu(e.stateNode,l,h),$o(e,h),Zt!==4&&(Zt=2)),!1;var d=Error(s(520),{cause:l});if(d=Je(d,r),Na===null?Na=[d]:Na.push(d),Zt!==4&&(Zt=2),i===null)return!0;l=Je(l,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,e=h&-h,r.lanes|=e,e=mu(r.stateNode,l,e),$o(r,e),!1;case 1:if(i=r.type,d=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ln===null||!ln.has(d))))return r.flags|=65536,h&=-h,r.lanes|=h,h=fp(h),dp(h,e,r,l),$o(r,h),!1}r=r.return}while(r!==null);return!1}var pp=Error(s(461)),ce=!1;function ge(e,i,r,l){i.child=e===null?sp(i,null,r,l):Cs(i,e.child,r,l)}function gp(e,i,r,l,h){r=r.render;var d=i.ref;if("ref"in l){var b={};for(var S in l)S!=="ref"&&(b[S]=l[S])}else b=l;return Rn(i),l=Jo(e,i,r,b,d,h),S=tu(),e!==null&&!ce?(eu(e,i,h),Ui(e,i,h)):(zt&&S&&Lo(i),i.flags|=1,ge(e,i,l,h),i.child)}function mp(e,i,r,l,h){if(e===null){var d=r.type;return typeof d=="function"&&!Do(d)&&d.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=d,yp(e,i,d,l,h)):(e=Or(r.type,null,l,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!Tu(e,h)){var b=d.memoizedProps;if(r=r.compare,r=r!==null?r:da,r(b,l)&&e.ref===i.ref)return Ui(e,i,h)}return i.flags|=1,e=Ei(d,l),e.ref=i.ref,e.return=i,i.child=e}function yp(e,i,r,l,h){if(e!==null){var d=e.memoizedProps;if(da(d,l)&&e.ref===i.ref)if(ce=!1,i.pendingProps=l=d,Tu(e,h))(e.flags&131072)!==0&&(ce=!0);else return i.lanes=e.lanes,Ui(e,i,h)}return yu(e,i,r,l,h)}function bp(e,i,r){var l=i.pendingProps,h=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|r:r,e!==null){for(h=i.child=e.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return vp(e,i,l,r)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Lr(i,d!==null?d.cachePool:null),d!==null?yd(i,d):Qo(),ap(i);else return i.lanes=i.childLanes=536870912,vp(e,i,d!==null?d.baseLanes|r:r,r)}else d!==null?(Lr(i,d.cachePool),yd(i,d),tn(),i.memoizedState=null):(e!==null&&Lr(i,null),Qo(),tn());return ge(e,i,h,r),i.child}function vp(e,i,r,l){var h=Io();return h=h===null?null:{parent:le._currentValue,pool:h},i.memoizedState={baseLanes:r,cachePool:h},e!==null&&Lr(i,null),Qo(),ap(i),e!==null&&ba(e,i,l,!0),null}function Jr(e,i){var r=i.ref;if(r===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(i.flags|=4194816)}}function yu(e,i,r,l,h){return Rn(i),r=Jo(e,i,r,l,void 0,h),l=tu(),e!==null&&!ce?(eu(e,i,h),Ui(e,i,h)):(zt&&l&&Lo(i),i.flags|=1,ge(e,i,r,h),i.child)}function xp(e,i,r,l,h,d){return Rn(i),i.updateQueue=null,r=vd(i,l,r,h),bd(e),l=tu(),e!==null&&!ce?(eu(e,i,d),Ui(e,i,d)):(zt&&l&&Lo(i),i.flags|=1,ge(e,i,r,d),i.child)}function _p(e,i,r,l,h){if(Rn(i),i.stateNode===null){var d=ys,b=r.contextType;typeof b=="object"&&b!==null&&(d=Se(b)),d=new r(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=gu,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},qo(i),b=r.contextType,d.context=typeof b=="object"&&b!==null?Se(b):ys,d.state=i.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(pu(i,r,b,l),d.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(b=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),b!==d.state&&gu.enqueueReplaceState(d,d.state,null),wa(i,l,d,h),Ta(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var S=i.memoizedProps,C=zn(r,S);d.props=C;var H=d.context,I=r.contextType;b=ys,typeof I=="object"&&I!==null&&(b=Se(I));var Q=r.getDerivedStateFromProps;I=typeof Q=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,I||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||H!==b)&&lp(i,d,l,b),Zi=!1;var P=i.memoizedState;d.state=P,wa(i,l,d,h),Ta(),H=i.memoizedState,S||P!==H||Zi?(typeof Q=="function"&&(pu(i,r,Q,l),H=i.memoizedState),(C=Zi||rp(i,r,C,l,P,H,b))?(I||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=b,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Vo(e,i),b=i.memoizedProps,I=zn(r,b),d.props=I,Q=i.pendingProps,P=d.context,H=r.contextType,C=ys,typeof H=="object"&&H!==null&&(C=Se(H)),S=r.getDerivedStateFromProps,(H=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==Q||P!==C)&&lp(i,d,l,C),Zi=!1,P=i.memoizedState,d.state=P,wa(i,l,d,h),Ta();var X=i.memoizedState;b!==Q||P!==X||Zi||e!==null&&e.dependencies!==null&&Br(e.dependencies)?(typeof S=="function"&&(pu(i,r,S,l),X=i.memoizedState),(I=Zi||rp(i,r,I,l,P,X,C)||e!==null&&e.dependencies!==null&&Br(e.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,X,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,X,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===e.memoizedProps&&P===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&P===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=X),d.props=l,d.state=X,d.context=C,l=I):(typeof d.componentDidUpdate!="function"||b===e.memoizedProps&&P===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&P===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,Jr(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Cs(i,e.child,null,h),i.child=Cs(i,null,r,h)):ge(e,i,r,h),i.memoizedState=d.state,e=i.child):e=Ui(e,i,h),e}function Sp(e,i,r,l){return ma(),i.flags|=256,ge(e,i,r,l),i.child}var bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vu(e){return{baseLanes:e,cachePool:ud()}}function xu(e,i,r){return e=e!==null?e.childLanes&~r:0,i&&(e|=si),e}function Ap(e,i,r){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,b;if((b=d)||(b=e!==null&&e.memoizedState===null?!1:(oe.current&2)!==0),b&&(h=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,e===null){if(zt){if(h?Ji(i):tn(),zt){var S=$t,C;if(C=S){t:{for(C=S,S=yi;C.nodeType!==8;){if(!S){S=null;break t}if(C=fi(C.nextSibling),C===null){S=null;break t}}S=C}S!==null?(i.memoizedState={dehydrated:S,treeContext:Tn!==null?{id:Ri,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},C=Xe(18,null,null,0),C.stateNode=S,C.return=i,i.child=C,we=i,$t=null,C=!0):C=!1}C||Cn(i)}if(S=i.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return nc(S)?i.lanes=32:i.lanes=536870912,null;Bi(i)}return S=l.children,l=l.fallback,h?(tn(),h=i.mode,S=tl({mode:"hidden",children:S},h),l=An(l,h,r,null),S.return=i,l.return=i,S.sibling=l,i.child=S,h=i.child,h.memoizedState=vu(r),h.childLanes=xu(e,b,r),i.memoizedState=bu,l):(Ji(i),_u(i,S))}if(C=e.memoizedState,C!==null&&(S=C.dehydrated,S!==null)){if(d)i.flags&256?(Ji(i),i.flags&=-257,i=Su(e,i,r)):i.memoizedState!==null?(tn(),i.child=e.child,i.flags|=128,i=null):(tn(),h=l.fallback,S=i.mode,l=tl({mode:"visible",children:l.children},S),h=An(h,S,r,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Cs(i,e.child,null,r),l=i.child,l.memoizedState=vu(r),l.childLanes=xu(e,b,r),i.memoizedState=bu,i=h);else if(Ji(i),nc(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var H=b.dgst;b=H,l=Error(s(419)),l.stack="",l.digest=b,ya({value:l,source:null,stack:null}),i=Su(e,i,r)}else if(ce||ba(e,i,r,!1),b=(r&e.childLanes)!==0,ce||b){if(b=jt,b!==null&&(l=r&-r,l=(l&42)!==0?1:no(l),l=(l&(b.suspendedLanes|r))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,ms(e,l),Ve(b,e,l),pp;S.data==="$?"||Pu(),i=Su(e,i,r)}else S.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=C.treeContext,$t=fi(S.nextSibling),we=i,zt=!0,Mn=null,yi=!1,e!==null&&(ei[ii++]=Ri,ei[ii++]=Gi,ei[ii++]=Tn,Ri=e.id,Gi=e.overflow,Tn=i),i=_u(i,l.children),i.flags|=4096);return i}return h?(tn(),h=l.fallback,S=i.mode,C=e.child,H=C.sibling,l=Ei(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,H!==null?h=Ei(H,h):(h=An(h,S,r,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,S=e.child.memoizedState,S===null?S=vu(r):(C=S.cachePool,C!==null?(H=le._currentValue,C=C.parent!==H?{parent:H,pool:H}:C):C=ud(),S={baseLanes:S.baseLanes|r,cachePool:C}),h.memoizedState=S,h.childLanes=xu(e,b,r),i.memoizedState=bu,l):(Ji(i),r=e.child,e=r.sibling,r=Ei(r,{mode:"visible",children:l.children}),r.return=i,r.sibling=null,e!==null&&(b=i.deletions,b===null?(i.deletions=[e],i.flags|=16):b.push(e)),i.child=r,i.memoizedState=null,r)}function _u(e,i){return i=tl({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function tl(e,i){return e=Xe(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Su(e,i,r){return Cs(i,e.child,null,r),e=_u(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Tp(e,i,r){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Po(e.return,i,r)}function Au(e,i,r,l,h){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=r,d.tailMode=h)}function wp(e,i,r){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(ge(e,i,l.children,r),l=oe.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tp(e,r,i);else if(e.tag===19)Tp(e,r,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Y(oe,l),h){case"forwards":for(r=i.child,h=null;r!==null;)e=r.alternate,e!==null&&Qr(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=i.child,i.child=null):(h=r.sibling,r.sibling=null),Au(i,!1,h,r,d);break;case"backwards":for(r=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Qr(e)===null){i.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}Au(i,!0,r,null,d);break;case"together":Au(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ui(e,i,r){if(e!==null&&(i.dependencies=e.dependencies),rn|=i.lanes,(r&i.childLanes)===0)if(e!==null){if(ba(e,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,r=Ei(e,e.pendingProps),i.child=r,r.return=i;e.sibling!==null;)e=e.sibling,r=r.sibling=Ei(e,e.pendingProps),r.return=i;r.sibling=null}return i.child}function Tu(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Br(e)))}function yv(e,i,r){switch(i.tag){case 3:st(i,i.stateNode.containerInfo),$i(i,le,e.memoizedState.cache),ma();break;case 27:case 5:Mt(i);break;case 4:st(i,i.stateNode.containerInfo);break;case 10:$i(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ji(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Ap(e,i,r):(Ji(i),e=Ui(e,i,r),e!==null?e.sibling:null);Ji(i);break;case 19:var h=(e.flags&128)!==0;if(l=(r&i.childLanes)!==0,l||(ba(e,i,r,!1),l=(r&i.childLanes)!==0),h){if(l)return wp(e,i,r);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Y(oe,oe.current),l)break;return null;case 22:case 23:return i.lanes=0,bp(e,i,r);case 24:$i(i,le,e.memoizedState.cache)}return Ui(e,i,r)}function Mp(e,i,r){if(e!==null)if(e.memoizedProps!==i.pendingProps)ce=!0;else{if(!Tu(e,r)&&(i.flags&128)===0)return ce=!1,yv(e,i,r);ce=(e.flags&131072)!==0}else ce=!1,zt&&(i.flags&1048576)!==0&&id(i,Dr,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Do(l)?(e=zn(l,e),i.tag=1,i=_p(null,i,l,e,r)):(i.tag=0,i=yu(null,i,l,e,r));else{if(l!=null){if(h=l.$$typeof,h===j){i.tag=11,i=gp(null,i,l,e,r);break t}else if(h===$){i.tag=14,i=mp(null,i,l,e,r);break t}}throw i=Yt(l)||l,Error(s(306,i,""))}}return i;case 0:return yu(e,i,i.type,i.pendingProps,r);case 1:return l=i.type,h=zn(l,i.pendingProps),_p(e,i,l,h,r);case 3:t:{if(st(i,i.stateNode.containerInfo),e===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Vo(e,i),wa(i,l,null,r);var b=i.memoizedState;if(l=b.cache,$i(i,le,l),l!==d.cache&&Yo(i,[le],r,!0),Ta(),l=b.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Sp(e,i,l,r);break t}else if(l!==h){h=Je(Error(s(424)),i),ya(h),i=Sp(e,i,l,r);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($t=fi(e.firstChild),we=i,zt=!0,Mn=null,yi=!0,r=sp(i,null,l,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ma(),l===h){i=Ui(e,i,r);break t}ge(e,i,l,r)}i=i.child}return i;case 26:return Jr(e,i),e===null?(r=Gg(i.type,null,i.pendingProps,null))?i.memoizedState=r:zt||(r=i.type,e=i.pendingProps,l=pl(tt.current).createElement(r),l[_e]=i,l[Oe]=e,ye(l,r,e),ue(l),i.stateNode=l):i.memoizedState=Gg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Mt(i),e===null&&zt&&(l=i.stateNode=Cg(i.type,i.pendingProps,tt.current),we=i,yi=!0,h=$t,cn(i.type)?(sc=h,$t=fi(l.firstChild)):$t=h),ge(e,i,i.pendingProps.children,r),Jr(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&zt&&((h=l=$t)&&(l=Fv(l,i.type,i.pendingProps,yi),l!==null?(i.stateNode=l,we=i,$t=fi(l.firstChild),yi=!1,h=!0):h=!1),h||Cn(i)),Mt(i),h=i.type,d=i.pendingProps,b=e!==null?e.memoizedProps:null,l=d.children,tc(h,d)?l=null:b!==null&&tc(h,b)&&(i.flags|=32),i.memoizedState!==null&&(h=Jo(e,i,uv,null,null,r),Va._currentValue=h),Jr(e,i),ge(e,i,l,r),i.child;case 6:return e===null&&zt&&((e=r=$t)&&(r=qv(r,i.pendingProps,yi),r!==null?(i.stateNode=r,we=i,$t=null,e=!0):e=!1),e||Cn(i)),null;case 13:return Ap(e,i,r);case 4:return st(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Cs(i,null,l,r):ge(e,i,l,r),i.child;case 11:return gp(e,i,i.type,i.pendingProps,r);case 7:return ge(e,i,i.pendingProps,r),i.child;case 8:return ge(e,i,i.pendingProps.children,r),i.child;case 12:return ge(e,i,i.pendingProps.children,r),i.child;case 10:return l=i.pendingProps,$i(i,i.type,l.value),ge(e,i,l.children,r),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Rn(i),h=Se(h),l=l(h),i.flags|=1,ge(e,i,l,r),i.child;case 14:return mp(e,i,i.type,i.pendingProps,r);case 15:return yp(e,i,i.type,i.pendingProps,r);case 19:return wp(e,i,r);case 31:return l=i.pendingProps,r=i.mode,l={mode:l.mode,children:l.children},e===null?(r=tl(l,r),r.ref=i.ref,i.child=r,r.return=i,i=r):(r=Ei(e.child,l),r.ref=i.ref,i.child=r,r.return=i,i=r),i;case 22:return bp(e,i,r);case 24:return Rn(i),l=Se(le),e===null?(h=Io(),h===null&&(h=jt,d=Xo(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=r),h=d),i.memoizedState={parent:l,cache:h},qo(i),$i(i,le,h)):((e.lanes&r)!==0&&(Vo(e,i),wa(i,null,null,r),Ta()),h=e.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),$i(i,le,l)):(l=d.cache,$i(i,le,l),l!==h.cache&&Yo(i,[le],r,!0))),ge(e,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Li(e){e.flags|=4}function Cp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ug(i)){if(i=ni.current,i!==null&&((Et&4194048)===Et?bi!==null:(Et&62914560)!==Et&&(Et&536870912)===0||i!==bi))throw Sa=Fo,cd;e.flags|=8192}}function el(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?af():536870912,e.lanes|=i,Os|=i)}function za(e,i){if(!zt)switch(e.tailMode){case"hidden":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ft(e){var i=e.alternate!==null&&e.alternate.child===e.child,r=0,l=0;if(i)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=r,i}function bv(e,i,r){var l=i.pendingProps;switch(ko(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(i),null;case 1:return Ft(i),null;case 3:return r=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),zi(le),Dt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ga(i)?Li(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ad())),Ft(i),null;case 26:return r=i.memoizedState,e===null?(Li(i),r!==null?(Ft(i),Cp(i,r)):(Ft(i),i.flags&=-16777217)):r?r!==e.memoizedState?(Li(i),Ft(i),Cp(i,r)):(Ft(i),i.flags&=-16777217):(e.memoizedProps!==l&&Li(i),Ft(i),i.flags&=-16777217),null;case 27:Ee(i),r=tt.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Li(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ft(i),null}e=K.current,ga(i)?nd(i):(e=Cg(h,l,r),i.stateNode=e,Li(i))}return Ft(i),null;case 5:if(Ee(i),r=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&Li(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return Ft(i),null}if(e=K.current,ga(i))nd(i);else{switch(h=pl(tt.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(r,{is:l.is}):h.createElement(r)}}e[_e]=i,e[Oe]=l;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(ye(e,r,l),r){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Li(i)}}return Ft(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&Li(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(e=tt.current,ga(i)){if(e=i.stateNode,r=i.memoizedProps,l=null,h=we,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[_e]=i,e=!!(e.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||xg(e.nodeValue,r)),e||Cn(i)}else e=pl(e).createTextNode(l),e[_e]=i,i.stateNode=e}return Ft(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=ga(i),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[_e]=i}else ma(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ft(i),h=!1}else h=ad(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Bi(i),i):(Bi(i),null)}if(Bi(i),(i.flags&128)!==0)return i.lanes=r,i;if(r=l!==null,e=e!==null&&e.memoizedState!==null,r){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return r!==e&&r&&(i.child.flags|=8192),el(i,i.updateQueue),Ft(i),null;case 4:return Dt(),e===null&&Zu(i.stateNode.containerInfo),Ft(i),null;case 10:return zi(i.type),Ft(i),null;case 19:if(L(oe),h=i.memoizedState,h===null)return Ft(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)za(h,!1);else{if(Zt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Qr(e),d!==null){for(i.flags|=128,za(h,!1),e=d.updateQueue,i.updateQueue=e,el(i,e),i.subtreeFlags=0,e=r,r=i.child;r!==null;)ed(r,e),r=r.sibling;return Y(oe,oe.current&1|2),i.child}e=e.sibling}h.tail!==null&&Ne()>sl&&(i.flags|=128,l=!0,za(h,!1),i.lanes=4194304)}else{if(!l)if(e=Qr(d),e!==null){if(i.flags|=128,l=!0,e=e.updateQueue,i.updateQueue=e,el(i,e),za(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!zt)return Ft(i),null}else 2*Ne()-h.renderingStartTime>sl&&r!==536870912&&(i.flags|=128,l=!0,za(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(e=h.last,e!==null?e.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Ne(),i.sibling=null,e=oe.current,Y(oe,l?e&1|2:e&1),i):(Ft(i),null);case 22:case 23:return Bi(i),Ko(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(r&536870912)!==0&&(i.flags&128)===0&&(Ft(i),i.subtreeFlags&6&&(i.flags|=8192)):Ft(i),r=i.updateQueue,r!==null&&el(i,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==r&&(i.flags|=2048),e!==null&&L(Gn),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),zi(le),Ft(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function vv(e,i){switch(ko(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return zi(le),Dt(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Ee(i),null;case 13:if(Bi(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ma()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return L(oe),null;case 4:return Dt(),null;case 10:return zi(i.type),null;case 22:case 23:return Bi(i),Ko(),e!==null&&L(Gn),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return zi(le),null;case 25:return null;default:return null}}function Ep(e,i){switch(ko(i),i.tag){case 3:zi(le),Dt();break;case 26:case 27:case 5:Ee(i);break;case 4:Dt();break;case 13:Bi(i);break;case 19:L(oe);break;case 10:zi(i.type);break;case 22:case 23:Bi(i),Ko(),e!==null&&L(Gn);break;case 24:zi(le)}}function Da(e,i){try{var r=i.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var h=l.next;r=h;do{if((r.tag&e)===e){l=void 0;var d=r.create,b=r.inst;l=d(),b.destroy=l}r=r.next}while(r!==h)}}catch(S){Pt(i,i.return,S)}}function en(e,i,r){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&e)===e){var b=l.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,h=i;var C=r,H=S;try{H()}catch(I){Pt(h,C,I)}}}l=l.next}while(l!==d)}}catch(I){Pt(i,i.return,I)}}function Rp(e){var i=e.updateQueue;if(i!==null){var r=e.stateNode;try{md(i,r)}catch(l){Pt(e,e.return,l)}}}function Gp(e,i,r){r.props=zn(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(l){Pt(e,i,l)}}function Ba(e,i){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof r=="function"?e.refCleanup=r(l):r.current=l}}catch(h){Pt(e,i,h)}}function vi(e,i){var r=e.ref,l=e.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(h){Pt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){Pt(e,i,h)}else r.current=null}function Op(e){var i=e.type,r=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break t;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(h){Pt(e,e.return,h)}}function wu(e,i,r){try{var l=e.stateNode;Pv(l,e.type,r,i),l[Oe]=i}catch(h){Pt(e,e.return,h)}}function zp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&cn(e.type)||e.tag===4}function Mu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&cn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cu(e,i,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(e),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=dl));else if(l!==4&&(l===27&&cn(e.type)&&(r=e.stateNode,i=null),e=e.child,e!==null))for(Cu(e,i,r),e=e.sibling;e!==null;)Cu(e,i,r),e=e.sibling}function il(e,i,r){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?r.insertBefore(e,i):r.appendChild(e);else if(l!==4&&(l===27&&cn(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(il(e,i,r),e=e.sibling;e!==null;)il(e,i,r),e=e.sibling}function Dp(e){var i=e.stateNode,r=e.memoizedProps;try{for(var l=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);ye(i,l,r),i[_e]=e,i[Oe]=r}catch(d){Pt(e,e.return,d)}}var ki=!1,ee=!1,Eu=!1,Bp=typeof WeakSet=="function"?WeakSet:Set,he=null;function xv(e,i){if(e=e.containerInfo,Wu=xl,e=Ff(e),Mo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break t}var b=0,S=-1,C=-1,H=0,I=0,Q=e,P=null;e:for(;;){for(var X;Q!==r||h!==0&&Q.nodeType!==3||(S=b+h),Q!==d||l!==0&&Q.nodeType!==3||(C=b+l),Q.nodeType===3&&(b+=Q.nodeValue.length),(X=Q.firstChild)!==null;)P=Q,Q=X;for(;;){if(Q===e)break e;if(P===r&&++H===h&&(S=b),P===d&&++I===l&&(C=b),(X=Q.nextSibling)!==null)break;Q=P,P=Q.parentNode}Q=X}r=S===-1||C===-1?null:{start:S,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ju={focusedElem:e,selectionRange:r},xl=!1,he=i;he!==null;)if(i=he,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,he=e;else for(;he!==null;){switch(i=he,d=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,r=i,h=d.memoizedProps,d=d.memoizedState,l=r.stateNode;try{var ht=zn(r.type,h,r.elementType===r.type);e=l.getSnapshotBeforeUpdate(ht,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(ut){Pt(r,r.return,ut)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,r=e.nodeType,r===9)ic(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ic(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,he=e;break}he=i.return}}function Up(e,i,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:nn(e,r),l&4&&Da(5,r);break;case 1:if(nn(e,r),l&4)if(e=r.stateNode,i===null)try{e.componentDidMount()}catch(b){Pt(r,r.return,b)}else{var h=zn(r.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Pt(r,r.return,b)}}l&64&&Rp(r),l&512&&Ba(r,r.return);break;case 3:if(nn(e,r),l&64&&(e=r.updateQueue,e!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{md(e,i)}catch(b){Pt(r,r.return,b)}}break;case 27:i===null&&l&4&&Dp(r);case 26:case 5:nn(e,r),i===null&&l&4&&Op(r),l&512&&Ba(r,r.return);break;case 12:nn(e,r);break;case 13:nn(e,r),l&4&&Np(e,r),l&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Rv.bind(null,r),Vv(e,r))));break;case 22:if(l=r.memoizedState!==null||ki,!l){i=i!==null&&i.memoizedState!==null||ee,h=ki;var d=ee;ki=l,(ee=i)&&!d?sn(e,r,(r.subtreeFlags&8772)!==0):nn(e,r),ki=h,ee=d}break;case 30:break;default:nn(e,r)}}function Lp(e){var i=e.alternate;i!==null&&(e.alternate=null,Lp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ro(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var It=null,Be=!1;function Ni(e,i,r){for(r=r.child;r!==null;)kp(e,i,r),r=r.sibling}function kp(e,i,r){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(ea,r)}catch{}switch(r.tag){case 26:ee||vi(r,i),Ni(e,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ee||vi(r,i);var l=It,h=Be;cn(r.type)&&(It=r.stateNode,Be=!1),Ni(e,i,r),ja(r.stateNode),It=l,Be=h;break;case 5:ee||vi(r,i);case 6:if(l=It,h=Be,It=null,Ni(e,i,r),It=l,Be=h,It!==null)if(Be)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(r.stateNode)}catch(d){Pt(r,i,d)}else try{It.removeChild(r.stateNode)}catch(d){Pt(r,i,d)}break;case 18:It!==null&&(Be?(e=It,wg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Ka(e)):wg(It,r.stateNode));break;case 4:l=It,h=Be,It=r.stateNode.containerInfo,Be=!0,Ni(e,i,r),It=l,Be=h;break;case 0:case 11:case 14:case 15:ee||en(2,r,i),ee||en(4,r,i),Ni(e,i,r);break;case 1:ee||(vi(r,i),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Gp(r,i,l)),Ni(e,i,r);break;case 21:Ni(e,i,r);break;case 22:ee=(l=ee)||r.memoizedState!==null,Ni(e,i,r),ee=l;break;default:Ni(e,i,r)}}function Np(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ka(e)}catch(r){Pt(i,i.return,r)}}function _v(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Bp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Bp),i;default:throw Error(s(435,e.tag))}}function Ru(e,i){var r=_v(e);i.forEach(function(l){var h=Gv.bind(null,e,l);r.has(l)||(r.add(l),l.then(h,h))})}function je(e,i){var r=i.deletions;if(r!==null)for(var l=0;l<r.length;l++){var h=r[l],d=e,b=i,S=b;t:for(;S!==null;){switch(S.tag){case 27:if(cn(S.type)){It=S.stateNode,Be=!1;break t}break;case 5:It=S.stateNode,Be=!1;break t;case 3:case 4:It=S.stateNode.containerInfo,Be=!0;break t}S=S.return}if(It===null)throw Error(s(160));kp(d,b,h),It=null,Be=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Hp(i,e),i=i.sibling}var hi=null;function Hp(e,i){var r=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:je(i,e),Ie(e),l&4&&(en(3,e,e.return),Da(3,e),en(5,e,e.return));break;case 1:je(i,e),Ie(e),l&512&&(ee||r===null||vi(r,r.return)),l&64&&ki&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var h=hi;if(je(i,e),Ie(e),l&512&&(ee||r===null||vi(r,r.return)),l&4){var d=r!==null?r.memoizedState:null;if(l=e.memoizedState,r===null)if(l===null)if(e.stateNode===null){t:{l=e.type,r=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[sa]||d[_e]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),ye(d,l,r),d[_e]=e,ue(d),l=d;break t;case"link":var b=Dg("link","href",h).get(l+(r.href||""));if(b){for(var S=0;S<b.length;S++)if(d=b[S],d.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&d.getAttribute("rel")===(r.rel==null?null:r.rel)&&d.getAttribute("title")===(r.title==null?null:r.title)&&d.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(S,1);break e}}d=h.createElement(l),ye(d,l,r),h.head.appendChild(d);break;case"meta":if(b=Dg("meta","content",h).get(l+(r.content||""))){for(S=0;S<b.length;S++)if(d=b[S],d.getAttribute("content")===(r.content==null?null:""+r.content)&&d.getAttribute("name")===(r.name==null?null:r.name)&&d.getAttribute("property")===(r.property==null?null:r.property)&&d.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&d.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(S,1);break e}}d=h.createElement(l),ye(d,l,r),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[_e]=e,ue(d),l=d}e.stateNode=l}else Bg(h,e.type,e.stateNode);else e.stateNode=zg(h,l,e.memoizedProps);else d!==l?(d===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):d.count--,l===null?Bg(h,e.type,e.stateNode):zg(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&wu(e,e.memoizedProps,r.memoizedProps)}break;case 27:je(i,e),Ie(e),l&512&&(ee||r===null||vi(r,r.return)),r!==null&&l&4&&wu(e,e.memoizedProps,r.memoizedProps);break;case 5:if(je(i,e),Ie(e),l&512&&(ee||r===null||vi(r,r.return)),e.flags&32){h=e.stateNode;try{us(h,"")}catch(X){Pt(e,e.return,X)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,wu(e,h,r!==null?r.memoizedProps:h)),l&1024&&(Eu=!0);break;case 6:if(je(i,e),Ie(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,r=e.stateNode;try{r.nodeValue=l}catch(X){Pt(e,e.return,X)}}break;case 3:if(yl=null,h=hi,hi=gl(i.containerInfo),je(i,e),hi=h,Ie(e),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Ka(i.containerInfo)}catch(X){Pt(e,e.return,X)}Eu&&(Eu=!1,Pp(e));break;case 4:l=hi,hi=gl(e.stateNode.containerInfo),je(i,e),Ie(e),hi=l;break;case 12:je(i,e),Ie(e);break;case 13:je(i,e),Ie(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Uu=Ne()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ru(e,l)));break;case 22:h=e.memoizedState!==null;var C=r!==null&&r.memoizedState!==null,H=ki,I=ee;if(ki=H||h,ee=I||C,je(i,e),ee=I,ki=H,Ie(e),l&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(r===null||C||ki||ee||Dn(e)),r=null,i=e;;){if(i.tag===5||i.tag===26){if(r===null){C=r=i;try{if(d=C.stateNode,h)b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=C.stateNode;var Q=C.memoizedProps.style,P=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;S.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(X){Pt(C,C.return,X)}}}else if(i.tag===6){if(r===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(X){Pt(C,C.return,X)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Ru(e,r))));break;case 19:je(i,e),Ie(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ru(e,l)));break;case 30:break;case 21:break;default:je(i,e),Ie(e)}}function Ie(e){var i=e.flags;if(i&2){try{for(var r,l=e.return;l!==null;){if(zp(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var h=r.stateNode,d=Mu(e);il(e,d,h);break;case 5:var b=r.stateNode;r.flags&32&&(us(b,""),r.flags&=-33);var S=Mu(e);il(e,S,b);break;case 3:case 4:var C=r.stateNode.containerInfo,H=Mu(e);Cu(e,H,C);break;default:throw Error(s(161))}}catch(I){Pt(e,e.return,I)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Pp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Pp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function nn(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Up(e,i.alternate,i),i=i.sibling}function Dn(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:en(4,i,i.return),Dn(i);break;case 1:vi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Gp(i,i.return,r),Dn(i);break;case 27:ja(i.stateNode);case 26:case 5:vi(i,i.return),Dn(i);break;case 22:i.memoizedState===null&&Dn(i);break;case 30:Dn(i);break;default:Dn(i)}e=e.sibling}}function sn(e,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=e,d=i,b=d.flags;switch(d.tag){case 0:case 11:case 15:sn(h,d,r),Da(4,d);break;case 1:if(sn(h,d,r),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){Pt(l,l.return,H)}if(l=d,h=l.updateQueue,h!==null){var S=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)gd(C[h],S)}catch(H){Pt(l,l.return,H)}}r&&b&64&&Rp(d),Ba(d,d.return);break;case 27:Dp(d);case 26:case 5:sn(h,d,r),r&&l===null&&b&4&&Op(d),Ba(d,d.return);break;case 12:sn(h,d,r);break;case 13:sn(h,d,r),r&&b&4&&Np(h,d);break;case 22:d.memoizedState===null&&sn(h,d,r),Ba(d,d.return);break;case 30:break;default:sn(h,d,r)}i=i.sibling}}function Gu(e,i){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&va(r))}function Ou(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&va(e))}function xi(e,i,r,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yp(e,i,r,l),i=i.sibling}function Yp(e,i,r,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:xi(e,i,r,l),h&2048&&Da(9,i);break;case 1:xi(e,i,r,l);break;case 3:xi(e,i,r,l),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&va(e)));break;case 12:if(h&2048){xi(e,i,r,l),e=i.stateNode;try{var d=i.memoizedProps,b=d.id,S=d.onPostCommit;typeof S=="function"&&S(b,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Pt(i,i.return,C)}}else xi(e,i,r,l);break;case 13:xi(e,i,r,l);break;case 23:break;case 22:d=i.stateNode,b=i.alternate,i.memoizedState!==null?d._visibility&2?xi(e,i,r,l):Ua(e,i):d._visibility&2?xi(e,i,r,l):(d._visibility|=2,Es(e,i,r,l,(i.subtreeFlags&10256)!==0)),h&2048&&Gu(b,i);break;case 24:xi(e,i,r,l),h&2048&&Ou(i.alternate,i);break;default:xi(e,i,r,l)}}function Es(e,i,r,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=e,b=i,S=r,C=l,H=b.flags;switch(b.tag){case 0:case 11:case 15:Es(d,b,S,C,h),Da(8,b);break;case 23:break;case 22:var I=b.stateNode;b.memoizedState!==null?I._visibility&2?Es(d,b,S,C,h):Ua(d,b):(I._visibility|=2,Es(d,b,S,C,h)),h&&H&2048&&Gu(b.alternate,b);break;case 24:Es(d,b,S,C,h),h&&H&2048&&Ou(b.alternate,b);break;default:Es(d,b,S,C,h)}i=i.sibling}}function Ua(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=e,l=i,h=l.flags;switch(l.tag){case 22:Ua(r,l),h&2048&&Gu(l.alternate,l);break;case 24:Ua(r,l),h&2048&&Ou(l.alternate,l);break;default:Ua(r,l)}i=i.sibling}}var La=8192;function Rs(e){if(e.subtreeFlags&La)for(e=e.child;e!==null;)Xp(e),e=e.sibling}function Xp(e){switch(e.tag){case 26:Rs(e),e.flags&La&&e.memoizedState!==null&&rx(hi,e.memoizedState,e.memoizedProps);break;case 5:Rs(e);break;case 3:case 4:var i=hi;hi=gl(e.stateNode.containerInfo),Rs(e),hi=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=La,La=16777216,Rs(e),La=i):Rs(e));break;default:Rs(e)}}function jp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function ka(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];he=l,Fp(l,e)}jp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ip(e),e=e.sibling}function Ip(e){switch(e.tag){case 0:case 11:case 15:ka(e),e.flags&2048&&en(9,e,e.return);break;case 3:ka(e);break;case 12:ka(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,nl(e)):ka(e);break;default:ka(e)}}function nl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var l=i[r];he=l,Fp(l,e)}jp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:en(8,i,i.return),nl(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,nl(i));break;default:nl(i)}e=e.sibling}}function Fp(e,i){for(;he!==null;){var r=he;switch(r.tag){case 0:case 11:case 15:en(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:va(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,he=l;else t:for(r=e;he!==null;){l=he;var h=l.sibling,d=l.return;if(Lp(l),l===r){he=null;break t}if(h!==null){h.return=d,he=h;break t}he=d}}}var Sv={getCacheForType:function(e){var i=Se(le),r=i.data.get(e);return r===void 0&&(r=e(),i.data.set(e,r)),r}},Av=typeof WeakMap=="function"?WeakMap:Map,Bt=0,jt=null,xt=null,Et=0,Ut=0,Fe=null,an=!1,Gs=!1,zu=!1,Hi=0,Zt=0,rn=0,Bn=0,Du=0,si=0,Os=0,Na=null,Ue=null,Bu=!1,Uu=0,sl=1/0,al=null,ln=null,me=0,on=null,zs=null,Ds=0,Lu=0,ku=null,qp=null,Ha=0,Nu=null;function qe(){if((Bt&2)!==0&&Et!==0)return Et&-Et;if(x.T!==null){var e=xs;return e!==0?e:Fu()}return of()}function Vp(){si===0&&(si=(Et&536870912)===0||zt?sf():536870912);var e=ni.current;return e!==null&&(e.flags|=32),si}function Ve(e,i,r){(e===jt&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)&&(Bs(e,0),un(e,Et,si,!1)),na(e,r),((Bt&2)===0||e!==jt)&&(e===jt&&((Bt&2)===0&&(Bn|=r),Zt===4&&un(e,Et,si,!1)),_i(e))}function $p(e,i,r){if((Bt&6)!==0)throw Error(s(327));var l=!r&&(i&124)===0&&(i&e.expiredLanes)===0||ia(e,i),h=l?Mv(e,i):Yu(e,i,!0),d=l;do{if(h===0){Gs&&!l&&un(e,i,0,!1);break}else{if(r=e.current.alternate,d&&!Tv(r)){h=Yu(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;t:{var S=e;h=Na;var C=S.current.memoizedState.isDehydrated;if(C&&(Bs(S,b).flags|=256),b=Yu(S,b,!1),b!==2){if(zu&&!C){S.errorRecoveryDisabledLanes|=d,Bn|=d,h=4;break t}d=Ue,Ue=h,d!==null&&(Ue===null?Ue=d:Ue.push.apply(Ue,d))}h=b}if(d=!1,h!==2)continue}}if(h===1){Bs(e,0),un(e,i,0,!0);break}t:{switch(l=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:un(l,i,si,!an);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Uu+300-Ne(),10<h)){if(un(l,i,si,!an),mr(l,0,!0)!==0)break t;l.timeoutHandle=Ag(Zp.bind(null,l,r,Ue,al,Bu,i,si,Bn,Os,an,d,2,-0,0),h);break t}Zp(l,r,Ue,al,Bu,i,si,Bn,Os,an,d,0,-0,0)}}break}while(!0);_i(e)}function Zp(e,i,r,l,h,d,b,S,C,H,I,Q,P,X){if(e.timeoutHandle=-1,Q=i.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&(qa={stylesheets:null,count:0,unsuspend:ax},Xp(i),Q=lx(),Q!==null)){e.cancelPendingCommit=Q(ig.bind(null,e,i,d,r,l,h,b,S,C,I,1,P,X)),un(e,d,b,!H);return}ig(e,i,d,r,l,h,b,S,C)}function Tv(e){for(var i=e;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var h=r[l],d=h.getSnapshot;h=h.value;try{if(!Ye(d(),h))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function un(e,i,r,l){i&=~Du,i&=~Bn,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var h=i;0<h;){var d=31-Pe(h),b=1<<d;l[d]=-1,h&=~b}r!==0&&rf(e,r,i)}function rl(){return(Bt&6)===0?(Pa(0),!1):!0}function Hu(){if(xt!==null){if(Ut===0)var e=xt.return;else e=xt,Oi=En=null,iu(e),Ms=null,Ga=0,e=xt;for(;e!==null;)Ep(e.alternate,e),e=e.return;xt=null}}function Bs(e,i){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Xv(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Hu(),jt=e,xt=r=Ei(e.current,null),Et=i,Ut=0,Fe=null,an=!1,Gs=ia(e,i),zu=!1,Os=si=Du=Bn=rn=Zt=0,Ue=Na=null,Bu=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var h=31-Pe(l),d=1<<h;i|=e[h],l&=~d}return Hi=i,Er(),r}function Qp(e,i){yt=null,x.H=Vr,i===_a||i===kr?(i=dd(),Ut=3):i===cd?(i=dd(),Ut=4):Ut=i===pp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Fe=i,xt===null&&(Zt=1,Wr(e,Je(i,e.current)))}function Kp(){var e=x.H;return x.H=Vr,e===null?Vr:e}function Wp(){var e=x.A;return x.A=Sv,e}function Pu(){Zt=4,an||(Et&4194048)!==Et&&ni.current!==null||(Gs=!0),(rn&134217727)===0&&(Bn&134217727)===0||jt===null||un(jt,Et,si,!1)}function Yu(e,i,r){var l=Bt;Bt|=2;var h=Kp(),d=Wp();(jt!==e||Et!==i)&&(al=null,Bs(e,i)),i=!1;var b=Zt;t:do try{if(Ut!==0&&xt!==null){var S=xt,C=Fe;switch(Ut){case 8:Hu(),b=6;break t;case 3:case 2:case 9:case 6:ni.current===null&&(i=!0);var H=Ut;if(Ut=0,Fe=null,Us(e,S,C,H),r&&Gs){b=0;break t}break;default:H=Ut,Ut=0,Fe=null,Us(e,S,C,H)}}wv(),b=Zt;break}catch(I){Qp(e,I)}while(!0);return i&&e.shellSuspendCounter++,Oi=En=null,Bt=l,x.H=h,x.A=d,xt===null&&(jt=null,Et=0,Er()),b}function wv(){for(;xt!==null;)Jp(xt)}function Mv(e,i){var r=Bt;Bt|=2;var l=Kp(),h=Wp();jt!==e||Et!==i?(al=null,sl=Ne()+500,Bs(e,i)):Gs=ia(e,i);t:do try{if(Ut!==0&&xt!==null){i=xt;var d=Fe;e:switch(Ut){case 1:Ut=0,Fe=null,Us(e,i,d,1);break;case 2:case 9:if(hd(d)){Ut=0,Fe=null,tg(i);break}i=function(){Ut!==2&&Ut!==9||jt!==e||(Ut=7),_i(e)},d.then(i,i);break t;case 3:Ut=7;break t;case 4:Ut=5;break t;case 7:hd(d)?(Ut=0,Fe=null,tg(i)):(Ut=0,Fe=null,Us(e,i,d,7));break;case 5:var b=null;switch(xt.tag){case 26:b=xt.memoizedState;case 5:case 27:var S=xt;if(!b||Ug(b)){Ut=0,Fe=null;var C=S.sibling;if(C!==null)xt=C;else{var H=S.return;H!==null?(xt=H,ll(H)):xt=null}break e}}Ut=0,Fe=null,Us(e,i,d,5);break;case 6:Ut=0,Fe=null,Us(e,i,d,6);break;case 8:Hu(),Zt=6;break t;default:throw Error(s(462))}}Cv();break}catch(I){Qp(e,I)}while(!0);return Oi=En=null,x.H=l,x.A=h,Bt=r,xt!==null?0:(jt=null,Et=0,Er(),Zt)}function Cv(){for(;xt!==null&&!mt();)Jp(xt)}function Jp(e){var i=Mp(e.alternate,e,Hi);e.memoizedProps=e.pendingProps,i===null?ll(e):xt=i}function tg(e){var i=e,r=i.alternate;switch(i.tag){case 15:case 0:i=xp(r,i,i.pendingProps,i.type,void 0,Et);break;case 11:i=xp(r,i,i.pendingProps,i.type.render,i.ref,Et);break;case 5:iu(i);default:Ep(r,i),i=xt=ed(i,Hi),i=Mp(r,i,Hi)}e.memoizedProps=e.pendingProps,i===null?ll(e):xt=i}function Us(e,i,r,l){Oi=En=null,iu(i),Ms=null,Ga=0;var h=i.return;try{if(mv(e,h,i,r,Et)){Zt=1,Wr(e,Je(r,e.current)),xt=null;return}}catch(d){if(h!==null)throw xt=h,d;Zt=1,Wr(e,Je(r,e.current)),xt=null;return}i.flags&32768?(zt||l===1?e=!0:Gs||(Et&536870912)!==0?e=!1:(an=e=!0,(l===2||l===9||l===3||l===6)&&(l=ni.current,l!==null&&l.tag===13&&(l.flags|=16384))),eg(i,e)):ll(i)}function ll(e){var i=e;do{if((i.flags&32768)!==0){eg(i,an);return}e=i.return;var r=bv(i.alternate,i,Hi);if(r!==null){xt=r;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=e}while(i!==null);Zt===0&&(Zt=5)}function eg(e,i){do{var r=vv(e.alternate,e);if(r!==null){r.flags&=32767,xt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(e=e.sibling,e!==null)){xt=e;return}xt=e=r}while(e!==null);Zt=6,xt=null}function ig(e,i,r,l,h,d,b,S,C){e.cancelPendingCommit=null;do ol();while(me!==0);if((Bt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Oo,ab(e,r,d,b,S,C),e===jt&&(xt=jt=null,Et=0),zs=i,on=e,Ds=r,Lu=d,ku=h,qp=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ov(dr,function(){return lg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=x.T,x.T=null,h=M.p,M.p=2,b=Bt,Bt|=4;try{xv(e,i,r)}finally{Bt=b,M.p=h,x.T=l}}me=1,ng(),sg(),ag()}}function ng(){if(me===1){me=0;var e=on,i=zs,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=x.T,x.T=null;var l=M.p;M.p=2;var h=Bt;Bt|=4;try{Hp(i,e);var d=Ju,b=Ff(e.containerInfo),S=d.focusedElem,C=d.selectionRange;if(b!==S&&S&&S.ownerDocument&&If(S.ownerDocument.documentElement,S)){if(C!==null&&Mo(S)){var H=C.start,I=C.end;if(I===void 0&&(I=H),"selectionStart"in S)S.selectionStart=H,S.selectionEnd=Math.min(I,S.value.length);else{var Q=S.ownerDocument||document,P=Q&&Q.defaultView||window;if(P.getSelection){var X=P.getSelection(),ht=S.textContent.length,ut=Math.min(C.start,ht),Ht=C.end===void 0?ut:Math.min(C.end,ht);!X.extend&&ut>Ht&&(b=Ht,Ht=ut,ut=b);var D=jf(S,ut),O=jf(S,Ht);if(D&&O&&(X.rangeCount!==1||X.anchorNode!==D.node||X.anchorOffset!==D.offset||X.focusNode!==O.node||X.focusOffset!==O.offset)){var k=Q.createRange();k.setStart(D.node,D.offset),X.removeAllRanges(),ut>Ht?(X.addRange(k),X.extend(O.node,O.offset)):(k.setEnd(O.node,O.offset),X.addRange(k))}}}}for(Q=[],X=S;X=X.parentNode;)X.nodeType===1&&Q.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Q.length;S++){var F=Q[S];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}xl=!!Wu,Ju=Wu=null}finally{Bt=h,M.p=l,x.T=r}}e.current=i,me=2}}function sg(){if(me===2){me=0;var e=on,i=zs,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=x.T,x.T=null;var l=M.p;M.p=2;var h=Bt;Bt|=4;try{Up(e,i.alternate,i)}finally{Bt=h,M.p=l,x.T=r}}me=3}}function ag(){if(me===4||me===3){me=0,Ct();var e=on,i=zs,r=Ds,l=qp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?me=5:(me=0,zs=on=null,rg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(ln=null),so(r),i=i.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(ea,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=x.T,h=M.p,M.p=2,x.T=null;try{for(var d=e.onRecoverableError,b=0;b<l.length;b++){var S=l[b];d(S.value,{componentStack:S.stack})}}finally{x.T=i,M.p=h}}(Ds&3)!==0&&ol(),_i(e),h=e.pendingLanes,(r&4194090)!==0&&(h&42)!==0?e===Nu?Ha++:(Ha=0,Nu=e):Ha=0,Pa(0)}}function rg(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,va(i)))}function ol(e){return ng(),sg(),ag(),lg()}function lg(){if(me!==5)return!1;var e=on,i=Lu;Lu=0;var r=so(Ds),l=x.T,h=M.p;try{M.p=32>r?32:r,x.T=null,r=ku,ku=null;var d=on,b=Ds;if(me=0,zs=on=null,Ds=0,(Bt&6)!==0)throw Error(s(331));var S=Bt;if(Bt|=4,Ip(d.current),Yp(d,d.current,b,r),Bt=S,Pa(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(ea,d)}catch{}return!0}finally{M.p=h,x.T=l,rg(e,i)}}function og(e,i,r){i=Je(r,i),i=mu(e.stateNode,i,2),e=Ki(e,i,2),e!==null&&(na(e,2),_i(e))}function Pt(e,i,r){if(e.tag===3)og(e,e,r);else for(;i!==null;){if(i.tag===3){og(i,e,r);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ln===null||!ln.has(l))){e=Je(r,e),r=fp(2),l=Ki(i,r,2),l!==null&&(dp(r,l,i,e),na(l,2),_i(l));break}}i=i.return}}function Xu(e,i,r){var l=e.pingCache;if(l===null){l=e.pingCache=new Av;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(r)||(zu=!0,h.add(r),e=Ev.bind(null,e,i,r),i.then(e,e))}function Ev(e,i,r){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,jt===e&&(Et&r)===r&&(Zt===4||Zt===3&&(Et&62914560)===Et&&300>Ne()-Uu?(Bt&2)===0&&Bs(e,0):Du|=r,Os===Et&&(Os=0)),_i(e)}function ug(e,i){i===0&&(i=af()),e=ms(e,i),e!==null&&(na(e,i),_i(e))}function Rv(e){var i=e.memoizedState,r=0;i!==null&&(r=i.retryLane),ug(e,r)}function Gv(e,i){var r=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),ug(e,r)}function Ov(e,i){return Re(e,i)}var ul=null,Ls=null,ju=!1,cl=!1,Iu=!1,Un=0;function _i(e){e!==Ls&&e.next===null&&(Ls===null?ul=Ls=e:Ls=Ls.next=e),cl=!0,ju||(ju=!0,Dv())}function Pa(e,i){if(!Iu&&cl){Iu=!0;do for(var r=!1,l=ul;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var b=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-Pe(42|e)+1)-1,d&=h&~(b&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(r=!0,dg(l,d))}else d=Et,d=mr(l,l===jt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ia(l,d)||(r=!0,dg(l,d));l=l.next}while(r);Iu=!1}}function zv(){cg()}function cg(){cl=ju=!1;var e=0;Un!==0&&(Yv()&&(e=Un),Un=0);for(var i=Ne(),r=null,l=ul;l!==null;){var h=l.next,d=hg(l,i);d===0?(l.next=null,r===null?ul=h:r.next=h,h===null&&(Ls=r)):(r=l,(e!==0||(d&3)!==0)&&(cl=!0)),l=h}Pa(e)}function hg(e,i){for(var r=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var b=31-Pe(d),S=1<<b,C=h[b];C===-1?((S&r)===0||(S&l)!==0)&&(h[b]=sb(S,i)):C<=i&&(e.expiredLanes|=S),d&=~S}if(i=jt,r=Et,r=mr(e,e===i?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,r===0||e===i&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ge(l),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||ia(e,r)){if(i=r&-r,i===e.callbackPriority)return i;switch(l!==null&&Ge(l),so(r)){case 2:case 8:r=ef;break;case 32:r=dr;break;case 268435456:r=nf;break;default:r=dr}return l=fg.bind(null,e),r=Re(r,l),e.callbackPriority=i,e.callbackNode=r,i}return l!==null&&l!==null&&Ge(l),e.callbackPriority=2,e.callbackNode=null,2}function fg(e,i){if(me!==0&&me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(ol()&&e.callbackNode!==r)return null;var l=Et;return l=mr(e,e===jt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:($p(e,l,i),hg(e,Ne()),e.callbackNode!=null&&e.callbackNode===r?fg.bind(null,e):null)}function dg(e,i){if(ol())return null;$p(e,i,!0)}function Dv(){jv(function(){(Bt&6)!==0?Re(eo,zv):cg()})}function Fu(){return Un===0&&(Un=sf()),Un}function pg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:_r(""+e)}function gg(e,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,e.id&&r.setAttribute("form",e.id),i.parentNode.insertBefore(r,i),e=new FormData(e),r.parentNode.removeChild(r),e}function Bv(e,i,r,l,h){if(i==="submit"&&r&&r.stateNode===h){var d=pg((h[Oe]||null).action),b=l.submitter;b&&(i=(i=b[Oe]||null)?pg(i.formAction):b.getAttribute("formAction"),i!==null&&(d=i,b=null));var S=new wr("action","action",null,l,h);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Un!==0){var C=b?gg(h,b):new FormData(h);hu(r,{pending:!0,data:C,method:h.method,action:d},null,C)}}else typeof d=="function"&&(S.preventDefault(),C=b?gg(h,b):new FormData(h),hu(r,{pending:!0,data:C,method:h.method,action:d},d,C))},currentTarget:h}]})}}for(var qu=0;qu<Go.length;qu++){var Vu=Go[qu],Uv=Vu.toLowerCase(),Lv=Vu[0].toUpperCase()+Vu.slice(1);ci(Uv,"on"+Lv)}ci($f,"onAnimationEnd"),ci(Zf,"onAnimationIteration"),ci(Qf,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(Jb,"onTransitionRun"),ci(tv,"onTransitionStart"),ci(ev,"onTransitionCancel"),ci(Kf,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ya));function mg(e,i){i=(i&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],h=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var b=l.length-1;0<=b;b--){var S=l[b],C=S.instance,H=S.currentTarget;if(S=S.listener,C!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=H;try{d(h)}catch(I){Kr(I)}h.currentTarget=null,d=C}else for(b=0;b<l.length;b++){if(S=l[b],C=S.instance,H=S.currentTarget,S=S.listener,C!==d&&h.isPropagationStopped())break t;d=S,h.currentTarget=H;try{d(h)}catch(I){Kr(I)}h.currentTarget=null,d=C}}}}function _t(e,i){var r=i[ao];r===void 0&&(r=i[ao]=new Set);var l=e+"__bubble";r.has(l)||(yg(i,e,2,!1),r.add(l))}function $u(e,i,r){var l=0;i&&(l|=4),yg(r,e,l,i)}var hl="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[hl]){e[hl]=!0,cf.forEach(function(r){r!=="selectionchange"&&(kv.has(r)||$u(r,!1,e),$u(r,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[hl]||(i[hl]=!0,$u("selectionchange",!1,i))}}function yg(e,i,r,l){switch(Yg(i)){case 2:var h=cx;break;case 8:h=hx;break;default:h=uc}r=h.bind(null,i,r,e),h=void 0,!yo||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(i,r,{capture:!0,passive:h}):e.addEventListener(i,r,!0):h!==void 0?e.addEventListener(i,r,{passive:h}):e.addEventListener(i,r,!1)}function Qu(e,i,r,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var S=l.stateNode.containerInfo;if(S===h)break;if(b===4)for(b=l.return;b!==null;){var C=b.tag;if((C===3||C===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;S!==null;){if(b=ns(S),b===null)return;if(C=b.tag,C===5||C===6||C===26||C===27){l=d=b;continue t}S=S.parentNode}}l=l.return}Tf(function(){var H=d,I=go(r),Q=[];t:{var P=Wf.get(e);if(P!==void 0){var X=wr,ht=e;switch(e){case"keypress":if(Ar(r)===0)break t;case"keydown":case"keyup":X=Ob;break;case"focusin":ht="focus",X=_o;break;case"focusout":ht="blur",X=_o;break;case"beforeblur":case"afterblur":X=_o;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Bb;break;case $f:case Zf:case Qf:X=Sb;break;case Kf:X=Lb;break;case"scroll":case"scrollend":X=yb;break;case"wheel":X=Nb;break;case"copy":case"cut":case"paste":X=Tb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Rf;break;case"toggle":case"beforetoggle":X=Pb}var ut=(i&4)!==0,Ht=!ut&&(e==="scroll"||e==="scrollend"),D=ut?P!==null?P+"Capture":null:P;ut=[];for(var O=H,k;O!==null;){var F=O;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||D===null||(F=ra(O,D),F!=null&&ut.push(Xa(O,F,k))),Ht)break;O=O.return}0<ut.length&&(P=new X(P,ht,null,r,I),Q.push({event:P,listeners:ut}))}}if((i&7)===0){t:{if(P=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",P&&r!==po&&(ht=r.relatedTarget||r.fromElement)&&(ns(ht)||ht[is]))break t;if((X||P)&&(P=I.window===I?I:(P=I.ownerDocument)?P.defaultView||P.parentWindow:window,X?(ht=r.relatedTarget||r.toElement,X=H,ht=ht?ns(ht):null,ht!==null&&(Ht=u(ht),ut=ht.tag,ht!==Ht||ut!==5&&ut!==27&&ut!==6)&&(ht=null)):(X=null,ht=H),X!==ht)){if(ut=Cf,F="onMouseLeave",D="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(ut=Rf,F="onPointerLeave",D="onPointerEnter",O="pointer"),Ht=X==null?P:aa(X),k=ht==null?P:aa(ht),P=new ut(F,O+"leave",X,r,I),P.target=Ht,P.relatedTarget=k,F=null,ns(I)===H&&(ut=new ut(D,O+"enter",ht,r,I),ut.target=k,ut.relatedTarget=Ht,F=ut),Ht=F,X&&ht)e:{for(ut=X,D=ht,O=0,k=ut;k;k=ks(k))O++;for(k=0,F=D;F;F=ks(F))k++;for(;0<O-k;)ut=ks(ut),O--;for(;0<k-O;)D=ks(D),k--;for(;O--;){if(ut===D||D!==null&&ut===D.alternate)break e;ut=ks(ut),D=ks(D)}ut=null}else ut=null;X!==null&&bg(Q,P,X,ut,!1),ht!==null&&Ht!==null&&bg(Q,Ht,ht,ut,!0)}}t:{if(P=H?aa(H):window,X=P.nodeName&&P.nodeName.toLowerCase(),X==="select"||X==="input"&&P.type==="file")var it=kf;else if(Uf(P))if(Nf)it=Qb;else{it=$b;var vt=Vb}else X=P.nodeName,!X||X.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?H&&fo(H.elementType)&&(it=kf):it=Zb;if(it&&(it=it(e,H))){Lf(Q,it,r,I);break t}vt&&vt(e,P,H),e==="focusout"&&H&&P.type==="number"&&H.memoizedProps.value!=null&&ho(P,"number",P.value)}switch(vt=H?aa(H):window,e){case"focusin":(Uf(vt)||vt.contentEditable==="true")&&(ds=vt,Co=H,pa=null);break;case"focusout":pa=Co=ds=null;break;case"mousedown":Eo=!0;break;case"contextmenu":case"mouseup":case"dragend":Eo=!1,qf(Q,r,I);break;case"selectionchange":if(Wb)break;case"keydown":case"keyup":qf(Q,r,I)}var lt;if(Ao)t:{switch(e){case"compositionstart":var ct="onCompositionStart";break t;case"compositionend":ct="onCompositionEnd";break t;case"compositionupdate":ct="onCompositionUpdate";break t}ct=void 0}else fs?Df(e,r)&&(ct="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ct="onCompositionStart");ct&&(Gf&&r.locale!=="ko"&&(fs||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&fs&&(lt=wf()):(Vi=I,bo="value"in Vi?Vi.value:Vi.textContent,fs=!0)),vt=fl(H,ct),0<vt.length&&(ct=new Ef(ct,e,null,r,I),Q.push({event:ct,listeners:vt}),lt?ct.data=lt:(lt=Bf(r),lt!==null&&(ct.data=lt)))),(lt=Xb?jb(e,r):Ib(e,r))&&(ct=fl(H,"onBeforeInput"),0<ct.length&&(vt=new Ef("onBeforeInput","beforeinput",null,r,I),Q.push({event:vt,listeners:ct}),vt.data=lt)),Bv(Q,e,H,r,I)}mg(Q,i)})}function Xa(e,i,r){return{instance:e,listener:i,currentTarget:r}}function fl(e,i){for(var r=i+"Capture",l=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ra(e,r),h!=null&&l.unshift(Xa(e,h,d)),h=ra(e,i),h!=null&&l.push(Xa(e,h,d))),e.tag===3)return l;e=e.return}return[]}function ks(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bg(e,i,r,l,h){for(var d=i._reactName,b=[];r!==null&&r!==l;){var S=r,C=S.alternate,H=S.stateNode;if(S=S.tag,C!==null&&C===l)break;S!==5&&S!==26&&S!==27||H===null||(C=H,h?(H=ra(r,d),H!=null&&b.unshift(Xa(r,H,C))):h||(H=ra(r,d),H!=null&&b.push(Xa(r,H,C)))),r=r.return}b.length!==0&&e.push({event:i,listeners:b})}var Nv=/\r\n?/g,Hv=/\u0000|\uFFFD/g;function vg(e){return(typeof e=="string"?e:""+e).replace(Nv,`
`).replace(Hv,"")}function xg(e,i){return i=vg(i),vg(e)===i}function dl(){}function Nt(e,i,r,l,h,d){switch(r){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||us(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&us(e,""+l);break;case"className":br(e,"class",l);break;case"tabIndex":br(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":br(e,r,l);break;case"style":Sf(e,l,d);break;case"data":if(i!=="object"){br(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||r!=="href")){e.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=_r(""+l),e.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(r==="formAction"?(i!=="input"&&Nt(e,i,"name",h.name,h,null),Nt(e,i,"formEncType",h.formEncType,h,null),Nt(e,i,"formMethod",h.formMethod,h,null),Nt(e,i,"formTarget",h.formTarget,h,null)):(Nt(e,i,"encType",h.encType,h,null),Nt(e,i,"method",h.method,h,null),Nt(e,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(r);break}l=_r(""+l),e.setAttribute(r,l);break;case"onClick":l!=null&&(e.onclick=dl);break;case"onScroll":l!=null&&_t("scroll",e);break;case"onScrollEnd":l!=null&&_t("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}r=_r(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""+l):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":l===!0?e.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(r,l):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(r,l):e.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(r):e.setAttribute(r,l);break;case"popover":_t("beforetoggle",e),_t("toggle",e),yr(e,"popover",l);break;case"xlinkActuate":Mi(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mi(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mi(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mi(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mi(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mi(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mi(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":yr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=gb.get(r)||r,yr(e,r,l))}}function Ku(e,i,r,l,h,d){switch(r){case"style":Sf(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof l=="string"?us(e,l):(typeof l=="number"||typeof l=="bigint")&&us(e,""+l);break;case"onScroll":l!=null&&_t("scroll",e);break;case"onScrollEnd":l!=null&&_t("scrollend",e);break;case"onClick":l!=null&&(e.onclick=dl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hf.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),i=r.slice(2,h?r.length-7:void 0),d=e[Oe]||null,d=d!=null?d[r]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(i,l,h);break t}r in e?e[r]=l:l===!0?e.setAttribute(r,""):yr(e,r,l)}}}function ye(e,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",e),_t("load",e);var l=!1,h=!1,d;for(d in r)if(r.hasOwnProperty(d)){var b=r[d];if(b!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Nt(e,i,d,b,r,null)}}h&&Nt(e,i,"srcSet",r.srcSet,r,null),l&&Nt(e,i,"src",r.src,r,null);return;case"input":_t("invalid",e);var S=d=b=h=null,C=null,H=null;for(l in r)if(r.hasOwnProperty(l)){var I=r[l];if(I!=null)switch(l){case"name":h=I;break;case"type":b=I;break;case"checked":C=I;break;case"defaultChecked":H=I;break;case"value":d=I;break;case"defaultValue":S=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(137,i));break;default:Nt(e,i,l,I,r,null)}}bf(e,d,S,C,H,b,h,!1),vr(e);return;case"select":_t("invalid",e),l=b=d=null;for(h in r)if(r.hasOwnProperty(h)&&(S=r[h],S!=null))switch(h){case"value":d=S;break;case"defaultValue":b=S;break;case"multiple":l=S;default:Nt(e,i,h,S,r,null)}i=d,r=b,e.multiple=!!l,i!=null?os(e,!!l,i,!1):r!=null&&os(e,!!l,r,!0);return;case"textarea":_t("invalid",e),d=h=l=null;for(b in r)if(r.hasOwnProperty(b)&&(S=r[b],S!=null))switch(b){case"value":l=S;break;case"defaultValue":h=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Nt(e,i,b,S,r,null)}xf(e,l,h,d),vr(e);return;case"option":for(C in r)if(r.hasOwnProperty(C)&&(l=r[C],l!=null))switch(C){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Nt(e,i,C,l,r,null)}return;case"dialog":_t("beforetoggle",e),_t("toggle",e),_t("cancel",e),_t("close",e);break;case"iframe":case"object":_t("load",e);break;case"video":case"audio":for(l=0;l<Ya.length;l++)_t(Ya[l],e);break;case"image":_t("error",e),_t("load",e);break;case"details":_t("toggle",e);break;case"embed":case"source":case"link":_t("error",e),_t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in r)if(r.hasOwnProperty(H)&&(l=r[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Nt(e,i,H,l,r,null)}return;default:if(fo(i)){for(I in r)r.hasOwnProperty(I)&&(l=r[I],l!==void 0&&Ku(e,i,I,l,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(l=r[S],l!=null&&Nt(e,i,S,l,r,null))}function Pv(e,i,r,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,b=null,S=null,C=null,H=null,I=null;for(X in r){var Q=r[X];if(r.hasOwnProperty(X)&&Q!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":C=Q;default:l.hasOwnProperty(X)||Nt(e,i,X,null,l,Q)}}for(var P in l){var X=l[P];if(Q=r[P],l.hasOwnProperty(P)&&(X!=null||Q!=null))switch(P){case"type":d=X;break;case"name":h=X;break;case"checked":H=X;break;case"defaultChecked":I=X;break;case"value":b=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:X!==Q&&Nt(e,i,P,X,l,Q)}}co(e,b,S,C,H,I,d,h);return;case"select":X=b=S=P=null;for(d in r)if(C=r[d],r.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":X=C;default:l.hasOwnProperty(d)||Nt(e,i,d,null,l,C)}for(h in l)if(d=l[h],C=r[h],l.hasOwnProperty(h)&&(d!=null||C!=null))switch(h){case"value":P=d;break;case"defaultValue":S=d;break;case"multiple":b=d;default:d!==C&&Nt(e,i,h,d,l,C)}i=S,r=b,l=X,P!=null?os(e,!!r,P,!1):!!l!=!!r&&(i!=null?os(e,!!r,i,!0):os(e,!!r,r?[]:"",!1));return;case"textarea":X=P=null;for(S in r)if(h=r[S],r.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Nt(e,i,S,null,l,h)}for(b in l)if(h=l[b],d=r[b],l.hasOwnProperty(b)&&(h!=null||d!=null))switch(b){case"value":P=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Nt(e,i,b,h,l,d)}vf(e,P,X);return;case"option":for(var ht in r)if(P=r[ht],r.hasOwnProperty(ht)&&P!=null&&!l.hasOwnProperty(ht))switch(ht){case"selected":e.selected=!1;break;default:Nt(e,i,ht,null,l,P)}for(C in l)if(P=l[C],X=r[C],l.hasOwnProperty(C)&&P!==X&&(P!=null||X!=null))switch(C){case"selected":e.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:Nt(e,i,C,P,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in r)P=r[ut],r.hasOwnProperty(ut)&&P!=null&&!l.hasOwnProperty(ut)&&Nt(e,i,ut,null,l,P);for(H in l)if(P=l[H],X=r[H],l.hasOwnProperty(H)&&P!==X&&(P!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,i));break;default:Nt(e,i,H,P,l,X)}return;default:if(fo(i)){for(var Ht in r)P=r[Ht],r.hasOwnProperty(Ht)&&P!==void 0&&!l.hasOwnProperty(Ht)&&Ku(e,i,Ht,void 0,l,P);for(I in l)P=l[I],X=r[I],!l.hasOwnProperty(I)||P===X||P===void 0&&X===void 0||Ku(e,i,I,P,l,X);return}}for(var D in r)P=r[D],r.hasOwnProperty(D)&&P!=null&&!l.hasOwnProperty(D)&&Nt(e,i,D,null,l,P);for(Q in l)P=l[Q],X=r[Q],!l.hasOwnProperty(Q)||P===X||P==null&&X==null||Nt(e,i,Q,P,l,X)}var Wu=null,Ju=null;function pl(e){return e.nodeType===9?e:e.ownerDocument}function _g(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sg(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function tc(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ec=null;function Yv(){var e=window.event;return e&&e.type==="popstate"?e===ec?!1:(ec=e,!0):(ec=null,!1)}var Ag=typeof setTimeout=="function"?setTimeout:void 0,Xv=typeof clearTimeout=="function"?clearTimeout:void 0,Tg=typeof Promise=="function"?Promise:void 0,jv=typeof queueMicrotask=="function"?queueMicrotask:typeof Tg<"u"?function(e){return Tg.resolve(null).then(e).catch(Iv)}:Ag;function Iv(e){setTimeout(function(){throw e})}function cn(e){return e==="head"}function wg(e,i){var r=i,l=0,h=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(0<l&&8>l){r=l;var b=e.ownerDocument;if(r&1&&ja(b.documentElement),r&2&&ja(b.body),r&4)for(r=b.head,ja(r),b=r.firstChild;b;){var S=b.nextSibling,C=b.nodeName;b[sa]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=S}}if(h===0){e.removeChild(d),Ka(i);return}h--}else r==="$"||r==="$?"||r==="$!"?h++:l=r.charCodeAt(0)-48;else l=0;r=d}while(r);Ka(i)}function ic(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ic(r),ro(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Fv(e,i,r,l){for(;e.nodeType===1;){var h=r;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[sa])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=fi(e.nextSibling),e===null)break}return null}function qv(e,i,r){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=fi(e.nextSibling),e===null))return null;return e}function nc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Vv(e,i){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")i();else{var l=function(){i(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function fi(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var sc=null;function Mg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(i===0)return e;i--}else r==="/$"&&i++}e=e.previousSibling}return null}function Cg(e,i,r){switch(i=pl(r),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ja(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ro(e)}var ai=new Map,Eg=new Set;function gl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Pi=M.d;M.d={f:$v,r:Zv,D:Qv,C:Kv,L:Wv,m:Jv,X:ex,S:tx,M:ix};function $v(){var e=Pi.f(),i=rl();return e||i}function Zv(e){var i=ss(e);i!==null&&i.tag===5&&i.type==="form"?$d(i):Pi.r(e)}var Ns=typeof document>"u"?null:document;function Rg(e,i,r){var l=Ns;if(l&&typeof i=="string"&&i){var h=We(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),Eg.has(h)||(Eg.add(h),e={rel:e,crossOrigin:r,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),ye(i,"link",e),ue(i),l.head.appendChild(i)))}}function Qv(e){Pi.D(e),Rg("dns-prefetch",e,null)}function Kv(e,i){Pi.C(e,i),Rg("preconnect",e,i)}function Wv(e,i,r){Pi.L(e,i,r);var l=Ns;if(l&&e&&i){var h='link[rel="preload"][as="'+We(i)+'"]';i==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+We(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+We(r.imageSizes)+'"]')):h+='[href="'+We(e)+'"]';var d=h;switch(i){case"style":d=Hs(e);break;case"script":d=Ps(e)}ai.has(d)||(e=m({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:e,as:i},r),ai.set(d,e),l.querySelector(h)!==null||i==="style"&&l.querySelector(Ia(d))||i==="script"&&l.querySelector(Fa(d))||(i=l.createElement("link"),ye(i,"link",e),ue(i),l.head.appendChild(i)))}}function Jv(e,i){Pi.m(e,i);var r=Ns;if(r&&e){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+We(l)+'"][href="'+We(e)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ps(e)}if(!ai.has(d)&&(e=m({rel:"modulepreload",href:e},i),ai.set(d,e),r.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Fa(d)))return}l=r.createElement("link"),ye(l,"link",e),ue(l),r.head.appendChild(l)}}}function tx(e,i,r){Pi.S(e,i,r);var l=Ns;if(l&&e){var h=as(l).hoistableStyles,d=Hs(e);i=i||"default";var b=h.get(d);if(!b){var S={loading:0,preload:null};if(b=l.querySelector(Ia(d)))S.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":i},r),(r=ai.get(d))&&ac(e,r);var C=b=l.createElement("link");ue(C),ye(C,"link",e),C._p=new Promise(function(H,I){C.onload=H,C.onerror=I}),C.addEventListener("load",function(){S.loading|=1}),C.addEventListener("error",function(){S.loading|=2}),S.loading|=4,ml(b,i,l)}b={type:"stylesheet",instance:b,count:1,state:S},h.set(d,b)}}}function ex(e,i){Pi.X(e,i);var r=Ns;if(r&&e){var l=as(r).hoistableScripts,h=Ps(e),d=l.get(h);d||(d=r.querySelector(Fa(h)),d||(e=m({src:e,async:!0},i),(i=ai.get(h))&&rc(e,i),d=r.createElement("script"),ue(d),ye(d,"link",e),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function ix(e,i){Pi.M(e,i);var r=Ns;if(r&&e){var l=as(r).hoistableScripts,h=Ps(e),d=l.get(h);d||(d=r.querySelector(Fa(h)),d||(e=m({src:e,async:!0,type:"module"},i),(i=ai.get(h))&&rc(e,i),d=r.createElement("script"),ue(d),ye(d,"link",e),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Gg(e,i,r,l){var h=(h=tt.current)?gl(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Hs(r.href),r=as(h).hoistableStyles,l=r.get(i),l||(l={type:"style",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Hs(r.href);var d=as(h).hoistableStyles,b=d.get(e);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,b),(d=h.querySelector(Ia(e)))&&!d._p&&(b.instance=d,b.state.loading=5),ai.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ai.set(e,r),d||nx(h,e,r,b.state))),i&&l===null)throw Error(s(528,""));return b}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ps(r),r=as(h).hoistableScripts,l=r.get(i),l||(l={type:"script",instance:null,count:0,state:null},r.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Hs(e){return'href="'+We(e)+'"'}function Ia(e){return'link[rel="stylesheet"]['+e+"]"}function Og(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function nx(e,i,r,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ye(i,"link",r),ue(i),e.head.appendChild(i))}function Ps(e){return'[src="'+We(e)+'"]'}function Fa(e){return"script[async]"+e}function zg(e,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+We(r.href)+'"]');if(l)return i.instance=l,ue(l),l;var h=m({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ue(l),ye(l,"style",h),ml(l,r.precedence,e),i.instance=l;case"stylesheet":h=Hs(r.href);var d=e.querySelector(Ia(h));if(d)return i.state.loading|=4,i.instance=d,ue(d),d;l=Og(r),(h=ai.get(h))&&ac(l,h),d=(e.ownerDocument||e).createElement("link"),ue(d);var b=d;return b._p=new Promise(function(S,C){b.onload=S,b.onerror=C}),ye(d,"link",l),i.state.loading|=4,ml(d,r.precedence,e),i.instance=d;case"script":return d=Ps(r.src),(h=e.querySelector(Fa(d)))?(i.instance=h,ue(h),h):(l=r,(h=ai.get(d))&&(l=m({},r),rc(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ue(h),ye(h,"link",l),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,ml(l,r.precedence,e));return i.instance}function ml(e,i,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,b=0;b<l.length;b++){var S=l[b];if(S.dataset.precedence===i)d=S;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(e,i.firstChild))}function ac(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function rc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var yl=null;function Dg(e,i,r){if(yl===null){var l=new Map,h=yl=new Map;h.set(r,l)}else h=yl,l=h.get(r),l||(l=new Map,h.set(r,l));if(l.has(e))return l;for(l.set(e,null),r=r.getElementsByTagName(e),h=0;h<r.length;h++){var d=r[h];if(!(d[sa]||d[_e]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var b=d.getAttribute(i)||"";b=e+b;var S=l.get(b);S?S.push(d):l.set(b,[d])}}return l}function Bg(e,i,r){e=e.ownerDocument||e,e.head.insertBefore(r,i==="title"?e.querySelector("head > title"):null)}function sx(e,i,r){if(r===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ug(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var qa=null;function ax(){}function rx(e,i,r){if(qa===null)throw Error(s(475));var l=qa;if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Hs(r.href),d=e.querySelector(Ia(h));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=bl.bind(l),e.then(l,l)),i.state.loading|=4,i.instance=d,ue(d);return}d=e.ownerDocument||e,r=Og(r),(h=ai.get(h))&&ac(r,h),d=d.createElement("link"),ue(d);var b=d;b._p=new Promise(function(S,C){b.onload=S,b.onerror=C}),ye(d,"link",r),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=bl.bind(l),e.addEventListener("load",i),e.addEventListener("error",i))}}function lx(){if(qa===null)throw Error(s(475));var e=qa;return e.stylesheets&&e.count===0&&lc(e,e.stylesheets),0<e.count?function(i){var r=setTimeout(function(){if(e.stylesheets&&lc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(r)}}:null}function bl(){if(this.count--,this.count===0){if(this.stylesheets)lc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var vl=null;function lc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,vl=new Map,i.forEach(ox,e),vl=null,bl.call(e))}function ox(e,i){if(!(i.state.loading&4)){var r=vl.get(e);if(r)var l=r.get(null);else{r=new Map,vl.set(e,r);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var b=h[d];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),l=b)}l&&r.set(null,l)}h=i.instance,b=h.getAttribute("data-precedence"),d=r.get(b)||l,d===l&&r.set(null,h),r.set(b,h),this.count++,l=bl.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var Va={$$typeof:U,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function ux(e,i,r,l,h,d,b,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=io(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=io(0),this.hiddenUpdates=io(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Lg(e,i,r,l,h,d,b,S,C,H,I,Q){return e=new ux(e,i,r,b,S,C,H,Q),i=1,d===!0&&(i|=24),d=Xe(3,null,null,i),e.current=d,d.stateNode=e,i=Xo(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:r,cache:i},qo(d),e}function kg(e){return e?(e=ys,e):ys}function Ng(e,i,r,l,h,d){h=kg(h),l.context===null?l.context=h:l.pendingContext=h,l=Qi(i),l.payload={element:r},d=d===void 0?null:d,d!==null&&(l.callback=d),r=Ki(e,l,i),r!==null&&(Ve(r,e,i),Aa(r,e,i))}function Hg(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<i?r:i}}function oc(e,i){Hg(e,i),(e=e.alternate)&&Hg(e,i)}function Pg(e){if(e.tag===13){var i=ms(e,67108864);i!==null&&Ve(i,e,67108864),oc(e,67108864)}}var xl=!0;function cx(e,i,r,l){var h=x.T;x.T=null;var d=M.p;try{M.p=2,uc(e,i,r,l)}finally{M.p=d,x.T=h}}function hx(e,i,r,l){var h=x.T;x.T=null;var d=M.p;try{M.p=8,uc(e,i,r,l)}finally{M.p=d,x.T=h}}function uc(e,i,r,l){if(xl){var h=cc(l);if(h===null)Qu(e,i,l,_l,r),Xg(e,l);else if(dx(h,e,i,r,l))l.stopPropagation();else if(Xg(e,l),i&4&&-1<fx.indexOf(e)){for(;h!==null;){var d=ss(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var b=bn(d.pendingLanes);if(b!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var C=1<<31-Pe(b);S.entanglements[1]|=C,b&=~C}_i(d),(Bt&6)===0&&(sl=Ne()+500,Pa(0))}}break;case 13:S=ms(d,2),S!==null&&Ve(S,d,2),rl(),oc(d,2)}if(d=cc(l),d===null&&Qu(e,i,l,_l,r),d===h)break;h=d}h!==null&&l.stopPropagation()}else Qu(e,i,l,null,r)}}function cc(e){return e=go(e),hc(e)}var _l=null;function hc(e){if(_l=null,e=ns(e),e!==null){var i=u(e);if(i===null)e=null;else{var r=i.tag;if(r===13){if(e=c(i),e!==null)return e;e=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return _l=e,null}function Yg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(to()){case eo:return 2;case ef:return 8;case dr:case W0:return 32;case nf:return 268435456;default:return 32}default:return 32}}var fc=!1,hn=null,fn=null,dn=null,$a=new Map,Za=new Map,pn=[],fx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xg(e,i){switch(e){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":$a.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(i.pointerId)}}function Qa(e,i,r,l,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:r,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=ss(i),i!==null&&Pg(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function dx(e,i,r,l,h){switch(i){case"focusin":return hn=Qa(hn,e,i,r,l,h),!0;case"dragenter":return fn=Qa(fn,e,i,r,l,h),!0;case"mouseover":return dn=Qa(dn,e,i,r,l,h),!0;case"pointerover":var d=h.pointerId;return $a.set(d,Qa($a.get(d)||null,e,i,r,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Za.set(d,Qa(Za.get(d)||null,e,i,r,l,h)),!0}return!1}function jg(e){var i=ns(e.target);if(i!==null){var r=u(i);if(r!==null){if(i=r.tag,i===13){if(i=c(r),i!==null){e.blockedOn=i,rb(e.priority,function(){if(r.tag===13){var l=qe();l=no(l);var h=ms(r,l);h!==null&&Ve(h,r,l),oc(r,l)}});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sl(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var r=cc(e.nativeEvent);if(r===null){r=e.nativeEvent;var l=new r.constructor(r.type,r);po=l,r.target.dispatchEvent(l),po=null}else return i=ss(r),i!==null&&Pg(i),e.blockedOn=r,!1;i.shift()}return!0}function Ig(e,i,r){Sl(e)&&r.delete(i)}function px(){fc=!1,hn!==null&&Sl(hn)&&(hn=null),fn!==null&&Sl(fn)&&(fn=null),dn!==null&&Sl(dn)&&(dn=null),$a.forEach(Ig),Za.forEach(Ig)}function Al(e,i){e.blockedOn===i&&(e.blockedOn=null,fc||(fc=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,px)))}var Tl=null;function Fg(e){Tl!==e&&(Tl=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Tl===e&&(Tl=null);for(var i=0;i<e.length;i+=3){var r=e[i],l=e[i+1],h=e[i+2];if(typeof l!="function"){if(hc(l||r)===null)continue;break}var d=ss(r);d!==null&&(e.splice(i,3),i-=3,hu(d,{pending:!0,data:h,method:r.method,action:l},l,h))}}))}function Ka(e){function i(C){return Al(C,e)}hn!==null&&Al(hn,e),fn!==null&&Al(fn,e),dn!==null&&Al(dn,e),$a.forEach(i),Za.forEach(i);for(var r=0;r<pn.length;r++){var l=pn[r];l.blockedOn===e&&(l.blockedOn=null)}for(;0<pn.length&&(r=pn[0],r.blockedOn===null);)jg(r),r.blockedOn===null&&pn.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var h=r[l],d=r[l+1],b=h[Oe]||null;if(typeof d=="function")b||Fg(r);else if(b){var S=null;if(d&&d.hasAttribute("formAction")){if(h=d,b=d[Oe]||null)S=b.formAction;else if(hc(h)!==null)continue}else S=b.action;typeof S=="function"?r[l+1]=S:(r.splice(l,3),l-=3),Fg(r)}}}function dc(e){this._internalRoot=e}wl.prototype.render=dc.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,l=qe();Ng(r,l,e,i,null,null)},wl.prototype.unmount=dc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Ng(e.current,2,null,e,null,null),rl(),i[is]=null}};function wl(e){this._internalRoot=e}wl.prototype.unstable_scheduleHydration=function(e){if(e){var i=of();e={blockedOn:null,target:e,priority:i};for(var r=0;r<pn.length&&i!==0&&i<pn[r].priority;r++);pn.splice(r,0,e),r===0&&jg(e)}};var qg=t.version;if(qg!=="19.1.0")throw Error(s(527,qg,"19.1.0"));M.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=p(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var gx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ml.isDisabled&&Ml.supportsFiber)try{ea=Ml.inject(gx),He=Ml}catch{}}return Ja.createRoot=function(e,i){if(!o(e))throw Error(s(299));var r=!1,l="",h=op,d=up,b=cp,S=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(S=i.unstable_transitionCallbacks)),i=Lg(e,1,!1,null,null,r,l,h,d,b,S,null),e[is]=i.current,Zu(e),new dc(i)},Ja.hydrateRoot=function(e,i,r){if(!o(e))throw Error(s(299));var l=!1,h="",d=op,b=up,S=cp,C=null,H=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(C=r.unstable_transitionCallbacks),r.formState!==void 0&&(H=r.formState)),i=Lg(e,1,!0,i,r??null,l,h,d,b,S,C,H),i.context=kg(null),r=i.current,l=qe(),l=no(l),h=Qi(l),h.callback=null,Ki(r,h,l),r=l,i.current.lanes=r,na(i,r),_i(i),e[is]=i.current,Zu(e),new wl(i)},Ja.version="19.1.0",Ja}var im;function Cx(){if(im)return mc.exports;im=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),mc.exports=Mx(),mc.exports}var Ex=Cx();const Rx="modulepreload",Gx=function(a){return"/flappy_space/"+a},nm={},Fl=function(t,n,s){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(n.map(p=>{if(p=Gx(p),p in nm)return;nm[p]=!0;const g=p.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const y=document.createElement("link");if(y.rel=g?"stylesheet":Rx,g||(y.as="script"),y.crossOrigin="",y.href=p,f&&y.setAttribute("nonce",f),document.head.appendChild(y),g)return new Promise((_,v)=>{y.addEventListener("load",_),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${p}`)))})}))}function u(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return o.then(c=>{for(const f of c||[])f.status==="rejected"&&u(f.reason);return t().catch(u)})};var ot=(a=>(a.Application="application",a.WebGLPipes="webgl-pipes",a.WebGLPipesAdaptor="webgl-pipes-adaptor",a.WebGLSystem="webgl-system",a.WebGPUPipes="webgpu-pipes",a.WebGPUPipesAdaptor="webgpu-pipes-adaptor",a.WebGPUSystem="webgpu-system",a.CanvasSystem="canvas-system",a.CanvasPipesAdaptor="canvas-pipes-adaptor",a.CanvasPipes="canvas-pipes",a.Asset="asset",a.LoadParser="load-parser",a.ResolveParser="resolve-parser",a.CacheParser="cache-parser",a.DetectionParser="detection-parser",a.MaskEffect="mask-effect",a.BlendMode="blend-mode",a.TextureSource="texture-source",a.Environment="environment",a.ShapeBuilder="shape-builder",a.Batcher="batcher",a))(ot||{});const Wc=a=>{if(typeof a=="function"||typeof a=="object"&&a.extension){if(!a.extension)throw new Error("Extension class must have an extension object");a={...typeof a.extension!="object"?{type:a.extension}:a.extension,ref:a}}if(typeof a=="object")a={...a};else throw new Error("Invalid extension type");return typeof a.type=="string"&&(a.type=[a.type]),a},Cl=(a,t)=>Wc(a).priority??t,xe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...a){return a.map(Wc).forEach(t=>{t.type.forEach(n=>{var s,o;return(o=(s=this._removeHandlers)[n])==null?void 0:o.call(s,t)})}),this},add(...a){return a.map(Wc).forEach(t=>{t.type.forEach(n=>{var u,c;const s=this._addHandlers,o=this._queue;s[n]?(c=s[n])==null||c.call(s,t):(o[n]=o[n]||[],(u=o[n])==null||u.push(t))})}),this},handle(a,t,n){var c;const s=this._addHandlers,o=this._removeHandlers;if(s[a]||o[a])throw new Error(`Extension type ${a} already has a handler`);s[a]=t,o[a]=n;const u=this._queue;return u[a]&&((c=u[a])==null||c.forEach(f=>t(f)),delete u[a]),this},handleByMap(a,t){return this.handle(a,n=>{n.name&&(t[n.name]=n.ref)},n=>{n.name&&delete t[n.name]})},handleByNamedList(a,t,n=-1){return this.handle(a,s=>{t.findIndex(u=>u.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((u,c)=>Cl(c.value,n)-Cl(u.value,n)))},s=>{const o=t.findIndex(u=>u.name===s.name);o!==-1&&t.splice(o,1)})},handleByList(a,t,n=-1){return this.handle(a,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((o,u)=>Cl(u,n)-Cl(o,n)))},s=>{const o=t.indexOf(s.ref);o!==-1&&t.splice(o,1)})},mixin(a,...t){for(const n of t)Object.defineProperties(a.prototype,Object.getOwnPropertyDescriptors(n))}},Ox={extension:{type:ot.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Fl(()=>import("./browserAll-pmEWw9lH.js"),__vite__mapDeps([0,1,2]))}},zx={extension:{type:ot.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Fl(()=>import("./webworkerAll-BJhvmUF1.js"),__vite__mapDeps([1,2]))}};class Le{constructor(t,n,s){this._x=n||0,this._y=s||0,this._observer=t}clone(t){return new Le(t??this._observer,this._x,this._y)}set(t=0,n=t){return(this._x!==t||this._y!==n)&&(this._x=t,this._y=n,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var xc={exports:{}},sm;function Dx(){return sm||(sm=1,function(a){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function o(p,g,m){this.fn=p,this.context=g,this.once=m||!1}function u(p,g,m,y,_){if(typeof m!="function")throw new TypeError("The listener must be a function");var v=new o(m,y||p,_),T=n?n+g:g;return p._events[T]?p._events[T].fn?p._events[T]=[p._events[T],v]:p._events[T].push(v):(p._events[T]=v,p._eventsCount++),p}function c(p,g){--p._eventsCount===0?p._events=new s:delete p._events[g]}function f(){this._events=new s,this._eventsCount=0}f.prototype.eventNames=function(){var g=[],m,y;if(this._eventsCount===0)return g;for(y in m=this._events)t.call(m,y)&&g.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},f.prototype.listeners=function(g){var m=n?n+g:g,y=this._events[m];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,v=y.length,T=new Array(v);_<v;_++)T[_]=y[_].fn;return T},f.prototype.listenerCount=function(g){var m=n?n+g:g,y=this._events[m];return y?y.fn?1:y.length:0},f.prototype.emit=function(g,m,y,_,v,T){var E=n?n+g:g;if(!this._events[E])return!1;var w=this._events[E],z=arguments.length,B,U;if(w.fn){switch(w.once&&this.removeListener(g,w.fn,void 0,!0),z){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,y),!0;case 4:return w.fn.call(w.context,m,y,_),!0;case 5:return w.fn.call(w.context,m,y,_,v),!0;case 6:return w.fn.call(w.context,m,y,_,v,T),!0}for(U=1,B=new Array(z-1);U<z;U++)B[U-1]=arguments[U];w.fn.apply(w.context,B)}else{var j=w.length,q;for(U=0;U<j;U++)switch(w[U].once&&this.removeListener(g,w[U].fn,void 0,!0),z){case 1:w[U].fn.call(w[U].context);break;case 2:w[U].fn.call(w[U].context,m);break;case 3:w[U].fn.call(w[U].context,m,y);break;case 4:w[U].fn.call(w[U].context,m,y,_);break;default:if(!B)for(q=1,B=new Array(z-1);q<z;q++)B[q-1]=arguments[q];w[U].fn.apply(w[U].context,B)}}return!0},f.prototype.on=function(g,m,y){return u(this,g,m,y,!1)},f.prototype.once=function(g,m,y){return u(this,g,m,y,!0)},f.prototype.removeListener=function(g,m,y,_){var v=n?n+g:g;if(!this._events[v])return this;if(!m)return c(this,v),this;var T=this._events[v];if(T.fn)T.fn===m&&(!_||T.once)&&(!y||T.context===y)&&c(this,v);else{for(var E=0,w=[],z=T.length;E<z;E++)(T[E].fn!==m||_&&!T[E].once||y&&T[E].context!==y)&&w.push(T[E]);w.length?this._events[v]=w.length===1?w[0]:w:c(this,v)}return this},f.prototype.removeAllListeners=function(g){var m;return g?(m=n?n+g:g,this._events[m]&&c(this,m)):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=n,f.EventEmitter=f,a.exports=f}(xc)),xc.exports}var Bx=Dx();const gi=Dh(Bx),Ux=Math.PI*2,Lx=180/Math.PI,kx=Math.PI/180;class Te{constructor(t=0,n=0){this.x=0,this.y=0,this.x=t,this.y=n}clone(){return new Te(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,n=t){return this.x=t,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return _c.x=0,_c.y=0,_c}}const _c=new Te;class At{constructor(t=1,n=0,s=0,o=1,u=0,c=0){this.array=null,this.a=t,this.b=n,this.c=s,this.d=o,this.tx=u,this.ty=c}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,n,s,o,u,c){return this.a=t,this.b=n,this.c=s,this.d=o,this.tx=u,this.ty=c,this}toArray(t,n){this.array||(this.array=new Float32Array(9));const s=n||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,n){n=n||new Te;const s=t.x,o=t.y;return n.x=this.a*s+this.c*o+this.tx,n.y=this.b*s+this.d*o+this.ty,n}applyInverse(t,n){n=n||new Te;const s=this.a,o=this.b,u=this.c,c=this.d,f=this.tx,p=this.ty,g=1/(s*c+u*-o),m=t.x,y=t.y;return n.x=c*g*m+-u*g*y+(p*u-f*c)*g,n.y=s*g*y+-o*g*m+(-p*s+f*o)*g,n}translate(t,n){return this.tx+=t,this.ty+=n,this}scale(t,n){return this.a*=t,this.d*=n,this.c*=t,this.b*=n,this.tx*=t,this.ty*=n,this}rotate(t){const n=Math.cos(t),s=Math.sin(t),o=this.a,u=this.c,c=this.tx;return this.a=o*n-this.b*s,this.b=o*s+this.b*n,this.c=u*n-this.d*s,this.d=u*s+this.d*n,this.tx=c*n-this.ty*s,this.ty=c*s+this.ty*n,this}append(t){const n=this.a,s=this.b,o=this.c,u=this.d;return this.a=t.a*n+t.b*o,this.b=t.a*s+t.b*u,this.c=t.c*n+t.d*o,this.d=t.c*s+t.d*u,this.tx=t.tx*n+t.ty*o+this.tx,this.ty=t.tx*s+t.ty*u+this.ty,this}appendFrom(t,n){const s=t.a,o=t.b,u=t.c,c=t.d,f=t.tx,p=t.ty,g=n.a,m=n.b,y=n.c,_=n.d;return this.a=s*g+o*y,this.b=s*m+o*_,this.c=u*g+c*y,this.d=u*m+c*_,this.tx=f*g+p*y+n.tx,this.ty=f*m+p*_+n.ty,this}setTransform(t,n,s,o,u,c,f,p,g){return this.a=Math.cos(f+g)*u,this.b=Math.sin(f+g)*u,this.c=-Math.sin(f-p)*c,this.d=Math.cos(f-p)*c,this.tx=t-(s*this.a+o*this.c),this.ty=n-(s*this.b+o*this.d),this}prepend(t){const n=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,o=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=o*t.a+this.d*t.c,this.d=o*t.b+this.d*t.d}return this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this}decompose(t){const n=this.a,s=this.b,o=this.c,u=this.d,c=t.pivot,f=-Math.atan2(-o,u),p=Math.atan2(s,n),g=Math.abs(f+p);return g<1e-5||Math.abs(Ux-g)<1e-5?(t.rotation=p,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=f,t.skew.y=p),t.scale.x=Math.sqrt(n*n+s*s),t.scale.y=Math.sqrt(o*o+u*u),t.position.x=this.tx+(c.x*n+c.y*o),t.position.y=this.ty+(c.x*s+c.y*u),t}invert(){const t=this.a,n=this.b,s=this.c,o=this.d,u=this.tx,c=t*o-n*s;return this.a=o/c,this.b=-n/c,this.c=-s/c,this.d=t/c,this.tx=(s*this.ty-o*u)/c,this.ty=-(t*this.ty-n*u)/c,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new At;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Hx.identity()}static get shared(){return Nx.identity()}}const Nx=new At,Hx=new At,Nn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Hn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Pn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Yn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Jc=[],Ay=[],El=Math.sign;function Px(){for(let a=0;a<16;a++){const t=[];Jc.push(t);for(let n=0;n<16;n++){const s=El(Nn[a]*Nn[n]+Pn[a]*Hn[n]),o=El(Hn[a]*Nn[n]+Yn[a]*Hn[n]),u=El(Nn[a]*Pn[n]+Pn[a]*Yn[n]),c=El(Hn[a]*Pn[n]+Yn[a]*Yn[n]);for(let f=0;f<16;f++)if(Nn[f]===s&&Hn[f]===o&&Pn[f]===u&&Yn[f]===c){t.push(f);break}}}for(let a=0;a<16;a++){const t=new At;t.set(Nn[a],Hn[a],Pn[a],Yn[a],0,0),Ay.push(t)}}Px();const qt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:a=>Nn[a],uY:a=>Hn[a],vX:a=>Pn[a],vY:a=>Yn[a],inv:a=>a&8?a&15:-a&7,add:(a,t)=>Jc[a][t],sub:(a,t)=>Jc[a][qt.inv(t)],rotate180:a=>a^4,isVertical:a=>(a&3)===2,byDirection:(a,t)=>Math.abs(a)*2<=Math.abs(t)?t>=0?qt.S:qt.N:Math.abs(t)*2<=Math.abs(a)?a>0?qt.E:qt.W:t>0?a>0?qt.SE:qt.SW:a>0?qt.NE:qt.NW,matrixAppendRotationInv:(a,t,n=0,s=0)=>{const o=Ay[qt.inv(t)];o.tx=n,o.ty=s,a.append(o)}},Rl=[new Te,new Te,new Te,new Te];class se{constructor(t=0,n=0,s=0,o=0){this.type="rectangle",this.x=Number(t),this.y=Number(n),this.width=Number(s),this.height=Number(o)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new se(0,0,0,0)}clone(){return new se(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(t,n,s,o=.5){const{width:u,height:c}=this;if(u<=0||c<=0)return!1;const f=this.x,p=this.y,g=s*(1-o),m=s-g,y=f-g,_=f+u+g,v=p-g,T=p+c+g,E=f+m,w=f+u-m,z=p+m,B=p+c-m;return t>=y&&t<=_&&n>=v&&n<=T&&!(t>E&&t<w&&n>z&&n<B)}intersects(t,n){if(!n){const rt=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=rt)return!1;const et=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>et}const s=this.left,o=this.right,u=this.top,c=this.bottom;if(o<=s||c<=u)return!1;const f=Rl[0].set(t.left,t.top),p=Rl[1].set(t.left,t.bottom),g=Rl[2].set(t.right,t.top),m=Rl[3].set(t.right,t.bottom);if(g.x<=f.x||p.y<=f.y)return!1;const y=Math.sign(n.a*n.d-n.b*n.c);if(y===0||(n.apply(f,f),n.apply(p,p),n.apply(g,g),n.apply(m,m),Math.max(f.x,p.x,g.x,m.x)<=s||Math.min(f.x,p.x,g.x,m.x)>=o||Math.max(f.y,p.y,g.y,m.y)<=u||Math.min(f.y,p.y,g.y,m.y)>=c))return!1;const _=y*(p.y-f.y),v=y*(f.x-p.x),T=_*s+v*u,E=_*o+v*u,w=_*s+v*c,z=_*o+v*c;if(Math.max(T,E,w,z)<=_*f.x+v*f.y||Math.min(T,E,w,z)>=_*m.x+v*m.y)return!1;const B=y*(f.y-g.y),U=y*(g.x-f.x),j=B*s+U*u,q=B*o+U*u,V=B*s+U*c,$=B*o+U*c;return!(Math.max(j,q,V,$)<=B*f.x+U*f.y||Math.min(j,q,V,$)>=B*m.x+U*m.y)}pad(t=0,n=t){return this.x-=t,this.y-=n,this.width+=t*2,this.height+=n*2,this}fit(t){const n=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),o=Math.max(this.y,t.y),u=Math.min(this.y+this.height,t.y+t.height);return this.x=n,this.width=Math.max(s-n,0),this.y=o,this.height=Math.max(u-o,0),this}ceil(t=1,n=.001){const s=Math.ceil((this.x+this.width-n)*t)/t,o=Math.ceil((this.y+this.height-n)*t)/t;return this.x=Math.floor((this.x+n)*t)/t,this.y=Math.floor((this.y+n)*t)/t,this.width=s-this.x,this.height=o-this.y,this}enlarge(t){const n=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),o=Math.min(this.y,t.y),u=Math.max(this.y+this.height,t.y+t.height);return this.x=n,this.width=s-n,this.y=o,this.height=u-o,this}getBounds(t){return t||(t=new se),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const n=t.x,s=t.y,o=t.x+t.width,u=t.y+t.height;return n>=this.x&&n<this.x+this.width&&s>=this.y&&s<this.y+this.height&&o>=this.x&&o<this.x+this.width&&u>=this.y&&u<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Sc={default:-1};function ae(a="default"){return Sc[a]===void 0&&(Sc[a]=-1),++Sc[a]}const am={},Lt="8.0.0",Yx="8.3.4";function Rt(a,t,n=3){if(am[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${a}`):(s=s.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${a}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${a}`),console.warn(s))),am[t]=!0}const Ty=()=>{};function ql(a){return a+=a===0?1:0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1}function rm(a){return!(a&a-1)&&!!a}function wy(a){const t={};for(const n in a)a[n]!==void 0&&(t[n]=a[n]);return t}const lm=Object.create(null);function Xx(a){const t=lm[a];return t===void 0&&(lm[a]=ae("resource")),t}const My=class Cy extends gi{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Cy.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){Rt(Lt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=Xx(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};My.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let jx=My;const Ey=class Ry extends gi{constructor(t={}){super(),this.options=t,this.uid=ae("textureSource"),this._resourceType="textureSource",this._resourceId=ae("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Ry.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new jx(wy(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var n,s;this.style!==t&&((n=this._style)==null||n.off("change",this._onStyleChange,this),this._style=t,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=ae("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,n,s){s||(s=this._resolution),t||(t=this.width),n||(n=this.height);const o=Math.round(t*s),u=Math.round(n*s);return this.width=o/s,this.height=u/s,this._resolution=s,this.pixelWidth===o&&this.pixelHeight===u?!1:(this._refreshPOT(),this.pixelWidth=o,this.pixelHeight=u,this.emit("resize",this),this._resourceId=ae("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=rm(this.pixelWidth)&&rm(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Ey.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let wi=Ey;class Uh extends wi{constructor(t){const n=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(n instanceof Float32Array?s="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?s="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?s="rgba16uint":(n instanceof Int8Array,s="bgra8unorm")),super({...t,resource:n,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Uh.extension=ot.TextureSource;const om=new At;class Ix{constructor(t,n){this.mapCoord=new At,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var n;this.texture!==t&&((n=this._texture)==null||n.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,n){n===void 0&&(n=t);const s=this.mapCoord;for(let o=0;o<t.length;o+=2){const u=t[o],c=t[o+1];n[o]=u*s.a+c*s.c+s.tx,n[o+1]=u*s.b+c*s.d+s.ty}return n}update(){const t=this._texture;this._updateID++;const n=t.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=t.orig,o=t.trim;o&&(om.set(s.width/o.width,0,0,s.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(om));const u=t.source,c=this.uClampFrame,f=this.clampMargin/u._resolution,p=this.clampOffset/u._resolution;return c[0]=(t.frame.x+f+p)/u.width,c[1]=(t.frame.y+f+p)/u.height,c[2]=(t.frame.x+t.frame.width-f+p)/u.width,c[3]=(t.frame.y+t.frame.height-f+p)/u.height,this.uClampOffset[0]=this.clampOffset/u.pixelWidth,this.uClampOffset[1]=this.clampOffset/u.pixelHeight,this.isSimple=t.frame.width===u.width&&t.frame.height===u.height&&t.rotate===0,!0}}class wt extends gi{constructor({source:t,label:n,frame:s,orig:o,trim:u,defaultAnchor:c,defaultBorders:f,rotate:p,dynamic:g}={}){if(super(),this.uid=ae("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new se,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=(t==null?void 0:t.source)??new wi,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:m,height:y}=this._source;this.frame.width=m,this.frame.height=y}this.orig=o||this.frame,this.trim=u,this.rotate=p??0,this.defaultAnchor=c,this.defaultBorders=f,this.destroyed=!1,this.dynamic=g||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Ix(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:n}=this,{width:s,height:o}=this._source,u=n.x/s,c=n.y/o,f=n.width/s,p=n.height/o;let g=this.rotate;if(g){const m=f/2,y=p/2,_=u+m,v=c+y;g=qt.add(g,qt.NW),t.x0=_+m*qt.uX(g),t.y0=v+y*qt.uY(g),g=qt.add(g,2),t.x1=_+m*qt.uX(g),t.y1=v+y*qt.uY(g),g=qt.add(g,2),t.x2=_+m*qt.uX(g),t.y2=v+y*qt.uY(g),g=qt.add(g,2),t.x3=_+m*qt.uX(g),t.y3=v+y*qt.uY(g)}else t.x0=u,t.y0=c,t.x1=u+f,t.y1=c,t.x2=u+f,t.y2=c+p,t.x3=u,t.y3=c+p}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Rt(Lt,"Texture.baseTexture is now Texture.source"),this._source}}wt.EMPTY=new wt({label:"EMPTY",source:new wi({label:"EMPTY"})});wt.EMPTY.destroy=Ty;wt.WHITE=new wt({source:new Uh({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});wt.WHITE.destroy=Ty;function Fx(a,t,n){const{width:s,height:o}=n.orig,u=n.trim;if(u){const c=u.width,f=u.height;a.minX=u.x-t._x*s,a.maxX=a.minX+c,a.minY=u.y-t._y*o,a.maxY=a.minY+f}else a.minX=-t._x*s,a.maxX=a.minX+s,a.minY=-t._y*o,a.maxY=a.minY+o}const um=new At;class Ce{constructor(t=1/0,n=1/0,s=-1/0,o=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=um,this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new se);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=um,this}set(t,n,s,o){this.minX=t,this.minY=n,this.maxX=s,this.maxY=o}addFrame(t,n,s,o,u){u||(u=this.matrix);const c=u.a,f=u.b,p=u.c,g=u.d,m=u.tx,y=u.ty;let _=this.minX,v=this.minY,T=this.maxX,E=this.maxY,w=c*t+p*n+m,z=f*t+g*n+y;w<_&&(_=w),z<v&&(v=z),w>T&&(T=w),z>E&&(E=z),w=c*s+p*n+m,z=f*s+g*n+y,w<_&&(_=w),z<v&&(v=z),w>T&&(T=w),z>E&&(E=z),w=c*t+p*o+m,z=f*t+g*o+y,w<_&&(_=w),z<v&&(v=z),w>T&&(T=w),z>E&&(E=z),w=c*s+p*o+m,z=f*s+g*o+y,w<_&&(_=w),z<v&&(v=z),w>T&&(T=w),z>E&&(E=z),this.minX=_,this.minY=v,this.maxX=T,this.maxY=E}addRect(t,n){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,n)}addBounds(t,n){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,n)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const n=this.minX,s=this.minY,o=this.maxX,u=this.maxY,{a:c,b:f,c:p,d:g,tx:m,ty:y}=t;let _=c*n+p*s+m,v=f*n+g*s+y;this.minX=_,this.minY=v,this.maxX=_,this.maxY=v,_=c*o+p*s+m,v=f*o+g*s+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=c*n+p*u+m,v=f*n+g*u+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY,_=c*o+p*u+m,v=f*o+g*u+y,this.minX=_<this.minX?_:this.minX,this.minY=v<this.minY?v:this.minY,this.maxX=_>this.maxX?_:this.maxX,this.maxY=v>this.maxY?v:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,n,s,o){return this.minX<t&&(this.minX=t),this.maxX>n&&(this.maxX=n),this.minY<s&&(this.minY=s),this.maxY>o&&(this.maxY=o),this}pad(t,n=t){return this.minX-=t,this.maxX+=t,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Ce(this.minX,this.minY,this.maxX,this.maxY)}scale(t,n=t){return this.minX*=t,this.minY*=n,this.maxX*=t,this.maxY*=n,this}get x(){return this.minX}set x(t){const n=this.maxX-this.minX;this.minX=t,this.maxX=t+n}get y(){return this.minY}set y(t){const n=this.maxY-this.minY;this.minY=t,this.maxY=t+n}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,n,s,o){let u=this.minX,c=this.minY,f=this.maxX,p=this.maxY;o||(o=this.matrix);const g=o.a,m=o.b,y=o.c,_=o.d,v=o.tx,T=o.ty;for(let E=n;E<s;E+=2){const w=t[E],z=t[E+1],B=g*w+y*z+v,U=m*w+_*z+T;u=B<u?B:u,c=U<c?U:c,f=B>f?B:f,p=U>p?U:p}this.minX=u,this.minY=c,this.maxX=f,this.maxY=p}containsPoint(t,n){return this.minX<=t&&this.minY<=n&&this.maxX>=t&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var qx={grad:.9,turn:360,rad:360/(2*Math.PI)},Yi=function(a){return typeof a=="string"?a.length>0:typeof a=="number"},de=function(a,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*a)/n+0},li=function(a,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),a>n?n:a>t?a:t},Gy=function(a){return(a=isFinite(a)?a%360:0)>0?a:a+360},cm=function(a){return{r:li(a.r,0,255),g:li(a.g,0,255),b:li(a.b,0,255),a:li(a.a)}},Ac=function(a){return{r:de(a.r),g:de(a.g),b:de(a.b),a:de(a.a,3)}},Vx=/^#([0-9a-f]{3,8})$/i,Gl=function(a){var t=a.toString(16);return t.length<2?"0"+t:t},Oy=function(a){var t=a.r,n=a.g,s=a.b,o=a.a,u=Math.max(t,n,s),c=u-Math.min(t,n,s),f=c?u===t?(n-s)/c:u===n?2+(s-t)/c:4+(t-n)/c:0;return{h:60*(f<0?f+6:f),s:u?c/u*100:0,v:u/255*100,a:o}},zy=function(a){var t=a.h,n=a.s,s=a.v,o=a.a;t=t/360*6,n/=100,s/=100;var u=Math.floor(t),c=s*(1-n),f=s*(1-(t-u)*n),p=s*(1-(1-t+u)*n),g=u%6;return{r:255*[s,f,c,c,p,s][g],g:255*[p,s,s,f,c,c][g],b:255*[c,c,p,s,s,f][g],a:o}},hm=function(a){return{h:Gy(a.h),s:li(a.s,0,100),l:li(a.l,0,100),a:li(a.a)}},fm=function(a){return{h:de(a.h),s:de(a.s),l:de(a.l),a:de(a.a,3)}},dm=function(a){return zy((n=(t=a).s,{h:t.h,s:(n*=((s=t.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:t.a}));var t,n,s},or=function(a){return{h:(t=Oy(a)).h,s:(o=(200-(n=t.s))*(s=t.v)/100)>0&&o<200?n*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,n,s,o},$x=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Zx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Qx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Kx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,th={string:[[function(a){var t=Vx.exec(a);return t?(a=t[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:a.length===4?de(parseInt(a[3]+a[3],16)/255,2):1}:a.length===6||a.length===8?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:a.length===8?de(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var t=Qx.exec(a)||Kx.exec(a);return t?t[2]!==t[4]||t[4]!==t[6]?null:cm({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(a){var t=$x.exec(a)||Zx.exec(a);if(!t)return null;var n,s,o=hm({h:(n=t[1],s=t[2],s===void 0&&(s="deg"),Number(n)*(qx[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return dm(o)},"hsl"]],object:[[function(a){var t=a.r,n=a.g,s=a.b,o=a.a,u=o===void 0?1:o;return Yi(t)&&Yi(n)&&Yi(s)?cm({r:Number(t),g:Number(n),b:Number(s),a:Number(u)}):null},"rgb"],[function(a){var t=a.h,n=a.s,s=a.l,o=a.a,u=o===void 0?1:o;if(!Yi(t)||!Yi(n)||!Yi(s))return null;var c=hm({h:Number(t),s:Number(n),l:Number(s),a:Number(u)});return dm(c)},"hsl"],[function(a){var t=a.h,n=a.s,s=a.v,o=a.a,u=o===void 0?1:o;if(!Yi(t)||!Yi(n)||!Yi(s))return null;var c=function(f){return{h:Gy(f.h),s:li(f.s,0,100),v:li(f.v,0,100),a:li(f.a)}}({h:Number(t),s:Number(n),v:Number(s),a:Number(u)});return zy(c)},"hsv"]]},pm=function(a,t){for(var n=0;n<t.length;n++){var s=t[n][0](a);if(s)return[s,t[n][1]]}return[null,void 0]},Wx=function(a){return typeof a=="string"?pm(a.trim(),th.string):typeof a=="object"&&a!==null?pm(a,th.object):[null,void 0]},Tc=function(a,t){var n=or(a);return{h:n.h,s:li(n.s+100*t,0,100),l:n.l,a:n.a}},wc=function(a){return(299*a.r+587*a.g+114*a.b)/1e3/255},gm=function(a,t){var n=or(a);return{h:n.h,s:n.s,l:li(n.l+100*t,0,100),a:n.a}},eh=function(){function a(t){this.parsed=Wx(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return this.parsed!==null},a.prototype.brightness=function(){return de(wc(this.rgba),2)},a.prototype.isDark=function(){return wc(this.rgba)<.5},a.prototype.isLight=function(){return wc(this.rgba)>=.5},a.prototype.toHex=function(){return t=Ac(this.rgba),n=t.r,s=t.g,o=t.b,c=(u=t.a)<1?Gl(de(255*u)):"","#"+Gl(n)+Gl(s)+Gl(o)+c;var t,n,s,o,u,c},a.prototype.toRgb=function(){return Ac(this.rgba)},a.prototype.toRgbString=function(){return t=Ac(this.rgba),n=t.r,s=t.g,o=t.b,(u=t.a)<1?"rgba("+n+", "+s+", "+o+", "+u+")":"rgb("+n+", "+s+", "+o+")";var t,n,s,o,u},a.prototype.toHsl=function(){return fm(or(this.rgba))},a.prototype.toHslString=function(){return t=fm(or(this.rgba)),n=t.h,s=t.s,o=t.l,(u=t.a)<1?"hsla("+n+", "+s+"%, "+o+"%, "+u+")":"hsl("+n+", "+s+"%, "+o+"%)";var t,n,s,o,u},a.prototype.toHsv=function(){return t=Oy(this.rgba),{h:de(t.h),s:de(t.s),v:de(t.v),a:de(t.a,3)};var t},a.prototype.invert=function(){return Si({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},a.prototype.saturate=function(t){return t===void 0&&(t=.1),Si(Tc(this.rgba,t))},a.prototype.desaturate=function(t){return t===void 0&&(t=.1),Si(Tc(this.rgba,-t))},a.prototype.grayscale=function(){return Si(Tc(this.rgba,-1))},a.prototype.lighten=function(t){return t===void 0&&(t=.1),Si(gm(this.rgba,t))},a.prototype.darken=function(t){return t===void 0&&(t=.1),Si(gm(this.rgba,-t))},a.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},a.prototype.alpha=function(t){return typeof t=="number"?Si({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):de(this.rgba.a,3);var n},a.prototype.hue=function(t){var n=or(this.rgba);return typeof t=="number"?Si({h:t,s:n.s,l:n.l,a:n.a}):de(n.h)},a.prototype.isEqual=function(t){return this.toHex()===Si(t).toHex()},a}(),Si=function(a){return a instanceof eh?a:new eh(a)},mm=[],Jx=function(a){a.forEach(function(t){mm.indexOf(t)<0&&(t(eh,th),mm.push(t))})};function t_(a,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in n)s[n[o]]=o;var u={};a.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var f,p,g=s[this.toHex()];if(g)return g;if(c!=null&&c.closest){var m=this.toRgb(),y=1/0,_="black";if(!u.length)for(var v in n)u[v]=new a(n[v]).toRgb();for(var T in n){var E=(f=m,p=u[T],Math.pow(f.r-p.r,2)+Math.pow(f.g-p.g,2)+Math.pow(f.b-p.b,2));E<y&&(y=E,_=T)}return _}},t.string.push([function(c){var f=c.toLowerCase(),p=f==="transparent"?"#0000":n[f];return p?new a(p).toRgb():null},"name"])}Jx([t_]);const $s=class sr{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof sr)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,n){const s=typeof t;if(s!==typeof n)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===n;if(Array.isArray(t)&&Array.isArray(n)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(n))return t.length!==n.length?!1:t.every((u,c)=>u===n[c]);if(t!==null&&n!==null){const u=Object.keys(t),c=Object.keys(n);return u.length!==c.length?!1:u.every(f=>t[f]===n[f])}return t===n}toRgba(){const[t,n,s,o]=this._components;return{r:t,g:n,b:s,a:o}}toRgb(){const[t,n,s]=this._components;return{r:t,g:n,b:s}}toRgbaString(){const[t,n,s]=this.toUint8RgbArray();return`rgba(${t},${n},${s},${this.alpha})`}toUint8RgbArray(t){const[n,s,o]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(n*255),t[1]=Math.round(s*255),t[2]=Math.round(o*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[n,s,o,u]=this._components;return t[0]=n,t[1]=s,t[2]=o,t[3]=u,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[n,s,o]=this._components;return t[0]=n,t[1]=s,t[2]=o,t}toNumber(){return this._int}toBgrNumber(){const[t,n,s]=this.toUint8RgbArray();return(s<<16)+(n<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[n,s,o,u]=sr._temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=s,this._components[2]*=o,this._components[3]*=u,this._refreshInt(),this._value=null,this}premultiply(t,n=!0){return n&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,n=!0){if(t===1)return(255<<24)+this._int;if(t===0)return n?0:this._int;let s=this._int>>16&255,o=this._int>>8&255,u=this._int&255;return n&&(s=s*t+.5|0,o=o*t+.5|0,u=u*t+.5|0),(t*255<<24)+(s<<16)+(o<<8)+u}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let n,s,o,u;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const c=t;n=(c>>16&255)/255,s=(c>>8&255)/255,o=(c&255)/255,u=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,s,o,u=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,s,o,u=255]=t,n/=255,s/=255,o/=255,u/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const f=sr.HEX_PATTERN.exec(t);f&&(t=`#${f[2]}`)}const c=Si(t);c.isValid()&&({r:n,g:s,b:o,a:u}=c.rgba,n/=255,s/=255,o/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=s,this._components[2]=o,this._components[3]=u,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,n,s]=this._components;this._int=(t*255<<16)+(n*255<<8)+(s*255|0)}_clamp(t,n=0,s=1){return typeof t=="number"?Math.min(Math.max(t,n),s):(t.forEach((o,u)=>{t[u]=Math.min(Math.max(o,n),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof sr||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};$s.shared=new $s;$s._temp=new $s;$s.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let re=$s;const e_={cullArea:null,cullable:!1,cullableChildren:!0};class Lh{constructor(t,n){this._pool=[],this._count=0,this._index=0,this._classType=t,n&&this.prepopulate(n)}prepopulate(t){for(let n=0;n<t;n++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var s;let n;return this._index>0?n=this._pool[--this._index]:n=new this._classType,(s=n.init)==null||s.call(n,t),n}return(t){var n;(n=t.reset)==null||n.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class i_{constructor(){this._poolsByClass=new Map}prepopulate(t,n){this.getPool(t).prepopulate(n)}get(t,n){return this.getPool(t).get(n)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Lh(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(n=>{const s=t[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;t[s]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),t}}const Xi=new i_,n_={get isCachedAsTexture(){var a;return!!((a=this.renderGroup)!=null&&a.isCachedAsTexture)},cacheAsTexture(a){typeof a=="boolean"&&a===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(a===!0?{}:a))},updateCacheTexture(){var a;(a=this.renderGroup)==null||a.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(a){Rt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(a)}};function s_(a,t,n){const s=a.length;let o;if(t>=s||n===0)return;n=t+n>s?s-t:n;const u=s-n;for(o=t;o<u;++o)a[o]=a[o+n];a.length=u}const a_={allowChildren:!0,removeChildren(a=0,t){const n=t??this.children.length,s=n-a,o=[];if(s>0&&s<=n){for(let c=n-1;c>=a;c--){const f=this.children[c];f&&(o.push(f),f.parent=null)}s_(this.children,a,n);const u=this.renderGroup||this.parentRenderGroup;u&&u.removeChildren(o);for(let c=0;c<o.length;++c)this.emit("childRemoved",o[c],this,c),o[c].emit("removed",this);return o.length>0&&this._didViewChangeTick++,o}else if(s===0&&this.children.length===0)return o;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(a){const t=this.getChildAt(a);return this.removeChild(t)},getChildAt(a){if(a<0||a>=this.children.length)throw new Error(`getChildAt: Index (${a}) does not exist.`);return this.children[a]},setChildIndex(a,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(a),this.addChildAt(a,t)},getChildIndex(a){const t=this.children.indexOf(a);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(a,t){this.allowChildren||Rt(Lt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(t<0||t>n.length)throw new Error(`${a}addChildAt: The index ${t} supplied is out of bounds ${n.length}`);if(a.parent){const o=a.parent.children.indexOf(a);if(a.parent===this&&o===t)return a;o!==-1&&a.parent.children.splice(o,1)}t===n.length?n.push(a):n.splice(t,0,a),a.parent=this,a.didChange=!0,a._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(a),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",a,this,t),a.emit("added",this),a},swapChildren(a,t){if(a===t)return;const n=this.getChildIndex(a),s=this.getChildIndex(t);this.children[n]=t,this.children[s]=a;const o=this.renderGroup||this.parentRenderGroup;o&&(o.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var a;(a=this.parent)==null||a.removeChild(this)},reparentChild(...a){return a.length===1?this.reparentChildAt(a[0],this.children.length):(a.forEach(t=>this.reparentChildAt(t,this.children.length)),a[0])},reparentChildAt(a,t){if(a.parent===this)return this.setChildIndex(a,t),a;const n=a.worldTransform.clone();a.removeFromParent(),this.addChildAt(a,t);const s=this.worldTransform.clone();return s.invert(),n.prepend(s),a.setFromMatrix(n),a}},r_={collectRenderables(a,t,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(a,t,n):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,a):this.collectRenderablesWithEffects(a,t,n))},collectRenderablesSimple(a,t,n){const s=this.children,o=s.length;for(let u=0;u<o;u++)s[u].collectRenderables(a,t,n)},collectRenderablesWithEffects(a,t,n){const{renderPipes:s}=t;for(let o=0;o<this.effects.length;o++){const u=this.effects[o];s[u.pipe].push(u,this,a)}this.collectRenderablesSimple(a,t,n);for(let o=this.effects.length-1;o>=0;o--){const u=this.effects[o];s[u.pipe].pop(u,this,a)}}};class ym{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class l_{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const s=this._tests[n];if(s.test(t))return Xi.get(s.maskClass,t)}return t}returnMaskEffect(t){Xi.return(t)}}const ih=new l_;xe.handleByList(ot.MaskEffect,ih._effectClasses);const o_={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)},addEffect(a){this.effects.indexOf(a)===-1&&(this.effects.push(a),this.effects.sort((n,s)=>n.priority-s.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(a){const t=this.effects.indexOf(a);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(a){const t=this._maskEffect;(t==null?void 0:t.mask)!==a&&(t&&(this.removeEffect(t),ih.returnMaskEffect(t),this._maskEffect=null),a!=null&&(this._maskEffect=ih.getMaskEffect(a),this.addEffect(this._maskEffect)))},setMask(a){this._maskOptions={...this._maskOptions,...a},a.mask&&(this.mask=a.mask),this._markStructureAsChanged()},get mask(){var a;return(a=this._maskEffect)==null?void 0:a.mask},set filters(a){var u;!Array.isArray(a)&&a&&(a=[a]);const t=this._filterEffect||(this._filterEffect=new ym);a=a;const n=(a==null?void 0:a.length)>0,s=((u=t.filters)==null?void 0:u.length)>0,o=n!==s;a=Array.isArray(a)?a.slice(0):a,t.filters=Object.freeze(a),o&&(n?this.addEffect(t):(this.removeEffect(t),t.filters=a??null))},get filters(){var a;return(a=this._filterEffect)==null?void 0:a.filters},set filterArea(a){this._filterEffect||(this._filterEffect=new ym),this._filterEffect.filterArea=a},get filterArea(){var a;return(a=this._filterEffect)==null?void 0:a.filterArea}},u_={label:null,get name(){return Rt(Lt,"Container.name property has been removed, use Container.label instead"),this.label},set name(a){Rt(Lt,"Container.name property has been removed, use Container.label instead"),this.label=a},getChildByName(a,t=!1){return this.getChildByLabel(a,t)},getChildByLabel(a,t=!1){const n=this.children;for(let s=0;s<n.length;s++){const o=n[s];if(o.label===a||a instanceof RegExp&&a.test(o.label))return o}if(t)for(let s=0;s<n.length;s++){const u=n[s].getChildByLabel(a,!0);if(u)return u}return null},getChildrenByLabel(a,t=!1,n=[]){const s=this.children;for(let o=0;o<s.length;o++){const u=s[o];(u.label===a||a instanceof RegExp&&a.test(u.label))&&n.push(u)}if(t)for(let o=0;o<s.length;o++)s[o].getChildrenByLabel(a,!0,n);return n}},Me=new Lh(At),ji=new Lh(Ce),c_=new At,h_={getFastGlobalBounds(a,t){t||(t=new Ce),t.clear(),this._getGlobalBoundsRecursive(!!a,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const n=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(n.worldTransform),t},_getGlobalBoundsRecursive(a,t,n){let s=t;if(a&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;const o=!!this.effects.length;if((this.renderGroup||o)&&(s=ji.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const c=this.bounds;s.addFrame(c.minX,c.minY,c.maxX,c.maxY,this.groupTransform)}const u=this.children;for(let c=0;c<u.length;c++)u[c]._getGlobalBoundsRecursive(a,s,n)}if(o){let u=!1;const c=this.renderGroup||this.parentRenderGroup;for(let f=0;f<this.effects.length;f++)this.effects[f].addBounds&&(u||(u=!0,s.applyMatrix(c.worldTransform)),this.effects[f].addBounds(s,!0));u&&(s.applyMatrix(c.worldTransform.copyTo(c_).invert()),t.addBounds(s,this.relativeGroupTransform)),t.addBounds(s),ji.return(s)}else this.renderGroup&&(t.addBounds(s,this.relativeGroupTransform),ji.return(s))}};function Dy(a,t,n){n.clear();let s,o;return a.parent?t?s=a.parent.worldTransform:(o=Me.get().identity(),s=kh(a,o)):s=At.IDENTITY,By(a,n,s,t),o&&Me.return(o),n.isValid||n.set(0,0,0,0),n}function By(a,t,n,s){var f,p;if(!a.visible||!a.measurable)return;let o;s?o=a.worldTransform:(a.updateLocalTransform(),o=Me.get(),o.appendFrom(a.localTransform,n));const u=t,c=!!a.effects.length;if(c&&(t=ji.get().clear()),a.boundsArea)t.addRect(a.boundsArea,o);else{a.bounds&&(t.matrix=o,t.addBounds(a.bounds));for(let g=0;g<a.children.length;g++)By(a.children[g],t,o,s)}if(c){for(let g=0;g<a.effects.length;g++)(p=(f=a.effects[g]).addBounds)==null||p.call(f,t);u.addBounds(t,At.IDENTITY),ji.return(t)}s||Me.return(o)}function kh(a,t){const n=a.parent;return n&&(kh(n,t),n.updateLocalTransform(),t.append(n.localTransform)),t}function Uy(a,t){if(a===16777215||!t)return t;if(t===16777215||!a)return a;const n=a>>16&255,s=a>>8&255,o=a&255,u=t>>16&255,c=t>>8&255,f=t&255,p=n*u/255|0,g=s*c/255|0,m=o*f/255|0;return(p<<16)+(g<<8)+m}const bm=16777215;function vm(a,t){return a===bm?t:t===bm?a:Uy(a,t)}function Pl(a){return((a&255)<<16)+(a&65280)+(a>>16&255)}const f_={getGlobalAlpha(a){if(a)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,n=this.parent;for(;n;)t*=n.alpha,n=n.parent;return t},getGlobalTransform(a,t){if(t)return a.copyFrom(this.worldTransform);this.updateLocalTransform();const n=kh(this,Me.get().identity());return a.appendFrom(this.localTransform,n),Me.return(n),a},getGlobalTint(a){if(a)return this.renderGroup?Pl(this.renderGroup.worldColor):this.parentRenderGroup?Pl(vm(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,n=this.parent;for(;n;)t=vm(t,n.localColor),n=n.parent;return Pl(t)}};let Mc=0;const xm=500;function Vt(...a){Mc!==xm&&(Mc++,Mc===xm?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...a))}function Ly(a,t,n){return t.clear(),n||(n=At.IDENTITY),ky(a,t,n,a,!0),t.isValid||t.set(0,0,0,0),t}function ky(a,t,n,s,o){var p,g;let u;if(o)u=Me.get(),u=n.copyTo(u);else{if(!a.visible||!a.measurable)return;a.updateLocalTransform();const m=a.localTransform;u=Me.get(),u.appendFrom(m,n)}const c=t,f=!!a.effects.length;if(f&&(t=ji.get().clear()),a.boundsArea)t.addRect(a.boundsArea,u);else{a.renderPipeId&&(t.matrix=u,t.addBounds(a.bounds));const m=a.children;for(let y=0;y<m.length;y++)ky(m[y],t,u,s,!1)}if(f){for(let m=0;m<a.effects.length;m++)(g=(p=a.effects[m]).addLocalBounds)==null||g.call(p,t,s);c.addBounds(t,At.IDENTITY),ji.return(t)}Me.return(u)}function Ny(a,t){const n=a.children;for(let s=0;s<n.length;s++){const o=n[s],u=o.uid,c=(o._didViewChangeTick&65535)<<16|o._didContainerChangeTick&65535,f=t.index;(t.data[f]!==u||t.data[f+1]!==c)&&(t.data[t.index]=u,t.data[t.index+1]=c,t.didChange=!0),t.index=f+2,o.children.length&&Ny(o,t)}return t.didChange}const d_=new At,p_={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(a,t){const n=Math.sign(this.scale.x)||1;t!==0?this.scale.x=a/t*n:this.scale.x=n},_setHeight(a,t){const n=Math.sign(this.scale.y)||1;t!==0?this.scale.y=a/t*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ce});const a=this._localBoundsCacheData;return a.index=1,a.didChange=!1,a.data[0]!==this._didViewChangeTick&&(a.didChange=!0,a.data[0]=this._didViewChangeTick),Ny(this,a),a.didChange&&Ly(this,a.localBounds,d_),a.localBounds},getBounds(a,t){return Dy(this,a,t||new Ce)}},g_={_onRender:null,set onRender(a){const t=this.renderGroup||this.parentRenderGroup;if(!a){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=a},get onRender(){return this._onRender}},m_={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(a){this._zIndex!==a&&(this._zIndex=a,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(y_))}};function y_(a,t){return a._zIndex-t._zIndex}const b_={getGlobalPosition(a=new Te,t=!1){return this.parent?this.parent.toGlobal(this._position,a,t):(a.x=this._position.x,a.y=this._position.y),a},toGlobal(a,t,n=!1){const s=this.getGlobalTransform(Me.get(),n);return t=s.apply(a,t),Me.return(s),t},toLocal(a,t,n,s){t&&(a=t.toGlobal(a,n,s));const o=this.getGlobalTransform(Me.get(),s);return n=o.applyInverse(a,n),Me.return(o),n}};class Hy{constructor(){this.uid=ae("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let v_=0;class x_{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,n,s){const o=new wi({...this.textureOptions,width:t,height:n,resolution:1,antialias:s,autoGarbageCollect:!1});return new wt({source:o,label:`texturePool_${v_++}`})}getOptimalTexture(t,n,s=1,o){let u=Math.ceil(t*s-1e-6),c=Math.ceil(n*s-1e-6);u=ql(u),c=ql(c);const f=(u<<17)+(c<<1)+(o?1:0);this._texturePool[f]||(this._texturePool[f]=[]);let p=this._texturePool[f].pop();return p||(p=this.createTexture(u,c,o)),p.source._resolution=s,p.source.width=u/s,p.source.height=c/s,p.source.pixelWidth=u,p.source.pixelHeight=c,p.frame.x=0,p.frame.y=0,p.frame.width=t,p.frame.height=n,p.updateUvs(),this._poolKeyHash[p.uid]=f,p}getSameSizeTexture(t,n=!1){const s=t.source;return this.getOptimalTexture(t.width,t.height,s._resolution,n)}returnTexture(t){const n=this._poolKeyHash[t.uid];this._texturePool[n].push(t)}clear(t){if(t=t!==!1,t)for(const n in this._texturePool){const s=this._texturePool[n];if(s)for(let o=0;o<s.length;o++)s[o].destroy(!0)}this._texturePool={}}}const __=new x_;class S_{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new At,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Hy,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const n=t.children;for(let s=0;s<n.length;s++){const o=n[s];o._updateFlags=15,this.addChild(o)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(__.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const n=this.childrenToUpdate[t];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const n=this.renderGroupChildren.indexOf(t);n>-1&&this.renderGroupChildren.splice(n,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const n=t.children;for(let s=0;s<n.length;s++)this.addChild(n[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const n=t.children;for(let s=0;s<n.length;s++)this.removeChild(n[s])}removeChildren(t){for(let n=0;n<t.length;n++)this.removeChild(t[n])}onChildUpdate(t){let n=this.childrenToUpdate[t.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let n=0;n<this._onRenderContainers.length;n++)this._onRenderContainers[n]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const n=this.root.children;for(let s=0;s<n.length;s++)this._getChildren(n[s],t);return t}_getChildren(t,n=[]){if(n.push(t),t.renderGroup)return n;const s=t.children;for(let o=0;o<s.length;o++)this._getChildren(s[o],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new At),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new At),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new At),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function A_(a,t,n={}){for(const s in t)!n[s]&&t[s]!==void 0&&(a[s]=t[s])}const Cc=new Le(null),Ec=new Le(null),Rc=new Le(null,1,1),_m=1,T_=2,Gc=4;class oi extends gi{constructor(t={}){var n,s;super(),this.uid=ae("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new At,this.relativeGroupTransform=new At,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Le(this,0,0),this._scale=Rc,this._pivot=Ec,this._skew=Cc,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],A_(this,t,{children:!0,parent:!0,effects:!0}),(n=t.children)==null||n.forEach(o=>this.addChild(o)),(s=t.parent)==null||s.addChild(this)}static mixin(t){Rt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),xe.mixin(oi,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||Rt(Lt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let o=0;o<t.length;o++)this.addChild(t[o]);return t[0]}const n=t[0],s=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),s&&(s.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,s&&s.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...t){if(t.length>1){for(let o=0;o<t.length;o++)this.removeChild(t[o]);return t[0]}const n=t[0],s=this.children.indexOf(n);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parentRenderLayer&&n.parentRenderLayer.detach(n),n.parent=null,this.emit("childRemoved",n,this,s),n.emit("removed",this)),n}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=Xi.get(S_,this),this.groupTransform=At.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),Xi.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new At),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*Lx}set angle(t){this.rotation=t*kx}get pivot(){return this._pivot===Ec&&(this._pivot=new Le(this,0,0)),this._pivot}set pivot(t){this._pivot===Ec&&(this._pivot=new Le(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Cc&&(this._skew=new Le(this,0,0)),this._skew}set skew(t){this._skew===Cc&&(this._skew=new Le(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Rc&&(this._scale=new Le(this,1,1)),this._scale}set scale(t){this._scale===Rc&&(this._scale=new Le(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const n=this.getLocalBounds().width;this._setWidth(t,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const n=this.getLocalBounds().height;this._setHeight(t,n)}getSize(t){t||(t={});const n=this.getLocalBounds();return t.width=Math.abs(this.scale.x*n.width),t.height=Math.abs(this.scale.y*n.height),t}setSize(t,n){const s=this.getLocalBounds();typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,s.width),n!==void 0&&this._setHeight(n,s.height)}_updateSkew(){const t=this._rotation,n=this._skew;this._cx=Math.cos(t+n._y),this._sx=Math.sin(t+n._y),this._cy=-Math.sin(t-n._x),this._sy=Math.cos(t-n._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const n=this.localTransform,s=this._scale,o=this._pivot,u=this._position,c=s._x,f=s._y,p=o._x,g=o._y;n.a=this._cx*c,n.b=this._sx*c,n.c=this._cy*f,n.d=this._sy*f,n.tx=u._x-(p*n.a+g*n.c),n.ty=u._y-(p*n.b+g*n.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=_m,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=re.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=_m,this._onUpdate())}get tint(){return Pl(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=T_,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const n=t?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Gc,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const n=t?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Gc,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const n=t?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=Gc,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var o;if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&n)for(let u=0;u<n.length;++u)n[u].destroy(t);(o=this.renderGroup)==null||o.destroy(),this.renderGroup=null}}xe.mixin(oi,a_,h_,b_,g_,p_,o_,u_,m_,e_,n_,f_,r_);class Nh extends oi{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Ce(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const n=this.bounds,{x:s,y:o}=t;return s>=n.minX&&s<=n.maxX&&o>=n.minY&&o<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,n,s){const{renderPipes:o,renderableGC:u}=n;o.blendMode.setBlendMode(this,this.groupBlendMode,t),o[this.renderPipeId].addRenderable(this,t),u.addRenderable(this),this.didViewUpdate=!1;const f=this.children,p=f.length;for(let g=0;g<p;g++)f[g].collectRenderables(t,n,s)}}class Zs extends Nh{constructor(t=wt.EMPTY){t instanceof wt&&(t={texture:t});const{texture:n=wt.EMPTY,anchor:s,roundPixels:o,width:u,height:c,...f}=t;super({label:"Sprite",...f}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Le({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=o??!1,u!==void 0&&(this.width=u),c!==void 0&&(this.height=c)}static from(t,n=!1){return t instanceof wt?new Zs(t):new Zs(wt.from(t,n))}set texture(t){t||(t=wt.EMPTY);const n=this._texture;n!==t&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Fx(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Rt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,n=this._texture,s=this._bounds,{width:o,height:u}=n.orig;s.minX=-t._x*o,s.maxX=s.minX+o,s.minY=-t._y*u,s.maxY=s.minY+u}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(s)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,n){typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}}const w_=new Ce;function Py(a,t,n){const s=w_;a.measurable=!0,Dy(a,n,s),t.addBoundsMask(s),a.measurable=!1}function Yy(a,t,n){const s=ji.get();a.measurable=!0;const o=Me.get().identity(),u=Xy(a,n,o);Ly(a,s,u),a.measurable=!1,t.addBoundsMask(s),Me.return(o),ji.return(s)}function Xy(a,t,n){return a?(a!==t&&(Xy(a.parent,t,n),a.updateLocalTransform(),n.append(a.localTransform)),n):(Vt("Mask bounds, renderable is not inside the root container"),n)}class jy{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Zs),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,n){this.inverse||Py(this.mask,t,n)}addLocalBounds(t,n){Yy(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof Zs}}jy.extension=ot.MaskEffect;class Iy{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}Iy.extension=ot.MaskEffect;class Fy{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,n){Py(this.mask,t,n)}addLocalBounds(t,n){Yy(this.mask,t,n)}containsPoint(t,n){const s=this.mask;return n(s,t)}destroy(){this.reset()}static test(t){return t instanceof oi}}Fy.extension=ot.MaskEffect;const M_={createCanvas:(a,t)=>{const n=document.createElement("canvas");return n.width=a,n.height=t,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(a,t)=>fetch(a,t),parseXML:a=>new DOMParser().parseFromString(a,"text/xml")};let Sm=M_;const Jt={get(){return Sm},set(a){Sm=a}};class qy extends wi{constructor(t){t.resource||(t.resource=Jt.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,n=this.height,s=this._resolution){const o=super.resize(t,n,s);return o&&this.resizeCanvas(),o}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}qy.extension=ot.TextureSource;class ts extends wi{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const n=Jt.get().createCanvas(t.resource.width,t.resource.height);n.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=n,Vt("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}ts.extension=ot.TextureSource;var nh=(a=>(a[a.INTERACTION=50]="INTERACTION",a[a.HIGH=25]="HIGH",a[a.NORMAL=0]="NORMAL",a[a.LOW=-25]="LOW",a[a.UTILITY=-50]="UTILITY",a))(nh||{});class Oc{constructor(t,n=null,s=0,o=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=n,this.priority=s,this._once=o}match(t,n=null){return this._fn===t&&this._context===n}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=t?null:n,this.previous=null,n}}const Vy=class $e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Oc(null,null,1/0),this.deltaMS=1/$e.targetFPMS,this.elapsedMS=1/$e.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,n,s=nh.NORMAL){return this._addListener(new Oc(t,n,s))}addOnce(t,n,s=nh.NORMAL){return this._addListener(new Oc(t,n,s,!0))}_addListener(t){let n=this._head.next,s=this._head;if(!n)t.connect(s);else{for(;n;){if(t.priority>n.priority){t.connect(s);break}s=n,n=n.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,n){let s=this._head.next;for(;s;)s.match(t,n)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,n=this._head;for(;n=n.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const u=t-this._lastFrame|0;if(u<this._minElapsedMS)return;this._lastFrame=t-u%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*$e.targetFPMS;const s=this._head;let o=s.next;for(;o;)o=o.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const n=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,n)/1e3,$e.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,t);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!$e._shared){const t=$e._shared=new $e;t.autoStart=!0,t._protected=!0}return $e._shared}static get system(){if(!$e._system){const t=$e._system=new $e;t.autoStart=!0,t._protected=!0}return $e._system}};Vy.targetFPMS=.06;let Is=Vy,zc;async function $y(){return zc??(zc=(async()=>{var c;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const n=await new Promise(f=>{const p=document.createElement("video");p.onloadeddata=()=>f(p),p.onerror=()=>f(null),p.autoplay=!1,p.crossOrigin="anonymous",p.preload="auto",p.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",p.load()});if(!n)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);const u=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,u),t.deleteFramebuffer(o),t.deleteTexture(s),(c=t.getExtension("WEBGL_lose_context"))==null||c.loseContext(),u[0]<=u[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),zc}const Zl=class Zy extends wi{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Zy.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=Is.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,n=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await $y(),this._load=new Promise((s,o)=>{this.isValid?s(this):(this._resolve=s,this._reject=o,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Is.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Is.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Is.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Zl.extension=ot.TextureSource;Zl.defaultOptions={...wi.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Zl.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Yl=Zl;const pi=(a,t,n=!1)=>(Array.isArray(a)||(a=[a]),t?a.map(s=>typeof s=="string"||n?t(s):s):a);class C_{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const n=this._cache.get(t);return n||Vt(`[Assets] Asset id ${t} was not found in the Cache`),n}set(t,n){const s=pi(t);let o;for(let p=0;p<this.parsers.length;p++){const g=this.parsers[p];if(g.test(n)){o=g.getCacheableAssets(s,n);break}}const u=new Map(Object.entries(o||{}));o||s.forEach(p=>{u.set(p,n)});const c=[...u.keys()],f={cacheKeys:c,keys:s};s.forEach(p=>{this._cacheMap.set(p,f)}),c.forEach(p=>{const g=o?o[p]:n;this._cache.has(p)&&this._cache.get(p)!==g&&Vt("[Cache] already has key:",p),this._cache.set(p,u.get(p))})}remove(t){if(!this._cacheMap.has(t)){Vt(`[Assets] Asset id ${t} was not found in the Cache`);return}const n=this._cacheMap.get(t);n.cacheKeys.forEach(o=>{this._cache.delete(o)}),n.keys.forEach(o=>{this._cacheMap.delete(o)})}get parsers(){return this._parsers}}const Wt=new C_,sh=[];xe.handleByList(ot.TextureSource,sh);function Qy(a={}){const t=a&&a.resource,n=t?a.resource:a,s=t?a:{resource:a};for(let o=0;o<sh.length;o++){const u=sh[o];if(u.test(n))return new u(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function E_(a={},t=!1){const n=a&&a.resource,s=n?a.resource:a,o=n?a:{resource:a};if(!t&&Wt.has(s))return Wt.get(s);const u=new wt({source:Qy(o)});return u.on("destroy",()=>{Wt.has(s)&&Wt.remove(s)}),t||Wt.set(s,u),u}function R_(a,t=!1){return typeof a=="string"?Wt.get(a):a instanceof wi?new wt({source:a}):E_(a,t)}wt.from=R_;wi.from=Qy;xe.add(jy,Iy,Fy,Yl,ts,qy,Uh);var yn=(a=>(a[a.Low=0]="Low",a[a.Normal=1]="Normal",a[a.High=2]="High",a))(yn||{});function di(a){if(typeof a!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(a)}`)}function tr(a){return a.split("?")[0].split("#")[0]}function G_(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O_(a,t,n){return a.replace(new RegExp(G_(t),"g"),n)}function z_(a,t){let n="",s=0,o=-1,u=0,c=-1;for(let f=0;f<=a.length;++f){if(f<a.length)c=a.charCodeAt(f);else{if(c===47)break;c=47}if(c===47){if(!(o===f-1||u===1))if(o!==f-1&&u===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const p=n.lastIndexOf("/");if(p!==n.length-1){p===-1?(n="",s=0):(n=n.slice(0,p),s=n.length-1-n.lastIndexOf("/")),o=f,u=0;continue}}else if(n.length===2||n.length===1){n="",s=0,o=f,u=0;continue}}}else n.length>0?n+=`/${a.slice(o+1,f)}`:n=a.slice(o+1,f),s=f-o-1;o=f,u=0}else c===46&&u!==-1?++u:u=-1}return n}const Ze={toPosix(a){return O_(a,"\\","/")},isUrl(a){return/^https?:/.test(this.toPosix(a))},isDataUrl(a){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(a)},isBlobUrl(a){return a.startsWith("blob:")},hasProtocol(a){return/^[^/:]+:/.test(this.toPosix(a))},getProtocol(a){di(a),a=this.toPosix(a);const t=/^file:\/\/\//.exec(a);if(t)return t[0];const n=/^[^/:]+:\/{0,2}/.exec(a);return n?n[0]:""},toAbsolute(a,t,n){if(di(a),this.isDataUrl(a)||this.isBlobUrl(a))return a;const s=tr(this.toPosix(t??Jt.get().getBaseUrl())),o=tr(this.toPosix(n??this.rootname(s)));return a=this.toPosix(a),a.startsWith("/")?Ze.join(o,a.slice(1)):this.isAbsolute(a)?a:this.join(s,a)},normalize(a){if(di(a),a.length===0)return".";if(this.isDataUrl(a)||this.isBlobUrl(a))return a;a=this.toPosix(a);let t="";const n=a.startsWith("/");this.hasProtocol(a)&&(t=this.rootname(a),a=a.slice(t.length));const s=a.endsWith("/");return a=z_(a),a.length>0&&s&&(a+="/"),n?`/${a}`:t+a},isAbsolute(a){return di(a),a=this.toPosix(a),this.hasProtocol(a)?!0:a.startsWith("/")},join(...a){if(a.length===0)return".";let t;for(let n=0;n<a.length;++n){const s=a[n];if(di(s),s.length>0)if(t===void 0)t=s;else{const o=a[n-1]??"";this.joinExtensions.includes(this.extname(o).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(a){if(di(a),a.length===0)return".";a=this.toPosix(a);let t=a.charCodeAt(0);const n=t===47;let s=-1,o=!0;const u=this.getProtocol(a),c=a;a=a.slice(u.length);for(let f=a.length-1;f>=1;--f)if(t=a.charCodeAt(f),t===47){if(!o){s=f;break}}else o=!1;return s===-1?n?"/":this.isUrl(c)?u+a:u:n&&s===1?"//":u+a.slice(0,s)},rootname(a){di(a),a=this.toPosix(a);let t="";if(a.startsWith("/")?t="/":t=this.getProtocol(a),this.isUrl(a)){const n=a.indexOf("/",t.length);n!==-1?t=a.slice(0,n):t=a,t.endsWith("/")||(t+="/")}return t},basename(a,t){di(a),t&&di(t),a=tr(this.toPosix(a));let n=0,s=-1,o=!0,u;if(t!==void 0&&t.length>0&&t.length<=a.length){if(t.length===a.length&&t===a)return"";let c=t.length-1,f=-1;for(u=a.length-1;u>=0;--u){const p=a.charCodeAt(u);if(p===47){if(!o){n=u+1;break}}else f===-1&&(o=!1,f=u+1),c>=0&&(p===t.charCodeAt(c)?--c===-1&&(s=u):(c=-1,s=f))}return n===s?s=f:s===-1&&(s=a.length),a.slice(n,s)}for(u=a.length-1;u>=0;--u)if(a.charCodeAt(u)===47){if(!o){n=u+1;break}}else s===-1&&(o=!1,s=u+1);return s===-1?"":a.slice(n,s)},extname(a){di(a),a=tr(this.toPosix(a));let t=-1,n=0,s=-1,o=!0,u=0;for(let c=a.length-1;c>=0;--c){const f=a.charCodeAt(c);if(f===47){if(!o){n=c+1;break}continue}s===-1&&(o=!1,s=c+1),f===46?t===-1?t=c:u!==1&&(u=1):t!==-1&&(u=-1)}return t===-1||s===-1||u===0||u===1&&t===s-1&&t===n+1?"":a.slice(t,s)},parse(a){di(a);const t={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return t;a=tr(this.toPosix(a));let n=a.charCodeAt(0);const s=this.isAbsolute(a);let o;t.root=this.rootname(a),s||this.hasProtocol(a)?o=1:o=0;let u=-1,c=0,f=-1,p=!0,g=a.length-1,m=0;for(;g>=o;--g){if(n=a.charCodeAt(g),n===47){if(!p){c=g+1;break}continue}f===-1&&(p=!1,f=g+1),n===46?u===-1?u=g:m!==1&&(m=1):u!==-1&&(m=-1)}return u===-1||f===-1||m===0||m===1&&u===f-1&&u===c+1?f!==-1&&(c===0&&s?t.base=t.name=a.slice(1,f):t.base=t.name=a.slice(c,f)):(c===0&&s?(t.name=a.slice(1,u),t.base=a.slice(1,f)):(t.name=a.slice(c,u),t.base=a.slice(c,f)),t.ext=a.slice(u,f)),t.dir=this.dirname(a),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Ky(a,t,n,s,o){const u=t[n];for(let c=0;c<u.length;c++){const f=u[c];n<t.length-1?Ky(a.replace(s[n],f),t,n+1,s,o):o.push(a.replace(s[n],f))}}function D_(a){const t=/\{(.*?)\}/g,n=a.match(t),s=[];if(n){const o=[];n.forEach(u=>{const c=u.substring(1,u.length-1).split(",");o.push(c)}),Ky(a,o,0,n,s)}else s.push(a);return s}const Vl=a=>!Array.isArray(a);class Ks{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,n)=>`${t}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(t,n)=>n.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const n=t;this._defaultSearchParams=Object.keys(n).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(n[s])}`).join("&")}}getAlias(t){const{alias:n,src:s}=t;return pi(n||s,u=>typeof u=="string"?u:Array.isArray(u)?u.map(c=>(c==null?void 0:c.src)??c):u!=null&&u.src?u.src:u,!0)}addManifest(t){this._manifest&&Vt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(t,n){const s=[];let o=n;Array.isArray(n)||(o=Object.entries(n).map(([u,c])=>typeof c=="string"||Array.isArray(c)?{alias:u,src:c}:{alias:u,...c})),o.forEach(u=>{const c=u.src,f=u.alias;let p;if(typeof f=="string"){const g=this._createBundleAssetId(t,f);s.push(g),p=[f,g]}else{const g=f.map(m=>this._createBundleAssetId(t,m));s.push(...g),p=[...f,...g]}this.add({...u,alias:p,src:c})}),this._bundles[t]=s}add(t){const n=[];Array.isArray(t)?n.push(...t):n.push(t);let s;s=u=>{this.hasKey(u)&&Vt(`[Resolver] already has key: ${u} overwriting`)},pi(n).forEach(u=>{const{src:c}=u;let{data:f,format:p,loadParser:g}=u;const m=pi(c).map(v=>typeof v=="string"?D_(v):Array.isArray(v)?v:[v]),y=this.getAlias(u);Array.isArray(y)?y.forEach(s):s(y);const _=[];m.forEach(v=>{v.forEach(T=>{let E={};if(typeof T!="object"){E.src=T;for(let w=0;w<this._parsers.length;w++){const z=this._parsers[w];if(z.test(T)){E=z.parse(T);break}}}else f=T.data??f,p=T.format??p,g=T.loadParser??g,E={...E,...T};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${E.src}`);E=this._buildResolvedAsset(E,{aliases:y,data:f,format:p,loadParser:g}),_.push(E)})}),y.forEach(v=>{this._assetMap[v]=_})})}resolveBundle(t){const n=Vl(t);t=pi(t);const s={};return t.forEach(o=>{const u=this._bundles[o];if(u){const c=this.resolve(u),f={};for(const p in c){const g=c[p];f[this._extractAssetIdFromBundle(o,p)]=g}s[o]=f}}),n?s[t[0]]:s}resolveUrl(t){const n=this.resolve(t);if(typeof t!="string"){const s={};for(const o in n)s[o]=n[o].src;return s}return n.src}resolve(t){const n=Vl(t);t=pi(t);const s={};return t.forEach(o=>{if(!this._resolverHash[o])if(this._assetMap[o]){let u=this._assetMap[o];const c=this._getPreferredOrder(u);c==null||c.priority.forEach(f=>{c.params[f].forEach(p=>{const g=u.filter(m=>m[f]?m[f]===p:!1);g.length&&(u=g)})}),this._resolverHash[o]=u[0]}else this._resolverHash[o]=this._buildResolvedAsset({alias:[o],src:o},{});s[o]=this._resolverHash[o]}),n?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let n=0;n<t.length;n++){const s=t[n],o=this._preferredOrder.find(u=>u.params.format.includes(s.format));if(o)return o}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const n=/\?/.test(t)?"&":"?";return`${t}${n}${this._defaultSearchParams}`}_buildResolvedAsset(t,n){const{aliases:s,data:o,loadParser:u,format:c}=n;return(this._basePath||this._rootPath)&&(t.src=Ze.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...o||{},...t.data},t.loadParser=u??t.loadParser,t.format=c??t.format??B_(t.src),t}}Ks.RETINA_PREFIX=/@([0-9\.]+)x/;function B_(a){return a.split(".").pop().split("?").shift().split("#").shift()}const ah=(a,t)=>{const n=t.split("?")[1];return n&&(a+=`?${n}`),a},Wy=class ar{constructor(t,n){this.linkedSheets=[],this._texture=t instanceof wt?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=n;const s=parseFloat(n.meta.scale);s?(this.resolution=s,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=ar.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let n=t;const s=ar.BATCH_SIZE;for(;n-t<s&&n<this._frameKeys.length;){const o=this._frameKeys[n],u=this._frames[o],c=u.frame;if(c){let f=null,p=null;const g=u.trimmed!==!1&&u.sourceSize?u.sourceSize:u.frame,m=new se(0,0,Math.floor(g.w)/this.resolution,Math.floor(g.h)/this.resolution);u.rotated?f=new se(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):f=new se(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),u.trimmed!==!1&&u.spriteSourceSize&&(p=new se(Math.floor(u.spriteSourceSize.x)/this.resolution,Math.floor(u.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[o]=new wt({source:this.textureSource,frame:f,orig:m,trim:p,rotate:u.rotated?2:0,defaultAnchor:u.anchor,defaultBorders:u.borders,label:o.toString()})}n++}}_processAnimations(){const t=this.data.animations||{};for(const n in t){this.animations[n]=[];for(let s=0;s<t[n].length;s++){const o=t[n][s];this.animations[n].push(this.textures[o])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ar.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ar.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var n;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((n=this._texture)==null||n.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Wy.BATCH_SIZE=1e3;let Am=Wy;const U_=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function Jy(a,t,n){const s={};if(a.forEach(o=>{s[o]=t}),Object.keys(t.textures).forEach(o=>{s[o]=t.textures[o]}),!n){const o=Ze.dirname(a[0]);t.linkedSheets.forEach((u,c)=>{const f=Jy([`${o}/${t.data.meta.related_multi_packs[c]}`],u,!0);Object.assign(s,f)})}return s}const L_={extension:ot.Asset,cache:{test:a=>a instanceof Am,getCacheableAssets:(a,t)=>Jy(a,t,!1)},resolver:{extension:{type:ot.ResolveParser,name:"resolveSpritesheet"},test:a=>{const n=a.split("?")[0].split("."),s=n.pop(),o=n.pop();return s==="json"&&U_.includes(o)},parse:a=>{var n;const t=a.split(".");return{resolution:parseFloat(((n=Ks.RETINA_PREFIX.exec(a))==null?void 0:n[1])??"1"),format:t[t.length-2],src:a}}},loader:{name:"spritesheetLoader",extension:{type:ot.LoadParser,priority:yn.Normal,name:"spritesheetLoader"},async testParse(a,t){return Ze.extname(t.src).toLowerCase()===".json"&&!!a.frames},async parse(a,t,n){var m,y;const{texture:s,imageFilename:o,textureOptions:u}=(t==null?void 0:t.data)??{};let c=Ze.dirname(t.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let f;if(s instanceof wt)f=s;else{const _=ah(c+(o??a.meta.image),t.src);f=(await n.load([{src:_,data:u}]))[_]}const p=new Am(f.source,a);await p.parse();const g=(m=a==null?void 0:a.meta)==null?void 0:m.related_multi_packs;if(Array.isArray(g)){const _=[];for(const T of g){if(typeof T!="string")continue;let E=c+T;(y=t.data)!=null&&y.ignoreMultiPack||(E=ah(E,t.src),_.push(n.load({src:E,data:{textureOptions:u,ignoreMultiPack:!0}})))}const v=await Promise.all(_);p.linkedSheets=v,v.forEach(T=>{T.linkedSheets=[p].concat(p.linkedSheets.filter(E=>E!==T))})}return p},async unload(a,t,n){await n.unload(a.textureSource._sourceOrigin),a.destroy(!1)}}};xe.add(L_);const Dc=Object.create(null),Tm=Object.create(null);function Hh(a,t){let n=Tm[a];return n===void 0&&(Dc[t]===void 0&&(Dc[t]=1),Tm[a]=n=Dc[t]++),n}let Ys;function t0(){return(!Ys||Ys!=null&&Ys.isContextLost())&&(Ys=Jt.get().createCanvas().getContext("webgl",{})),Ys}let Ol;function k_(){if(!Ol){Ol="mediump";const a=t0();a&&a.getShaderPrecisionFormat&&(Ol=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision?"highp":"mediump")}return Ol}function N_(a,t,n){return t?a:n?(a=a.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${a}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${a}
        `}function H_(a,t,n){const s=n?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(a.substring(0,9)!=="precision"){let o=n?t.requestedFragmentPrecision:t.requestedVertexPrecision;return o==="highp"&&s!=="highp"&&(o="mediump"),`precision ${o} float;
${a}`}else if(s!=="highp"&&a.substring(0,15)==="precision highp")return a.replace("precision highp","precision mediump");return a}function P_(a,t){return t?`#version 300 es
${a}`:a}const Y_={},X_={};function j_(a,{name:t="pixi-program"},n=!0){t=t.replace(/\s+/g,"-"),t+=n?"-fragment":"-vertex";const s=n?Y_:X_;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,a.indexOf("#define SHADER_NAME")!==-1?a:`${`#define SHADER_NAME ${t}`}
${a}`}function I_(a,t){return t?a.replace("#version 300 es",""):a}const Bc={stripVersion:I_,ensurePrecision:H_,addProgramDefines:N_,setProgramName:j_,insertVersion:P_},Uc=Object.create(null),e0=class rh{constructor(t){t={...rh.defaultOptions,...t};const n=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:k_()},setProgramName:{name:t.name},addProgramDefines:n,insertVersion:n};let o=t.fragment,u=t.vertex;Object.keys(Bc).forEach(c=>{const f=s[c];o=Bc[c](o,f,!0),u=Bc[c](u,f,!1)}),this.fragment=o,this.vertex=u,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=Hh(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const n=`${t.vertex}:${t.fragment}`;return Uc[n]||(Uc[n]=new rh(t)),Uc[n]}};e0.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let i0=e0;const wm={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function F_(a){return wm[a]??wm.float32}const q_={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function V_({source:a,entryPoint:t}){const n={},s=a.indexOf(`fn ${t}`);if(s!==-1){const o=a.indexOf("->",s);if(o!==-1){const u=a.substring(s,o),c=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let f;for(;(f=c.exec(u))!==null;){const p=q_[f[3]]??"float32";n[f[2]]={location:parseInt(f[1],10),format:p,stride:F_(p).stride,offset:0,instance:!1,start:0}}}}return n}function Lc(a){var y,_;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,o=/var(<[^>]+>)? (\w+)/,u=/:\s*(\w+)/,c=/struct\s+(\w+)\s*{([^}]+)}/g,f=/(\w+)\s*:\s*([\w\<\>]+)/g,p=/struct\s+(\w+)/,g=(y=a.match(t))==null?void 0:y.map(v=>({group:parseInt(v.match(n)[1],10),binding:parseInt(v.match(s)[1],10),name:v.match(o)[2],isUniform:v.match(o)[1]==="<uniform>",type:v.match(u)[1]}));if(!g)return{groups:[],structs:[]};const m=((_=a.match(c))==null?void 0:_.map(v=>{const T=v.match(p)[1],E=v.match(f).reduce((w,z)=>{const[B,U]=z.split(":");return w[B.trim()]=U.trim(),w},{});return E?{name:T,members:E}:null}).filter(({name:v})=>g.some(T=>T.type===v)))??[];return{groups:g,structs:m}}var rr=(a=>(a[a.VERTEX=1]="VERTEX",a[a.FRAGMENT=2]="FRAGMENT",a[a.COMPUTE=4]="COMPUTE",a))(rr||{});function $_({groups:a}){const t=[];for(let n=0;n<a.length;n++){const s=a[n];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:rr.VERTEX|rr.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:rr.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:rr.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function Z_({groups:a}){const t=[];for(let n=0;n<a.length;n++){const s=a[n];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function Q_(a,t){const n=new Set,s=new Set,o=[...a.structs,...t.structs].filter(c=>n.has(c.name)?!1:(n.add(c.name),!0)),u=[...a.groups,...t.groups].filter(c=>{const f=`${c.name}-${c.binding}`;return s.has(f)?!1:(s.add(f),!0)});return{structs:o,groups:u}}const kc=Object.create(null);class Ql{constructor(t){var f,p;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:s,layout:o,gpuLayout:u,name:c}=t;if(this.name=c,this.fragment=n,this.vertex=s,n.source===s.source){const g=Lc(n.source);this.structsAndGroups=g}else{const g=Lc(s.source),m=Lc(n.source);this.structsAndGroups=Q_(g,m)}this.layout=o??Z_(this.structsAndGroups),this.gpuLayout=u??$_(this.structsAndGroups),this.autoAssignGlobalUniforms=((f=this.layout[0])==null?void 0:f.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((p=this.layout[1])==null?void 0:p.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:n}=this,s=t.source+n.source+t.entryPoint+n.entryPoint;this._layoutKey=Hh(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=V_(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const n=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return kc[n]||(kc[n]=new Ql(t)),kc[n]}}const n0=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],K_=n0.reduce((a,t)=>(a[t]=!0,a),{});function W_(a,t){switch(a){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const s0=class a0{constructor(t,n){this._touched=0,this.uid=ae("uniform"),this._resourceType="uniformGroup",this._resourceId=ae("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...a0.defaultOptions,...n},this.uniformStructures=t;const s={};for(const o in t){const u=t[o];if(u.name=o,u.size=u.size??1,!K_[u.type])throw new Error(`Uniform type ${u.type} is not supported. Supported uniform types are: ${n0.join(", ")}`);u.value??(u.value=W_(u.type,u.size)),s[o]=u.value}this.uniforms=s,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=Hh(Object.keys(s).map(o=>`${o}-${t[o].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};s0.defaultOptions={ubo:!1,isStatic:!1};let r0=s0;class Xl{constructor(t){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const s in t){const o=t[s];this.setResource(o,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let n=0;for(const s in this.resources)t[n++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,n){var o,u;const s=this.resources[n];t!==s&&(s&&((o=t.off)==null||o.call(t,"change",this.onResourceChange,this)),(u=t.on)==null||u.call(t,"change",this.onResourceChange,this),this.resources[n]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const n=this.resources;for(const s in n)n[s]._touched=t}destroy(){var n;const t=this.resources;for(const s in t){const o=t[s];(n=o.off)==null||n.call(o,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const n=this.resources;for(const s in n)n[s]===t&&(n[s]=null)}else this._updateKey()}}var lh=(a=>(a[a.WEBGL=1]="WEBGL",a[a.WEBGPU=2]="WEBGPU",a[a.BOTH=3]="BOTH",a))(lh||{});class Ph extends gi{constructor(t){super(),this.uid=ae("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:n,glProgram:s,groups:o,resources:u,compatibleRenderers:c,groupMap:f}=t;this.gpuProgram=n,this.glProgram=s,c===void 0&&(c=0,n&&(c|=lh.WEBGPU),s&&(c|=lh.WEBGL)),this.compatibleRenderers=c;const p={};if(!u&&!o&&(u={}),u&&o)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&o&&!f)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&o&&f)for(const g in f)for(const m in f[g]){const y=f[g][m];p[y]={group:g,binding:m,name:y}}else if(n&&o&&!f){const g=n.structsAndGroups.groups;f={},g.forEach(m=>{f[m.group]=f[m.group]||{},f[m.group][m.binding]=m.name,p[m.name]=m})}else if(u){o={},f={},n&&n.structsAndGroups.groups.forEach(y=>{f[y.group]=f[y.group]||{},f[y.group][y.binding]=y.name,p[y.name]=y});let g=0;for(const m in u)p[m]||(o[99]||(o[99]=new Xl,this._ownedBindGroups.push(o[99])),p[m]={group:99,binding:g,name:m},f[99]=f[99]||{},f[99][g]=m,g++);for(const m in u){const y=m;let _=u[m];!_.source&&!_._resourceType&&(_=new r0(_));const v=p[y];v&&(o[v.group]||(o[v.group]=new Xl,this._ownedBindGroups.push(o[v.group])),o[v.group].setResource(_,v.binding))}}this.groups=o,this._uniformBindMap=f,this.resources=this._buildResourceAccessor(o,p)}addResource(t,n,s){var o,u;(o=this._uniformBindMap)[n]||(o[n]={}),(u=this._uniformBindMap[n])[s]||(u[s]=t),this.groups[n]||(this.groups[n]=new Xl,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(t,n){const s={};for(const o in n){const u=n[o];Object.defineProperty(s,u.name,{get(){return t[u.group].getResource(u.binding)},set(c){t[u.group].setResource(c,u.binding)}})}return s}destroy(t=!1){var n,s;this.emit("destroy",this),t&&((n=this.gpuProgram)==null||n.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(o=>{o.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:n,gl:s,...o}=t;let u,c;return n&&(u=Ql.from(n)),s&&(c=i0.from(s)),new Ph({gpuProgram:u,glProgram:c,...o})}}const oh=[];xe.handleByNamedList(ot.Environment,oh);async function J_(a){if(!a)for(let t=0;t<oh.length;t++){const n=oh[t];if(n.value.test()){await n.value.load();return}}}let er;function tS(){if(typeof er=="boolean")return er;try{er=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{er=!1}return er}var zl={exports:{}},Mm;function eS(){if(Mm)return zl.exports;Mm=1,zl.exports=a,zl.exports.default=a;function a(x,M,R){R=R||2;var N=M&&M.length,A=N?M[0]*R:x.length,G=t(x,0,A,R,!0),L=[];if(!G||G.next===G.prev)return L;var Y,K,W,tt,dt,st,Dt;if(N&&(G=p(x,M,G,R)),x.length>80*R){Y=W=x[0],K=tt=x[1];for(var Mt=R;Mt<A;Mt+=R)dt=x[Mt],st=x[Mt+1],dt<Y&&(Y=dt),st<K&&(K=st),dt>W&&(W=dt),st>tt&&(tt=st);Dt=Math.max(W-Y,tt-K),Dt=Dt!==0?32767/Dt:0}return s(G,L,R,Y,K,Dt,0),L}function t(x,M,R,N,A){var G,L;if(A===Xt(x,M,R,N)>0)for(G=M;G<R;G+=N)L=ft(G,x[G],x[G+1],L);else for(G=R-N;G>=M;G-=N)L=ft(G,x[G],x[G+1],L);return L&&j(L,L.next)&&(bt(L),L=L.next),L}function n(x,M){if(!x)return x;M||(M=x);var R=x,N;do if(N=!1,!R.steiner&&(j(R,R.next)||U(R.prev,R,R.next)===0)){if(bt(R),R=M=R.prev,R===R.next)break;N=!0}else R=R.next;while(N||R!==M);return M}function s(x,M,R,N,A,G,L){if(x){!L&&G&&v(x,N,A,G);for(var Y=x,K,W;x.prev!==x.next;){if(K=x.prev,W=x.next,G?u(x,N,A,G):o(x)){M.push(K.i/R|0),M.push(x.i/R|0),M.push(W.i/R|0),bt(x),x=W.next,Y=W.next;continue}if(x=W,x===Y){L?L===1?(x=c(n(x),M,R),s(x,M,R,N,A,G,2)):L===2&&f(x,M,R,N,A,G):s(n(x),M,R,N,A,G,1);break}}}}function o(x){var M=x.prev,R=x,N=x.next;if(U(M,R,N)>=0)return!1;for(var A=M.x,G=R.x,L=N.x,Y=M.y,K=R.y,W=N.y,tt=A<G?A<L?A:L:G<L?G:L,dt=Y<K?Y<W?Y:W:K<W?K:W,st=A>G?A>L?A:L:G>L?G:L,Dt=Y>K?Y>W?Y:W:K>W?K:W,Mt=N.next;Mt!==M;){if(Mt.x>=tt&&Mt.x<=st&&Mt.y>=dt&&Mt.y<=Dt&&z(A,Y,G,K,L,W,Mt.x,Mt.y)&&U(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.next}return!0}function u(x,M,R,N){var A=x.prev,G=x,L=x.next;if(U(A,G,L)>=0)return!1;for(var Y=A.x,K=G.x,W=L.x,tt=A.y,dt=G.y,st=L.y,Dt=Y<K?Y<W?Y:W:K<W?K:W,Mt=tt<dt?tt<st?tt:st:dt<st?dt:st,Ee=Y>K?Y>W?Y:W:K>W?K:W,pe=tt>dt?tt>st?tt:st:dt>st?dt:st,Re=E(Dt,Mt,M,R,N),Ge=E(Ee,pe,M,R,N),mt=x.prevZ,Ct=x.nextZ;mt&&mt.z>=Re&&Ct&&Ct.z<=Ge;){if(mt.x>=Dt&&mt.x<=Ee&&mt.y>=Mt&&mt.y<=pe&&mt!==A&&mt!==L&&z(Y,tt,K,dt,W,st,mt.x,mt.y)&&U(mt.prev,mt,mt.next)>=0||(mt=mt.prevZ,Ct.x>=Dt&&Ct.x<=Ee&&Ct.y>=Mt&&Ct.y<=pe&&Ct!==A&&Ct!==L&&z(Y,tt,K,dt,W,st,Ct.x,Ct.y)&&U(Ct.prev,Ct,Ct.next)>=0))return!1;Ct=Ct.nextZ}for(;mt&&mt.z>=Re;){if(mt.x>=Dt&&mt.x<=Ee&&mt.y>=Mt&&mt.y<=pe&&mt!==A&&mt!==L&&z(Y,tt,K,dt,W,st,mt.x,mt.y)&&U(mt.prev,mt,mt.next)>=0)return!1;mt=mt.prevZ}for(;Ct&&Ct.z<=Ge;){if(Ct.x>=Dt&&Ct.x<=Ee&&Ct.y>=Mt&&Ct.y<=pe&&Ct!==A&&Ct!==L&&z(Y,tt,K,dt,W,st,Ct.x,Ct.y)&&U(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.nextZ}return!0}function c(x,M,R){var N=x;do{var A=N.prev,G=N.next.next;!j(A,G)&&q(A,N,N.next,G)&&nt(A,G)&&nt(G,A)&&(M.push(A.i/R|0),M.push(N.i/R|0),M.push(G.i/R|0),bt(N),bt(N.next),N=x=G),N=N.next}while(N!==x);return n(N)}function f(x,M,R,N,A,G){var L=x;do{for(var Y=L.next.next;Y!==L.prev;){if(L.i!==Y.i&&B(L,Y)){var K=J(L,Y);L=n(L,L.next),K=n(K,K.next),s(L,M,R,N,A,G,0),s(K,M,R,N,A,G,0);return}Y=Y.next}L=L.next}while(L!==x)}function p(x,M,R,N){var A=[],G,L,Y,K,W;for(G=0,L=M.length;G<L;G++)Y=M[G]*N,K=G<L-1?M[G+1]*N:x.length,W=t(x,Y,K,N,!1),W===W.next&&(W.steiner=!0),A.push(w(W));for(A.sort(g),G=0;G<A.length;G++)R=m(A[G],R);return R}function g(x,M){return x.x-M.x}function m(x,M){var R=y(x,M);if(!R)return M;var N=J(R,x);return n(N,N.next),n(R,R.next)}function y(x,M){var R=M,N=x.x,A=x.y,G=-1/0,L;do{if(A<=R.y&&A>=R.next.y&&R.next.y!==R.y){var Y=R.x+(A-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(Y<=N&&Y>G&&(G=Y,L=R.x<R.next.x?R:R.next,Y===N))return L}R=R.next}while(R!==M);if(!L)return null;var K=L,W=L.x,tt=L.y,dt=1/0,st;R=L;do N>=R.x&&R.x>=W&&N!==R.x&&z(A<tt?N:G,A,W,tt,A<tt?G:N,A,R.x,R.y)&&(st=Math.abs(A-R.y)/(N-R.x),nt(R,x)&&(st<dt||st===dt&&(R.x>L.x||R.x===L.x&&_(L,R)))&&(L=R,dt=st)),R=R.next;while(R!==K);return L}function _(x,M){return U(x.prev,x,M.prev)<0&&U(M.next,x,x.next)<0}function v(x,M,R,N){var A=x;do A.z===0&&(A.z=E(A.x,A.y,M,R,N)),A.prevZ=A.prev,A.nextZ=A.next,A=A.next;while(A!==x);A.prevZ.nextZ=null,A.prevZ=null,T(A)}function T(x){var M,R,N,A,G,L,Y,K,W=1;do{for(R=x,x=null,G=null,L=0;R;){for(L++,N=R,Y=0,M=0;M<W&&(Y++,N=N.nextZ,!!N);M++);for(K=W;Y>0||K>0&&N;)Y!==0&&(K===0||!N||R.z<=N.z)?(A=R,R=R.nextZ,Y--):(A=N,N=N.nextZ,K--),G?G.nextZ=A:x=A,A.prevZ=G,G=A;R=N}G.nextZ=null,W*=2}while(L>1);return x}function E(x,M,R,N,A){return x=(x-R)*A|0,M=(M-N)*A|0,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,M=(M|M<<8)&16711935,M=(M|M<<4)&252645135,M=(M|M<<2)&858993459,M=(M|M<<1)&1431655765,x|M<<1}function w(x){var M=x,R=x;do(M.x<R.x||M.x===R.x&&M.y<R.y)&&(R=M),M=M.next;while(M!==x);return R}function z(x,M,R,N,A,G,L,Y){return(A-L)*(M-Y)>=(x-L)*(G-Y)&&(x-L)*(N-Y)>=(R-L)*(M-Y)&&(R-L)*(G-Y)>=(A-L)*(N-Y)}function B(x,M){return x.next.i!==M.i&&x.prev.i!==M.i&&!rt(x,M)&&(nt(x,M)&&nt(M,x)&&et(x,M)&&(U(x.prev,x,M.prev)||U(x,M.prev,M))||j(x,M)&&U(x.prev,x,x.next)>0&&U(M.prev,M,M.next)>0)}function U(x,M,R){return(M.y-x.y)*(R.x-M.x)-(M.x-x.x)*(R.y-M.y)}function j(x,M){return x.x===M.x&&x.y===M.y}function q(x,M,R,N){var A=$(U(x,M,R)),G=$(U(x,M,N)),L=$(U(R,N,x)),Y=$(U(R,N,M));return!!(A!==G&&L!==Y||A===0&&V(x,R,M)||G===0&&V(x,N,M)||L===0&&V(R,x,N)||Y===0&&V(R,M,N))}function V(x,M,R){return M.x<=Math.max(x.x,R.x)&&M.x>=Math.min(x.x,R.x)&&M.y<=Math.max(x.y,R.y)&&M.y>=Math.min(x.y,R.y)}function $(x){return x>0?1:x<0?-1:0}function rt(x,M){var R=x;do{if(R.i!==x.i&&R.next.i!==x.i&&R.i!==M.i&&R.next.i!==M.i&&q(R,R.next,x,M))return!0;R=R.next}while(R!==x);return!1}function nt(x,M){return U(x.prev,x,x.next)<0?U(x,M,x.next)>=0&&U(x,x.prev,M)>=0:U(x,M,x.prev)<0||U(x,x.next,M)<0}function et(x,M){var R=x,N=!1,A=(x.x+M.x)/2,G=(x.y+M.y)/2;do R.y>G!=R.next.y>G&&R.next.y!==R.y&&A<(R.next.x-R.x)*(G-R.y)/(R.next.y-R.y)+R.x&&(N=!N),R=R.next;while(R!==x);return N}function J(x,M){var R=new Yt(x.i,x.x,x.y),N=new Yt(M.i,M.x,M.y),A=x.next,G=M.prev;return x.next=M,M.prev=x,R.next=A,A.prev=R,N.next=R,R.prev=N,G.next=N,N.prev=G,N}function ft(x,M,R,N){var A=new Yt(x,M,R);return N?(A.next=N.next,A.prev=N,N.next.prev=A,N.next=A):(A.prev=A,A.next=A),A}function bt(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function Yt(x,M,R){this.i=x,this.x=M,this.y=R,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}a.deviation=function(x,M,R,N){var A=M&&M.length,G=A?M[0]*R:x.length,L=Math.abs(Xt(x,0,G,R));if(A)for(var Y=0,K=M.length;Y<K;Y++){var W=M[Y]*R,tt=Y<K-1?M[Y+1]*R:x.length;L-=Math.abs(Xt(x,W,tt,R))}var dt=0;for(Y=0;Y<N.length;Y+=3){var st=N[Y]*R,Dt=N[Y+1]*R,Mt=N[Y+2]*R;dt+=Math.abs((x[st]-x[Mt])*(x[Dt+1]-x[st+1])-(x[st]-x[Dt])*(x[Mt+1]-x[st+1]))}return L===0&&dt===0?0:Math.abs((dt-L)/L)};function Xt(x,M,R,N){for(var A=0,G=M,L=R-N;G<R;G+=N)A+=(x[L]-x[G])*(x[G+1]+x[L+1]),L=G;return A}return a.flatten=function(x){for(var M=x[0][0].length,R={vertices:[],holes:[],dimensions:M},N=0,A=0;A<x.length;A++){for(var G=0;G<x[A].length;G++)for(var L=0;L<M;L++)R.vertices.push(x[A][G][L]);A>0&&(N+=x[A-1].length,R.holes.push(N))}return R},zl.exports}var iS=eS();const nS=Dh(iS);var l0=(a=>(a[a.NONE=0]="NONE",a[a.COLOR=16384]="COLOR",a[a.STENCIL=1024]="STENCIL",a[a.DEPTH=256]="DEPTH",a[a.COLOR_DEPTH=16640]="COLOR_DEPTH",a[a.COLOR_STENCIL=17408]="COLOR_STENCIL",a[a.DEPTH_STENCIL=1280]="DEPTH_STENCIL",a[a.ALL=17664]="ALL",a))(l0||{});class sS{constructor(t){this.items=[],this._name=t}emit(t,n,s,o,u,c,f,p){const{name:g,items:m}=this;for(let y=0,_=m.length;y<_;y++)m[y][g](t,n,s,o,u,c,f,p);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const n=this.items.indexOf(t);return n!==-1&&this.items.splice(n,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const aS=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],o0=class u0 extends gi{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const n=[...aS,...this.config.runners??[]];this._addRunners(...n),this._unsafeEvalCheck()}async init(t={}){const n=t.skipExtensionImports===!0?!0:t.manageImports===!1;await J_(n),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...u0.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,n){let s=t;if(s instanceof oi&&(s={container:s},n&&(Rt(Lt,"passing a second argument is deprecated, please use render options instead"),s.target=n.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor??(s.clearColor=this.background.colorRgba),s.clear??(s.clear=this.background.clearBeforeRender)),s.clearColor){const o=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=o?s.clearColor:re.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),s.container.enableRenderGroup(),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}resize(t,n,s){const o=this.view.resolution;this.view.resize(t,n,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==o&&this.runners.resolutionChange.emit(s)}clear(t={}){const n=this;t.target||(t.target=n.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=l0.ALL);const{clear:s,clearColor:o,target:u}=t;re.shared.setValue(o??this.background.colorRgba),n.renderTarget.clear(u,s,re.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(n=>{this.runners[n]=new sS(n)})}_addSystems(t){let n;for(n in t){const s=t[n];this._addSystem(s.value,s.name)}}_addSystem(t,n){const s=new t(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=s,this._systemsHash[n]=s;for(const o in this.runners)this.runners[o].add(s);return this}_addPipes(t,n){const s=n.reduce((o,u)=>(o[u.name]=u.value,o),{});t.forEach(o=>{const u=o.value,c=o.name,f=s[c];this.renderPipes[c]=new u(this,f?new f:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(n=>{n.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!tS())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};o0.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let c0=o0,Dl;function rS(a){return Dl!==void 0||(Dl=(()=>{var n;const t={stencil:!0,failIfMajorPerformanceCaveat:a??c0.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Jt.get().getWebGLRenderingContext())return!1;let o=Jt.get().createCanvas().getContext("webgl",t);const u=!!((n=o==null?void 0:o.getContextAttributes())!=null&&n.stencil);if(o){const c=o.getExtension("WEBGL_lose_context");c&&c.loseContext()}return o=null,u}catch{return!1}})()),Dl}let Bl;async function lS(a={}){return Bl!==void 0||(Bl=await(async()=>{const t=Jt.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(a)).requestDevice(),!0}catch{return!1}})()),Bl}const Cm=["webgl","webgpu","canvas"];async function oS(a){let t=[];a.preference?(t.push(a.preference),Cm.forEach(u=>{u!==a.preference&&t.push(u)})):t=Cm.slice();let n,s={};for(let u=0;u<t.length;u++){const c=t[u];if(c==="webgpu"&&await lS()){const{WebGPURenderer:f}=await Fl(async()=>{const{WebGPURenderer:p}=await import("./WebGPURenderer-BUsgyEnj.js");return{WebGPURenderer:p}},__vite__mapDeps([3,2,4]));n=f,s={...a,...a.webgpu};break}else if(c==="webgl"&&rS(a.failIfMajorPerformanceCaveat??c0.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:f}=await Fl(async()=>{const{WebGLRenderer:p}=await import("./WebGLRenderer-MMVZWgfq.js");return{WebGLRenderer:p}},__vite__mapDeps([5,2,4]));n=f,s={...a,...a.webgl};break}else if(c==="canvas")throw s={...a},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!n)throw new Error("No available renderer for the current environment");const o=new n;return await o.init(s),o}const h0="8.9.1";class f0{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,h0)}static destroy(){}}f0.extension=ot.Application;class uS{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,h0)}destroy(){this._renderer=null}}uS.extension={type:[ot.WebGLSystem,ot.WebGPUSystem],name:"initHook",priority:-10};const d0=class uh{constructor(...t){this.stage=new oi,t[0]!==void 0&&Rt(Lt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await oS(t),uh._plugins.forEach(n=>{n.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Rt(Lt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){const s=uh._plugins.slice(0);s.reverse(),s.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};d0._plugins=[];let p0=d0;xe.handleByList(ot.Application,p0._plugins);xe.add(f0);class g0 extends gi{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Rt(Lt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Rt(Lt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Rt(Lt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Rt(Lt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Rt(Lt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var n;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(n=this.chars[s].texture)==null||n.destroy();this.chars=null,t&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}const Em=[{offset:0,color:"white"},{offset:1,color:"black"}],Yh=class ch{constructor(...t){this.uid=ae("fillGradient"),this.type="linear",this.colorStops=[];let n=cS(t);n={...n.type==="radial"?ch.defaultRadialOptions:ch.defaultLinearOptions,...wy(n)},this._textureSize=n.textureSize,n.type==="radial"?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(o=>{this.addColorStop(o.offset,o.color)})}addColorStop(t,n){return this.colorStops.push({offset:t,color:re.shared.setValue(n).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:Em,n=this._textureSize,{canvas:s,context:o}=Gm(n,1),u=o.createLinearGradient(0,0,this._textureSize,0);Rm(u,t),o.fillStyle=u,o.fillRect(0,0,n,1),this.texture=new wt({source:new ts({resource:s})});const{x:c,y:f}=this.start,{x:p,y:g}=this.end,m=new At,y=p-c,_=g-f,v=Math.sqrt(y*y+_*_),T=Math.atan2(_,y);m.scale(v/n,1),m.rotate(T),m.translate(c,f),this.textureSpace==="local"&&m.scale(n,n),this.transform=m}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:Em,n=this._textureSize,{canvas:s,context:o}=Gm(n,n),{x:u,y:c}=this.center,{x:f,y:p}=this.outerCenter,g=this.innerRadius,m=this.outerRadius,y=f-m,_=p-m,v=n/(m*2),T=(u-y)*v,E=(c-_)*v,w=o.createRadialGradient(T,E,g*v,(f-y)*v,(p-_)*v,m*v);Rm(w,t),o.fillStyle=t[t.length-1].color,o.fillRect(0,0,n,n),o.fillStyle=w,o.translate(T,E),o.rotate(this.rotation),o.scale(1,this.scale),o.translate(-T,-E),o.fillRect(0,0,n,n),this.texture=new wt({source:new ts({resource:s,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const z=new At;z.scale(1/v,1/v),z.translate(y,_),this.textureSpace==="local"&&z.scale(n,n),this.transform=z}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};Yh.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256};Yh.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let ui=Yh;function Rm(a,t){for(let n=0;n<t.length;n++){const s=t[n];a.addColorStop(s.offset,s.color)}}function Gm(a,t){const n=Jt.get().createCanvas(a,t),s=n.getContext("2d");return{canvas:n,context:s}}function cS(a){let t=a[0]??{};return(typeof t=="number"||a[1])&&(Rt("8.5.2","use options object instead"),t={type:"linear",start:{x:a[0],y:a[1]},end:{x:a[2],y:a[3]},textureSpace:a[4],textureSize:a[5]??ui.defaultLinearOptions.textureSize}),t}const Om={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Kl{constructor(t,n){this.uid=ae("fillPattern"),this.transform=new At,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),n&&(t.source.style.addressModeU=Om[n].addressModeU,t.source.style.addressModeV=Om[n].addressModeV)}setTransform(t){const n=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var Nc,zm;function hS(){if(zm)return Nc;zm=1,Nc=n;var a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(u){var c=[];return u.replace(t,function(f,p,g){var m=p.toLowerCase();for(g=o(g),m=="m"&&g.length>2&&(c.push([p].concat(g.splice(0,2))),m="l",p=p=="m"?"l":"L");;){if(g.length==a[m])return g.unshift(p),c.push(g);if(g.length<a[m])throw new Error("malformed path data");c.push([p].concat(g.splice(0,a[m])))}}),c}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(u){var c=u.match(s);return c?c.map(Number):[]}return Nc}var fS=hS();const dS=Dh(fS);function pS(a,t){const n=dS(a),s=[];let o=null,u=0,c=0;for(let f=0;f<n.length;f++){const p=n[f],g=p[0],m=p;switch(g){case"M":u=m[1],c=m[2],t.moveTo(u,c);break;case"m":u+=m[1],c+=m[2],t.moveTo(u,c);break;case"H":u=m[1],t.lineTo(u,c);break;case"h":u+=m[1],t.lineTo(u,c);break;case"V":c=m[1],t.lineTo(u,c);break;case"v":c+=m[1],t.lineTo(u,c);break;case"L":u=m[1],c=m[2],t.lineTo(u,c);break;case"l":u+=m[1],c+=m[2],t.lineTo(u,c);break;case"C":u=m[5],c=m[6],t.bezierCurveTo(m[1],m[2],m[3],m[4],u,c);break;case"c":t.bezierCurveTo(u+m[1],c+m[2],u+m[3],c+m[4],u+m[5],c+m[6]),u+=m[5],c+=m[6];break;case"S":u=m[3],c=m[4],t.bezierCurveToShort(m[1],m[2],u,c);break;case"s":t.bezierCurveToShort(u+m[1],c+m[2],u+m[3],c+m[4]),u+=m[3],c+=m[4];break;case"Q":u=m[3],c=m[4],t.quadraticCurveTo(m[1],m[2],u,c);break;case"q":t.quadraticCurveTo(u+m[1],c+m[2],u+m[3],c+m[4]),u+=m[3],c+=m[4];break;case"T":u=m[1],c=m[2],t.quadraticCurveToShort(u,c);break;case"t":u+=m[1],c+=m[2],t.quadraticCurveToShort(u,c);break;case"A":u=m[6],c=m[7],t.arcToSvg(m[1],m[2],m[3],m[4],m[5],u,c);break;case"a":u+=m[6],c+=m[7],t.arcToSvg(m[1],m[2],m[3],m[4],m[5],u,c);break;case"Z":case"z":t.closePath(),s.length>0&&(o=s.pop(),o?(u=o.startX,c=o.startY):(u=0,c=0)),o=null;break;default:Vt(`Unknown SVG path command: ${g}`)}g!=="Z"&&g!=="z"&&o===null&&(o={startX:u,startY:c},s.push(o))}return t}class Xh{constructor(t=0,n=0,s=0){this.type="circle",this.x=t,this.y=n,this.radius=s}clone(){return new Xh(this.x,this.y,this.radius)}contains(t,n){if(this.radius<=0)return!1;const s=this.radius*this.radius;let o=this.x-t,u=this.y-n;return o*=o,u*=u,o+u<=s}strokeContains(t,n,s,o=.5){if(this.radius===0)return!1;const u=this.x-t,c=this.y-n,f=this.radius,p=(1-o)*s,g=Math.sqrt(u*u+c*c);return g<=f+p&&g>f-(s-p)}getBounds(t){return t||(t=new se),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class jh{constructor(t=0,n=0,s=0,o=0){this.type="ellipse",this.x=t,this.y=n,this.halfWidth=s,this.halfHeight=o}clone(){return new jh(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,o=(n-this.y)/this.halfHeight;return s*=s,o*=o,s+o<=1}strokeContains(t,n,s,o=.5){const{halfWidth:u,halfHeight:c}=this;if(u<=0||c<=0)return!1;const f=s*(1-o),p=s-f,g=u-p,m=c-p,y=u+f,_=c+f,v=t-this.x,T=n-this.y,E=v*v/(g*g)+T*T/(m*m),w=v*v/(y*y)+T*T/(_*_);return E>1&&w<=1}getBounds(t){return t||(t=new se),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function gS(a,t,n,s,o,u){const c=a-n,f=t-s,p=o-n,g=u-s,m=c*p+f*g,y=p*p+g*g;let _=-1;y!==0&&(_=m/y);let v,T;_<0?(v=n,T=s):_>1?(v=o,T=u):(v=n+_*p,T=s+_*g);const E=a-v,w=t-T;return E*E+w*w}let mS,yS;class ur{constructor(...t){this.type="polygon";let n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){const s=[];for(let o=0,u=n.length;o<u;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.closePath=!0}isClockwise(){let t=0;const n=this.points,s=n.length;for(let o=0;o<s;o+=2){const u=n[o],c=n[o+1],f=n[(o+2)%s],p=n[(o+3)%s];t+=(f-u)*(p+c)}return t<0}containsPolygon(t){const n=this.getBounds(mS),s=t.getBounds(yS);if(!n.containsRect(s))return!1;const o=t.points;for(let u=0;u<o.length;u+=2){const c=o[u],f=o[u+1];if(!this.contains(c,f))return!1}return!0}clone(){const t=this.points.slice(),n=new ur(t);return n.closePath=this.closePath,n}contains(t,n){let s=!1;const o=this.points.length/2;for(let u=0,c=o-1;u<o;c=u++){const f=this.points[u*2],p=this.points[u*2+1],g=this.points[c*2],m=this.points[c*2+1];p>n!=m>n&&t<(g-f)*((n-p)/(m-p))+f&&(s=!s)}return s}strokeContains(t,n,s,o=.5){const u=s*s,c=u*(1-o),f=u-c,{points:p}=this,g=p.length-(this.closePath?0:2);for(let m=0;m<g;m+=2){const y=p[m],_=p[m+1],v=p[(m+2)%p.length],T=p[(m+3)%p.length],E=gS(t,n,y,_,v,T),w=Math.sign((v-y)*(n-_)-(T-_)*(t-y));if(E<=(w<0?f:c))return!0}return!1}getBounds(t){t||(t=new se);const n=this.points;let s=1/0,o=-1/0,u=1/0,c=-1/0;for(let f=0,p=n.length;f<p;f+=2){const g=n[f],m=n[f+1];s=g<s?g:s,o=g>o?g:o,u=m<u?m:u,c=m>c?m:c}return t.x=s,t.width=o-s,t.y=u,t.height=c-u,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,n)=>`${t}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Ul=(a,t,n,s,o,u,c)=>{const f=a-n,p=t-s,g=Math.sqrt(f*f+p*p);return g>=o-u&&g<=o+c};class Ih{constructor(t=0,n=0,s=0,o=0,u=20){this.type="roundedRectangle",this.x=t,this.y=n,this.width=s,this.height=o,this.radius=u}getBounds(t){return t||(t=new se),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Ih(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+s&&n<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let o=t-(this.x+s),u=n-(this.y+s);const c=s*s;if(o*o+u*u<=c||(o=t-(this.x+this.width-s),o*o+u*u<=c)||(u=n-(this.y+this.height-s),o*o+u*u<=c)||(o=t-(this.x+s),o*o+u*u<=c))return!0}return!1}strokeContains(t,n,s,o=.5){const{x:u,y:c,width:f,height:p,radius:g}=this,m=s*(1-o),y=s-m,_=u+g,v=c+g,T=f-g*2,E=p-g*2,w=u+f,z=c+p;return(t>=u-m&&t<=u+y||t>=w-y&&t<=w+m)&&n>=v&&n<=v+E||(n>=c-m&&n<=c+y||n>=z-y&&n<=z+m)&&t>=_&&t<=_+T?!0:t<_&&n<v&&Ul(t,n,_,v,g,y,m)||t>w-g&&n<v&&Ul(t,n,w-g,v,g,y,m)||t>w-g&&n>z-g&&Ul(t,n,w-g,z-g,g,y,m)||t<_&&n>z-g&&Ul(t,n,_,z-g,g,y,m)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const bS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function vS(a){let t="";for(let n=0;n<a;++n)n>0&&(t+=`
else `),n<a-1&&(t+=`if(test == ${n}.0){}`);return t}function xS(a,t){if(a===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=bS.replace(/%forloop%/gi,vS(a));if(t.shaderSource(n,s),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))a=a/2|0;else break}}finally{t.deleteShader(n)}return a}let Xs=null;function m0(){var t;if(Xs)return Xs;const a=t0();return Xs=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),Xs=xS(Xs,a),(t=a.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Xs}const y0={};function _S(a,t){let n=2166136261;for(let s=0;s<t;s++)n^=a[s].uid,n=Math.imul(n,16777619),n>>>=0;return y0[n]||SS(a,t,n)}let Hc=0;function SS(a,t,n){const s={};let o=0;Hc||(Hc=m0());for(let c=0;c<Hc;c++){const f=c<t?a[c]:wt.EMPTY.source;s[o++]=f.source,s[o++]=f.style}const u=new Xl(s);return y0[n]=u,u}class Dm{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function Bm(a,t){const n=a.byteLength/8|0,s=new Float64Array(a,0,n);new Float64Array(t,0,n).set(s);const u=a.byteLength-n*8;if(u>0){const c=new Uint8Array(a,n*8,u);new Uint8Array(t,n*8,u).set(c)}}const AS={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var TS=(a=>(a[a.DISABLED=0]="DISABLED",a[a.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",a[a.MASK_ACTIVE=2]="MASK_ACTIVE",a[a.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",a[a.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",a[a.NONE=5]="NONE",a))(TS||{});function Um(a,t){return t.alphaMode==="no-premultiply-alpha"&&AS[a]||a}class wS{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const n=this.textures[t];this.textures[t]=null,this.ids[n.uid]=null}this.count=0}}class MS{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new wS,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const b0=[];let hh=0;function Lm(){return hh>0?b0[--hh]:new MS}function km(a){b0[hh++]=a}let ir=0;const v0=class jl{constructor(t={}){this.uid=ae("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],jl.defaultOptions.maxTextures=jl.defaultOptions.maxTextures??m0(),t={...jl.defaultOptions,...t};const{maxTextures:n,attributesInitialSize:s,indicesInitialSize:o}=t;this.attributeBuffer=new Dm(s*4),this.indexBuffer=new Uint16Array(o),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)km(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,n){const s=t._batch.textures.ids[n._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=n,!0)}updateElement(t){this.dirty=!0;const n=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId)}break(t){const n=this._elements;if(!n[this.elementStart])return;let s=Lm(),o=s.textures;o.clear();const u=n[this.elementStart];let c=Um(u.blendMode,u.texture._source),f=u.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const p=this.attributeBuffer.float32View,g=this.attributeBuffer.uint32View,m=this.indexBuffer;let y=this._batchIndexSize,_=this._batchIndexStart,v="startBatch";const T=this.maxTextures;for(let E=this.elementStart;E<this.elementSize;++E){const w=n[E];n[E]=null;const B=w.texture._source,U=Um(w.blendMode,B),j=c!==U||f!==w.topology;if(B._batchTick===ir&&!j){w._textureId=B._textureBindLocation,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,p,g,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,p,g,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize)),w._batch=s;continue}B._batchTick=ir,(o.count>=T||j)&&(this._finishBatch(s,_,y-_,o,c,f,t,v),v="renderBatch",_=y,c=U,f=w.topology,s=Lm(),o=s.textures,o.clear(),++ir),w._textureId=B._textureBindLocation=o.count,o.ids[B.uid]=o.count,o.textures[o.count++]=B,w._batch=s,y+=w.indexSize,w.packAsQuad?(this.packQuadAttributes(w,p,g,w._attributeStart,w._textureId),this.packQuadIndex(m,w._indexStart,w._attributeStart/this.vertexSize)):(this.packAttributes(w,p,g,w._attributeStart,w._textureId),this.packIndex(w,m,w._indexStart,w._attributeStart/this.vertexSize))}o.count>0&&(this._finishBatch(s,_,y-_,o,c,f,t,v),_=y,++ir),this.elementStart=this.elementSize,this._batchIndexStart=_,this._batchIndexSize=y}_finishBatch(t,n,s,o,u,c,f,p){t.gpuBindGroup=null,t.bindGroup=null,t.action=p,t.batcher=this,t.textures=o,t.blendMode=u,t.topology=c,t.start=n,t.size=s,++ir,this.batches[this.batchIndex++]=t,f.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const n=Math.max(t,this.attributeBuffer.size*2),s=new Dm(n);Bm(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const n=this.indexBuffer;let s=Math.max(t,n.length*1.5);s+=s%2;const o=s>65535?new Uint32Array(s):new Uint16Array(s);if(o.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let u=0;u<n.length;u++)o[u]=n[u];else Bm(n.buffer,o.buffer);this.indexBuffer=o}packQuadIndex(t,n,s){t[n]=s+0,t[n+1]=s+1,t[n+2]=s+2,t[n+3]=s+0,t[n+4]=s+2,t[n+5]=s+3}packIndex(t,n,s,o){const u=t.indices,c=t.indexSize,f=t.indexOffset,p=t.attributeOffset;for(let g=0;g<c;g++)n[s++]=o+u[g+f]-p}destroy(){for(let t=0;t<this.batches.length;t++)km(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};v0.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let CS=v0;var ke=(a=>(a[a.MAP_READ=1]="MAP_READ",a[a.MAP_WRITE=2]="MAP_WRITE",a[a.COPY_SRC=4]="COPY_SRC",a[a.COPY_DST=8]="COPY_DST",a[a.INDEX=16]="INDEX",a[a.VERTEX=32]="VERTEX",a[a.UNIFORM=64]="UNIFORM",a[a.STORAGE=128]="STORAGE",a[a.INDIRECT=256]="INDIRECT",a[a.QUERY_RESOLVE=512]="QUERY_RESOLVE",a[a.STATIC=1024]="STATIC",a))(ke||{});class hr extends gi{constructor(t){let{data:n,size:s}=t;const{usage:o,label:u,shrinkToFit:c}=t;super(),this.uid=ae("buffer"),this._resourceType="buffer",this._resourceId=ae("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,s??(s=n==null?void 0:n.byteLength);const f=!!n;this.descriptor={size:s,usage:o,mappedAtCreation:f,label:u},this.shrinkToFit=c??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&ke.STATIC)}set static(t){t?this.descriptor.usage|=ke.STATIC:this.descriptor.usage&=~ke.STATIC}setDataWithSize(t,n,s){if(this._updateID++,this._updateSize=n*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const o=this._data;if(this._data=t,this._dataInt32=null,!o||o.length!==t.length){!this.shrinkToFit&&o&&t.byteLength<o.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=ae("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function x0(a,t){if(!(a instanceof hr)){let n=t?ke.INDEX:ke.VERTEX;a instanceof Array&&(t?(a=new Uint32Array(a),n=ke.INDEX|ke.COPY_DST):(a=new Float32Array(a),n=ke.VERTEX|ke.COPY_DST)),a=new hr({data:a,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return a}function ES(a,t,n){const s=a.getAttribute(t);if(!s)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const o=s.buffer.data;let u=1/0,c=1/0,f=-1/0,p=-1/0;const g=o.BYTES_PER_ELEMENT,m=(s.offset||0)/g,y=(s.stride||2*4)/g;for(let _=m;_<o.length;_+=y){const v=o[_],T=o[_+1];v>f&&(f=v),T>p&&(p=T),v<u&&(u=v),T<c&&(c=T)}return n.minX=u,n.minY=c,n.maxX=f,n.maxY=p,n}function RS(a){return(a instanceof hr||Array.isArray(a)||a.BYTES_PER_ELEMENT)&&(a={buffer:a}),a.buffer=x0(a.buffer,!1),a}class GS extends gi{constructor(t={}){super(),this.uid=ae("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Ce,this._boundsDirty=!0;const{attributes:n,indexBuffer:s,topology:o}=t;if(this.buffers=[],this.attributes={},n)for(const u in n)this.addAttribute(u,n[u]);this.instanceCount=t.instanceCount??1,s&&this.addIndex(s),this.topology=o||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const n=this.attributes[t];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(t,n){const s=RS(n);this.buffers.indexOf(s.buffer)===-1&&(this.buffers.push(s.buffer),s.buffer.on("update",this.onBufferUpdate,this),s.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=s}addIndex(t){this.indexBuffer=x0(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,ES(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(n=>n.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const OS=new Float32Array(1),zS=new Uint32Array(1);class DS extends GS{constructor(){const n=new hr({data:OS,label:"attribute-batch-buffer",usage:ke.VERTEX|ke.COPY_DST,shrinkToFit:!1}),s=new hr({data:zS,label:"index-batch-buffer",usage:ke.INDEX|ke.COPY_DST,shrinkToFit:!1}),o=6*4;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:o,offset:0},aUV:{buffer:n,format:"float32x2",stride:o,offset:2*4},aColor:{buffer:n,format:"unorm8x4",stride:o,offset:4*4},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:o,offset:5*4}},indexBuffer:s})}}function Nm(a,t,n){if(a)for(const s in a){const o=s.toLocaleLowerCase(),u=t[o];if(u){let c=a[s];s==="header"&&(c=c.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&u.push(`//----${n}----//`),u.push(c)}else Vt(`${s} placement hook does not exist in shader`)}}const BS=/\{\{(.*?)\}\}/g;function Hm(a){var s;const t={};return(((s=a.match(BS))==null?void 0:s.map(o=>o.replace(/[{()}]/g,"")))??[]).forEach(o=>{t[o]=[]}),t}function Pm(a,t){let n;const s=/@in\s+([^;]+);/g;for(;(n=s.exec(a))!==null;)t.push(n[1])}function Ym(a,t,n=!1){const s=[];Pm(t,s),a.forEach(f=>{f.header&&Pm(f.header,s)});const o=s;n&&o.sort();const u=o.map((f,p)=>`       @location(${p}) ${f},`).join(`
`);let c=t.replace(/@in\s+[^;]+;\s*/g,"");return c=c.replace("{{in}}",`
${u}
`),c}function Xm(a,t){let n;const s=/@out\s+([^;]+);/g;for(;(n=s.exec(a))!==null;)t.push(n[1])}function US(a){const n=/\b(\w+)\s*:/g.exec(a);return n?n[1]:""}function LS(a){const t=/@.*?\s+/g;return a.replace(t,"")}function kS(a,t){const n=[];Xm(t,n),a.forEach(p=>{p.header&&Xm(p.header,n)});let s=0;const o=n.sort().map(p=>p.indexOf("builtin")>-1?p:`@location(${s++}) ${p}`).join(`,
`),u=n.sort().map(p=>`       var ${LS(p)};`).join(`
`),c=`return VSOutput(
            ${n.sort().map(p=>` ${US(p)}`).join(`,
`)});`;let f=t.replace(/@out\s+[^;]+;\s*/g,"");return f=f.replace("{{struct}}",`
${o}
`),f=f.replace("{{start}}",`
${u}
`),f=f.replace("{{return}}",`
${c}
`),f}function jm(a,t){let n=a;for(const s in t){const o=t[s];o.join(`
`).length?n=n.replace(`{{${s}}}`,`//-----${s} START-----//
${o.join(`
`)}
//----${s} FINISH----//`):n=n.replace(`{{${s}}}`,"")}return n}const mn=Object.create(null),Pc=new Map;let NS=0;function HS({template:a,bits:t}){const n=_0(a,t);if(mn[n])return mn[n];const{vertex:s,fragment:o}=YS(a,t);return mn[n]=S0(s,o,t),mn[n]}function PS({template:a,bits:t}){const n=_0(a,t);return mn[n]||(mn[n]=S0(a.vertex,a.fragment,t)),mn[n]}function YS(a,t){const n=t.map(c=>c.vertex).filter(c=>!!c),s=t.map(c=>c.fragment).filter(c=>!!c);let o=Ym(n,a.vertex,!0);o=kS(n,o);const u=Ym(s,a.fragment,!0);return{vertex:o,fragment:u}}function _0(a,t){return t.map(n=>(Pc.has(n)||Pc.set(n,NS++),Pc.get(n))).sort((n,s)=>n-s).join("-")+a.vertex+a.fragment}function S0(a,t,n){const s=Hm(a),o=Hm(t);return n.forEach(u=>{Nm(u.vertex,s,u.name),Nm(u.fragment,o,u.name)}),{vertex:jm(a,s),fragment:jm(t,o)}}const XS=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,jS=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,IS=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,FS=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,qS={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},VS={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function $S({bits:a,name:t}){const n=HS({template:{fragment:jS,vertex:XS},bits:[qS,...a]});return Ql.from({name:t,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function ZS({bits:a,name:t}){return new i0({name:t,...PS({template:{vertex:IS,fragment:FS},bits:[VS,...a]})})}const QS={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},KS={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Yc={};function WS(a){const t=[];if(a===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let s=0;s<a;s++)t.push(`@group(1) @binding(${n++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${n++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function JS(a){const t=[];if(a===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let n=0;n<a;n++)n===a-1?t.push("  default:{"):t.push(`  case ${n}:{`),t.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function t1(a){return Yc[a]||(Yc[a]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${WS(a)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${JS(a)}
            `}}),Yc[a]}const Xc={};function e1(a){const t=[];for(let n=0;n<a;n++)n>0&&t.push("else"),n<a-1&&t.push(`if(vTextureId < ${n}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${n}], vUV);`),t.push("}");return t.join(`
`)}function i1(a){return Xc[a]||(Xc[a]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${a}];

            `,main:`

                ${e1(a)}
            `}}),Xc[a]}const n1={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},s1={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Im={};function a1(a){let t=Im[a];if(t)return t;const n=new Int32Array(a);for(let s=0;s<a;s++)n[s]=s;return t=Im[a]=new r0({uTextures:{value:n,type:"i32",size:a}},{isStatic:!0}),t}class r1 extends Ph{constructor(t){const n=ZS({name:"batch",bits:[KS,i1(t),s1]}),s=$S({name:"batch",bits:[QS,t1(t),n1]});super({glProgram:n,gpuProgram:s,resources:{batchSamplers:a1(t)}})}}let Fm=null;const A0=class T0 extends CS{constructor(){super(...arguments),this.geometry=new DS,this.shader=Fm||(Fm=new r1(this.maxTextures)),this.name=T0.extension.name,this.vertexSize=6}packAttributes(t,n,s,o,u){const c=u<<16|t.roundPixels&65535,f=t.transform,p=f.a,g=f.b,m=f.c,y=f.d,_=f.tx,v=f.ty,{positions:T,uvs:E}=t,w=t.color,z=t.attributeOffset,B=z+t.attributeSize;for(let U=z;U<B;U++){const j=U*2,q=T[j],V=T[j+1];n[o++]=p*q+m*V+_,n[o++]=y*V+g*q+v,n[o++]=E[j],n[o++]=E[j+1],s[o++]=w,s[o++]=c}}packQuadAttributes(t,n,s,o,u){const c=t.texture,f=t.transform,p=f.a,g=f.b,m=f.c,y=f.d,_=f.tx,v=f.ty,T=t.bounds,E=T.maxX,w=T.minX,z=T.maxY,B=T.minY,U=c.uvs,j=t.color,q=u<<16|t.roundPixels&65535;n[o+0]=p*w+m*B+_,n[o+1]=y*B+g*w+v,n[o+2]=U.x0,n[o+3]=U.y0,s[o+4]=j,s[o+5]=q,n[o+6]=p*E+m*B+_,n[o+7]=y*B+g*E+v,n[o+8]=U.x1,n[o+9]=U.y1,s[o+10]=j,s[o+11]=q,n[o+12]=p*E+m*z+_,n[o+13]=y*z+g*E+v,n[o+14]=U.x2,n[o+15]=U.y2,s[o+16]=j,s[o+17]=q,n[o+18]=p*w+m*z+_,n[o+19]=y*z+g*w+v,n[o+20]=U.x3,n[o+21]=U.y3,s[o+22]=j,s[o+23]=q}};A0.extension={type:[ot.Batcher],name:"default"};let l1=A0;function o1(a,t,n,s,o,u,c,f=null){let p=0;n*=t,o*=u;const g=f.a,m=f.b,y=f.c,_=f.d,v=f.tx,T=f.ty;for(;p<c;){const E=a[n],w=a[n+1];s[o]=g*E+y*w+v,s[o+1]=m*E+_*w+T,o+=u,n+=t,p++}}function u1(a,t,n,s){let o=0;for(t*=n;o<s;)a[t]=0,a[t+1]=0,t+=n,o++}function w0(a,t,n,s,o){const u=t.a,c=t.b,f=t.c,p=t.d,g=t.tx,m=t.ty;n||(n=0),s||(s=2),o||(o=a.length/s-n);let y=n*s;for(let _=0;_<o;_++){const v=a[y],T=a[y+1];a[y]=u*v+f*T+g,a[y+1]=c*v+p*T+m,y+=s}}const c1=new At;class M0{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,n=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?Uy(n,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||c1}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const fr={extension:{type:ot.ShapeBuilder,name:"circle"},build(a,t){let n,s,o,u,c,f;if(a.type==="circle"){const j=a;n=j.x,s=j.y,c=f=j.radius,o=u=0}else if(a.type==="ellipse"){const j=a;n=j.x,s=j.y,c=j.halfWidth,f=j.halfHeight,o=u=0}else{const j=a,q=j.width/2,V=j.height/2;n=j.x+q,s=j.y+V,c=f=Math.max(0,Math.min(j.radius,Math.min(q,V))),o=q-c,u=V-f}if(!(c>=0&&f>=0&&o>=0&&u>=0))return t;const p=Math.ceil(2.3*Math.sqrt(c+f)),g=p*8+(o?4:0)+(u?4:0);if(g===0)return t;if(p===0)return t[0]=t[6]=n+o,t[1]=t[3]=s+u,t[2]=t[4]=n-o,t[5]=t[7]=s-u,t;let m=0,y=p*4+(o?2:0)+2,_=y,v=g,T=o+c,E=u,w=n+T,z=n-T,B=s+E;if(t[m++]=w,t[m++]=B,t[--y]=B,t[--y]=z,u){const j=s-E;t[_++]=z,t[_++]=j,t[--v]=j,t[--v]=w}for(let j=1;j<p;j++){const q=Math.PI/2*(j/p),V=o+Math.cos(q)*c,$=u+Math.sin(q)*f,rt=n+V,nt=n-V,et=s+$,J=s-$;t[m++]=rt,t[m++]=et,t[--y]=et,t[--y]=nt,t[_++]=nt,t[_++]=J,t[--v]=J,t[--v]=rt}T=o,E=u+f,w=n+T,z=n-T,B=s+E;const U=s-E;return t[m++]=w,t[m++]=B,t[--v]=U,t[--v]=w,o&&(t[m++]=z,t[m++]=B,t[--v]=U,t[--v]=z),t},triangulate(a,t,n,s,o,u){if(a.length===0)return;let c=0,f=0;for(let m=0;m<a.length;m+=2)c+=a[m],f+=a[m+1];c/=a.length/2,f/=a.length/2;let p=s;t[p*n]=c,t[p*n+1]=f;const g=p++;for(let m=0;m<a.length;m+=2)t[p*n]=a[m],t[p*n+1]=a[m+1],m>0&&(o[u++]=p,o[u++]=g,o[u++]=p-1),p++;o[u++]=g+1,o[u++]=g,o[u++]=p-1}},h1={...fr,extension:{...fr.extension,name:"ellipse"}},f1={...fr,extension:{...fr.extension,name:"roundedRectangle"}},C0=1e-4,qm=1e-4;function d1(a){const t=a.length;if(t<6)return 1;let n=0;for(let s=0,o=a[t-2],u=a[t-1];s<t;s+=2){const c=a[s],f=a[s+1];n+=(c-o)*(f+u),o=c,u=f}return n<0?-1:1}function Vm(a,t,n,s,o,u,c,f){const p=a-n*o,g=t-s*o,m=a+n*u,y=t+s*u;let _,v;c?(_=s,v=-n):(_=-s,v=n);const T=p+_,E=g+v,w=m+_,z=y+v;return f.push(T,E),f.push(w,z),2}function Ln(a,t,n,s,o,u,c,f){const p=n-a,g=s-t;let m=Math.atan2(p,g),y=Math.atan2(o-a,u-t);f&&m<y?m+=Math.PI*2:!f&&m>y&&(y+=Math.PI*2);let _=m;const v=y-m,T=Math.abs(v),E=Math.sqrt(p*p+g*g),w=(15*T*Math.sqrt(E)/Math.PI>>0)+1,z=v/w;if(_+=z,f){c.push(a,t),c.push(n,s);for(let B=1,U=_;B<w;B++,U+=z)c.push(a,t),c.push(a+Math.sin(U)*E,t+Math.cos(U)*E);c.push(a,t),c.push(o,u)}else{c.push(n,s),c.push(a,t);for(let B=1,U=_;B<w;B++,U+=z)c.push(a+Math.sin(U)*E,t+Math.cos(U)*E),c.push(a,t);c.push(o,u),c.push(a,t)}return w*2}function p1(a,t,n,s,o,u){const c=C0;if(a.length===0)return;const f=t;let p=f.alignment;if(t.alignment!==.5){let N=d1(a);p=(p-.5)*N+.5}const g=new Te(a[0],a[1]),m=new Te(a[a.length-2],a[a.length-1]),y=s,_=Math.abs(g.x-m.x)<c&&Math.abs(g.y-m.y)<c;if(y){a=a.slice(),_&&(a.pop(),a.pop(),m.set(a[a.length-2],a[a.length-1]));const N=(g.x+m.x)*.5,A=(m.y+g.y)*.5;a.unshift(N,A),a.push(N,A)}const v=o,T=a.length/2;let E=a.length;const w=v.length/2,z=f.width/2,B=z*z,U=f.miterLimit*f.miterLimit;let j=a[0],q=a[1],V=a[2],$=a[3],rt=0,nt=0,et=-(q-$),J=j-V,ft=0,bt=0,Yt=Math.sqrt(et*et+J*J);et/=Yt,J/=Yt,et*=z,J*=z;const Xt=p,x=(1-Xt)*2,M=Xt*2;y||(f.cap==="round"?E+=Ln(j-et*(x-M)*.5,q-J*(x-M)*.5,j-et*x,q-J*x,j+et*M,q+J*M,v,!0)+2:f.cap==="square"&&(E+=Vm(j,q,et,J,x,M,!0,v))),v.push(j-et*x,q-J*x),v.push(j+et*M,q+J*M);for(let N=1;N<T-1;++N){j=a[(N-1)*2],q=a[(N-1)*2+1],V=a[N*2],$=a[N*2+1],rt=a[(N+1)*2],nt=a[(N+1)*2+1],et=-(q-$),J=j-V,Yt=Math.sqrt(et*et+J*J),et/=Yt,J/=Yt,et*=z,J*=z,ft=-($-nt),bt=V-rt,Yt=Math.sqrt(ft*ft+bt*bt),ft/=Yt,bt/=Yt,ft*=z,bt*=z;const A=V-j,G=q-$,L=V-rt,Y=nt-$,K=A*L+G*Y,W=G*L-Y*A,tt=W<0;if(Math.abs(W)<.001*Math.abs(K)){v.push(V-et*x,$-J*x),v.push(V+et*M,$+J*M),K>=0&&(f.join==="round"?E+=Ln(V,$,V-et*x,$-J*x,V-ft*x,$-bt*x,v,!1)+4:E+=2,v.push(V-ft*M,$-bt*M),v.push(V+ft*x,$+bt*x));continue}const dt=(-et+j)*(-J+$)-(-et+V)*(-J+q),st=(-ft+rt)*(-bt+$)-(-ft+V)*(-bt+nt),Dt=(A*st-L*dt)/W,Mt=(Y*dt-G*st)/W,Ee=(Dt-V)*(Dt-V)+(Mt-$)*(Mt-$),pe=V+(Dt-V)*x,Re=$+(Mt-$)*x,Ge=V-(Dt-V)*M,mt=$-(Mt-$)*M,Ct=Math.min(A*A+G*G,L*L+Y*Y),Ne=tt?x:M,to=Ct+Ne*Ne*B;Ee<=to?f.join==="bevel"||Ee/B>U?(tt?(v.push(pe,Re),v.push(V+et*M,$+J*M),v.push(pe,Re),v.push(V+ft*M,$+bt*M)):(v.push(V-et*x,$-J*x),v.push(Ge,mt),v.push(V-ft*x,$-bt*x),v.push(Ge,mt)),E+=2):f.join==="round"?tt?(v.push(pe,Re),v.push(V+et*M,$+J*M),E+=Ln(V,$,V+et*M,$+J*M,V+ft*M,$+bt*M,v,!0)+4,v.push(pe,Re),v.push(V+ft*M,$+bt*M)):(v.push(V-et*x,$-J*x),v.push(Ge,mt),E+=Ln(V,$,V-et*x,$-J*x,V-ft*x,$-bt*x,v,!1)+4,v.push(V-ft*x,$-bt*x),v.push(Ge,mt)):(v.push(pe,Re),v.push(Ge,mt)):(v.push(V-et*x,$-J*x),v.push(V+et*M,$+J*M),f.join==="round"?tt?E+=Ln(V,$,V+et*M,$+J*M,V+ft*M,$+bt*M,v,!0)+2:E+=Ln(V,$,V-et*x,$-J*x,V-ft*x,$-bt*x,v,!1)+2:f.join==="miter"&&Ee/B<=U&&(tt?(v.push(Ge,mt),v.push(Ge,mt)):(v.push(pe,Re),v.push(pe,Re)),E+=2),v.push(V-ft*x,$-bt*x),v.push(V+ft*M,$+bt*M),E+=2)}j=a[(T-2)*2],q=a[(T-2)*2+1],V=a[(T-1)*2],$=a[(T-1)*2+1],et=-(q-$),J=j-V,Yt=Math.sqrt(et*et+J*J),et/=Yt,J/=Yt,et*=z,J*=z,v.push(V-et*x,$-J*x),v.push(V+et*M,$+J*M),y||(f.cap==="round"?E+=Ln(V-et*(x-M)*.5,$-J*(x-M)*.5,V-et*x,$-J*x,V+et*M,$+J*M,v,!1)+2:f.cap==="square"&&(E+=Vm(V,$,et,J,x,M,!1,v)));const R=qm*qm;for(let N=w;N<E+w-2;++N)j=v[N*2],q=v[N*2+1],V=v[(N+1)*2],$=v[(N+1)*2+1],rt=v[(N+2)*2],nt=v[(N+2)*2+1],!(Math.abs(j*($-nt)+V*(nt-q)+rt*(q-$))<R)&&u.push(N,N+1,N+2)}function g1(a,t,n,s){const o=C0;if(a.length===0)return;const u=a[0],c=a[1],f=a[a.length-2],p=a[a.length-1],g=t||Math.abs(u-f)<o&&Math.abs(c-p)<o,m=n,y=a.length/2,_=m.length/2;for(let v=0;v<y;v++)m.push(a[v*2]),m.push(a[v*2+1]);for(let v=0;v<y-1;v++)s.push(_+v,_+v+1);g&&s.push(_+y-1,_)}function E0(a,t,n,s,o,u,c){const f=nS(a,t,2);if(!f)return;for(let g=0;g<f.length;g+=3)u[c++]=f[g]+o,u[c++]=f[g+1]+o,u[c++]=f[g+2]+o;let p=o*s;for(let g=0;g<a.length;g+=2)n[p]=a[g],n[p+1]=a[g+1],p+=s}const m1=[],y1={extension:{type:ot.ShapeBuilder,name:"polygon"},build(a,t){for(let n=0;n<a.points.length;n++)t[n]=a.points[n];return t},triangulate(a,t,n,s,o,u){E0(a,m1,t,n,s,o,u)}},b1={extension:{type:ot.ShapeBuilder,name:"rectangle"},build(a,t){const n=a,s=n.x,o=n.y,u=n.width,c=n.height;return u>=0&&c>=0&&(t[0]=s,t[1]=o,t[2]=s+u,t[3]=o,t[4]=s+u,t[5]=o+c,t[6]=s,t[7]=o+c),t},triangulate(a,t,n,s,o,u){let c=0;s*=n,t[s+c]=a[0],t[s+c+1]=a[1],c+=n,t[s+c]=a[2],t[s+c+1]=a[3],c+=n,t[s+c]=a[6],t[s+c+1]=a[7],c+=n,t[s+c]=a[4],t[s+c+1]=a[5],c+=n;const f=s/n;o[u++]=f,o[u++]=f+1,o[u++]=f+2,o[u++]=f+1,o[u++]=f+3,o[u++]=f+2}},v1={extension:{type:ot.ShapeBuilder,name:"triangle"},build(a,t){return t[0]=a.x,t[1]=a.y,t[2]=a.x2,t[3]=a.y2,t[4]=a.x3,t[5]=a.y3,t},triangulate(a,t,n,s,o,u){let c=0;s*=n,t[s+c]=a[0],t[s+c+1]=a[1],c+=n,t[s+c]=a[2],t[s+c+1]=a[3],c+=n,t[s+c]=a[4],t[s+c+1]=a[5];const f=s/n;o[u++]=f,o[u++]=f+1,o[u++]=f+2}},x1=new At,_1=new se;function S1(a,t,n,s){const o=t.matrix?a.copyFrom(t.matrix).invert():a.identity();if(t.textureSpace==="local"){const u=n.getBounds(_1);o.translate(-u.x,-u.y),o.scale(1/u.width,1/u.height)}else{o.translate(t.texture.frame.x,t.texture.frame.y),o.scale(1/t.texture.source.width,1/t.texture.source.height);const u=t.texture.source.style;u.addressMode==="clamp-to-edge"&&(u.addressMode="repeat",u.update())}return s&&o.append(x1.copyFrom(s).invert()),o}const Wl={};xe.handleByMap(ot.ShapeBuilder,Wl);xe.add(b1,y1,v1,fr,h1,f1);const A1=new se,T1=new At;function w1(a,t){const{geometryData:n,batches:s}=t;s.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let o=0;o<a.instructions.length;o++){const u=a.instructions[o];if(u.action==="texture")M1(u.data,s,n);else if(u.action==="fill"||u.action==="stroke"){const c=u.action==="stroke",f=u.data.path.shapePath,p=u.data.style,g=u.data.hole;c&&g&&$m(g.shapePath,p,!0,s,n),g&&(f.shapePrimitives[f.shapePrimitives.length-1].holes=g.shapePath.shapePrimitives),$m(f,p,c,s,n)}}}function M1(a,t,n){const{vertices:s,uvs:o,indices:u}=n,c=u.length,f=s.length/2,p=[],g=Wl.rectangle,m=A1,y=a.image;m.x=a.dx,m.y=a.dy,m.width=a.dw,m.height=a.dh;const _=a.transform;g.build(m,p),_&&w0(p,_),g.triangulate(p,s,2,f,u,c);const v=y.uvs;o.push(v.x0,v.y0,v.x1,v.y1,v.x3,v.y3,v.x2,v.y2);const T=Xi.get(M0);T.indexOffset=c,T.indexSize=u.length-c,T.attributeOffset=f,T.attributeSize=s.length/2-f,T.baseColor=a.style,T.alpha=a.alpha,T.texture=y,T.geometryData=n,t.push(T)}function $m(a,t,n,s,o){const{vertices:u,uvs:c,indices:f}=o;a.shapePrimitives.forEach(({shape:p,transform:g,holes:m})=>{const y=f.length,_=u.length/2,v=[],T=Wl[p.type];let E="triangle-list";if(T.build(p,v),g&&w0(v,g),n){const U=p.closePath??!0,j=t;j.pixelLine?(g1(v,U,u,f),E="line-list"):p1(v,j,!1,U,u,f)}else if(m){const U=[],j=v.slice();C1(m).forEach(V=>{U.push(j.length/2),j.push(...V)}),E0(j,U,u,2,_,f,y)}else T.triangulate(v,u,2,_,f,y);const w=c.length/2,z=t.texture;if(z!==wt.WHITE){const U=S1(T1,t,p,g);o1(u,2,_,c,w,2,u.length/2-_,U)}else u1(c,w,2,u.length/2-_);const B=Xi.get(M0);B.indexOffset=y,B.indexSize=f.length-y,B.attributeOffset=_,B.attributeSize=u.length/2-_,B.baseColor=t.color,B.alpha=t.alpha,B.texture=z,B.geometryData=o,B.topology=E,s.push(B)})}function C1(a){const t=[];for(let n=0;n<a.length;n++){const s=a[n].shape,o=[];Wl[s.type].build(s,o),t.push(o)}return t}class E1{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class R1{constructor(){this.batcher=new l1,this.instructions=new Hy}init(){this.instructions.reset()}get geometry(){return Rt(Yx,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const Fh=class fh{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){fh.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??fh.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let n=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){n?this._cleanGraphicsContextData(t):n=this._initContext(t),w1(t,n);const s=t.batchMode;t.customShader||s==="no-batch"?n.isBatchable=!1:s==="auto"&&(n.isBatchable=n.geometryData.vertices.length<400),t.dirty=!1}return n}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const n=Xi.get(R1),{batches:s,geometryData:o}=this._gpuContextHash[t.uid],u=o.vertices.length,c=o.indices.length;for(let m=0;m<s.length;m++)s[m].applyTransform=!1;const f=n.batcher;f.ensureAttributeBuffer(u),f.ensureIndexBuffer(c),f.begin();for(let m=0;m<s.length;m++){const y=s[m];f.add(y)}f.finish(n.instructions);const p=f.geometry;p.indexBuffer.setDataWithSize(f.indexBuffer,f.indexSize,!0),p.buffers[0].setDataWithSize(f.attributeBuffer.float32View,f.attributeSize,!0);const g=f.batches;for(let m=0;m<g.length;m++){const y=g[m];y.bindGroup=_S(y.textures.textures,y.textures.count)}return this._graphicsDataContextHash[t.uid]=n,n}_initContext(t){const n=new E1;return n.context=t,this._gpuContextHash[t.uid]=n,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const n=this._gpuContextHash[t.uid];n.isBatchable||this._graphicsDataContextHash[t.uid]&&(Xi.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),n.batches&&n.batches.forEach(s=>{Xi.return(s)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};Fh.extension={type:[ot.WebGLSystem,ot.WebGPUSystem,ot.CanvasSystem],name:"graphicsContext"};Fh.defaultOptions={bezierSmoothness:.5};let R0=Fh;const G1=8,Ll=11920929e-14,O1=1;function G0(a,t,n,s,o,u,c,f,p,g){const y=Math.min(.99,Math.max(0,g??R0.defaultOptions.bezierSmoothness));let _=(O1-y)/1;return _*=_,z1(t,n,s,o,u,c,f,p,a,_),a}function z1(a,t,n,s,o,u,c,f,p,g){dh(a,t,n,s,o,u,c,f,p,g,0),p.push(c,f)}function dh(a,t,n,s,o,u,c,f,p,g,m){if(m>G1)return;const y=(a+n)/2,_=(t+s)/2,v=(n+o)/2,T=(s+u)/2,E=(o+c)/2,w=(u+f)/2,z=(y+v)/2,B=(_+T)/2,U=(v+E)/2,j=(T+w)/2,q=(z+U)/2,V=(B+j)/2;if(m>0){let $=c-a,rt=f-t;const nt=Math.abs((n-c)*rt-(s-f)*$),et=Math.abs((o-c)*rt-(u-f)*$);if(nt>Ll&&et>Ll){if((nt+et)*(nt+et)<=g*($*$+rt*rt)){p.push(q,V);return}}else if(nt>Ll){if(nt*nt<=g*($*$+rt*rt)){p.push(q,V);return}}else if(et>Ll){if(et*et<=g*($*$+rt*rt)){p.push(q,V);return}}else if($=q-(a+c)/2,rt=V-(t+f)/2,$*$+rt*rt<=g){p.push(q,V);return}}dh(a,t,y,_,z,B,q,V,p,g,m+1),dh(q,V,U,j,E,w,c,f,p,g,m+1)}const D1=8,B1=11920929e-14,U1=1;function L1(a,t,n,s,o,u,c,f){const g=Math.min(.99,Math.max(0,f??R0.defaultOptions.bezierSmoothness));let m=(U1-g)/1;return m*=m,k1(t,n,s,o,u,c,a,m),a}function k1(a,t,n,s,o,u,c,f){ph(c,a,t,n,s,o,u,f,0),c.push(o,u)}function ph(a,t,n,s,o,u,c,f,p){if(p>D1)return;const g=(t+s)/2,m=(n+o)/2,y=(s+u)/2,_=(o+c)/2,v=(g+y)/2,T=(m+_)/2;let E=u-t,w=c-n;const z=Math.abs((s-u)*w-(o-c)*E);if(z>B1){if(z*z<=f*(E*E+w*w)){a.push(v,T);return}}else if(E=v-(t+u)/2,w=T-(n+c)/2,E*E+w*w<=f){a.push(v,T);return}ph(a,t,n,g,m,v,T,f,p+1),ph(a,v,T,y,_,u,c,f,p+1)}function O0(a,t,n,s,o,u,c,f){let p=Math.abs(o-u);(!c&&o>u||c&&u>o)&&(p=2*Math.PI-p),f||(f=Math.max(6,Math.floor(6*Math.pow(s,1/3)*(p/Math.PI)))),f=Math.max(f,3);let g=p/f,m=o;g*=c?-1:1;for(let y=0;y<f+1;y++){const _=Math.cos(m),v=Math.sin(m),T=t+_*s,E=n+v*s;a.push(T,E),m+=g}}function N1(a,t,n,s,o,u){const c=a[a.length-2],p=a[a.length-1]-n,g=c-t,m=o-n,y=s-t,_=Math.abs(p*y-g*m);if(_<1e-8||u===0){(a[a.length-2]!==t||a[a.length-1]!==n)&&a.push(t,n);return}const v=p*p+g*g,T=m*m+y*y,E=p*m+g*y,w=u*Math.sqrt(v)/_,z=u*Math.sqrt(T)/_,B=w*E/v,U=z*E/T,j=w*y+z*g,q=w*m+z*p,V=g*(z+B),$=p*(z+B),rt=y*(w+U),nt=m*(w+U),et=Math.atan2($-q,V-j),J=Math.atan2(nt-q,rt-j);O0(a,j+t,q+n,u,et,J,g*m>y*p)}const cr=Math.PI*2,jc={centerX:0,centerY:0,ang1:0,ang2:0},Ic=({x:a,y:t},n,s,o,u,c,f,p)=>{a*=n,t*=s;const g=o*a-u*t,m=u*a+o*t;return p.x=g+c,p.y=m+f,p};function H1(a,t){const n=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:n,o=Math.cos(a),u=Math.sin(a),c=Math.cos(a+t),f=Math.sin(a+t);return[{x:o-u*s,y:u+o*s},{x:c+f*s,y:f-c*s},{x:c,y:f}]}const Zm=(a,t,n,s)=>{const o=a*s-t*n<0?-1:1;let u=a*n+t*s;return u>1&&(u=1),u<-1&&(u=-1),o*Math.acos(u)},P1=(a,t,n,s,o,u,c,f,p,g,m,y,_)=>{const v=Math.pow(o,2),T=Math.pow(u,2),E=Math.pow(m,2),w=Math.pow(y,2);let z=v*T-v*w-T*E;z<0&&(z=0),z/=v*w+T*E,z=Math.sqrt(z)*(c===f?-1:1);const B=z*o/u*y,U=z*-u/o*m,j=g*B-p*U+(a+n)/2,q=p*B+g*U+(t+s)/2,V=(m-B)/o,$=(y-U)/u,rt=(-m-B)/o,nt=(-y-U)/u,et=Zm(1,0,V,$);let J=Zm(V,$,rt,nt);f===0&&J>0&&(J-=cr),f===1&&J<0&&(J+=cr),_.centerX=j,_.centerY=q,_.ang1=et,_.ang2=J};function Y1(a,t,n,s,o,u,c,f=0,p=0,g=0){if(u===0||c===0)return;const m=Math.sin(f*cr/360),y=Math.cos(f*cr/360),_=y*(t-s)/2+m*(n-o)/2,v=-m*(t-s)/2+y*(n-o)/2;if(_===0&&v===0)return;u=Math.abs(u),c=Math.abs(c);const T=Math.pow(_,2)/Math.pow(u,2)+Math.pow(v,2)/Math.pow(c,2);T>1&&(u*=Math.sqrt(T),c*=Math.sqrt(T)),P1(t,n,s,o,u,c,p,g,m,y,_,v,jc);let{ang1:E,ang2:w}=jc;const{centerX:z,centerY:B}=jc;let U=Math.abs(w)/(cr/4);Math.abs(1-U)<1e-7&&(U=1);const j=Math.max(Math.ceil(U),1);w/=j;let q=a[a.length-2],V=a[a.length-1];const $={x:0,y:0};for(let rt=0;rt<j;rt++){const nt=H1(E,w),{x:et,y:J}=Ic(nt[0],u,c,y,m,z,B,$),{x:ft,y:bt}=Ic(nt[1],u,c,y,m,z,B,$),{x:Yt,y:Xt}=Ic(nt[2],u,c,y,m,z,B,$);G0(a,q,V,et,J,ft,bt,Yt,Xt),q=Yt,V=Xt,E+=w}}function X1(a,t,n){const s=(c,f)=>{const p=f.x-c.x,g=f.y-c.y,m=Math.sqrt(p*p+g*g),y=p/m,_=g/m;return{len:m,nx:y,ny:_}},o=(c,f)=>{c===0?a.moveTo(f.x,f.y):a.lineTo(f.x,f.y)};let u=t[t.length-1];for(let c=0;c<t.length;c++){const f=t[c%t.length],p=f.radius??n;if(p<=0){o(c,f),u=f;continue}const g=t[(c+1)%t.length],m=s(f,u),y=s(f,g);if(m.len<1e-4||y.len<1e-4){o(c,f),u=f;continue}let _=Math.asin(m.nx*y.ny-m.ny*y.nx),v=1,T=!1;m.nx*y.nx-m.ny*-y.ny<0?_<0?_=Math.PI+_:(_=Math.PI-_,v=-1,T=!0):_>0&&(v=-1,T=!0);const E=_/2;let w,z=Math.abs(Math.cos(E)*p/Math.sin(E));z>Math.min(m.len/2,y.len/2)?(z=Math.min(m.len/2,y.len/2),w=Math.abs(z*Math.sin(E)/Math.cos(E))):w=p;const B=f.x+y.nx*z+-y.ny*w*v,U=f.y+y.ny*z+y.nx*w*v,j=Math.atan2(m.ny,m.nx)+Math.PI/2*v,q=Math.atan2(y.ny,y.nx)-Math.PI/2*v;c===0&&a.moveTo(B+Math.cos(j)*w,U+Math.sin(j)*w),a.arc(B,U,w,j,q,T),u=f}}function j1(a,t,n,s){const o=(f,p)=>Math.sqrt((f.x-p.x)**2+(f.y-p.y)**2),u=(f,p,g)=>({x:f.x+(p.x-f.x)*g,y:f.y+(p.y-f.y)*g}),c=t.length;for(let f=0;f<c;f++){const p=t[(f+1)%c],g=p.radius??n;if(g<=0){f===0?a.moveTo(p.x,p.y):a.lineTo(p.x,p.y);continue}const m=t[f],y=t[(f+2)%c],_=o(m,p);let v;if(_<1e-4)v=p;else{const w=Math.min(_/2,g);v=u(p,m,w/_)}const T=o(y,p);let E;if(T<1e-4)E=p;else{const w=Math.min(T/2,g);E=u(p,y,w/T)}f===0?a.moveTo(v.x,v.y):a.lineTo(v.x,v.y),a.quadraticCurveTo(p.x,p.y,E.x,E.y,s)}}const I1=new se;class F1{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Ce,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,n){return this.startPoly(t,n),this}lineTo(t,n){this._ensurePoly();const s=this._currentPoly.points,o=s[s.length-2],u=s[s.length-1];return(o!==t||u!==n)&&s.push(t,n),this}arc(t,n,s,o,u,c){this._ensurePoly(!1);const f=this._currentPoly.points;return O0(f,t,n,s,o,u,c),this}arcTo(t,n,s,o,u){this._ensurePoly();const c=this._currentPoly.points;return N1(c,t,n,s,o,u),this}arcToSvg(t,n,s,o,u,c,f){const p=this._currentPoly.points;return Y1(p,this._currentPoly.lastX,this._currentPoly.lastY,c,f,t,n,s,o,u),this}bezierCurveTo(t,n,s,o,u,c,f){this._ensurePoly();const p=this._currentPoly;return G0(this._currentPoly.points,p.lastX,p.lastY,t,n,s,o,u,c,f),this}quadraticCurveTo(t,n,s,o,u){this._ensurePoly();const c=this._currentPoly;return L1(this._currentPoly.points,c.lastX,c.lastY,t,n,s,o,u),this}closePath(){return this.endPoly(!0),this}addPath(t,n){this.endPoly(),n&&!n.isIdentity()&&(t=t.clone(!0),t.transform(n));const s=this.shapePrimitives,o=s.length;for(let u=0;u<t.instructions.length;u++){const c=t.instructions[u];this[c.action](...c.data)}if(t.checkForHoles&&s.length-o>1){let u=null;for(let c=o;c<s.length;c++){const f=s[c];if(f.shape.type==="polygon"){const p=f.shape,g=u==null?void 0:u.shape;g&&g.containsPolygon(p)?(u.holes||(u.holes=[]),u.holes.push(f),s.copyWithin(c,c+1),s.length--,c--):u=f}}}return this}finish(t=!1){this.endPoly(t)}rect(t,n,s,o,u){return this.drawShape(new se(t,n,s,o),u),this}circle(t,n,s,o){return this.drawShape(new Xh(t,n,s),o),this}poly(t,n,s){const o=new ur(t);return o.closePath=n,this.drawShape(o,s),this}regularPoly(t,n,s,o,u=0,c){o=Math.max(o|0,3);const f=-1*Math.PI/2+u,p=Math.PI*2/o,g=[];for(let m=0;m<o;m++){const y=f-m*p;g.push(t+s*Math.cos(y),n+s*Math.sin(y))}return this.poly(g,!0,c),this}roundPoly(t,n,s,o,u,c=0,f){if(o=Math.max(o|0,3),u<=0)return this.regularPoly(t,n,s,o,c);const p=s*Math.sin(Math.PI/o)-.001;u=Math.min(u,p);const g=-1*Math.PI/2+c,m=Math.PI*2/o,y=(o-2)*Math.PI/o/2;for(let _=0;_<o;_++){const v=_*m+g,T=t+s*Math.cos(v),E=n+s*Math.sin(v),w=v+Math.PI+y,z=v-Math.PI-y,B=T+u*Math.cos(w),U=E+u*Math.sin(w),j=T+u*Math.cos(z),q=E+u*Math.sin(z);_===0?this.moveTo(B,U):this.lineTo(B,U),this.quadraticCurveTo(T,E,j,q,f)}return this.closePath()}roundShape(t,n,s=!1,o){return t.length<3?this:(s?j1(this,t,n,o):X1(this,t,n),this.closePath())}filletRect(t,n,s,o,u){if(u===0)return this.rect(t,n,s,o);const c=Math.min(s,o)/2,f=Math.min(c,Math.max(-c,u)),p=t+s,g=n+o,m=f<0?-f:0,y=Math.abs(f);return this.moveTo(t,n+y).arcTo(t+m,n+m,t+y,n,y).lineTo(p-y,n).arcTo(p-m,n+m,p,n+y,y).lineTo(p,g-y).arcTo(p-m,g-m,t+s-y,g,y).lineTo(t+y,g).arcTo(t+m,g-m,t,g-y,y).closePath()}chamferRect(t,n,s,o,u,c){if(u<=0)return this.rect(t,n,s,o);const f=Math.min(u,Math.min(s,o)/2),p=t+s,g=n+o,m=[t+f,n,p-f,n,p,n+f,p,g-f,p-f,g,t+f,g,t,g-f,t,n+f];for(let y=m.length-1;y>=2;y-=2)m[y]===m[y-2]&&m[y-1]===m[y-3]&&m.splice(y-1,2);return this.poly(m,!0,c)}ellipse(t,n,s,o,u){return this.drawShape(new jh(t,n,s,o),u),this}roundRect(t,n,s,o,u,c){return this.drawShape(new Ih(t,n,s,o,u),c),this}drawShape(t,n){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:n}),this}startPoly(t,n){let s=this._currentPoly;return s&&this.endPoly(),s=new ur,s.points.push(t,n),this._currentPoly=s,this}endPoly(t=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=t,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new ur,t)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let s=n.shape.x,o=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const u=n.transform,c=s;s=u.a*s+u.c*o+u.tx,o=u.b*c+u.d*o+u.ty}this._currentPoly.points.push(s,o)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const n=this.shapePrimitives;for(let s=0;s<n.length;s++){const o=n[s],u=o.shape.getBounds(I1);o.transform?t.addRect(u,o.transform):t.addRect(u)}return t}}class Qs{constructor(t,n=!1){this.instructions=[],this.uid=ae("graphicsPath"),this._dirty=!0,this.checkForHoles=n,typeof t=="string"?pS(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new F1(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,n){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,n]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,n,s,o,u){const c=this.instructions[this.instructions.length-1],f=this.getLastPoint(Te.shared);let p=0,g=0;if(!c||c.action!=="bezierCurveTo")p=f.x,g=f.y;else{p=c.data[2],g=c.data[3];const m=f.x,y=f.y;p=m+(m-p),g=y+(y-g)}return this.instructions.push({action:"bezierCurveTo",data:[p,g,t,n,s,o,u]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,n,s){const o=this.instructions[this.instructions.length-1],u=this.getLastPoint(Te.shared);let c=0,f=0;if(!o||o.action!=="quadraticCurveTo")c=u.x,f=u.y;else{c=o.data[0],f=o.data[1];const p=u.x,g=u.y;c=p+(p-c),f=g+(g-f)}return this.instructions.push({action:"quadraticCurveTo",data:[c,f,t,n,s]}),this._dirty=!0,this}rect(t,n,s,o,u){return this.instructions.push({action:"rect",data:[t,n,s,o,u]}),this._dirty=!0,this}circle(t,n,s,o){return this.instructions.push({action:"circle",data:[t,n,s,o]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,n,s,o,u,c,f){u||(u=o/2);const p=-1*Math.PI/2+c,g=s*2,m=Math.PI*2/g,y=[];for(let _=0;_<g;_++){const v=_%2?u:o,T=_*m+p;y.push(t+v*Math.cos(T),n+v*Math.sin(T))}return this.poly(y,!0,f),this}clone(t=!1){const n=new Qs;if(n.checkForHoles=this.checkForHoles,!t)n.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const o=this.instructions[s];n.instructions.push({action:o.action,data:o.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const n=t.a,s=t.b,o=t.c,u=t.d,c=t.tx,f=t.ty;let p=0,g=0,m=0,y=0,_=0,v=0,T=0,E=0;for(let w=0;w<this.instructions.length;w++){const z=this.instructions[w],B=z.data;switch(z.action){case"moveTo":case"lineTo":p=B[0],g=B[1],B[0]=n*p+o*g+c,B[1]=s*p+u*g+f;break;case"bezierCurveTo":m=B[0],y=B[1],_=B[2],v=B[3],p=B[4],g=B[5],B[0]=n*m+o*y+c,B[1]=s*m+u*y+f,B[2]=n*_+o*v+c,B[3]=s*_+u*v+f,B[4]=n*p+o*g+c,B[5]=s*p+u*g+f;break;case"quadraticCurveTo":m=B[0],y=B[1],p=B[2],g=B[3],B[0]=n*m+o*y+c,B[1]=s*m+u*y+f,B[2]=n*p+o*g+c,B[3]=s*p+u*g+f;break;case"arcToSvg":p=B[5],g=B[6],T=B[0],E=B[1],B[0]=n*T+o*E,B[1]=s*T+u*E,B[5]=n*p+o*g+c,B[6]=s*p+u*g+f;break;case"circle":B[4]=nr(B[3],t);break;case"rect":B[4]=nr(B[4],t);break;case"ellipse":B[8]=nr(B[8],t);break;case"roundRect":B[5]=nr(B[5],t);break;case"addPath":B[0].transform(t);break;case"poly":B[2]=nr(B[2],t);break;default:Vt("unknown transform action",z.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let n=this.instructions.length-1,s=this.instructions[n];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(n--,n<0)return t.x=0,t.y=0,t;s=this.instructions[n]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function nr(a,t){return a?a.prepend(t):t.clone()}function Qt(a,t,n){const s=a.getAttribute(t);return s?Number(s):n}function q1(a,t){const n=a.querySelectorAll("defs");for(let s=0;s<n.length;s++){const o=n[s];for(let u=0;u<o.children.length;u++){const c=o.children[u];switch(c.nodeName.toLowerCase()){case"lineargradient":t.defs[c.id]=V1(c);break;case"radialgradient":t.defs[c.id]=$1();break}}}}function V1(a){const t=Qt(a,"x1",0),n=Qt(a,"y1",0),s=Qt(a,"x2",1),o=Qt(a,"y2",0),u=a.getAttribute("gradientUnits")||"objectBoundingBox",c=new ui(t,n,s,o,u==="objectBoundingBox"?"local":"global");for(let f=0;f<a.children.length;f++){const p=a.children[f],g=Qt(p,"offset",0),m=re.shared.setValue(p.getAttribute("stop-color")).toNumber();c.addColorStop(g,m)}return c}function $1(a){return Vt("[SVG Parser] Radial gradients are not yet supported"),new ui(0,0,1,0)}function Qm(a){const t=a.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const Km={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function z0(a,t){const n=a.getAttribute("style"),s={},o={},u={strokeStyle:s,fillStyle:o,useFill:!1,useStroke:!1};for(const c in Km){const f=a.getAttribute(c);f&&Wm(t,u,c,f.trim())}if(n){const c=n.split(";");for(let f=0;f<c.length;f++){const p=c[f].trim(),[g,m]=p.split(":");Km[g]&&Wm(t,u,g,m.trim())}}return{strokeStyle:u.useStroke?s:null,fillStyle:u.useFill?o:null,useFill:u.useFill,useStroke:u.useStroke}}function Wm(a,t,n,s){switch(n){case"stroke":if(s!=="none"){if(s.startsWith("url(")){const o=Qm(s);t.strokeStyle.fill=a.defs[o]}else t.strokeStyle.color=re.shared.setValue(s).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(s);break;case"fill":if(s!=="none"){if(s.startsWith("url(")){const o=Qm(s);t.fillStyle.fill=a.defs[o]}else t.fillStyle.color=re.shared.setValue(s).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(s);break;case"stroke-opacity":t.strokeStyle.alpha=Number(s);break;case"opacity":t.fillStyle.alpha=Number(s),t.strokeStyle.alpha=Number(s);break}}function Z1(a,t){if(typeof a=="string"){const c=document.createElement("div");c.innerHTML=a.trim(),a=c.querySelector("svg")}const n={context:t,defs:{},path:new Qs};q1(a,n);const s=a.children,{fillStyle:o,strokeStyle:u}=z0(a,n);for(let c=0;c<s.length;c++){const f=s[c];f.nodeName.toLowerCase()!=="defs"&&D0(f,n,o,u)}return t}function D0(a,t,n,s){const o=a.children,{fillStyle:u,strokeStyle:c}=z0(a,t);u&&n?n={...n,...u}:u&&(n=u),c&&s?s={...s,...c}:c&&(s=c);const f=!n&&!s;f&&(n={color:0});let p,g,m,y,_,v,T,E,w,z,B,U,j,q,V,$,rt;switch(a.nodeName.toLowerCase()){case"path":q=a.getAttribute("d"),a.getAttribute("fill-rule")==="evenodd"&&Vt("SVG Evenodd fill rule not supported, your svg may render incorrectly"),V=new Qs(q,!0),t.context.path(V),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"circle":T=Qt(a,"cx",0),E=Qt(a,"cy",0),w=Qt(a,"r",0),t.context.ellipse(T,E,w,w),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"rect":p=Qt(a,"x",0),g=Qt(a,"y",0),$=Qt(a,"width",0),rt=Qt(a,"height",0),z=Qt(a,"rx",0),B=Qt(a,"ry",0),z||B?t.context.roundRect(p,g,$,rt,z||B):t.context.rect(p,g,$,rt),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"ellipse":T=Qt(a,"cx",0),E=Qt(a,"cy",0),z=Qt(a,"rx",0),B=Qt(a,"ry",0),t.context.beginPath(),t.context.ellipse(T,E,z,B),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"line":m=Qt(a,"x1",0),y=Qt(a,"y1",0),_=Qt(a,"x2",0),v=Qt(a,"y2",0),t.context.beginPath(),t.context.moveTo(m,y),t.context.lineTo(_,v),s&&t.context.stroke(s);break;case"polygon":j=a.getAttribute("points"),U=j.match(/\d+/g).map(nt=>parseInt(nt,10)),t.context.poly(U,!0),n&&t.context.fill(n),s&&t.context.stroke(s);break;case"polyline":j=a.getAttribute("points"),U=j.match(/\d+/g).map(nt=>parseInt(nt,10)),t.context.poly(U,!1),s&&t.context.stroke(s);break;case"g":case"svg":break;default:{Vt(`[SVG parser] <${a.nodeName}> elements unsupported`);break}}f&&(n=null);for(let nt=0;nt<o.length;nt++)D0(o[nt],t,n,s)}function Q1(a){return re.isColorLike(a)}function Jm(a){return a instanceof Kl}function ty(a){return a instanceof ui}function K1(a){return a instanceof wt}function W1(a,t,n){const s=re.shared.setValue(t??0);return a.color=s.toNumber(),a.alpha=s.alpha===1?n.alpha:s.alpha,a.texture=wt.WHITE,{...n,...a}}function J1(a,t,n){return a.texture=t,{...n,...a}}function ey(a,t,n){return a.fill=t,a.color=16777215,a.texture=t.texture,a.matrix=t.transform,{...n,...a}}function iy(a,t,n){return t.buildGradient(),a.fill=t,a.color=16777215,a.texture=t.texture,a.matrix=t.transform,a.textureSpace=t.textureSpace,{...n,...a}}function tA(a,t){const n={...t,...a},s=re.shared.setValue(n.color);return n.alpha*=s.alpha,n.color=s.toNumber(),n}function Wn(a,t){if(a==null)return null;const n={},s=a;return Q1(a)?W1(n,a,t):K1(a)?J1(n,a,t):Jm(a)?ey(n,a,t):ty(a)?iy(n,a,t):s.fill&&Jm(s.fill)?ey(s,s.fill,t):s.fill&&ty(s.fill)?iy(s,s.fill,t):tA(s,t)}function $l(a,t){const{width:n,alignment:s,miterLimit:o,cap:u,join:c,pixelLine:f,...p}=t,g=Wn(a,p);return g?{width:n,alignment:s,miterLimit:o,cap:u,join:c,pixelLine:f,...g}:null}const eA=new Te,ny=new At,qh=class Ai extends gi{constructor(){super(...arguments),this.uid=ae("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new Qs,this._transform=new At,this._fillStyle={...Ai.defaultFillStyle},this._strokeStyle={...Ai.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Ce,this._boundsDirty=!0}clone(){const t=new Ai;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Wn(t,Ai.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=$l(t,Ai.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Wn(t,Ai.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Wn(t,Ai.defaultStrokeStyle),this}texture(t,n,s,o,u,c){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:o||0,dw:u||t.frame.width,dh:c||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n?re.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Qs,this}fill(t,n){let s;const o=this.instructions[this.instructions.length-1];return this._tick===0&&o&&o.action==="stroke"?s=o.data.path:s=this._activePath.clone(),s?(t!=null&&(n!==void 0&&typeof t=="number"&&(Rt(Lt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:n}),this._fillStyle=Wn(t,Ai.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:n}=this._activePath.getLastPoint(Te.shared);this._activePath.clear(),this._activePath.moveTo(t,n)}stroke(t){let n;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="fill"?n=s.data.path:n=this._activePath.clone(),n?(t!=null&&(this._strokeStyle=$l(t,Ai.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const n=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(s);else{n.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,n,s,o,u,c){this._tick++;const f=this._transform;return this._activePath.arc(f.a*t+f.c*n+f.tx,f.b*t+f.d*n+f.ty,s,o,u,c),this}arcTo(t,n,s,o,u){this._tick++;const c=this._transform;return this._activePath.arcTo(c.a*t+c.c*n+c.tx,c.b*t+c.d*n+c.ty,c.a*s+c.c*o+c.tx,c.b*s+c.d*o+c.ty,u),this}arcToSvg(t,n,s,o,u,c,f){this._tick++;const p=this._transform;return this._activePath.arcToSvg(t,n,s,o,u,p.a*c+p.c*f+p.tx,p.b*c+p.d*f+p.ty),this}bezierCurveTo(t,n,s,o,u,c,f){this._tick++;const p=this._transform;return this._activePath.bezierCurveTo(p.a*t+p.c*n+p.tx,p.b*t+p.d*n+p.ty,p.a*s+p.c*o+p.tx,p.b*s+p.d*o+p.ty,p.a*u+p.c*c+p.tx,p.b*u+p.d*c+p.ty,f),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,n,s,o){return this._tick++,this._activePath.ellipse(t,n,s,o,this._transform.clone()),this}circle(t,n,s){return this._tick++,this._activePath.circle(t,n,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,n){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*n+s.tx,s.b*t+s.d*n+s.ty),this}moveTo(t,n){this._tick++;const s=this._transform,o=this._activePath.instructions,u=s.a*t+s.c*n+s.tx,c=s.b*t+s.d*n+s.ty;return o.length===1&&o[0].action==="moveTo"?(o[0].data[0]=u,o[0].data[1]=c,this):(this._activePath.moveTo(u,c),this)}quadraticCurveTo(t,n,s,o,u){this._tick++;const c=this._transform;return this._activePath.quadraticCurveTo(c.a*t+c.c*n+c.tx,c.b*t+c.d*n+c.ty,c.a*s+c.c*o+c.tx,c.b*s+c.d*o+c.ty,u),this}rect(t,n,s,o){return this._tick++,this._activePath.rect(t,n,s,o,this._transform.clone()),this}roundRect(t,n,s,o,u){return this._tick++,this._activePath.roundRect(t,n,s,o,u,this._transform.clone()),this}poly(t,n){return this._tick++,this._activePath.poly(t,n,this._transform.clone()),this}regularPoly(t,n,s,o,u=0,c){return this._tick++,this._activePath.regularPoly(t,n,s,o,u,c),this}roundPoly(t,n,s,o,u,c){return this._tick++,this._activePath.roundPoly(t,n,s,o,u,c),this}roundShape(t,n,s,o){return this._tick++,this._activePath.roundShape(t,n,s,o),this}filletRect(t,n,s,o,u){return this._tick++,this._activePath.filletRect(t,n,s,o,u),this}chamferRect(t,n,s,o,u,c){return this._tick++,this._activePath.chamferRect(t,n,s,o,u,c),this}star(t,n,s,o,u=0,c=0){return this._tick++,this._activePath.star(t,n,s,o,u,c,this._transform.clone()),this}svg(t){return this._tick++,Z1(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,n=t){return this._transform.scale(t,n),this}setTransform(t,n,s,o,u,c){return t instanceof At?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,n,s,o,u,c),this)}transform(t,n,s,o,u,c){return t instanceof At?(this._transform.append(t),this):(ny.set(t,n,s,o,u,c),this._transform.append(ny),this)}translate(t,n=t){return this._transform.translate(t,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let n=0;n<this.instructions.length;n++){const s=this.instructions[n],o=s.action;if(o==="fill"){const u=s.data;t.addBounds(u.path.bounds)}else if(o==="texture"){const u=s.data;t.addFrame(u.dx,u.dy,u.dx+u.dw,u.dy+u.dh,u.transform)}if(o==="stroke"){const u=s.data,c=u.style.alignment,f=u.style.width*(1-c),p=u.path.bounds;t.addFrame(p.minX-f,p.minY-f,p.maxX+f,p.maxY+f)}}return t}containsPoint(t){var o;if(!this.bounds.containsPoint(t.x,t.y))return!1;const n=this.instructions;let s=!1;for(let u=0;u<n.length;u++){const c=n[u],f=c.data,p=f.path;if(!c.action||!p)continue;const g=f.style,m=p.shapePath.shapePrimitives;for(let y=0;y<m.length;y++){const _=m[y].shape;if(!g||!_)continue;const v=m[y].transform,T=v?v.applyInverse(t,eA):t;if(c.action==="fill")s=_.contains(T.x,T.y);else{const w=g;s=_.strokeContains(T.x,T.y,w.width,w.alignment)}const E=f.hole;if(E){const w=(o=E.shapePath)==null?void 0:o.shapePrimitives;if(w)for(let z=0;z<w.length;z++)w[z].shape.contains(T.x,T.y)&&(s=!1)}if(s)return!0}}return s}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(s),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(s)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};qh.defaultFillStyle={color:16777215,alpha:1,texture:wt.WHITE,matrix:null,fill:null,textureSpace:"local"};qh.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:wt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let ri=qh;const sy=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function iA(a){const t=[];let n=0;for(let s=0;s<sy.length;s++){const o=`_${sy[s]}`;t[n++]=a[o]}return n=B0(a._fill,t,n),n=nA(a._stroke,t,n),n=sA(a.dropShadow,t,n),t.join("-")}function B0(a,t,n){var s;return a&&(t[n++]=a.color,t[n++]=a.alpha,t[n++]=(s=a.fill)==null?void 0:s.styleKey),n}function nA(a,t,n){return a&&(n=B0(a,t,n),t[n++]=a.width,t[n++]=a.alignment,t[n++]=a.cap,t[n++]=a.join,t[n++]=a.miterLimit),n}function sA(a,t,n){return a&&(t[n++]=a.alpha,t[n++]=a.angle,t[n++]=a.blur,t[n++]=a.distance,t[n++]=re.shared.setValue(a.color).toNumber()),n}const Vh=class js extends gi{constructor(t={}){super(),aA(t);const n={...js.defaultTextStyle,...t};for(const s in n){const o=s;this[o]=n[s]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...js.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...js.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...ri.defaultFillStyle,...t},()=>{this._fill=Wn({...this._originalFill},ri.defaultFillStyle)})),this._fill=Wn(t===0?"black":t,ri.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...ri.defaultStrokeStyle,...t},()=>{this._stroke=$l({...this._originalStroke},ri.defaultStrokeStyle)})),this._stroke=$l(t,ri.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=iA(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=js.defaultTextStyle;for(const n in t)this[n]=t[n]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new js({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var s,o,u,c;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const f=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(f),(o=this._originalFill)!=null&&o.texture&&this._originalFill.texture.destroy(f),(u=this._stroke)!=null&&u.texture&&this._stroke.texture.destroy(f),(c=this._originalStroke)!=null&&c.texture&&this._originalStroke.texture.destroy(f)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,n){return new Proxy(t,{set:(s,o,u)=>(s[o]=u,n==null||n(o,u),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(re.isColorLike(t)||t instanceof ui||t instanceof Kl)}};Vh.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Vh.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let es=Vh;function aA(a){const t=a;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const n=es.defaultDropShadow;a.dropShadow={alpha:t.dropShadowAlpha??n.alpha,angle:t.dropShadowAngle??n.angle,blur:t.dropShadowBlur??n.blur,color:t.dropShadowColor??n.color,distance:t.dropShadowDistance??n.distance}}if(t.strokeThickness!==void 0){Rt(Lt,"strokeThickness is now a part of stroke");const n=t.stroke;let s={};if(re.isColorLike(n))s.color=n;else if(n instanceof ui||n instanceof Kl)s.fill=n;else if(Object.hasOwnProperty.call(n,"color")||Object.hasOwnProperty.call(n,"fill"))s=n;else throw new Error("Invalid stroke value.");a.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){Rt(Lt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let n;a.fontSize==null?a.fontSize=es.defaultTextStyle.fontSize:typeof a.fontSize=="string"?n=parseInt(a.fontSize,10):n=a.fontSize;const s=new ui({start:{x:0,y:0},end:{x:0,y:(n||0)*1.7}}),o=t.fillGradientStops.map(u=>re.shared.setValue(u).toNumber());o.forEach((u,c)=>{const f=c/(o.length-1);s.addColorStop(f,u)}),a.fill={fill:s}}}class rA{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,n){const s=Jt.get().createCanvas();s.width=t,s.height=n;const o=s.getContext("2d");return{canvas:s,context:o}}getOptimalCanvasAndContext(t,n,s=1){t=Math.ceil(t*s-1e-6),n=Math.ceil(n*s-1e-6),t=ql(t),n=ql(n);const o=(t<<17)+(n<<1);this._canvasPool[o]||(this._canvasPool[o]=[]);let u=this._canvasPool[o].pop();return u||(u=this._createCanvasAndContext(t,n)),u}returnCanvasAndContext(t){const n=t.canvas,{width:s,height:o}=n,u=(s<<17)+(o<<1);t.context.clearRect(0,0,s,o),this._canvasPool[u].push(t)}clear(){this._canvasPool={}}}const ay=new rA,lA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function gh(a){const t=typeof a.fontSize=="number"?`${a.fontSize}px`:a.fontSize;let n=a.fontFamily;Array.isArray(a.fontFamily)||(n=a.fontFamily.split(","));for(let s=n.length-1;s>=0;s--){let o=n[s].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&!lA.includes(o)&&(o=`"${o}"`),n[s]=o}return`${a.fontStyle} ${a.fontVariant} ${a.fontWeight} ${t} ${n.join(",")}`}const Fc={willReadFrequently:!0},mi=class at{static get experimentalLetterSpacingSupported(){let t=at._experimentalLetterSpacingSupported;if(t!==void 0){const n=Jt.get().getCanvasRenderingContext2D().prototype;t=at._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}constructor(t,n,s,o,u,c,f,p,g){this.text=t,this.style=n,this.width=s,this.height=o,this.lines=u,this.lineWidths=c,this.lineHeight=f,this.maxLineWidth=p,this.fontProperties=g}static measureText(t=" ",n,s=at._canvas,o=n.wordWrap){var B;const u=`${t}:${n.styleKey}`;if(at._measurementCache[u])return at._measurementCache[u];const c=gh(n),f=at.measureFont(c);f.fontSize===0&&(f.fontSize=n.fontSize,f.ascent=n.fontSize);const p=at.__context;p.font=c;const m=(o?at._wordWrap(t,n,s):t).split(/(?:\r\n|\r|\n)/),y=new Array(m.length);let _=0;for(let U=0;U<m.length;U++){const j=at._measureText(m[U],n.letterSpacing,p);y[U]=j,_=Math.max(_,j)}const v=((B=n._stroke)==null?void 0:B.width)||0;let T=_+v;n.dropShadow&&(T+=n.dropShadow.distance);const E=n.lineHeight||f.fontSize;let w=Math.max(E,f.fontSize+v)+(m.length-1)*(E+n.leading);return n.dropShadow&&(w+=n.dropShadow.distance),new at(t,n,T,w,m,y,E+n.leading,_,f)}static _measureText(t,n,s){let o=!1;at.experimentalLetterSpacingSupported&&(at.experimentalLetterSpacing?(s.letterSpacing=`${n}px`,s.textLetterSpacing=`${n}px`,o=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));const u=s.measureText(t);let c=u.width;const f=-u.actualBoundingBoxLeft;let g=u.actualBoundingBoxRight-f;if(c>0)if(o)c-=n,g-=n;else{const m=(at.graphemeSegmenter(t).length-1)*n;c+=m,g+=m}return Math.max(c,g)}static _wordWrap(t,n,s=at._canvas){const o=s.getContext("2d",Fc);let u=0,c="",f="";const p=Object.create(null),{letterSpacing:g,whiteSpace:m}=n,y=at._collapseSpaces(m),_=at._collapseNewlines(m);let v=!y;const T=n.wordWrapWidth+g,E=at._tokenize(t);for(let w=0;w<E.length;w++){let z=E[w];if(at._isNewline(z)){if(!_){f+=at._addLine(c),v=!y,c="",u=0;continue}z=" "}if(y){const U=at.isBreakingSpace(z),j=at.isBreakingSpace(c[c.length-1]);if(U&&j)continue}const B=at._getFromCache(z,g,p,o);if(B>T)if(c!==""&&(f+=at._addLine(c),c="",u=0),at.canBreakWords(z,n.breakWords)){const U=at.wordWrapSplit(z);for(let j=0;j<U.length;j++){let q=U[j],V=q,$=1;for(;U[j+$];){const nt=U[j+$];if(!at.canBreakChars(V,nt,z,j,n.breakWords))q+=nt;else break;V=nt,$++}j+=$-1;const rt=at._getFromCache(q,g,p,o);rt+u>T&&(f+=at._addLine(c),v=!1,c="",u=0),c+=q,u+=rt}}else{c.length>0&&(f+=at._addLine(c),c="",u=0);const U=w===E.length-1;f+=at._addLine(z,!U),v=!1,c="",u=0}else B+u>T&&(v=!1,f+=at._addLine(c),c="",u=0),(c.length>0||!at.isBreakingSpace(z)||v)&&(c+=z,u+=B)}return f+=at._addLine(c,!1),f}static _addLine(t,n=!0){return t=at._trimRight(t),t=n?`${t}
`:t,t}static _getFromCache(t,n,s,o){let u=s[t];return typeof u!="number"&&(u=at._measureText(t,n,o)+n,s[t]=u),u}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let n=t.length-1;n>=0;n--){const s=t[n];if(!at.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:at._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,n){return typeof t!="string"?!1:at._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const n=[];let s="";if(typeof t!="string")return n;for(let o=0;o<t.length;o++){const u=t[o],c=t[o+1];if(at.isBreakingSpace(u,c)||at._isNewline(u)){s!==""&&(n.push(s),s=""),n.push(u);continue}s+=u}return s!==""&&n.push(s),n}static canBreakWords(t,n){return n}static canBreakChars(t,n,s,o,u){return!0}static wordWrapSplit(t){return at.graphemeSegmenter(t)}static measureFont(t){if(at._fonts[t])return at._fonts[t];const n=at._context;n.font=t;const s=n.measureText(at.METRICS_STRING+at.BASELINE_SYMBOL),o={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return at._fonts[t]=o,o}static clearMetrics(t=""){t?delete at._fonts[t]:at._fonts={}}static get _canvas(){if(!at.__canvas){let t;try{const n=new OffscreenCanvas(0,0),s=n.getContext("2d",Fc);if(s!=null&&s.measureText)return at.__canvas=n,n;t=Jt.get().createCanvas()}catch{t=Jt.get().createCanvas()}t.width=t.height=10,at.__canvas=t}return at.__canvas}static get _context(){return at.__context||(at.__context=at._canvas.getContext("2d",Fc)),at.__context}};mi.METRICS_STRING="|q";mi.BASELINE_SYMBOL="M";mi.BASELINE_MULTIPLIER=1.4;mi.HEIGHT_MULTIPLIER=2;mi.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const a=new Intl.Segmenter;return t=>[...a.segment(t)].map(n=>n.segment)}return a=>[...a]})();mi.experimentalLetterSpacing=!1;mi._fonts={};mi._newlines=[10,13];mi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];mi._measurementCache={};let mh=mi;const ry=1e5;function ly(a,t,n,s=0){if(a.texture===wt.WHITE&&!a.fill)return re.shared.setValue(a.color).setAlpha(a.alpha??1).toHexa();if(a.fill){if(a.fill instanceof Kl){const o=a.fill,u=t.createPattern(o.texture.source.resource,"repeat"),c=o.transform.copyTo(At.shared);return c.scale(o.texture.frame.width,o.texture.frame.height),u.setTransform(c),u}else if(a.fill instanceof ui){const o=a.fill,u=o.type==="linear",c=o.textureSpace==="local";let f=1,p=1;c&&n&&(f=n.width+s,p=n.height+s);let g,m=!1;if(u){const{start:y,end:_}=o;g=t.createLinearGradient(y.x*f,y.y*p,_.x*f,_.y*p),m=Math.abs(_.x-y.x)<Math.abs((_.y-y.y)*.1)}else{const{center:y,innerRadius:_,outerCenter:v,outerRadius:T}=o;g=t.createRadialGradient(y.x*f,y.y*p,_*f,v.x*f,v.y*p,T*f)}if(m&&c&&n){const y=n.lineHeight/p;for(let _=0;_<n.lines.length;_++){const v=(_*n.lineHeight+s/2)/p;o.colorStops.forEach(T=>{const E=v+T.offset*y;g.addColorStop(Math.floor(E*ry)/ry,re.shared.setValue(T.color).toHex())})}}else o.colorStops.forEach(y=>{g.addColorStop(y.offset,re.shared.setValue(y.color).toHex())});return g}}else{const o=t.createPattern(a.texture.source.resource,"repeat"),u=a.matrix.copyTo(At.shared);return u.scale(a.texture.frame.width,a.texture.frame.height),o.setTransform(u),o}return Vt("FillStyle not recognised",a),"red"}function U0(a){if(a==="")return[];typeof a=="string"&&(a=[a]);const t=[];for(let n=0,s=a.length;n<s;n++){const o=a[n];if(Array.isArray(o)){if(o.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${o.length}.`);if(o[0].length===0||o[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const u=o[0].charCodeAt(0),c=o[1].charCodeAt(0);if(c<u)throw new Error("[BitmapFont]: Invalid character range.");for(let f=u,p=c;f<=p;f++)t.push(String.fromCharCode(f))}else t.push(...Array.from(o))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const L0=class k0 extends g0{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const n={...k0.defaultOptions,...t};this._textureSize=n.textureSize,this._mipmap=n.mipmap;const s=n.style.clone();n.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=wt.WHITE,s._fill.fill=null),this.applyFillAsTint=n.overrideFill;const o=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const u=gh(s);n.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/o):s.fontSize=this.baseRenderedFontSize=o,this._style=s,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,this.fontMetrics=mh.measureFont(u),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){var w,z;const n=U0(t).filter(B=>!this._currentChars.includes(B)).filter((B,U,j)=>j.indexOf(B)===U);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:o,context:u}=s.canvasAndContext,c=s.texture.source;const f=this._style;let p=this._currentX,g=this._currentY;const m=this.baseRenderedFontSize/this.baseMeasurementFontSize,y=this._padding*m;let _=0,v=!1;const T=o.width/this.resolution,E=o.height/this.resolution;for(let B=0;B<n.length;B++){const U=n[B],j=mh.measureText(U,f,o,!1);j.lineHeight=j.height;const q=j.width*m,V=Math.ceil((f.fontStyle==="italic"?2:1)*q),$=j.height*m,rt=V+y*2,nt=$+y*2;if(v=!1,U!==`
`&&U!=="\r"&&U!=="	"&&U!==" "&&(v=!0,_=Math.ceil(Math.max(nt,_))),p+rt>T&&(g+=_,_=nt,p=0,g+_>E)){c.update();const J=this._nextPage();o=J.canvasAndContext.canvas,u=J.canvasAndContext.context,c=J.texture.source,g=0}const et=q/m-(((w=f.dropShadow)==null?void 0:w.distance)??0)-(((z=f._stroke)==null?void 0:z.width)??0);if(this.chars[U]={id:U.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:et,kerning:{}},v){this._drawGlyph(u,j,p+y,g+y,m,f);const J=c.width*m,ft=c.height*m,bt=new se(p/J*c.width,g/ft*c.height,rt/J*c.width,nt/ft*c.height);this.chars[U].texture=new wt({source:c,frame:bt}),p+=Math.ceil(rt)}}c.update(),this._currentX=p,this._currentY=g,this._skipKerning&&this._applyKerning(n,u)}get pageTextures(){return Rt(Lt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,n){const s=this._measureCache;for(let o=0;o<t.length;o++){const u=t[o];for(let c=0;c<this._currentChars.length;c++){const f=this._currentChars[c];let p=s[u];p||(p=s[u]=n.measureText(u).width);let g=s[f];g||(g=s[f]=n.measureText(f).width);let m=n.measureText(u+f).width,y=m-(p+g);y&&(this.chars[u].kerning[f]=y),m=n.measureText(u+f).width,y=m-(p+g),y&&(this.chars[f].kerning[u]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,n=ay.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(n.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),o=new wt({source:new ts({resource:n.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),u={canvasAndContext:n,texture:o};return this.pages[this._currentPageIndex]=u,u}_setupContext(t,n,s){n.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=gh(n),n.fontSize=this.baseMeasurementFontSize,t.textBaseline=n.textBaseline;const o=n._stroke,u=(o==null?void 0:o.width)??0;if(o&&(t.lineWidth=u,t.lineJoin=o.join,t.miterLimit=o.miterLimit,t.strokeStyle=ly(o,t)),n._fill&&(t.fillStyle=ly(n._fill,t)),n.dropShadow){const c=n.dropShadow,f=re.shared.setValue(c.color).toArray(),p=c.blur*s,g=c.distance*s;t.shadowColor=`rgba(${f[0]*255},${f[1]*255},${f[2]*255},${c.alpha})`,t.shadowBlur=p,t.shadowOffsetX=Math.cos(c.angle)*g,t.shadowOffsetY=Math.sin(c.angle)*g}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,n,s,o,u,c){const f=n.text,p=n.fontProperties,g=c._stroke,m=((g==null?void 0:g.width)??0)*u,y=s+m/2,_=o-m/2,v=p.descent*u,T=n.lineHeight*u;c.stroke&&m&&t.strokeText(f,y,_+T-v),c._fill&&t.fillText(f,y,_+T-v)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:n,texture:s}=this.pages[t];ay.returnCanvasAndContext(n),s.destroy(!0)}this.pages=null}};L0.defaultOptions={textureSize:512,style:new es,mipmap:!0};let oy=L0;function oA(a,t,n,s){const o={width:0,height:0,offsetY:0,scale:t.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};o.offsetY=n.baseLineOffset;let u=o.lines[0],c=null,f=!0;const p={width:0,start:0,index:0,positions:[],chars:[]},g=T=>{const E=u.width;for(let w=0;w<p.index;w++){const z=T.positions[w];u.chars.push(T.chars[w]),u.charPositions.push(z+E)}u.width+=T.width,f=!1,p.width=0,p.index=0,p.chars.length=0},m=()=>{let T=u.chars.length-1;if(s){let E=u.chars[T];for(;E===" ";)u.width-=n.chars[E].xAdvance,E=u.chars[--T]}o.width=Math.max(o.width,u.width),u={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},f=!0,o.lines.push(u),o.height+=n.lineHeight},y=n.baseMeasurementFontSize/t.fontSize,_=t.letterSpacing*y,v=t.wordWrapWidth*y;for(let T=0;T<a.length+1;T++){let E;const w=T===a.length;w||(E=a[T]);const z=n.chars[E]||n.chars[" "];if(/(?:\s)/.test(E)||E==="\r"||E===`
`||w){if(!f&&t.wordWrap&&u.width+p.width-_>v?(m(),g(p),w||u.charPositions.push(0)):(p.start=u.width,g(p),w||u.charPositions.push(0)),E==="\r"||E===`
`)u.width!==0&&m();else if(!w){const q=z.xAdvance+(z.kerning[c]||0)+_;u.width+=q,u.spaceWidth=q,u.spacesIndex.push(u.charPositions.length),u.chars.push(E)}}else{const j=z.kerning[c]||0,q=z.xAdvance+j+_;p.positions[p.index++]=p.width+j,p.chars.push(E),p.width+=q}c=E}return m(),t.align==="center"?uA(o):t.align==="right"?cA(o):t.align==="justify"&&hA(o),o}function uA(a){for(let t=0;t<a.lines.length;t++){const n=a.lines[t],s=a.width/2-n.width/2;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function cA(a){for(let t=0;t<a.lines.length;t++){const n=a.lines[t],s=a.width-n.width;for(let o=0;o<n.charPositions.length;o++)n.charPositions[o]+=s}}function hA(a){const t=a.width;for(let n=0;n<a.lines.length;n++){const s=a.lines[n];let o=0,u=s.spacesIndex[o++],c=0;const f=s.spacesIndex.length,g=(t-s.width)/f;for(let m=0;m<s.charPositions.length;m++)m===u&&(u=s.spacesIndex[o++],c+=g),s.charPositions[m]+=c}}let kl=0;class fA{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,n){var c;let s=`${n.fontFamily}-bitmap`,o=!0;if(n._fill.fill&&!n._stroke)s+=n._fill.fill.styleKey,o=!1;else if(n._stroke||n.dropShadow){let f=n.styleKey;f=f.substring(0,f.lastIndexOf("-")),s=`${f}-bitmap`,o=!1}if(!Wt.has(s)){const f=new oy({style:n,overrideFill:o,overrideSize:!0,...this.defaultOptions});kl++,kl>50&&Vt("BitmapText",`You have dynamically created ${kl} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),f.once("destroy",()=>{kl--,Wt.remove(s)}),Wt.set(s,f)}const u=Wt.get(s);return(c=u.ensureCharacters)==null||c.call(u,t),u}getLayout(t,n,s=!0){const o=this.getFont(t,n);return oA([...t],n,o,s)}measureText(t,n,s=!0){return this.getLayout(t,n,s)}install(...t){var g,m,y,_;let n=t[0];typeof n=="string"&&(n={name:n,style:t[1],chars:(g=t[2])==null?void 0:g.chars,resolution:(m=t[2])==null?void 0:m.resolution,padding:(y=t[2])==null?void 0:y.padding,skipKerning:(_=t[2])==null?void 0:_.skipKerning},Rt(Lt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=n==null?void 0:n.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");n={...this.defaultOptions,...n};const o=n.style,u=o instanceof es?o:new es(o),c=u._fill.fill!==null&&u._fill.fill!==void 0,f=new oy({style:u,overrideFill:c,skipKerning:n.skipKerning,padding:n.padding,resolution:n.resolution,overrideSize:!1}),p=U0(n.chars);return f.ensureCharacters(p.join("")),Wt.set(`${s}-bitmap`,f),f.once("destroy",()=>Wt.remove(`${s}-bitmap`)),f}uninstall(t){const n=`${t}-bitmap`,s=Wt.get(n);s&&s.destroy()}}const uy=new fA;class N0 extends g0{constructor(t,n){super();const{textures:s,data:o}=t;Object.keys(o.pages).forEach(u=>{const c=o.pages[parseInt(u,10)],f=s[c.id];this.pages.push({texture:f})}),Object.keys(o.chars).forEach(u=>{const c=o.chars[u],{frame:f,source:p}=s[c.page],g=new se(c.x+f.x,c.y+f.y,c.width,c.height),m=new wt({source:p,frame:g});this.chars[u]={id:u.codePointAt(0),xOffset:c.xOffset,yOffset:c.yOffset,xAdvance:c.xAdvance,kerning:c.kerning??{},texture:m}}),this.baseRenderedFontSize=o.fontSize,this.baseMeasurementFontSize=o.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:o.fontSize},this.baseLineOffset=o.baseLineOffset,this.lineHeight=o.lineHeight,this.fontFamily=o.fontFamily,this.distanceField=o.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:n}=this.pages[t];n.destroy(!0)}this.pages=null}static install(t){uy.install(t)}static uninstall(t){uy.uninstall(t)}}const qc={test(a){return typeof a=="string"&&a.startsWith("info face=")},parse(a){const t=a.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const _=t[y].match(/^[a-z]+/gm)[0],v=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),T={};for(const E in v){const w=v[E].split("="),z=w[0],B=w[1].replace(/"/gm,""),U=parseFloat(B),j=isNaN(U)?B:U;T[z]=j}n[_].push(T)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[o]=n.info,[u]=n.common,[c]=n.distanceField??[];c&&(s.distanceField={range:parseInt(c.distanceRange,10),type:c.fieldType}),s.fontSize=parseInt(o.size,10),s.fontFamily=o.face,s.lineHeight=parseInt(u.lineHeight,10);const f=n.page;for(let y=0;y<f.length;y++)s.pages.push({id:parseInt(f[y].id,10)||0,file:f[y].file});const p={};s.baseLineOffset=s.lineHeight-parseInt(u.base,10);const g=n.char;for(let y=0;y<g.length;y++){const _=g[y],v=parseInt(_.id,10);let T=_.letter??_.char??String.fromCharCode(v);T==="space"&&(T=" "),p[v]=T,s.chars[T]={id:v,page:parseInt(_.page,10)||0,x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xOffset:parseInt(_.xoffset,10),yOffset:parseInt(_.yoffset,10),xAdvance:parseInt(_.xadvance,10),kerning:{}}}const m=n.kerning||[];for(let y=0;y<m.length;y++){const _=parseInt(m[y].first,10),v=parseInt(m[y].second,10),T=parseInt(m[y].amount,10);s.chars[p[v]].kerning[p[_]]=T}return s}},cy={test(a){const t=a;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(a){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=a.getElementsByTagName("info")[0],s=a.getElementsByTagName("common")[0],o=a.getElementsByTagName("distanceField")[0];o&&(t.distanceField={type:o.getAttribute("fieldType"),range:parseInt(o.getAttribute("distanceRange"),10)});const u=a.getElementsByTagName("page"),c=a.getElementsByTagName("char"),f=a.getElementsByTagName("kerning");t.fontSize=parseInt(n.getAttribute("size"),10),t.fontFamily=n.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let g=0;g<u.length;g++)t.pages.push({id:parseInt(u[g].getAttribute("id"),10)||0,file:u[g].getAttribute("file")});const p={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let g=0;g<c.length;g++){const m=c[g],y=parseInt(m.getAttribute("id"),10);let _=m.getAttribute("letter")??m.getAttribute("char")??String.fromCharCode(y);_==="space"&&(_=" "),p[y]=_,t.chars[_]={id:y,page:parseInt(m.getAttribute("page"),10)||0,x:parseInt(m.getAttribute("x"),10),y:parseInt(m.getAttribute("y"),10),width:parseInt(m.getAttribute("width"),10),height:parseInt(m.getAttribute("height"),10),xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{}}}for(let g=0;g<f.length;g++){const m=parseInt(f[g].getAttribute("first"),10),y=parseInt(f[g].getAttribute("second"),10),_=parseInt(f[g].getAttribute("amount"),10);t.chars[p[y]].kerning[p[m]]=_}return t}},hy={test(a){return typeof a=="string"&&a.includes("<font>")?cy.test(Jt.get().parseXML(a)):!1},parse(a){return cy.parse(Jt.get().parseXML(a))}},dA=[".xml",".fnt"],pA={extension:{type:ot.CacheParser,name:"cacheBitmapFont"},test:a=>a instanceof N0,getCacheableAssets(a,t){const n={};return a.forEach(s=>{n[s]=t,n[`${s}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},gA={extension:{type:ot.LoadParser,priority:yn.Normal},name:"loadBitmapFont",test(a){return dA.includes(Ze.extname(a).toLowerCase())},async testParse(a){return qc.test(a)||hy.test(a)},async parse(a,t,n){const s=qc.test(a)?qc.parse(a):hy.parse(a),{src:o}=t,{pages:u}=s,c=[],f=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<u.length;++y){const _=u[y].file;let v=Ze.join(Ze.dirname(o),_);v=ah(v,o),c.push({src:v,data:f})}const p=await n.load(c),g=c.map(y=>p[y.src]);return new N0({data:s,textures:g},o)},async load(a,t){return await(await Jt.get().fetch(a)).text()},async unload(a,t,n){await Promise.all(a.pages.map(s=>n.unload(s.texture.source._sourceOrigin))),a.destroy()}};class mA{constructor(t,n=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(t){t.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<n;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const yA={extension:{type:ot.CacheParser,name:"cacheTextureArray"},test:a=>Array.isArray(a)&&a.every(t=>t instanceof wt),getCacheableAssets:(a,t)=>{const n={};return a.forEach(s=>{t.forEach((o,u)=>{n[s+(u===0?"":u+1)]=o})}),n}};async function H0(a){if("Image"in globalThis)return new Promise(t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=a});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(a)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const bA={extension:{type:ot.DetectionParser,priority:1},test:async()=>H0("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async a=>[...a,"avif"],remove:async a=>a.filter(t=>t!=="avif")},fy=["png","jpg","jpeg"],vA={extension:{type:ot.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async a=>[...a,...fy],remove:async a=>a.filter(t=>!fy.includes(t))},xA="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function $h(a){return xA?!1:document.createElement("video").canPlayType(a)!==""}const _A={extension:{type:ot.DetectionParser,priority:0},test:async()=>$h("video/mp4"),add:async a=>[...a,"mp4","m4v"],remove:async a=>a.filter(t=>t!=="mp4"&&t!=="m4v")},SA={extension:{type:ot.DetectionParser,priority:0},test:async()=>$h("video/ogg"),add:async a=>[...a,"ogv"],remove:async a=>a.filter(t=>t!=="ogv")},AA={extension:{type:ot.DetectionParser,priority:0},test:async()=>$h("video/webm"),add:async a=>[...a,"webm"],remove:async a=>a.filter(t=>t!=="webm")},TA={extension:{type:ot.DetectionParser,priority:0},test:async()=>H0("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async a=>[...a,"webp"],remove:async a=>a.filter(t=>t!=="webp")};class wA{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,n,s)=>(this._parsersValidated=!1,t[n]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,n){const s={promise:null,parser:null};return s.promise=(async()=>{var c,f;let o=null,u=null;if(n.loadParser&&(u=this._parserHash[n.loadParser],u||Vt(`[Assets] specified load parser "${n.loadParser}" not found while loading ${t}`)),!u){for(let p=0;p<this.parsers.length;p++){const g=this.parsers[p];if(g.load&&((c=g.test)!=null&&c.call(g,t,n,this))){u=g;break}}if(!u)return Vt(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}o=await u.load(t,n,this),s.parser=u;for(let p=0;p<this.parsers.length;p++){const g=this.parsers[p];g.parse&&g.parse&&await((f=g.testParse)==null?void 0:f.call(g,o,n,this))&&(o=await g.parse(o,n,this)||o,s.parser=g)}return o})(),s}async load(t,n){this._parsersValidated||this._validateParsers();let s=0;const o={},u=Vl(t),c=pi(t,g=>({alias:[g],src:g,data:{}})),f=c.length,p=c.map(async g=>{const m=Ze.toAbsolute(g.src);if(!o[g.src])try{this.promiseCache[m]||(this.promiseCache[m]=this._getLoadPromiseAndParser(m,g)),o[g.src]=await this.promiseCache[m].promise,n&&n(++s/f)}catch(y){throw delete this.promiseCache[m],delete o[g.src],new Error(`[Loader.load] Failed to load ${m}.
${y}`)}});return await Promise.all(p),u?o[c[0].src]:o}async unload(t){const s=pi(t,o=>({alias:[o],src:o})).map(async o=>{var f,p;const u=Ze.toAbsolute(o.src),c=this.promiseCache[u];if(c){const g=await c.promise;delete this.promiseCache[u],await((p=(f=c.parser)==null?void 0:f.unload)==null?void 0:p.call(f,g,o,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,n)=>(n.name?t[n.name]&&Vt(`[Assets] loadParser name conflict "${n.name}"`):Vt("[Assets] loadParser should have a name"),{...t,[n.name]:n}),{})}}function Ws(a,t){if(Array.isArray(t)){for(const n of t)if(a.startsWith(`data:${n}`))return!0;return!1}return a.startsWith(`data:${t}`)}function Js(a,t){const n=a.split("?")[0],s=Ze.extname(n).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const MA=".json",CA="application/json",EA={extension:{type:ot.LoadParser,priority:yn.Low},name:"loadJson",test(a){return Ws(a,CA)||Js(a,MA)},async load(a){return await(await Jt.get().fetch(a)).json()}},RA=".txt",GA="text/plain",OA={name:"loadTxt",extension:{type:ot.LoadParser,priority:yn.Low,name:"loadTxt"},test(a){return Ws(a,GA)||Js(a,RA)},async load(a){return await(await Jt.get().fetch(a)).text()}},zA=["normal","bold","100","200","300","400","500","600","700","800","900"],DA=[".ttf",".otf",".woff",".woff2"],BA=["font/ttf","font/otf","font/woff","font/woff2"],UA=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function LA(a){const t=Ze.extname(a),o=Ze.basename(a,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1));let u=o.length>0;for(const f of o)if(!f.match(UA)){u=!1;break}let c=o.join(" ");return u||(c=`"${c.replace(/[\\"]/g,"\\$&")}"`),c}const kA=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function NA(a){return kA.test(a)?a:encodeURI(a)}const HA={extension:{type:ot.LoadParser,priority:yn.Low},name:"loadWebFont",test(a){return Ws(a,BA)||Js(a,DA)},async load(a,t){var s,o,u;const n=Jt.get().getFontFaceSet();if(n){const c=[],f=((s=t.data)==null?void 0:s.family)??LA(a),p=((u=(o=t.data)==null?void 0:o.weights)==null?void 0:u.filter(m=>zA.includes(m)))??["normal"],g=t.data??{};for(let m=0;m<p.length;m++){const y=p[m],_=new FontFace(f,`url(${NA(a)})`,{...g,weight:y});await _.load(),n.add(_),c.push(_)}return Wt.set(`${f}-and-url`,{url:a,fontFaces:c}),c.length===1?c[0]:c}return Vt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(a){(Array.isArray(a)?a:[a]).forEach(t=>{Wt.remove(`${t.family}-and-url`),Jt.get().getFontFaceSet().delete(t)})}};function Zh(a,t=1){var s;const n=(s=Ks.RETINA_PREFIX)==null?void 0:s.exec(a);return n?parseFloat(n[1]):t}function Qh(a,t,n){a.label=n,a._sourceOrigin=n;const s=new wt({source:a,label:n}),o=()=>{delete t.promiseCache[n],Wt.has(n)&&Wt.remove(n)};return s.source.once("destroy",()=>{t.promiseCache[n]&&(Vt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),o())}),s.once("destroy",()=>{a.destroyed||(Vt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),o())}),s}const PA=".svg",YA="image/svg+xml",XA={extension:{type:ot.LoadParser,priority:yn.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(a){return Ws(a,YA)||Js(a,PA)},async load(a,t,n){var s;return((s=t.data)==null?void 0:s.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?IA(a):jA(a,t,n,this.config.crossOrigin)},unload(a){a.destroy(!0)}};async function jA(a,t,n,s){var w,z,B;const u=await(await Jt.get().fetch(a)).blob(),c=URL.createObjectURL(u),f=new Image;f.src=c,f.crossOrigin=s,await f.decode(),URL.revokeObjectURL(c);const p=document.createElement("canvas"),g=p.getContext("2d"),m=((w=t.data)==null?void 0:w.resolution)||Zh(a),y=((z=t.data)==null?void 0:z.width)??f.width,_=((B=t.data)==null?void 0:B.height)??f.height;p.width=y*m,p.height=_*m,g.drawImage(f,0,0,y*m,_*m);const{parseAsGraphicsContext:v,...T}=t.data??{},E=new ts({resource:p,alphaMode:"premultiply-alpha-on-upload",resolution:m,...T});return Qh(E,n,a)}async function IA(a){const n=await(await Jt.get().fetch(a)).text(),s=new ri;return s.svg(n),s}const FA=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let qs=null,yh=class{constructor(){qs||(qs=URL.createObjectURL(new Blob([FA],{type:"application/javascript"}))),this.worker=new Worker(qs)}};yh.revokeObjectURL=function(){qs&&(URL.revokeObjectURL(qs),qs=null)};const qA=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Vs=null;class P0{constructor(){Vs||(Vs=URL.createObjectURL(new Blob([qA],{type:"application/javascript"}))),this.worker=new Worker(Vs)}}P0.revokeObjectURL=function(){Vs&&(URL.revokeObjectURL(Vs),Vs=null)};let dy=0,Vc;class VA{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:n}=new yh;n.addEventListener("message",s=>{n.terminate(),yh.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,n){var s;return this._run("loadImageBitmap",[t,(s=n==null?void 0:n.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Vc===void 0&&(Vc=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<Vc&&(this._createdWorkers++,t=new P0().worker,t.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,n){await this._initWorkers();const s=new Promise((o,u)=>{this._queue.push({id:t,arguments:n,resolve:o,reject:u})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const n=this._queue.pop(),s=n.id;this._resolveHash[dy]={resolve:n.resolve,reject:n.reject},t.postMessage({data:n.arguments,uuid:dy++,id:s})}}const py=new VA,$A=[".jpeg",".jpg",".png",".webp",".avif"],ZA=["image/jpeg","image/png","image/webp","image/avif"];async function QA(a,t){var o;const n=await Jt.get().fetch(a);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${a}: ${n.status} ${n.statusText}`);const s=await n.blob();return((o=t==null?void 0:t.data)==null?void 0:o.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const Y0={name:"loadTextures",extension:{type:ot.LoadParser,priority:yn.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(a){return Ws(a,ZA)||Js(a,$A)},async load(a,t,n){var u;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await py.isImageBitmapSupported()?s=await py.loadImageBitmap(a,t):s=await QA(a,t):s=await new Promise((c,f)=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=a,s.complete?c(s):(s.onload=()=>{c(s)},s.onerror=f)});const o=new ts({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((u=t.data)==null?void 0:u.resolution)||Zh(a),...t.data});return Qh(o,n,a)},unload(a){a.destroy(!0)}},X0=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],KA=X0.map(a=>`video/${a.substring(1)}`);function WA(a,t,n){n===void 0&&!t.startsWith("data:")?a.crossOrigin=tT(t):n!==!1&&(a.crossOrigin=typeof n=="string"?n:"anonymous")}function JA(a){return new Promise((t,n)=>{a.addEventListener("canplaythrough",s),a.addEventListener("error",o),a.load();function s(){u(),t()}function o(c){u(),n(c)}function u(){a.removeEventListener("canplaythrough",s),a.removeEventListener("error",o)}})}function tT(a,t=globalThis.location){if(a.startsWith("data:"))return"";t||(t=globalThis.location);const n=new URL(a,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?"anonymous":""}const eT={name:"loadVideo",extension:{type:ot.LoadParser,name:"loadVideo"},test(a){const t=Ws(a,KA),n=Js(a,X0);return t||n},async load(a,t,n){var p,g;const s={...Yl.defaultOptions,resolution:((p=t.data)==null?void 0:p.resolution)||Zh(a),alphaMode:((g=t.data)==null?void 0:g.alphaMode)||await $y(),...t.data},o=document.createElement("video"),u={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(u).forEach(m=>{const y=u[m];y!==void 0&&o.setAttribute(m,y)}),s.muted===!0&&(o.muted=!0),WA(o,a,s.crossorigin);const c=document.createElement("source");let f;if(a.startsWith("data:"))f=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const m=a.split("?")[0].slice(a.lastIndexOf(".")+1).toLowerCase();f=Yl.MIME_TYPES[m]||`video/${m}`}return c.src=a,f&&(c.type=f),new Promise(m=>{const y=async()=>{const _=new Yl({...s,resource:o});o.removeEventListener("canplay",y),t.data.preload&&await JA(o),m(Qh(_,n,a))};o.addEventListener("canplay",y),o.appendChild(c)})},unload(a){a.destroy(!0)}},j0={extension:{type:ot.ResolveParser,name:"resolveTexture"},test:Y0.test,parse:a=>{var t;return{resolution:parseFloat(((t=Ks.RETINA_PREFIX.exec(a))==null?void 0:t[1])??"1"),format:a.split(".").pop(),src:a}}},iT={extension:{type:ot.ResolveParser,priority:-2,name:"resolveJson"},test:a=>Ks.RETINA_PREFIX.test(a)&&a.endsWith(".json"),parse:j0.parse};class nT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ks,this.loader=new wA,this.cache=Wt,this._backgroundLoader=new mA(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var u,c;if(this._initialized){Vt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let f=t.manifest;typeof f=="string"&&(f=await this.load(f)),this.resolver.addManifest(f)}const n=((u=t.texturePreference)==null?void 0:u.resolution)??1,s=typeof n=="number"?[n]:n,o=await this._detectFormats({preferredFormats:(c=t.texturePreference)==null?void 0:c.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:o,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,n){this._initialized||await this.init();const s=Vl(t),o=pi(t).map(f=>{if(typeof f!="string"){const p=this.resolver.getAlias(f);return p.some(g=>!this.resolver.hasKey(g))&&this.add(f),Array.isArray(p)?p[0]:p}return this.resolver.hasKey(f)||this.add({alias:f,src:f}),f}),u=this.resolver.resolve(o),c=await this._mapLoadToResolve(u,n);return s?c[o[0]]:c}addBundle(t,n){this.resolver.addBundle(t,n)}async loadBundle(t,n){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const o=this.resolver.resolveBundle(t),u={},c=Object.keys(o);let f=0,p=0;const g=()=>{n==null||n(++f/p)},m=c.map(y=>{const _=o[y];return p+=Object.keys(_).length,this._mapLoadToResolve(_,g).then(v=>{u[y]=v})});return await Promise.all(m),s?u[t[0]]:u}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolveBundle(t);Object.values(n).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Wt.get(t);const n={};for(let s=0;s<t.length;s++)n[s]=Wt.get(t[s]);return n}async _mapLoadToResolve(t,n){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const o=await this.loader.load(s,n);this._backgroundLoader.active=!0;const u={};return s.forEach(c=>{const f=o[c.src],p=[c.src];c.alias&&p.push(...c.alias),p.forEach(g=>{u[g]=f}),Wt.set(p,f)}),u}async unload(t){this._initialized||await this.init();const n=pi(t).map(o=>typeof o!="string"?o.src:o),s=this.resolver.resolve(n);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=pi(t);const n=this.resolver.resolveBundle(t),s=Object.keys(n).map(o=>this._unloadFromResolved(n[o]));await Promise.all(s)}async _unloadFromResolved(t){const n=Object.values(t);n.forEach(s=>{Wt.remove(s.src)}),await this.loader.unload(n)}async _detectFormats(t){let n=[];t.preferredFormats&&(n=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?n=await s.add(n):t.skipDetections||(n=await s.remove(n));return n=n.filter((s,o)=>n.indexOf(s)===o),n}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(s=>s in t).forEach(s=>{n.config[s]=t[s]})})}}const Jn=new nT;xe.handleByList(ot.LoadParser,Jn.loader.parsers).handleByList(ot.ResolveParser,Jn.resolver.parsers).handleByList(ot.CacheParser,Jn.cache.parsers).handleByList(ot.DetectionParser,Jn.detections);xe.add(yA,vA,bA,TA,_A,SA,AA,EA,OA,HA,XA,Y0,eT,gA,pA,j0,iT);const gy={loader:ot.LoadParser,resolver:ot.ResolveParser,cache:ot.CacheParser,detection:ot.DetectionParser};xe.handle(ot.Asset,a=>{const t=a.ref;Object.entries(gy).filter(([n])=>!!t[n]).forEach(([n,s])=>xe.add(Object.assign(t[n],{extension:t[n].extension??s})))},a=>{const t=a.ref;Object.keys(gy).filter(n=>!!t[n]).forEach(n=>xe.remove(t[n]))});class Qe extends Nh{constructor(t){t instanceof ri&&(t={context:t});const{context:n,roundPixels:s,...o}=t||{};super({label:"Graphics",...o}),this.renderPipeId="graphics",n?this._context=n:this._context=this._ownedContext=new ri,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=s??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,n){return this.context[t](...n),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Qe(this._context.clone()):(this._ownedContext=null,new Qe(this._context))}lineStyle(t,n,s){Rt(Lt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const o={};return t&&(o.width=t),n&&(o.color=n),s&&(o.alpha=s),this.context.strokeStyle=o,this}beginFill(t,n){Rt(Lt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return t!==void 0&&(s.color=t),n!==void 0&&(s.alpha=n),this.context.fillStyle=s,this}endFill(){Rt(Lt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==ri.defaultStrokeStyle.width||t.color!==ri.defaultStrokeStyle.color||t.alpha!==ri.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return Rt(Lt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return Rt(Lt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return Rt(Lt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return Rt(Lt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return Rt(Lt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return Rt(Lt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class sT extends Nh{constructor(t,n){const{text:s,resolution:o,style:u,anchor:c,width:f,height:p,roundPixels:g,...m}=t;super({...m}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=n,this.text=s??"",this.style=u,this.resolution=o??null,this.allowChildren=!1,this._anchor=new Le({_onUpdate:()=>{this.onViewUpdate()}}),c&&(this.anchor=c),this.roundPixels=g??!1,f!==void 0&&(this.width=f),p!==void 0&&(this.height=p)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var n;t||(t={}),(n=this._style)==null||n.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,n){typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,this.bounds.width),n!==void 0&&this._setHeight(n,this.bounds.height)}containsPoint(t){const n=this.bounds.width,s=this.bounds.height,o=-n*this.anchor.x;let u=0;return t.x>=o&&t.x<=o+n&&(u=-s*this.anchor.y,t.y>=u&&t.y<=u+s)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function aT(a,t){let n=a[0]??{};return(typeof n=="string"||a[1])&&(Rt(Lt,`use new ${t}({ text: "hi!", style }) instead`),n={text:n,style:a[1]}),n}class lr extends sT{constructor(...t){const n=aT(t,"Text");super(n,es),this.renderPipeId="text"}updateBounds(){const t=this._bounds,n=this._anchor,s=mh.measureText(this._text,this._style),{width:o,height:u}=s;t.minX=-n._x*o,t.maxX=t.minX+o,t.minY=-n._y*u,t.maxY=t.minY+u}}xe.add(Ox,zx);const Ii=800,ve=600,rT=.1,my=-5,$c=12,Nl={startX:150,startY:ve/2-50},Zc=[{speed:1,spawnInterval:2500,label:"Level 1",orbsRequired:5,timeLimit:6e4},{speed:1.2,spawnInterval:2200,label:"Level 2",orbsRequired:8,timeLimit:6e4},{speed:1.5,spawnInterval:2e3,label:"Level 3",orbsRequired:12,timeLimit:7e4},{speed:1.8,spawnInterval:1800,label:"Level 4",orbsRequired:15,timeLimit:7e4},{speed:2,spawnInterval:1600,label:"Level 5",orbsRequired:20,timeLimit:8e4}],lT=.4,Qc=[{name:"astronaut",url:"./assets/astro-sprite.png",type:"texture"}];class oT{constructor(){Z(this,"loaded",!1);Z(this,"loadPromise",null);this.registerAssets()}registerAssets(){Qc.forEach(t=>{if(!t.url){console.error(`Asset ${t.name} has no URL defined`);return}console.log(`Registering asset: ${t.name} with URL: ${t.url}`),Jn.add({alias:t.name,src:t.url})})}async loadAssets(){if(this.loaded)return Promise.resolve();if(this.loadPromise)return this.loadPromise;console.log("Starting to load assets...");try{return this.loadPromise=new Promise(async(t,n)=>{try{for(const s of Qc)console.log(`Loading asset: ${s.name} from ${s.url}`),await Jn.load(s.name),console.log(`Successfully loaded: ${s.name}`);this.loaded=!0,console.log("All assets loaded successfully"),t()}catch(s){console.error("Failed to load assets:",s),n(s)}}),this.loadPromise}catch(t){throw console.error("Asset loading error:",t),t}}getTexture(t){this.loaded||console.warn(`Asset ${t} requested before assets were loaded.`);try{const n=Jn.get(t);return n||(console.error(`Texture '${t}' not found. Available assets:`,Qc.map(s=>s.name).join(", ")),wt.WHITE)}catch(n){return console.error(`Error getting texture '${t}':`,n),wt.WHITE}}isLoaded(){return this.loaded}}const I0=new oT;var Fs=(a=>(a.JUMP="jump",a.START_GAME="start_game",a))(Fs||{});class uT{constructor(){Z(this,"keyMap");Z(this,"eventHandlers");Z(this,"enabled");Z(this,"touchActive",!1);Z(this,"handleKeyDown",t=>{const n=t.code;console.log(`InputManager: KeyDown event - ${n}, enabled: ${this.enabled}`),this.keyMap.get(n)||(this.keyMap.set(n,!0),(n==="Space"||n==="ArrowUp"||n==="KeyW")&&(console.log(`InputManager: Triggering JUMP event from key ${n}`),this.triggerEvent("jump"),n==="Space"&&(console.log("InputManager: Triggering START_GAME event from spacebar"),this.triggerEvent("start_game"))))});Z(this,"handleKeyUp",t=>{const n=t.code;this.keyMap.set(n,!1),console.log(`InputManager: KeyUp event - ${n}`)});Z(this,"handleTouchStart",t=>{this.enabled&&(console.log("InputManager: TouchStart event detected"),this.touchActive=!0,console.log("InputManager: Triggering JUMP event from touch"),this.triggerEvent("jump"),console.log("InputManager: Triggering START_GAME event from touch"),this.triggerEvent("start_game"),t.preventDefault())});Z(this,"handleTouchEnd",t=>{console.log("InputManager: TouchEnd event detected"),this.touchActive=!1,t.preventDefault()});Z(this,"handleTouchMove",t=>{t.preventDefault()});this.keyMap=new Map,this.eventHandlers=new Map,this.enabled=!1,Object.values(Fs).forEach(t=>{this.eventHandlers.set(t,[])}),console.log("InputManager: Created")}enable(){this.enabled||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchend",this.handleTouchEnd),window.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),this.enabled=!0,console.log("InputManager: Enabled with keyboard and touch support"))}disable(){this.enabled&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchmove",this.handleTouchMove),this.enabled=!1,console.log("InputManager: Disabled"))}on(t,n){const s=this.eventHandlers.get(t)||[];s.push(n),this.eventHandlers.set(t,s),console.log(`InputManager: Registered handler for ${t}, total handlers: ${s.length}`)}off(t,n){const s=this.eventHandlers.get(t)||[],o=s.indexOf(n);o!==-1&&(s.splice(o,1),this.eventHandlers.set(t,s),console.log(`InputManager: Unregistered handler for ${t}, remaining handlers: ${s.length}`))}isKeyDown(t){return this.keyMap.get(t)||!1}isTouchActive(){return this.touchActive}triggerEvent(t){const n=this.eventHandlers.get(t)||[];console.log(`InputManager: Triggering ${t} event, handlers: ${n.length}`),n.forEach(s=>s())}}const Xn=new uT;var bh=function(a,t){return bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},bh(a,t)};function ta(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bh(a,t);function n(){this.constructor=a}a.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function vh(a){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&a[t],s=0;if(n)return n.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&s>=a.length&&(a=void 0),{value:a&&a[s++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xh(a,t){var n=typeof Symbol=="function"&&a[Symbol.iterator];if(!n)return a;var s=n.call(a),o,u=[],c;try{for(;(t===void 0||t-- >0)&&!(o=s.next()).done;)u.push(o.value)}catch(f){c={error:f}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return u}function _h(a,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,u;s<o;s++)(u||!(s in t))&&(u||(u=Array.prototype.slice.call(t,0,s)),u[s]=t[s]);return a.concat(u||Array.prototype.slice.call(t))}function Ti(a){return typeof a=="function"}function F0(a){var t=function(s){Error.call(s),s.stack=new Error().stack},n=a(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Kc=F0(function(a){return function(n){a(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(s,o){return o+1+") "+s.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Sh(a,t){if(a){var n=a.indexOf(t);0<=n&&a.splice(n,1)}}var Jl=function(){function a(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return a.prototype.unsubscribe=function(){var t,n,s,o,u;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var f=vh(c),p=f.next();!p.done;p=f.next()){var g=p.value;g.remove(this)}}catch(E){t={error:E}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}else c.remove(this);var m=this.initialTeardown;if(Ti(m))try{m()}catch(E){u=E instanceof Kc?E.errors:[E]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var _=vh(y),v=_.next();!v.done;v=_.next()){var T=v.value;try{yy(T)}catch(E){u=u??[],E instanceof Kc?u=_h(_h([],xh(u)),xh(E.errors)):u.push(E)}}}catch(E){s={error:E}}finally{try{v&&!v.done&&(o=_.return)&&o.call(_)}finally{if(s)throw s.error}}}if(u)throw new Kc(u)}},a.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)yy(t);else{if(t instanceof a){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},a.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},a.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},a.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Sh(n,t)},a.prototype.remove=function(t){var n=this._finalizers;n&&Sh(n,t),t instanceof a&&t._removeParent(this)},a.EMPTY=function(){var t=new a;return t.closed=!0,t}(),a}(),q0=Jl.EMPTY;function V0(a){return a instanceof Jl||a&&"closed"in a&&Ti(a.remove)&&Ti(a.add)&&Ti(a.unsubscribe)}function yy(a){Ti(a)?a():a.unsubscribe()}var cT={Promise:void 0},hT={setTimeout:function(a,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];return setTimeout.apply(void 0,_h([a,t],xh(n)))},clearTimeout:function(a){return clearTimeout(a)},delegate:void 0};function fT(a){hT.setTimeout(function(){throw a})}function by(){}function Il(a){a()}var Kh=function(a){ta(t,a);function t(n){var s=a.call(this)||this;return s.isStopped=!1,n?(s.destination=n,V0(n)&&n.add(s)):s.destination=gT,s}return t.create=function(n,s,o){return new Ah(n,s,o)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Jl),dT=function(){function a(t){this.partialObserver=t}return a.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(s){Hl(s)}},a.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(s){Hl(s)}else Hl(t)},a.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Hl(n)}},a}(),Ah=function(a){ta(t,a);function t(n,s,o){var u=a.call(this)||this,c;return Ti(n)||!n?c={next:n??void 0,error:s??void 0,complete:o??void 0}:c=n,u.destination=new dT(c),u}return t}(Kh);function Hl(a){fT(a)}function pT(a){throw a}var gT={closed:!0,next:by,error:pT,complete:by},mT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function $0(a){return a}function yT(a){return a.length===0?$0:a.length===1?a[0]:function(n){return a.reduce(function(s,o){return o(s)},n)}}var vy=function(){function a(t){t&&(this._subscribe=t)}return a.prototype.lift=function(t){var n=new a;return n.source=this,n.operator=t,n},a.prototype.subscribe=function(t,n,s){var o=this,u=vT(t)?t:new Ah(t,n,s);return Il(function(){var c=o,f=c.operator,p=c.source;u.add(f?f.call(u,p):p?o._subscribe(u):o._trySubscribe(u))}),u},a.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},a.prototype.forEach=function(t,n){var s=this;return n=xy(n),new n(function(o,u){var c=new Ah({next:function(f){try{t(f)}catch(p){u(p),c.unsubscribe()}},error:u,complete:o});s.subscribe(c)})},a.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},a.prototype[mT]=function(){return this},a.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return yT(t)(this)},a.prototype.toPromise=function(t){var n=this;return t=xy(t),new t(function(s,o){var u;n.subscribe(function(c){return u=c},function(c){return o(c)},function(){return s(u)})})},a.create=function(t){return new a(t)},a}();function xy(a){var t;return(t=a??cT.Promise)!==null&&t!==void 0?t:Promise}function bT(a){return a&&Ti(a.next)&&Ti(a.error)&&Ti(a.complete)}function vT(a){return a&&a instanceof Kh||bT(a)&&V0(a)}function xT(a){return Ti(a==null?void 0:a.lift)}function Wh(a){return function(t){if(xT(t))return t.lift(function(n){try{return a(n,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function Jh(a,t,n,s,o){return new _T(a,t,n,s,o)}var _T=function(a){ta(t,a);function t(n,s,o,u,c,f){var p=a.call(this,n)||this;return p.onFinalize=c,p.shouldUnsubscribe=f,p._next=s?function(g){try{s(g)}catch(m){n.error(m)}}:a.prototype._next,p._error=u?function(g){try{u(g)}catch(m){n.error(m)}finally{this.unsubscribe()}}:a.prototype._error,p._complete=o?function(){try{o()}catch(g){n.error(g)}finally{this.unsubscribe()}}:a.prototype._complete,p}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var s=this.closed;a.prototype.unsubscribe.call(this),!s&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(Kh),ST=F0(function(a){return function(){a(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),tf=function(a){ta(t,a);function t(){var n=a.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var s=new _y(this,this);return s.operator=n,s},t.prototype._throwIfClosed=function(){if(this.closed)throw new ST},t.prototype.next=function(n){var s=this;Il(function(){var o,u;if(s._throwIfClosed(),!s.isStopped){s.currentObservers||(s.currentObservers=Array.from(s.observers));try{for(var c=vh(s.currentObservers),f=c.next();!f.done;f=c.next()){var p=f.value;p.next(n)}}catch(g){o={error:g}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}}})},t.prototype.error=function(n){var s=this;Il(function(){if(s._throwIfClosed(),!s.isStopped){s.hasError=s.isStopped=!0,s.thrownError=n;for(var o=s.observers;o.length;)o.shift().error(n)}})},t.prototype.complete=function(){var n=this;Il(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var s=n.observers;s.length;)s.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),a.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var s=this,o=this,u=o.hasError,c=o.isStopped,f=o.observers;return u||c?q0:(this.currentObservers=null,f.push(n),new Jl(function(){s.currentObservers=null,Sh(f,n)}))},t.prototype._checkFinalizedStatuses=function(n){var s=this,o=s.hasError,u=s.thrownError,c=s.isStopped;o?n.error(u):c&&n.complete()},t.prototype.asObservable=function(){var n=new vy;return n.source=this,n},t.create=function(n,s){return new _y(n,s)},t}(vy),_y=function(a){ta(t,a);function t(n,s){var o=a.call(this)||this;return o.destination=n,o.source=s,o}return t.prototype.next=function(n){var s,o;(o=(s=this.destination)===null||s===void 0?void 0:s.next)===null||o===void 0||o.call(s,n)},t.prototype.error=function(n){var s,o;(o=(s=this.destination)===null||s===void 0?void 0:s.error)===null||o===void 0||o.call(s,n)},t.prototype.complete=function(){var n,s;(s=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||s===void 0||s.call(n)},t.prototype._subscribe=function(n){var s,o;return(o=(s=this.source)===null||s===void 0?void 0:s.subscribe(n))!==null&&o!==void 0?o:q0},t}(tf),AT=function(a){ta(t,a);function t(n){var s=a.call(this)||this;return s._value=n,s}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var s=a.prototype._subscribe.call(this,n);return!s.closed&&n.next(this._value),s},t.prototype.getValue=function(){var n=this,s=n.hasError,o=n.thrownError,u=n._value;if(s)throw o;return this._throwIfClosed(),u},t.prototype.next=function(n){a.prototype.next.call(this,this._value=n)},t}(tf);function Z0(a,t){return Wh(function(n,s){var o=0;n.subscribe(Jh(s,function(u){s.next(a.call(t,u,o++))}))})}function TT(a,t){return Wh(function(n,s){var o=0;n.subscribe(Jh(s,function(u){return a.call(t,u,o++)&&s.next(u)}))})}function wT(a,t){return t===void 0&&(t=$0),a=a??MT,Wh(function(n,s){var o,u=!0;n.subscribe(Jh(s,function(c){var f=t(c);(u||!a(o,f))&&(u=!1,o=f,s.next(c))}))})}function MT(a,t){return a===t}var pt=(a=>(a.SCORE_CHANGED="SCORE_CHANGED",a.LEVEL_CHANGED="LEVEL_CHANGED",a.GAME_OVER="GAME_OVER",a.LEVEL_COMPLETE="LEVEL_COMPLETE",a.GAME_STARTED="GAME_STARTED",a.GAME_RESET="GAME_RESET",a.ORB_COLLECTED="ORB_COLLECTED",a.OBSTACLE_PASSED="OBSTACLE_PASSED",a.COLLISION_DETECTED="COLLISION_DETECTED",a.JUMP_ACTION="JUMP_ACTION",a.DEBUG_TOGGLED="DEBUG_TOGGLED",a.ENTITY_CREATED="ENTITY_CREATED",a.ENTITY_DESTROYED="ENTITY_DESTROYED",a.TIME_UPDATED="TIME_UPDATED",a.START_GAME="START_GAME",a.SHOW_START_PROMPT="SHOW_START_PROMPT",a.HIDE_START_PROMPT="HIDE_START_PROMPT",a.RESTART_GAME="RESTART_GAME",a))(pt||{});const jn=class jn{constructor(){Z(this,"eventSubject");Z(this,"debug",!1);this.eventSubject=new tf}static getInstance(){return jn.instance||(jn.instance=new jn),jn.instance}enableDebug(){this.debug=!0,console.log("EventBus: Debug mode enabled - all events will be logged")}disableDebug(){this.debug=!1,console.log("EventBus: Debug mode disabled")}emit(t,n){this.debug?console.log(`%cEventBus EMIT: ${t}`,"color: green; font-weight: bold",n):console.log(`%c${t}`,"color: green",n),this.eventSubject.next({type:t,data:n})}on(t){return this.debug?console.log(`%cEventBus SUBSCRIBE: ${t}`,"color: orange; font-weight: bold"):console.log(`%cSubscribing to ${t}`,"color: orange"),this.eventSubject.pipe(TT(n=>n.type===t),Z0(n=>n.data))}getEventStream(){return this.eventSubject.asObservable()}};Z(jn,"instance");let Th=jn;const Gt=Th.getInstance(),In=class In{constructor(){Z(this,"state$");this.state$=new AT(this.getInitialState()),this.setupEventPublishers()}getInitialState(){const t=Zc[0];return{score:0,level:1,warps:0,time:0,orbsCollected:0,orbsRequired:t.orbsRequired,timeLimit:t.timeLimit,timeRemaining:t.timeLimit,isStarted:!1,isGameOver:!1,isLevelComplete:!1,debugMode:!1}}setupEventPublishers(){this.select(t=>t.score).subscribe(t=>{Gt.emit(pt.SCORE_CHANGED,t)}),this.select(t=>t.level).subscribe(t=>{Gt.emit(pt.LEVEL_CHANGED,t)}),this.select(t=>t.isGameOver).subscribe(t=>{t&&Gt.emit(pt.GAME_OVER,null)}),this.select(t=>t.isLevelComplete).subscribe(t=>{t&&Gt.emit(pt.LEVEL_COMPLETE,this.getState().level)})}static getInstance(){return In.instance||(In.instance=new In),In.instance}getState(){return this.state$.getValue()}getState$(){return this.state$.asObservable()}select(t){return this.state$.pipe(Z0(t),wT())}setState(t){this.state$.next(t(this.getState()))}startGame(){console.log("GameStateService: startGame() called"),console.log(`GameStateService: Current state before starting - isStarted: ${this.getState().isStarted}, isGameOver: ${this.getState().isGameOver}, isLevelComplete: ${this.getState().isLevelComplete}`),this.setState(t=>({...t,isStarted:!0,isGameOver:!1,isLevelComplete:!1})),console.log(`GameStateService: State updated - isStarted: ${this.getState().isStarted}, isGameOver: ${this.getState().isGameOver}, isLevelComplete: ${this.getState().isLevelComplete}`),console.log("GameStateService: Emitting GAME_STARTED event"),Gt.emit(pt.GAME_STARTED,null),console.log("GameStateService: startGame() complete")}gameOver(){this.setState(t=>({...t,isGameOver:!0,isStarted:!1}))}resetGame(){console.log("GameStateService: Resetting game state to initial values");const t=this.getInitialState();console.log("GameStateService: Initial state:",t),this.state$.next(t),console.log("GameStateService: State reset complete - time:",this.getState().time),Gt.emit(pt.GAME_RESET,null)}incrementScore(t){this.setState(n=>({...n,score:n.score+t}))}collectOrb(){this.setState(t=>{const n=t.orbsCollected+1,s=n>=t.orbsRequired;return Gt.emit(pt.ORB_COLLECTED,n),{...t,orbsCollected:n,score:t.score+10,isLevelComplete:s}})}levelComplete(){this.setState(t=>{if(t.level>=Zc.length)return{...t,isLevelComplete:!0,isGameOver:!0};const n=t.level+1,s=Zc[n-1];return{...t,level:n,warps:t.warps+1,orbsCollected:0,orbsRequired:s.orbsRequired,timeLimit:s.timeLimit,timeRemaining:s.timeLimit,isLevelComplete:!0}})}updateTime(t){console.log("GameStateService: updateTime() called with deltaMS:",t),this.setState(n=>{const s=n.time+t,o=Math.max(0,n.timeRemaining-t),u=n.timeRemaining>0&&o<=0;return u&&Gt.emit(pt.TIME_UPDATED,{time:s,timeRemaining:o,timeRanOut:u}),{...n,time:s,timeRemaining:o,isGameOver:u?!0:n.isGameOver}})}toggleDebugMode(){this.setState(t=>{const n=!t.debugMode;return Gt.emit(pt.DEBUG_TOGGLED,n),{...t,debugMode:n}})}};Z(In,"instance");let wh=In;const Tt=wh.getInstance();class CT{constructor(t,n,s,o,u,c,f,p,g,m){Z(this,"app");Z(this,"eventBus");Z(this,"gameStateService");Z(this,"inputSystem");Z(this,"audioSystem");Z(this,"entityManager");Z(this,"renderSystem");Z(this,"physicsSystem");Z(this,"spawningSystem");Z(this,"uiSystem");Z(this,"gameLoopFunc");Z(this,"initialized",!1);console.log("GameController: Constructor called"),this.app=t,this.eventBus=n,this.gameStateService=s,this.inputSystem=o,this.audioSystem=u,this.entityManager=c,this.renderSystem=f,this.physicsSystem=p,this.spawningSystem=g,this.uiSystem=m,console.log("GameController: Creating game loop function"),this.gameLoopFunc=this.createGameLoop(),console.log("GameController: Is app.ticker available?",!!this.app.ticker),console.log("GameController: Constructor completed")}initialize(){if(this.initialized){console.log("GameController already initialized");return}console.log("GameController: Initializing..."),this.app=this.app,console.log("GameController: Initializing InputSystem"),this.inputSystem.initialize(),console.log("GameController: Initializing AudioSystem"),this.audioSystem.initialize(),console.log("GameController: Initializing EntityManager"),this.entityManager.initialize(this.app),console.log("GameController: Initializing RenderSystem"),this.renderSystem.initialize(this.app),console.log("GameController: Initializing PhysicsSystem"),this.physicsSystem.initialize(),console.log("GameController: Initializing SpawningSystem"),this.spawningSystem.initialize(),console.log("GameController: Initializing UISystem");try{this.uiSystem.initialize(this.app)}catch(t){console.error("GameController: Failed to initialize UISystem:",t)}this.gameLoopFunc=this.createGameLoop(),this.renderSystem.createBackground(),this.app.ticker?(console.log("GameController: Starting ticker for background animation"),this.app.ticker.add(this.gameLoopFunc),this.app.ticker.start()):console.error("GameController: Ticker not available"),this.initialized=!0,console.log("GameController: Initialization complete"),this.setupEventListeners()}setupGame(){console.log("GameController: Setting up game..."),console.log("GameController: Resetting game state"),this.gameStateService.resetGame(),console.log("GameController: Clearing all entities"),this.entityManager.clearAll(),console.log("GameController: Resetting spawning system"),this.spawningSystem.resetSpawning();const t=this.gameStateService.getState().level;console.log(`GameController: Initializing level ${t}`),this.initializeLevel(t);const n=this.entityManager.getAstronaut();n?console.log("GameController: Astronaut position verified - x:",n.sprite.x,"y:",n.sprite.y):(console.log("GameController: Astronaut not created during initialization. Creating it now."),this.entityManager.createAstronaut()),console.log("GameController: Updating background ticker function"),this.app.ticker.remove(this.gameLoopFunc),this.app.ticker.add(this.gameLoopFunc),this.app.ticker.started||(console.log("GameController: Starting ticker for background animation"),this.app.ticker.start()),console.log("GameController: Showing start prompt"),this.eventBus.emit(pt.SHOW_START_PROMPT,null),console.log("GameController: Setup complete. Waiting for START_GAME.")}startGame(){if(console.log("GameController: startGame() called"),this.gameStateService.getState().isStarted){console.log("GameController: Game already in progress, ignoring start request");return}if(console.log("GameController: DIAGNOSTIC INFO:"),console.log("- Game state:",this.gameStateService.getState()),console.log("- Astronaut exists:",!!this.entityManager.getAstronaut()),console.log("- Obstacles count:",this.entityManager.getObstacles().length),console.log("- Orbs count:",this.entityManager.getOrbs().length),console.log("- Stars count:",this.entityManager.getStars().length),console.log("GameController: Calling gameStateService.startGame()"),this.gameStateService.startGame(),console.log("GameController: app =",this.app),console.log("GameController: app.ticker =",this.app.ticker),console.log("GameController: app.ticker.started =",this.app.ticker?this.app.ticker.started:"ticker undefined"),console.log("GameController: gameLoopFunc =",typeof this.gameLoopFunc=="function"?"function defined":this.gameLoopFunc),console.log("GameController: Removing any existing game loop from ticker"),this.app.ticker.remove(this.gameLoopFunc),console.log("GameController: Adding game loop to ticker"),this.app.ticker.add(this.gameLoopFunc),this.app.ticker.started)console.log("GameController: Ticker already started"),console.log("GameController: Forcing initial update cycle on already running ticker..."),this.gameLoopFunc({deltaTime:1/60,deltaMS:16.667,elapsedMS:16.667});else{console.log("GameController: Ticker not started, starting it now");try{this.app.ticker.start(),console.log("GameController: Ticker started successfully");const t=this.gameStateService.getState();console.log(`GameController: Game state after start - isStarted: ${t.isStarted}, tickerStarted: ${this.app.ticker.started}`),console.log("GameController: Forcing initial update cycle..."),this.gameLoopFunc({deltaTime:1/60,deltaMS:16.667,elapsedMS:16.667})}catch(t){console.error("GameController: Error starting ticker:",t)}}console.log("GameController: Hiding start prompt"),this.eventBus.emit(pt.HIDE_START_PROMPT,null),console.log("GameController: Game started")}pauseGame(){this.gameStateService.getState().isStarted&&(console.log("GameController: Pausing game"),this.app.ticker.stop(),console.log("GameController: Game paused"))}resumeGame(){this.gameStateService.getState().isGameOver||(console.log("GameController: Resuming game"),this.app.ticker.start(),console.log("GameController: Game resumed"))}gameOver(){console.log("GameController: Game over"),console.log("GameController: Calling gameStateService.gameOver()"),this.gameStateService.gameOver(),console.log("GameController: Removing game loop from ticker"),this.app.ticker.remove(this.gameLoopFunc);const t=this.entityManager.getAstronaut();t&&!t.dead&&(console.log("GameController: Setting astronaut to dead state"),t.die()),console.log("GameController: Game over processing complete")}initializeLevel(t){console.log(`GameController: Initializing level ${t}`);const n={obstacleFrequency:2e3-t*200,orbFrequency:3e3,scrollSpeed:.05+t*.03};console.log(`GameController: Level config - obstacleFrequency: ${n.obstacleFrequency}, orbFrequency: ${n.orbFrequency}, scrollSpeed: ${n.scrollSpeed}`),console.log("GameController: Setting level config in SpawningSystem"),this.spawningSystem.setLevelConfig(n),console.log("GameController: Setting scroll speed in PhysicsSystem"),this.physicsSystem.setScrollSpeed(n.scrollSpeed),console.log("GameController: Creating astronaut entity");const s=this.entityManager.createAstronaut();s?console.log(`GameController: Astronaut created at position (${s.sprite.x}, ${s.sprite.y})`):console.error("GameController: Failed to create astronaut"),console.log("GameController: Creating background"),this.renderSystem.createBackground(),console.log("GameController: Updating ticker for background animation"),this.app.ticker.remove(this.gameLoopFunc),this.app.ticker.add(this.gameLoopFunc),this.app.ticker.started?console.log("GameController: Ticker already running for background animation"):(console.log("GameController: Starting ticker for background animation"),this.app.ticker.start()),console.log(`GameController: Level ${t} initialization complete`)}setupEventListeners(){console.log("GameController: Setting up event listeners"),console.log("GameController: Subscribing to START_GAME event"),this.eventBus.on(pt.START_GAME).subscribe(()=>{console.log("GameController: Received START_GAME event from EventBus"),this.startGame()}),this.eventBus.on(pt.RESTART_GAME).subscribe(()=>{console.log("GameController: Received RESTART_GAME event from EventBus"),this.setupGame()}),console.log("GameController: Subscribing to COLLISION_DETECTED event"),this.eventBus.on(pt.COLLISION_DETECTED).subscribe(()=>{console.log("GameController: Received COLLISION_DETECTED"),this.gameOver()}),console.log("GameController: Subscribing to ORB_COLLECTED event"),this.eventBus.on(pt.ORB_COLLECTED).subscribe(t=>{console.log("GameController: Received ORB_COLLECTED, data:",t);const n=this.gameStateService.getState();console.log(`GameController: Current state - orbsCollected: ${n.orbsCollected}, orbsRequired: ${n.orbsRequired}, isGameOver: ${n.isGameOver}`),n.orbsCollected>=n.orbsRequired&&!n.isGameOver&&(console.log("GameController: Orb collection goal met"),this.levelComplete())}),console.log("GameController: Subscribing to TIME_UPDATED event"),this.eventBus.on(pt.TIME_UPDATED).subscribe(t=>{console.log("GameController: Received TIME_UPDATED, data:",t),t&&t.timeRemaining<=0&&(console.log("GameController: Time expired"),this.gameOver())}),console.log("GameController: Event listeners setup complete")}levelComplete(){console.log("GameController: Level complete"),console.log("GameController: Stopping ticker for level transition"),this.app.ticker.stop(),console.log("GameController: Calling gameStateService.levelComplete()"),this.gameStateService.levelComplete(),console.log("GameController: Level complete UI should be shown"),console.log("GameController: Setting up timeout for next level"),setTimeout(()=>{const t=this.gameStateService.getState().level;console.log(`GameController: Initializing next level (${t})`),this.initializeLevel(t),console.log("GameController: Restarting ticker"),this.app.ticker.start(),console.log("GameController: Level transition complete")},3e3)}createGameLoop(){return console.log("GameController: Creating game loop function"),t=>{Math.random()<.01&&console.log(`GameController: Ticker running - deltaMS: ${t.deltaMS}, started: ${t.started}, minFPS: ${t.minFPS}, maxFPS: ${t.maxFPS}`);const n=this.gameStateService.getState(),s=t.deltaMS/1e3;try{this.renderSystem.updateBackground(s)}catch(o){console.error("GameController: Error updating background:",o)}if(!n.isStarted||n.isGameOver){Math.random()<.01&&console.log(`GameController: Main game loop skipped - isStarted: ${n.isStarted}, isGameOver: ${n.isGameOver}`);return}Math.random()<.01&&console.log(`GameController: Game loop running - delta: ${t.deltaMS}ms`),this.gameStateService.updateTime(t.deltaMS);try{if(Math.random()<.01){const o=this.entityManager.getAllEntities();console.log(`GameController: Updating ${o.length} entities`);const u=this.entityManager.getAstronaut();u?console.log(`GameController: Astronaut position: (${u.sprite.x}, ${u.sprite.y})`):console.warn("GameController: No astronaut found!")}console.log("GameController: Updating physics..."),this.physicsSystem.update(s,this.entityManager.getAllEntities()),console.log("GameController: Updating spawning..."),this.spawningSystem.update(s,this.gameStateService.getState()),console.log("GameController: Updating rendering..."),this.renderSystem.update(s,this.entityManager.getAllEntities()),console.log("GameController: Updating UI..."),this.uiSystem.update()}catch(o){console.error("GameController: Error in game loop update:",o)}this.checkGameConditions()}}checkGameConditions(){const t=this.gameStateService.getState();t.timeRemaining<=0&&!t.isGameOver&&(console.log("GameController: Time has run out, emitting TIME_UPDATED event"),this.eventBus.emit(pt.TIME_UPDATED,{timeRemaining:0,timeRanOut:!0})),t.orbsCollected>=t.orbsRequired&&!t.isGameOver&&(console.log("GameController: All orbs collected, emitting ORB_COLLECTED event"),this.eventBus.emit(pt.ORB_COLLECTED,t.orbsCollected))}dispose(){console.log("GameController: Disposing..."),console.log("GameController: Removing game loop from ticker"),this.app.ticker.remove(this.gameLoopFunc),console.log("GameController: Disposing InputSystem"),this.inputSystem.dispose(),console.log("GameController: Disposing AudioSystem"),this.audioSystem.dispose(),console.log("GameController: Disposing EntityManager"),this.entityManager.dispose(),console.log("GameController: Disposing RenderSystem"),this.renderSystem.dispose(),console.log("GameController: Disposing PhysicsSystem"),this.physicsSystem.dispose(),console.log("GameController: Disposing SpawningSystem"),this.spawningSystem.dispose(),console.log("GameController: Disposing UISystem"),this.uiSystem.dispose(),console.log("GameController: Disposed")}}const Fn=class Fn{constructor(){Z(this,"subscriptions",[]);Z(this,"initialized",!1);Z(this,"enabled",!1);Z(this,"handleJumpAction",()=>{if(console.log(`InputSystem: Jump action received, enabled: ${this.enabled}`),!this.enabled){console.log("InputSystem: Jump action ignored - input disabled");return}console.log("InputSystem: Emitting JUMP_ACTION event"),Gt.emit(pt.JUMP_ACTION,null)});Z(this,"handleRestartGame",()=>{console.log("InputSystem: Emitting RESTART_GAME event"),Gt.emit(pt.RESTART_GAME,null)});Z(this,"handleStartGame",()=>{console.log("InputSystem: START_GAME event received from InputManager");const t=Tt.getState();console.log(`InputSystem: Current game state - isStarted: ${t.isStarted}, isGameOver: ${t.isGameOver}`),t.isStarted?console.log("InputSystem: Game already started, ignoring START_GAME event"):(console.log("InputSystem: Emitting START_GAME event to EventBus"),Gt.emit(pt.START_GAME,null))});Z(this,"handleKeyDown",t=>{console.log(`InputSystem: KeyDown event - ${t.key}, isStarted: ${Tt.getState().isStarted}`),t.key===" "&&!Tt.getState().isStarted&&!Tt.getState().isGameOver?(console.log("InputSystem: Spacebar pressed while game not started, emitting START_GAME event directly"),Gt.emit(pt.START_GAME,null)):t.key==="d"||t.key==="D"?(console.log("InputSystem: Debug mode toggle"),Tt.toggleDebugMode()):(t.key==="r"||t.key==="R")&&(console.log("InputSystem: Restart game"),Gt.emit(pt.RESTART_GAME,null))});console.log("InputSystem: Instance created")}static getInstance(){return Fn.instance||(Fn.instance=new Fn),Fn.instance}initialize(){if(this.initialized){console.log("InputSystem: Already initialized, skipping");return}console.log("InputSystem: Initializing..."),console.log("InputSystem: Registering JUMP event handler"),Xn.on(Fs.JUMP,this.handleJumpAction),console.log("InputSystem: Registering START_GAME event handler"),Xn.on(Fs.START_GAME,this.handleStartGame),console.log("InputSystem: Adding keydown event listener"),document.addEventListener("keydown",this.handleKeyDown),this.subscriptions.push(Tt.select(t=>t.isGameOver).subscribe(t=>{t&&(console.log("InputSystem: Game over detected, disabling input"),this.disable())})),this.subscriptions.push(Tt.select(t=>t.isStarted).subscribe(t=>{console.log(`InputSystem: isStarted changed to ${t}`),t?(console.log("InputSystem: Game started, enabling input"),this.enable()):(console.log("InputSystem: Game stopped, disabling input"),this.disable())})),this.initialized=!0,console.log("InputSystem: Initialization complete")}dispose(){console.log("InputSystem: Disposing..."),Xn.off(Fs.JUMP,this.handleJumpAction),Xn.off(Fs.START_GAME,this.handleStartGame),document.removeEventListener("keydown",this.handleKeyDown),this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[],this.initialized=!1,console.log("InputSystem: Disposed")}enable(){Xn.enable(),this.enabled=!0,console.log("InputSystem: Input enabled")}disable(){Xn.disable(),this.enabled=!1,console.log("InputSystem: Input disabled")}};Z(Fn,"instance");let Mh=Fn;const ET=Mh.getInstance();class RT{constructor(){Z(this,"context",null);Z(this,"sounds",{});Z(this,"initialized",!1);this.initialize()}initialize(){if(!this.initialized)try{this.context=new AudioContext,this.loadSounds(),this.initialized=!0}catch(t){console.error("Web Audio API not supported:",t)}}async loadSounds(){if(!this.context)return;const t={jump:this.createSimpleTone(800,.1),score:this.createSimpleTone(600,.15),hit:this.createSimpleTone(200,.2),levelUp:this.createSimpleTone(1200,.3)};this.sounds=t}createSimpleTone(t,n){if(!this.context)throw new Error("Audio context not initialized");const s=this.context.sampleRate,o=this.context.createBuffer(1,s*n,s),u=o.getChannelData(0);for(let c=0;c<o.length;c++){u[c]=Math.sin(2*Math.PI*t*c/s);const f=c<o.length*.1?c/(o.length*.1):1-(c-o.length*.1)/(o.length*.9);u[c]*=f}return o}play(t){if(!this.context||!this.sounds[t])return;this.context.state==="suspended"&&this.context.resume();const n=this.context.createBufferSource();n.buffer=this.sounds[t],n.connect(this.context.destination),n.start()}}const kn=new RT,qn=class qn{constructor(){Z(this,"subscriptions",[]);Z(this,"initialized",!1)}static getInstance(){return qn.instance||(qn.instance=new qn),qn.instance}initialize(){this.initialized||(kn.initialize(),this.setupEventListeners(),this.initialized=!0,console.log("AudioSystem initialized"))}dispose(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[],this.initialized=!1,console.log("AudioSystem disposed")}setupEventListeners(){this.subscriptions.push(Gt.on(pt.JUMP_ACTION).subscribe(()=>{console.log("Playing jump sound"),kn.play("jump")})),this.subscriptions.push(Gt.on(pt.OBSTACLE_PASSED).subscribe(()=>{console.log("Playing score sound"),kn.play("score")})),this.subscriptions.push(Gt.on(pt.ORB_COLLECTED).subscribe(()=>{console.log("Playing orb collection sound"),kn.play("score")})),this.subscriptions.push(Gt.on(pt.COLLISION_DETECTED).subscribe(()=>{console.log("Playing hit sound"),kn.play("hit")})),this.subscriptions.push(Gt.on(pt.GAME_OVER).subscribe(()=>{console.log("Playing game over sound"),kn.play("hit")})),this.subscriptions.push(Gt.on(pt.LEVEL_COMPLETE).subscribe(()=>{console.log("Playing level complete sound"),kn.play("levelUp")}))}};Z(qn,"instance");let Ch=qn;const GT=Ch.getInstance();class OT{constructor(t,n,s){Z(this,"sprite");Z(this,"velocity");Z(this,"rotation");Z(this,"dead");this.sprite=new Zs(t),this.sprite.width=50,this.sprite.height=50,this.sprite.x=n,this.sprite.y=s,this.sprite.anchor.set(.5),this.velocity=0,this.rotation=0,this.dead=!1,Gt.on(pt.JUMP_ACTION).subscribe(()=>{console.log("Astronaut: Received JUMP_ACTION event from EventBus"),this.flap()}),console.log("Astronaut: Created and subscribed to JUMP_ACTION events")}update(t=16.667){if(this.dead)return;Math.random()<.01&&console.log(`Astronaut: Position (${this.sprite.x}, ${this.sprite.y}), Velocity: ${this.velocity}`);const n=t/16.667;this.velocity+=rT*n,this.velocity>$c&&(this.velocity=$c),this.sprite.y+=this.velocity*n;const s=this.velocity/$c*Math.PI/6;this.rotation=this.rotation*.9+s*.1,this.sprite.rotation=this.rotation,this.sprite.y-this.sprite.height/2<0&&(this.sprite.y=this.sprite.height/2,this.velocity=0,console.log("Astronaut: Hit top boundary")),this.sprite.y+this.sprite.height/2>ve&&(this.sprite.y=ve-this.sprite.height/2,this.velocity=0,console.log("Astronaut: Hit bottom boundary - dying"),this.die())}getHitbox(){const t=new Ce,n=.7,s=this.sprite.width*n,o=this.sprite.height*n;return t.minX=this.sprite.x-s/2,t.maxX=this.sprite.x+s/2,t.minY=this.sprite.y-o/2,t.maxY=this.sprite.y+o/2,t}flap(){if(this.dead){console.log("Astronaut: Flap attempted but astronaut is dead");return}console.log(`Astronaut: Flap! Setting velocity from ${this.velocity} to ${my}`),this.velocity=my}die(){console.log("Astronaut: Dying..."),this.dead=!0,this.sprite.tint=16733525}reset(t,n){this.sprite.x=t,this.sprite.y=n,this.velocity=0,this.rotation=0,this.dead=!1,this.sprite.tint=16777215}}function zT(a,t){return!(a.maxX<t.minX||a.minX>t.maxX||a.maxY<t.minY||a.minY>t.maxY)}function DT(a,t,n,s){const o=Math.max(s.minX,Math.min(a,s.maxX)),u=Math.max(s.minY,Math.min(t,s.maxY)),c=a-o,f=t-u;return c*c+f*f<n*n}class Q0{constructor(t,n){Z(this,"passed");Z(this,"speed");Z(this,"x");Z(this,"y");this.x=t,this.y=0,this.passed=!1,this.speed=n}isPassed(t){return this.passed?!1:this.x<t?(this.passed=!0,!0):!1}}const Sy=[{color:16739179,name:"red",hasRings:!1},{color:5164484,name:"cyan",hasRings:!0},{color:16770669,name:"yellow",hasRings:!1},{color:7077780,name:"green",hasRings:!1},{color:11240447,name:"purple",hasRings:!0},{color:16745430,name:"pink",hasRings:!1}];class K0 extends Q0{constructor(n,s,o,u){super(n,u);Z(this,"graphics");Z(this,"glowGraphics");Z(this,"radius");Z(this,"rotationSpeed");Z(this,"ringRotationSpeed");Z(this,"glowPulseSpeed");Z(this,"glowSize");Z(this,"planetType");Z(this,"ringAngle");Z(this,"timeOffset");Z(this,"hasRings");this.y=s,this.radius=o,this.timeOffset=Math.random()*Math.PI*2,this.planetType=Sy[Math.floor(Math.random()*Sy.length)],this.hasRings=Math.random()<.4?!0:this.planetType.hasRings,this.graphics=new Qe,this.glowGraphics=new Qe,this.glowSize=this.radius*.3,this.drawPlanet(),this.graphics.x=n,this.graphics.y=s,this.glowGraphics.x=n,this.glowGraphics.y=s,this.rotationSpeed=(Math.random()*.02-.01)*u,this.ringRotationSpeed=(Math.random()*.005-.0025)*u,this.glowPulseSpeed=.03+Math.random()*.02,this.ringAngle=Math.random()*Math.PI*2}drawPlanet(){const n=this.graphics;n.clear();const s=this.planetType.color;this.drawGlow(s),this.hasRings&&this.drawRings(s),n.fill({color:s}),n.circle(0,0,this.radius),new At().translate(-this.radius*.5,-this.radius*.5);const u=this.adjustColor(s,1.2),c=new ui({type:"linear",start:{x:0,y:0},end:{x:this.radius*2,y:this.radius*2},colorStops:[{offset:0,color:u},{offset:1,color:s}],textureSpace:"local"});n.fill({fill:c,alpha:.6}),n.circle(0,0,this.radius),n.setStrokeStyle({width:this.radius*.05,color:this.adjustColor(s,.7)}),n.stroke(),n.circle(0,0,this.radius),this.drawSurfaceDetails(s)}adjustColor(n,s){const o=(n>>16&255)*s,u=(n>>8&255)*s,c=(n&255)*s,f=Math.min(255,Math.max(0,Math.floor(o))),p=Math.min(255,Math.max(0,Math.floor(u))),g=Math.min(255,Math.max(0,Math.floor(c)));return f<<16|p<<8|g}drawGlow(n){const s=this.glowGraphics;s.clear();const o=this.radius+this.glowSize,u=this.adjustColor(n,1.2),c=new ui({type:"radial",center:{x:0,y:0},innerRadius:0,outerRadius:o,colorStops:[{offset:0,color:u},{offset:.5,color:n},{offset:1,color:n}],textureSpace:"local"});s.fill({fill:c,alpha:.15}),s.circle(0,0,o)}drawRings(n){const s=this.graphics,o=Math.sin(this.ringAngle)*.6,u=this.radius*1.8,c=this.radius*1.1,f=new At;f.translate(0,0),f.scale(1,o),s.fill({color:this.adjustColor(n,1.1),alpha:.6}),s.circle(0,0,u),s.circle(0,0,c);const p=Math.floor(Math.random()*3)+2;for(let g=0;g<p;g++){const m=c+(u-c)*(g+.5)/p,y=.9+Math.random()*.3;s.setStrokeStyle({width:(u-c)*.1,color:this.adjustColor(n,y),alpha:.7}),s.ellipse(0,0,m,m*o)}s.setStrokeStyle({width:0})}drawSurfaceDetails(n){const s=this.graphics,o=this.adjustColor(n,.8),u=this.adjustColor(n,1.2),c=Math.floor(Math.random()*5)+3;for(let f=0;f<c;f++){const p=Math.random()*Math.PI*2,g=Math.random()*this.radius*.7,m=Math.cos(p)*g,y=Math.sin(p)*g,_=this.radius*(Math.random()*.15+.05);s.fill({color:o}),s.circle(m,y,_);const v=p+Math.PI/4,T=m+Math.cos(v)*(_*.5),E=y+Math.sin(v)*(_*.5),w=_*.4;s.fill({color:u,alpha:.5}),s.circle(T,E,w)}if(this.radius>30){const f=Math.floor(Math.random()*3)+2;for(let p=0;p<f;p++){const g=new Qe,m=(Math.random()*2-1)*this.radius*.5,y=(Math.random()*2-1)*this.radius*.6,_=this.radius*(.4+Math.random()*.3),v=this.radius*(.1+Math.random()*.1),T=Math.random()*Math.PI*2,E=.9+Math.random()*.2;g.fill({color:this.adjustColor(n,E),alpha:.5}),g.ellipse(m,y,_,v),g.rotation=T,s.addChild(g)}}}update(){this.x-=this.speed,this.graphics.x=this.x,this.glowGraphics.x=this.x;const n=performance.now()*.001;this.graphics.rotation+=this.rotationSpeed,this.hasRings&&(this.ringAngle+=this.ringRotationSpeed);const s=.2*Math.sin(n*this.glowPulseSpeed+this.timeOffset)+1;this.glowGraphics.scale.set(s),this.glowGraphics.alpha=.6+.1*Math.sin(n*this.glowPulseSpeed*1.5+this.timeOffset),this.hasRings&&Math.abs(this.ringRotationSpeed)>.001&&this.drawPlanet()}isOffScreen(){return this.x+this.radius*2<0}checkCollision(n){if(n.dead)return!1;const s=n.getHitbox();return DT(this.x,this.y,this.radius*.9,s)}}class BT extends Q0{constructor(n,s,o,u){super(n,u);Z(this,"graphics");Z(this,"glowGraphics");Z(this,"radius");Z(this,"rotationSpeed");Z(this,"glowPulseSpeed");Z(this,"glowSize");Z(this,"timeOffset");Z(this,"collected");this.y=s,this.radius=o,this.timeOffset=Math.random()*Math.PI*2,this.collected=!1,this.graphics=new Qe,this.glowGraphics=new Qe,this.glowSize=this.radius*.7,this.drawOrb(),this.graphics.x=n,this.graphics.y=s,this.glowGraphics.x=n,this.glowGraphics.y=s,this.rotationSpeed=Math.random()*.05-.025,this.glowPulseSpeed=.05+Math.random()*.03}drawOrb(){const n=this.graphics;n.clear(),this.drawGlow(),n.beginFill(43775),n.drawCircle(0,0,this.radius),n.fill();const o=new ui({type:"linear",start:{x:0,y:0},end:{x:this.radius*2,y:this.radius*2},colorStops:[{offset:0,color:56831},{offset:1,color:26282}],textureSpace:"local"});n.fill({fill:o,alpha:.6}),n.drawCircle(0,0,this.radius),n.beginFill(16777215,.5),n.drawCircle(-this.radius*.3,-this.radius*.3,this.radius*.2),n.fill()}drawGlow(){const n=this.glowGraphics;n.clear();const s=this.radius+this.glowSize,o=new ui({type:"radial",center:{x:0,y:0},innerRadius:0,outerRadius:s,colorStops:[{offset:0,color:6741503},{offset:.5,color:43775},{offset:1,color:26282}],textureSpace:"local"});n.fill({fill:o,alpha:.4}),n.drawCircle(0,0,s)}update(){if(this.collected)return;this.x-=this.speed,this.graphics.x=this.x,this.glowGraphics.x=this.x;const n=performance.now()*.001;this.graphics.rotation+=this.rotationSpeed;const s=.3*Math.sin(n*this.glowPulseSpeed+this.timeOffset)+1.2;this.glowGraphics.scale.set(s),this.glowGraphics.alpha=.3+.2*Math.sin(n*this.glowPulseSpeed*1.5+this.timeOffset)}collect(){if(this.collected)return 0;this.collected=!0,console.log("Orb collected at",this.x,this.y),Gt.emit(pt.ORB_COLLECTED,{x:this.x,y:this.y});const n=.5,s=2,o=this.graphics.scale.x,u=Is.shared,c=u.lastTime,f=p=>{const g=(u.lastTime-c)/1e3,m=Math.min(g/n,1),y=o+(s-o)*m;this.graphics.scale.set(y),this.glowGraphics.scale.set(y*1.2),this.graphics.alpha=1-m,this.glowGraphics.alpha=(1-m)*.5,m>=1&&(u.remove(f),this.graphics.visible=!1,this.glowGraphics.visible=!1)};return u.add(f),50}isOffScreen(){return this.x+this.radius*2<0}checkCollision(n){if(n.dead||this.collected)return!1;const s=n.getHitbox(),o=new Ce;return o.minX=this.x-this.radius,o.maxX=this.x+this.radius,o.minY=this.y-this.radius,o.maxY=this.y+this.radius,zT(s,o)}}class UT{constructor(t,n,s,o,u=0){Z(this,"graphics");Z(this,"blinkSpeed");Z(this,"blinkDirection");Z(this,"alpha");Z(this,"speed");Z(this,"size");Z(this,"layer");this.size=s,this.layer=u;const c=[.05,.15,.4];this.speed=c[u]||.05,this.graphics=new Qe;let f;u===0?f=6710954:u===1?f=11184810:f=16777215,this.graphics.circle(0,0,s),this.graphics.fill({color:f,alpha:o}),this.graphics.x=t,this.graphics.y=n,this.blinkSpeed=.005*Math.random(),this.blinkDirection=Math.random()>.5?1:-1,this.alpha=o}update(){this.alpha+=this.blinkSpeed*this.blinkDirection,this.alpha>1?(this.alpha=1,this.blinkDirection=-1):this.alpha<.2&&(this.alpha=.2,this.blinkDirection=1),this.graphics.alpha=this.alpha}}const Vn=class Vn{constructor(){Z(this,"app",null);Z(this,"astronaut",null);Z(this,"obstacles",[]);Z(this,"orbs",[]);Z(this,"stars",[]);Z(this,"initialized",!1)}static getInstance(){return Vn.instance||(Vn.instance=new Vn),Vn.instance}initialize(t){this.initialized||(t&&(this.app=t),this.initialized=!0,console.log("EntityManager initialized"))}clearAll(){this.app&&(console.log("EntityManager: Clearing all entities"),this.astronaut?(console.log("EntityManager: Removing astronaut from stage"),this.app.stage.removeChild(this.astronaut.sprite),this.astronaut=null,console.log("EntityManager: Astronaut reference cleared")):console.log("EntityManager: No astronaut to clear"),this.clearObstacles(),this.clearOrbs(),this.clearStars(),console.log("EntityManager: All entities cleared"))}createAstronaut(){if(!this.app)return console.error("EntityManager: Cannot create astronaut - app is null"),null;this.astronaut&&this.astronaut.sprite&&(console.log("EntityManager: Astronaut already exists, removing old instance"),this.app.stage.removeChild(this.astronaut.sprite),this.astronaut=null),console.log("EntityManager: Creating new astronaut entity");const t=I0.getTexture("astronaut");return t?(this.astronaut=new OT(t,Nl.startX,Nl.startY),!this.astronaut||!this.astronaut.sprite?(console.error("EntityManager: Failed to create astronaut"),null):(this.app.stage.addChild(this.astronaut.sprite),console.log(`EntityManager: Astronaut created at position (${Nl.startX}, ${Nl.startY})`),Gt.emit(pt.ENTITY_CREATED,{type:"astronaut",entity:this.astronaut}),this.astronaut)):(console.error("EntityManager: Failed to get astronaut texture"),null)}createPlanet(t,n,s,o){if(!this.app)throw new Error("App not initialized in EntityManager");console.log(`EntityManager: Creating planet at (${t}, ${n}) with radius ${s}`);const u=new K0(t,n,s,o);return this.app.stage.addChild(u.glowGraphics),this.app.stage.addChild(u.graphics),this.obstacles.push(u),console.log(`EntityManager: Total obstacles now: ${this.obstacles.length}`),Gt.emit(pt.ENTITY_CREATED,{type:"planet",entity:u}),u}createOrb(t,n,s,o){if(!this.app)throw new Error("App not initialized in EntityManager");console.log(`EntityManager: Creating orb at (${t}, ${n}) with radius ${s}`);const u=new BT(t,n,s,o);return this.app.stage.addChild(u.glowGraphics),this.app.stage.addChild(u.graphics),this.orbs.push(u),console.log(`EntityManager: Total orbs now: ${this.orbs.length}`),Gt.emit(pt.ENTITY_CREATED,{type:"orb",entity:u}),u}createStar(t,n,s,o,u){if(!this.app)throw new Error("App not initialized in EntityManager");const c=new UT(t,n,s,o,u);return this.app.stage.addChild(c.graphics),this.stars.push(c),c}createBackground(){if(this.app){this.clearStars();for(let t=0;t<80;t++)this.createStar(Math.random()*Ii,Math.random()*ve,Math.random()*1+.5,Math.random()*.5+.2,0);for(let t=0;t<40;t++)this.createStar(Math.random()*Ii,Math.random()*ve,Math.random()*1.5+1,Math.random()*.6+.3,1);for(let t=0;t<20;t++)this.createStar(Math.random()*Ii,Math.random()*ve,Math.random()*2+1.5,Math.random()*.7+.4,2)}}removeObstacle(t){if(!this.app)return;const n=this.obstacles.indexOf(t);n!==-1&&("graphics"in t?(this.app.stage.removeChild(t.graphics),"glowGraphics"in t&&this.app.stage.removeChild(t.glowGraphics)):"topPipe"in t&&"bottomPipe"in t&&(this.app.stage.removeChild(t.topPipe),this.app.stage.removeChild(t.bottomPipe)),this.obstacles.splice(n,1),Gt.emit(pt.ENTITY_DESTROYED,{type:"obstacle",entity:t}))}removeOrb(t){if(!this.app)return;const n=this.orbs.indexOf(t);n!==-1&&(this.app.stage.removeChild(t.graphics),this.app.stage.removeChild(t.glowGraphics),this.orbs.splice(n,1),Gt.emit(pt.ENTITY_DESTROYED,{type:"orb",entity:t}))}clearObstacles(){this.app&&(this.obstacles.forEach(t=>{var n,s,o,u;"graphics"in t?((n=this.app)==null||n.stage.removeChild(t.graphics),"glowGraphics"in t&&((s=this.app)==null||s.stage.removeChild(t.glowGraphics))):"topPipe"in t&&"bottomPipe"in t&&((o=this.app)==null||o.stage.removeChild(t.topPipe),(u=this.app)==null||u.stage.removeChild(t.bottomPipe))}),this.obstacles=[])}clearOrbs(){this.app&&(this.orbs.forEach(t=>{var n,s;(n=this.app)==null||n.stage.removeChild(t.graphics),(s=this.app)==null||s.stage.removeChild(t.glowGraphics)}),this.orbs=[])}clearStars(){this.app&&(this.stars.forEach(t=>{var n;(n=this.app)==null||n.stage.removeChild(t.graphics)}),this.stars=[])}getAstronaut(){return this.astronaut}getObstacles(){return this.obstacles}getOrbs(){return this.orbs}getStars(){return this.stars}getAllEntities(){Math.random()<.01&&console.log(`EntityManager.getAllEntities: Astronaut: ${this.astronaut?"present":"null"}, Obstacles: ${this.obstacles.length}, Orbs: ${this.orbs.length}, Stars: ${this.stars.length}`);const t=[...this.obstacles,...this.orbs,...this.stars];return this.astronaut&&t.unshift(this.astronaut),t}dispose(){this.clearAll(),this.initialized=!1,console.log("EntityManager disposed")}};Z(Vn,"instance");let Eh=Vn;const Kt=Eh.getInstance(),$n=class $n{constructor(){Z(this,"app",null);Z(this,"debugGraphics",null);Z(this,"initialized",!1)}static getInstance(){return $n.instance||($n.instance=new $n),$n.instance}initialize(t){this.initialized||(this.app=t,this.debugGraphics=new Qe,this.app.stage.addChild(this.debugGraphics),this.initialized=!0,console.log("RenderSystem initialized"))}update(t,n){!this.initialized||!this.app||(Math.random()<.01&&(console.log(`RenderSystem: Updating visuals, entities: ${n.length}`),console.log(`RenderSystem: Stage contains ${this.app.stage.children.length} display objects`)),this.renderDebugInfo())}createBackground(){this.initialized&&Kt.createBackground()}updateBackground(t){if(!this.initialized)return;const n=Kt.getStars();if(n.length>0){Math.random()<.01&&console.log(`RenderSystem: Animating ${n.length} background stars`);const s=Math.min(t,.05);for(const o of n)o.graphics.x-=o.speed*s*60,o.graphics.x+o.size<0&&(o.graphics.x=Ii+o.size,o.graphics.y=Math.random()*ve),o.update()}}renderDebugInfo(){if(!this.debugGraphics||!this.app)return;if(!Tt.getState().debugMode){this.debugGraphics.clear();return}this.debugGraphics.clear();const n=Kt.getAstronaut();if(n){const u=n.sprite.getBounds();this.debugGraphics.lineStyle(1,16776960,.5),this.debugGraphics.drawRect(u.minX,u.minY,u.maxX-u.minX,u.maxY-u.minY);const c=n.getHitbox();this.debugGraphics.lineStyle(2,65280),this.debugGraphics.drawRect(c.minX,c.minY,c.maxX-c.minX,c.maxY-c.minY)}const s=Kt.getObstacles();for(const u of s)if("radius"in u){this.debugGraphics.lineStyle(2,16711680);const c=new Ce;c.minX=u.x-u.radius,c.maxX=u.x+u.radius,c.minY=u.y-u.radius,c.maxY=u.y+u.radius,this.debugGraphics.drawRect(c.minX,c.minY,c.maxX-c.minX,c.maxY-c.minY)}const o=Kt.getOrbs();for(const u of o){this.debugGraphics.lineStyle(2,255);const c=new Ce;c.minX=u.x-u.radius,c.maxX=u.x+u.radius,c.minY=u.y-u.radius,c.maxY=u.y+u.radius,this.debugGraphics.drawRect(c.minX,c.minY,c.maxX-c.minX,c.maxY-c.minY)}}add(t){this.app&&this.app.stage.addChild(t)}remove(t){this.app&&this.app.stage.removeChild(t)}clearStage(){if(!(!this.app||!this.app.stage)){for(;this.app.stage.children.length>0;)this.app.stage.removeChildAt(0);this.debugGraphics&&this.app.stage.addChild(this.debugGraphics)}}dispose(){this.app&&this.debugGraphics&&(this.app.stage.removeChild(this.debugGraphics),this.debugGraphics=null),this.initialized=!1,console.log("RenderSystem disposed")}};Z($n,"instance");let Rh=$n;const LT=Rh.getInstance(),Zn=class Zn{constructor(){Z(this,"initialized",!1);Z(this,"scrollSpeed",0)}static getInstance(){return Zn.instance||(Zn.instance=new Zn),Zn.instance}initialize(){this.initialized||(this.initialized=!0,console.log("PhysicsSystem initialized"))}setScrollSpeed(t){this.scrollSpeed=t}update(t,n){if(!this.initialized)return;const s=Kt.getAstronaut();if(!Tt.getState().isStarted||Tt.getState().isGameOver)return;Math.random()<.01&&(console.log(`PhysicsSystem: Update called with deltaTime: ${t}`),s&&console.log(`PhysicsSystem: Astronaut position: x=${s.sprite.x}, y=${s.sprite.y}, vel=${s.velocity}`),console.log(`PhysicsSystem: Active entities - obstacles: ${Kt.getObstacles().length}, orbs: ${Kt.getOrbs().length}`)),s&&(s.update(t*1e3),s.dead&&(console.log("PhysicsSystem: Astronaut died from physics (hit boundary)"),Gt.emit(pt.COLLISION_DETECTED,null)));const o=Kt.getObstacles();for(let f=o.length-1;f>=0;f--){const p=o[f];p.update(),s&&p.isPassed(s.sprite.x)&&(Gt.emit(pt.OBSTACLE_PASSED,p),Tt.incrementScore(10)),s&&!s.dead&&p.checkCollision(s)&&(s.die(),Gt.emit(pt.COLLISION_DETECTED,{astronaut:s,obstacle:p})),p.isOffScreen()&&Kt.removeObstacle(p)}const u=Kt.getOrbs();for(let f=u.length-1;f>=0;f--){const p=u[f];p.update(),s&&!s.dead&&!p.collected&&p.checkCollision(s)&&(p.collect(),Tt.collectOrb(),Tt.incrementScore(50)),(p.isOffScreen()||p.collected)&&Kt.removeOrb(p)}Kt.getStars().forEach(f=>f.update())}checkCollisions(t){if(!t||t.dead)return;const n=Kt.getObstacles();for(const o of n)if(o.checkCollision(t)){t.die(),Gt.emit(pt.COLLISION_DETECTED,{astronaut:t,obstacle:o});return}const s=Kt.getOrbs();for(const o of s)!o.collected&&o.checkCollision(t)&&(o.collect(),Tt.collectOrb(),Tt.incrementScore(50))}dispose(){this.initialized=!1,console.log("PhysicsSystem disposed")}};Z(Zn,"instance");let Gh=Zn;const kT=Gh.getInstance(),Qn=class Qn{constructor(){Z(this,"initialized",!1);Z(this,"lastObstacleTime",0);Z(this,"lastOrbTime",0);Z(this,"levelConfig",{speed:2.5,spawnInterval:2500});Z(this,"hasSpawnedFirstObstacle",!1)}static getInstance(){return Qn.instance||(Qn.instance=new Qn),Qn.instance}initialize(){this.initialized||(this.resetSpawning(),this.initialized=!0,console.log("SpawningSystem initialized"))}resetSpawning(){this.lastObstacleTime=0,this.lastOrbTime=0,this.hasSpawnedFirstObstacle=!1}setLevelConfig(t){this.levelConfig={...this.levelConfig,...t},console.log("SpawningSystem: Level config updated",this.levelConfig)}update(t,n){if(!this.initialized){console.log("SpawningSystem: Not initialized, skipping update");return}if(!n.isStarted){Math.random()<.01&&console.log("SpawningSystem: Game not started, skipping update");return}if(n.isGameOver){Math.random()<.01&&console.log("SpawningSystem: Game over, skipping update");return}const s=n.time;Math.random()<.05&&(console.log(`SpawningSystem: time=${s.toFixed(2)}, lastObstacleTime=${this.lastObstacleTime.toFixed(2)}, interval=${this.levelConfig.spawnInterval}, speed=${this.levelConfig.speed}`),console.log(`SpawningSystem: hasSpawnedFirstObstacle=${this.hasSpawnedFirstObstacle}, obstacles=${Kt.getObstacles().length}, orbs=${Kt.getOrbs().length}`)),!this.hasSpawnedFirstObstacle&&s>1500?(console.log("SpawningSystem: Spawning first obstacle"),this.spawnObstacle(this.levelConfig.speed),this.lastObstacleTime=s,this.hasSpawnedFirstObstacle=!0):this.hasSpawnedFirstObstacle&&s-this.lastObstacleTime>this.levelConfig.spawnInterval&&(console.log(`SpawningSystem: Spawning obstacle at time=${s.toFixed(2)}`),this.spawnObstacle(this.levelConfig.speed),this.lastObstacleTime=s,Math.random()<lT&&(console.log("SpawningSystem: Planning to spawn orb with delay"),setTimeout(()=>{n.isStarted&&!n.isGameOver?(console.log("SpawningSystem: Spawning orb after delay"),this.spawnOrb(this.levelConfig.speed)):console.log("SpawningSystem: Cancelled orb spawn - game state changed")},this.levelConfig.spawnInterval*.4)))}spawnObstacle(t){const n=this.getCurrentLevelIndex()+1,s=20,o=40+n*5,u=s+Math.random()*(o-s),c=ve*.4,f=ve*.2+Math.random()*(ve*.6),p=Math.random()>.5;let g;p?g=Math.random()*(f-u*2)+u:g=f+c+Math.random()*(ve-(f+c)-u*2)+u;const m=Kt.createPlanet(Ii+u,g,u,t);if(this.ensureNoOverlap(m),Math.random()<.3&&n>1){const y=p?f+c+Math.random()*(ve-(f+c)-u*2)+u:Math.random()*(f-u*2)+u,_=u*(.7+Math.random()*.6),v=Kt.createPlanet(Ii+u+100+Math.random()*150,y,_,t);this.ensureNoOverlap(v)}}spawnOrb(t){const n=12+Math.random()*6,s=ve*.2,o=ve*.8,u=s+Math.random()*(o-s);Kt.createOrb(Ii+n,u,n,t)}ensureNoOverlap(t){let s=0,o=!1;do{o=!1;const u=Kt.getObstacles();for(const c of u)if(c!==t&&c instanceof K0&&!c.isOffScreen()){const f=c;if(this.planetsOverlap(t,f)){o=!0,t.y<f.y?t.y=Math.max(t.radius,f.y-f.radius-t.radius-20):t.y=Math.min(ve-t.radius,f.y+f.radius+t.radius+20),s>2&&(t.x+=t.radius*1.2),t.graphics.y=t.y,t.glowGraphics.y=t.y,t.graphics.x=t.x,t.glowGraphics.x=t.x;break}}s++}while(o&&s<5)}planetsOverlap(t,n){const s=n.x-t.x,o=n.y-t.y,u=Math.sqrt(s*s+o*o),c=t.radius+n.radius+10;return u<c}getCurrentLevelIndex(){return 0}dispose(){this.initialized=!1,console.log("SpawningSystem disposed")}};Z(Qn,"instance");let Oh=Qn;const NT=Oh.getInstance();class HT{constructor(){Z(this,"container");Z(this,"scoreText");Z(this,"levelText");Z(this,"orbsText");Z(this,"timeText");Z(this,"progressBar");Z(this,"progressFill");Z(this,"style");try{console.log("Scoreboard: Constructor started"),this.container=new oi,this.container.x=10,this.container.y=10,console.log("Scoreboard: Container created",this.container),this.style=new es({fontFamily:"Arial",fontSize:16,fill:"#0ff",align:"left",stroke:{color:"#000",width:4}}),console.log("Scoreboard: Style created"),this.scoreText=new lr("Score: 0",this.style),this.scoreText.y=0,this.container.addChild(this.scoreText),console.log("Scoreboard: Score text added"),this.levelText=new lr("Level: 1",this.style),this.levelText.y=20,this.container.addChild(this.levelText),console.log("Scoreboard: Level text added"),this.orbsText=new lr("Orbs: 0/0",this.style),this.orbsText.y=40,this.container.addChild(this.orbsText),console.log("Scoreboard: Orbs text added"),this.timeText=new lr("Time: 0:0",this.style),this.timeText.y=60,this.container.addChild(this.timeText),console.log("Scoreboard: Time text added"),this.progressBar=new Qe,this.progressBar.beginFill(3355443),this.progressBar.drawRect(0,85,200,10),this.progressBar.endFill(),this.container.addChild(this.progressBar),console.log("Scoreboard: Progress bar added"),this.progressFill=new Qe,this.progressFill.beginFill(6728447),this.progressFill.drawRect(0,85,0,10),this.progressFill.endFill(),this.container.addChild(this.progressFill),console.log("Scoreboard: Progress fill added"),console.log("Scoreboard: UI elements created successfully")}catch(t){console.error("Scoreboard: Error during construction",t)}}update(t,n,s,o,u){this.scoreText.text=`Score: ${t}`,this.levelText.text=`Level: ${n}`,this.orbsText.text=`Orbs: ${s}/${o}`;const c=Math.floor(u/6e4),f=Math.floor(u%6e4/1e3),p=Math.floor(u%1e3/100);let g=`Time: ${c}:${f.toString().padStart(2,"0")}.${p}`;this.timeText.text=g;const m=Math.min(100,s/o*100);this.progressFill.clear();let y=6728447;if(m>=75?y=65416:m>=50?y=8978176:m>=25&&(y=16763904),m>=100&&(y=65280),this.progressFill.beginFill(y),this.progressFill.drawRect(0,85,m*2,10),this.progressFill.endFill(),u<=5e3){this.timeText.style.fill="#FF0000";const _=1+.1*Math.sin(Date.now()*.01);this.timeText.scale.set(_)}else u<=1e4?(this.timeText.style.fill="#FF0000",this.timeText.scale.set(1)):u<=3e4?(this.timeText.style.fill="#FFAA00",this.timeText.scale.set(1)):(this.timeText.style.fill="#00FFFF",this.timeText.scale.set(1))}getContainer(){return console.log("Scoreboard: getContainer called",this.container),this.container?this.container:(console.error("Scoreboard: Container is undefined!"),new oi)}}const Kn=class Kn{constructor(){Z(this,"app");Z(this,"scoreboard");Z(this,"initialized",!1);Z(this,"orbEffects");Z(this,"gameState");Z(this,"subscriptions",[]);Z(this,"orbCollectionSubscription",null);this.gameState=Tt.getState(),this.subscribeToStateChanges(),this.orbCollectionSubscription=Gt.on(pt.ORB_COLLECTED).subscribe(t=>{t&&typeof t=="object"&&"x"in t&&"y"in t&&this.createOrbCollectionEffect(t.x,t.y)})}subscribeToStateChanges(){this.subscriptions.push(Tt.select(t=>t.score).subscribe(()=>{this.updateScoreboard()})),this.subscriptions.push(Tt.select(t=>t.orbsCollected).subscribe(()=>{this.updateScoreboard()})),this.subscriptions.push(Tt.select(t=>t.timeRemaining).subscribe(()=>{this.updateScoreboard()}))}static getInstance(){return Kn.instance||(Kn.instance=new Kn),Kn.instance}initialize(t){console.log("UISystem: Initialization started",t);try{const n="stage"in t?t.stage:t;console.log("UISystem: Using stage",n),"stage"in t&&(this.app=t,console.log("UISystem: Stored app reference"));const s=new oi;if(n.addChild(s),console.log("UISystem: Created UI container"),console.log("UISystem: Creating scoreboard"),this.scoreboard=new HT,this.scoreboard){const o=this.scoreboard.getContainer();console.log("UISystem: Adding scoreboard container to stage",o),n.addChild(o)}else console.warn("UISystem: Scoreboard could not be created");console.log("UISystem: Creating orb effects container"),this.orbEffects=new oi,n.addChild(this.orbEffects),this.initialized=!0,console.log("UISystem: Initialized successfully")}catch(n){throw console.error("UISystem: Error during initialization",n),n}}update(){this.initialized}updateScoreboard(){if(!this.initialized||!this.scoreboard)return;const t=Tt.getState();this.scoreboard.update(t.score,t.level,t.orbsCollected,t.orbsRequired,t.timeRemaining)}createOrbCollectionEffect(t,n){if(!this.initialized||!this.orbEffects){console.log("UISystem: Cannot create orb collection effect - not initialized");return}console.log(`UISystem: Creating orb collection effect at ${t},${n}`);const s=new oi;s.x=t,s.y=n,this.orbEffects.addChild(s);const o=12;for(let g=0;g<o;g++){const m=new Qe,y=[65535,52479,16777215,8969727],_=y[Math.floor(Math.random()*y.length)];m.beginFill(_),m.drawCircle(0,0,3+Math.random()*3),m.endFill();const v=g/o*Math.PI*2,T=30+Math.random()*50;m.userData={vx:Math.cos(v)*T*.1,vy:Math.sin(v)*T*.1,alpha:1,rotation:Math.random()*.2-.1},s.addChild(m)}const u=new lr("+50",{fontFamily:"Arial",fontSize:20,fill:16777215,align:"center",stroke:{color:26282,width:3}});u.anchor.set(.5),u.x=0,u.y=-20,s.addChild(u);let c=0;const f=Is.shared,p=()=>{c+=f.deltaMS/1e3;for(let g=0;g<s.children.length-1;g++){const m=s.children[g],y=m.userData;m.x+=y.vx,m.y+=y.vy,y.vx*=.95,y.vy*=.95,y.alpha-=.02,m.alpha=Math.max(0,y.alpha),m.rotation+=y.rotation}u.y-=1.5,u.alpha=Math.max(0,1-c/1.5),c>=1.5&&(f.remove(p),this.orbEffects.removeChild(s),s.destroy({children:!0}))};f.add(p)}dispose(){this.initialized&&(this.orbCollectionSubscription&&this.orbCollectionSubscription.unsubscribe(),this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[],this.initialized=!1,console.log("UISystem: Disposed"))}};Z(Kn,"instance");let zh=Kn;const PT=zh.getInstance(),YT=({gameStarted:a,onGameClick:t,onGameStateChange:n})=>{const s=be.useRef(null),o=be.useRef(null),u=be.useRef(null),c=be.useRef(!0),[f,p]=be.useState(!1),[g,m]=be.useState(null);be.useEffect(()=>{console.log("GameDisplay: Setting up game state subscription");const v=Tt.getState$().subscribe(T=>{console.log(`GameDisplay: Game state changed - isStarted: ${T.isStarted}, isGameOver: ${T.isGameOver}, isLevelComplete: ${T.isLevelComplete}`),c.current&&n(T)});return()=>{console.log("GameDisplay: Cleaning up game state subscription"),v.unsubscribe()}},[n]);const y=be.useCallback(()=>{console.log("GameDisplay: Cleaning up PIXI and game controller"),u.current&&(console.log("GameDisplay: Disposing game controller"),u.current.dispose(),u.current=null),console.log("GameDisplay: Disabling input manager"),Xn.disable(),o.current&&(console.log("GameDisplay: Destroying PIXI application"),o.current.destroy(!0,{children:!0,texture:!0}),o.current=null)},[]);be.useEffect(()=>{console.log("GameDisplay: Component mounted, initializing PIXI"),c.current=!0;const v=async()=>{if(!s.current||o.current){console.log("GameDisplay: Setup skipped - container ref missing or app already exists");return}try{console.log("GameDisplay: Setting up Pixi application..."),y(),console.log("GameDisplay: Creating new PIXI Application");const T=new p0;console.log("GameDisplay: Initializing PIXI Application"),await T.init({background:"#1A1A1A",antialias:!0,resolution:window.devicePixelRatio||1}),console.log("GameDisplay: PIXI Application created successfully"),o.current=T,s.current.firstChild&&(console.log("GameDisplay: Clearing container"),s.current.innerHTML=""),console.log("GameDisplay: Adding canvas to DOM"),s.current.appendChild(T.canvas);const E=()=>{if(!s.current||!T.renderer){console.log("GameDisplay: Resize handler skipped - missing container or renderer");return}console.log("GameDisplay: Handling resize");const w=s.current,z=w.clientWidth,B=w.clientHeight;T.renderer.resize(z,B);const U=Math.min(z/Ii,B/ve);T.stage.scale.set(U),T.stage.position.x=(z-Ii*U)/2,T.stage.position.y=(B-ve*U)/2,T.canvas&&(T.canvas.style.width="100%",T.canvas.style.height="100%"),console.log(`GameDisplay: Resize complete - width: ${z}, height: ${B}, scale: ${U}`)};console.log("GameDisplay: Performing initial resize"),E(),console.log("GameDisplay: Adding window resize listener"),window.addEventListener("resize",E),console.log("GameDisplay: Starting to load assets...");try{if(await I0.loadAssets(),console.log("GameDisplay: Assets loaded successfully"),!c.current){console.log("GameDisplay: Component unmounted during asset loading, aborting setup");return}if(p(!0),m(null),c.current&&o.current){console.log("GameDisplay: Initializing game controller and systems...");const w=o.current;if(!w||!w.ticker){console.error("GameDisplay: PIXI application or ticker not properly initialized"),m("Game engine failed to initialize properly");return}console.log("GameDisplay: Creating GameController instance"),Gt.enableDebug();try{console.log("GameDisplay: PIXI app state before controller creation:",{hasApp:!!w,hasTicker:!!(w&&w.ticker)});const z=new CT(w,Gt,Tt,ET,GT,Kt,LT,kT,NT,PT);console.log("GameDisplay: Calling GameController.initialize()"),z.initialize(),console.log("GameDisplay: Storing GameController reference"),u.current=z,console.log("GameDisplay: Calling GameController.setupGame()"),z.setupGame(),console.log("GameDisplay: Game controller initialized successfully")}catch(z){console.error("GameDisplay: Failed to initialize game controller:",z),c.current&&m(`Failed to initialize game controller: ${z instanceof Error?z.message:String(z)}`)}}else console.log("GameDisplay: Cannot initialize GameController - component unmounted or app destroyed")}catch(w){console.error("GameDisplay: Failed to load assets:",w),c.current&&m(`Failed to load game assets: ${w instanceof Error?w.message:String(w)}`)}return()=>{console.log("GameDisplay: Removing window resize listener"),window.removeEventListener("resize",E)}}catch(T){console.error("GameDisplay: Error initializing Pixi application:",T),c.current&&m(`Error initializing game: ${T instanceof Error?T.message:String(T)}`),y()}};return console.log("GameDisplay: Calling setupApp"),v(),()=>{console.log("GameDisplay: Component unmounting, cleaning up"),c.current=!1,y()}},[y]),be.useEffect(()=>{if(!u.current){console.log("GameDisplay: gameStarted effect skipped - no gameController");return}console.log(`GameDisplay: gameStarted prop changed to ${a}`);const v=u.current,T=Tt.getState();a&&!T.isStarted&&(T.isGameOver&&(console.log("GameDisplay: Resetting game after game over"),v.setupGame()),console.log("GameDisplay: Setting timeout to start game"),setTimeout(()=>{u.current&&c.current&&(console.log("GameDisplay: Starting game via timeout"),u.current.startGame(),console.log("GameDisplay: Game started"))},200))},[a]),be.useEffect(()=>{console.log("GameDisplay: Setting up global spacebar listener for game start");const v=T=>{if(console.log("GameDisplay: Key pressed:",T.code),T.code==="Space"&&u.current){console.log("GameDisplay: Spacebar pressed (global listener)");const E=Tt.getState();if(console.log("GameDisplay: State on spacebar press - isStarted:",E.isStarted,"isGameOver:",E.isGameOver),E.isGameOver){console.log("GameDisplay: Game was over - resetting game via setupGame");try{u.current.setupGame(),setTimeout(()=>{u.current&&c.current&&(console.log("GameDisplay: Starting game after reset"),u.current.startGame())},200)}catch(w){console.error("GameDisplay: Error resetting game via spacebar:",w)}}else if(!E.isStarted){console.log("GameDisplay: Starting game via global spacebar listener");try{u.current.startGame(),console.log("GameDisplay: startGame called successfully via spacebar")}catch(w){console.error("GameDisplay: Error starting game via spacebar:",w)}}}};return window.addEventListener("keydown",v),()=>{console.log("GameDisplay: Removing global spacebar listener"),window.removeEventListener("keydown",v)}},[]);const _=be.useCallback(()=>{if(console.log("GameDisplay: Game area clicked"),u.current){const v=Tt.getState();if(console.log("GameDisplay: Current game state - isStarted:",v.isStarted,"isGameOver:",v.isGameOver),v.isGameOver){console.log("GameDisplay: Game was over - resetting game via setupGame");try{u.current.setupGame(),setTimeout(()=>{u.current&&c.current&&(console.log("GameDisplay: Starting game after reset"),u.current.startGame())},200)}catch(T){console.error("GameDisplay: Error resetting game via click:",T)}}else if(!v.isStarted){console.log("GameDisplay: Starting game via click");try{u.current.startGame(),console.log("GameDisplay: startGame called successfully via click")}catch(T){console.error("GameDisplay: Error starting game via click:",T)}}}else console.warn("GameDisplay: Game controller reference not available on click");t&&t()},[t]);return St.jsxs("div",{className:"game-display-wrapper",children:[St.jsx("div",{ref:s,className:"game-display",style:{cursor:a?"pointer":"default",width:"100%",height:"100%",position:"relative"},onClick:_}),g&&St.jsxs("div",{className:"error-overlay",children:[St.jsx("h3",{children:"Error"}),St.jsx("p",{children:g}),St.jsx("p",{className:"error-tip",children:"Check browser console for more details (F12)"})]}),!f&&!g&&St.jsxs("div",{className:"loading-overlay",children:[St.jsx("h3",{children:"Loading game assets..."}),St.jsx("div",{className:"loading-spinner"})]}),f&&(!a||Tt.getState().isGameOver)&&St.jsxs("div",{className:"start-overlay",children:[St.jsx("h2",{children:Tt.getState().isGameOver?"Game Over!":"Flappy Spaceman"}),Tt.getState().isGameOver&&St.jsxs(St.Fragment,{children:[St.jsxs("p",{children:["Score: ",Tt.getState().score]}),St.jsxs("p",{children:["Orbs: ",Tt.getState().orbsCollected,"/",Tt.getState().orbsRequired]}),St.jsxs("p",{children:["Level: ",Tt.getState().level]}),Tt.getState().timeRemaining<=0&&St.jsx("p",{className:"game-over-reason",children:"Time ran out!"})]}),St.jsx("p",{children:Tt.getState().isGameOver?"Press SPACE to try again":"Press SPACE to start"}),St.jsx("p",{children:"Use SPACE, Up Arrow, or W to fly!"}),St.jsx("p",{className:"mobile-instruction",children:"On mobile, tap anywhere to jump!"}),!Tt.getState().isGameOver&&St.jsx("p",{className:"mission-goal",children:"Collect all orbs before time runs out!"})]}),f&&a&&!Tt.getState().isGameOver&&St.jsx("div",{className:"touch-overlay",onClick:_,children:St.jsx("div",{className:"touch-hint-container",children:St.jsx("div",{className:"touch-hint",children:"Tap to fly!"})})})]})},XT=({isVisible:a,level:t})=>{const[n,s]=be.useState(0);return be.useEffect(()=>{if(a){s(1);const o=setTimeout(()=>{s(0)},2e3);return()=>clearTimeout(o)}else s(0)},[a]),!a&&n===0?null:St.jsx("div",{className:"level-message",style:{opacity:n,transition:"opacity 0.5s ease-in-out"},children:St.jsxs("div",{className:"level-message-content",children:[St.jsxs("h2",{children:["Level ",t," Complete!"]}),St.jsx("p",{children:"Warping to next level..."})]})})};function jT(){const[a,t]=be.useState(!1),[n,s]=be.useState({score:0,level:1,warps:0,time:0,orbsCollected:0,orbsRequired:5,timeLimit:6e4,timeRemaining:6e4,isStarted:!1,isGameOver:!1,isLevelComplete:!1,debugMode:!1}),o=u=>{s(u),u.isGameOver?t(!1):u.isStarted&&!a&&t(!0)};return St.jsxs("div",{className:"App",children:[St.jsx("header",{className:"App-header",children:St.jsx("h1",{children:"Flappy Spaceman"})}),St.jsx("main",{className:"App-main",children:St.jsx("div",{className:"game-container",children:St.jsx(YT,{gameStarted:a,onGameStateChange:o})})}),n.isLevelComplete&&St.jsx(XT,{level:n.level,isVisible:n.isLevelComplete})]})}Ex.createRoot(document.getElementById("root")).render(St.jsx(be.StrictMode,{children:St.jsx(jT,{})}));export{h0 as $,c0 as A,ke as B,oi as C,Jt as D,ot as E,Ce as F,Ql as G,__ as H,ym as I,Zs as J,F_ as K,tS as L,At as M,ae as N,se as O,Te as P,sS as Q,lh as R,TS as S,Is as T,nh as U,vm as V,Gc as W,_m as X,T_ as Y,re as Z,Ly as _,gi as a,Rt as a0,Lt as a1,uS as a2,GS as a3,ZS as a4,KS as a5,i1 as a6,s1 as a7,a1 as a8,es as a9,iA as aa,M0 as ab,Um as ac,Dm as ad,jx as ae,uy as af,oA as ag,Qe as ah,Wt as ai,Fx as aj,mh as ak,ql as al,gh as am,ly as an,R0 as ao,hr as b,Xl as c,Hh as d,xe as e,Bm as f,_S as g,l0 as h,qy as i,wi as j,r0 as k,ay as l,$S as m,QS as n,t1 as o,n1 as p,m0 as q,s_ as r,Ph as s,wt as t,i0 as u,Ix as v,Vt as w,l1 as x,Xi as y,Dy as z};
